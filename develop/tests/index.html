<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:93,&quot;tests&quot;:162,&quot;passes&quot;:160,&quot;pending&quot;:2,&quot;failures&quot;:0,&quot;start&quot;:&quot;2024-03-26T11:32:41.754Z&quot;,&quot;end&quot;:&quot;2024-03-26T11:32:53.709Z&quot;,&quot;duration&quot;:11955,&quot;testsRegistered&quot;:162,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:1.2345679012345678,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;337d5fb4-ef1e-4aae-98bd-b3769a2e668f&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ad7c78b0-5fa3-4d0a-ae09-41aad2067767&quot;,&quot;title&quot;:&quot;NodePyATVDeviceEvent&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f149d0f6-366f-47e2-97e9-2a85807d6c3c&quot;,&quot;title&quot;:&quot;get key()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get key() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event = new NodePyATVDeviceEvent({\n    key: &#x27;genre&#x27;,\n    old: &#x27;Jazz&#x27;,\n    new: &#x27;Rock&#x27;,\n    device: new NodePyATVDevice({\n        host: &#x27;192.168.178.2&#x27;,\n        name: &#x27;My Testinstance&#x27;\n    })\n});\nassert.strictEqual(event.key, &#x27;genre&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8fbd12a-926f-4b0f-8082-7155bc171b1c&quot;,&quot;parentUUID&quot;:&quot;f149d0f6-366f-47e2-97e9-2a85807d6c3c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c8fbd12a-926f-4b0f-8082-7155bc171b1c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;86159e1b-0d5e-46f9-a66d-4c8065c533cd&quot;,&quot;title&quot;:&quot;get oldValue()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get oldValue() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event = new NodePyATVDeviceEvent({\n    key: &#x27;genre&#x27;,\n    old: &#x27;Jazz&#x27;,\n    new: &#x27;Rock&#x27;,\n    device: new NodePyATVDevice({\n        host: &#x27;192.168.178.2&#x27;,\n        name: &#x27;My Testinstance&#x27;\n    })\n});\nassert.strictEqual(event.oldValue, &#x27;Jazz&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3580f88f-f215-477a-b890-8caba4639406&quot;,&quot;parentUUID&quot;:&quot;86159e1b-0d5e-46f9-a66d-4c8065c533cd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3580f88f-f215-477a-b890-8caba4639406&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ac5413a7-bbc8-42a4-b979-f2e91df5fa13&quot;,&quot;title&quot;:&quot;get newValue()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get newValue() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event = new NodePyATVDeviceEvent({\n    key: &#x27;genre&#x27;,\n    old: &#x27;Jazz&#x27;,\n    new: &#x27;Rock&#x27;,\n    device: new NodePyATVDevice({\n        host: &#x27;192.168.178.2&#x27;,\n        name: &#x27;My Testinstance&#x27;\n    })\n});\nassert.strictEqual(event.newValue, &#x27;Rock&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5e190380-9d8e-48ac-9d5d-c0c9da331764&quot;,&quot;parentUUID&quot;:&quot;ac5413a7-bbc8-42a4-b979-f2e91df5fa13&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5e190380-9d8e-48ac-9d5d-c0c9da331764&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7934f2a6-6d98-4286-9566-66a1bdbe76f5&quot;,&quot;title&quot;:&quot;get value()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get value() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event = new NodePyATVDeviceEvent({\n    key: &#x27;genre&#x27;,\n    old: &#x27;Jazz&#x27;,\n    new: &#x27;Rock&#x27;,\n    device: new NodePyATVDevice({\n        host: &#x27;192.168.178.2&#x27;,\n        name: &#x27;My Testinstance&#x27;\n    })\n});\nassert.strictEqual(event.value, &#x27;Rock&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41b605fc-ea7e-4da6-8db9-f23d08f7bee0&quot;,&quot;parentUUID&quot;:&quot;7934f2a6-6d98-4286-9566-66a1bdbe76f5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;41b605fc-ea7e-4da6-8db9-f23d08f7bee0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f72888e2-fc11-4265-954f-b0268261e466&quot;,&quot;title&quot;:&quot;get device()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get device() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    host: &#x27;192.168.178.2&#x27;,\n    name: &#x27;My Testinstance&#x27;\n});\nconst event = new NodePyATVDeviceEvent({\n    key: &#x27;genre&#x27;,\n    old: &#x27;Jazz&#x27;,\n    new: &#x27;Rock&#x27;,\n    device\n});\nassert.deepEqual(event.device, device);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ccd5272b-3443-4740-a77b-c182878edfdf&quot;,&quot;parentUUID&quot;:&quot;f72888e2-fc11-4265-954f-b0268261e466&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ccd5272b-3443-4740-a77b-c182878edfdf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a02bea5b-cd78-48a8-b025-28b58c6fb75f&quot;,&quot;title&quot;:&quot;NodePyATVDeviceEvents&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;655d7345-9f32-420d-a625-85fd8abf6c29&quot;,&quot;title&quot;:&quot;applyStateAndEmitEvents()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should emit update:key event&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit update:key event&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                title: &#x27;My Movie&#x27;\n            });\n        })\n    });\n    yield new Promise(cb =&gt; {\n        device.once(&#x27;update:title&#x27;, event =&gt; {\n            assert.ok(event instanceof NodePyATVDeviceEvent);\n            assert.strictEqual(event.key, &#x27;title&#x27;);\n            assert.strictEqual(event.oldValue, null);\n            assert.strictEqual(event.newValue, &#x27;My Movie&#x27;);\n            assert.strictEqual(event.value, &#x27;My Movie&#x27;);\n            assert.deepStrictEqual(event.device, device);\n            cb(undefined);\n        });\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ac0e882d-7aa7-4466-bc6d-4dfab2f077b1&quot;,&quot;parentUUID&quot;:&quot;655d7345-9f32-420d-a625-85fd8abf6c29&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit update event&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit update event&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                title: &#x27;My Movie&#x27;\n            });\n        })\n    });\n    yield new Promise(cb =&gt; {\n        device.once(&#x27;update&#x27;, event =&gt; {\n            assert.ok(event instanceof NodePyATVDeviceEvent);\n            assert.strictEqual(event.key, &#x27;title&#x27;);\n            assert.strictEqual(event.oldValue, null);\n            assert.strictEqual(event.newValue, &#x27;My Movie&#x27;);\n            assert.strictEqual(event.value, &#x27;My Movie&#x27;);\n            assert.deepStrictEqual(event.device, device);\n            cb(undefined);\n        });\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;95feb958-4abd-464b-bd06-a6fd4dcd472d&quot;,&quot;parentUUID&quot;:&quot;655d7345-9f32-420d-a625-85fd8abf6c29&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit update:key event before update&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit update:key event before update&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                title: &#x27;My Movie&#x27;\n            });\n        })\n    });\n    const sort = [];\n    yield Promise.race([\n        new Promise(cb =&gt; {\n            device.once(&#x27;update&#x27;, () =&gt; {\n                sort.push(&#x27;update&#x27;);\n                cb(undefined);\n            });\n        }),\n        new Promise(cb =&gt; {\n            device.once(&#x27;update:title&#x27;, () =&gt; {\n                sort.push(&#x27;update:title&#x27;);\n                cb(undefined);\n            });\n        })\n    ]);\n    assert.deepStrictEqual(sort, [&#x27;update:title&#x27;, &#x27;update&#x27;]);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;29e0deb4-46f1-4149-b077-33ed0bced836&quot;,&quot;parentUUID&quot;:&quot;655d7345-9f32-420d-a625-85fd8abf6c29&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error events on failures&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit error events on failures&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;failure&#x27;,\n                datetime: &#x27;2021-11-24T21:13:36.424576+03:00&#x27;,\n                exception: &#x27;invalid credentials: 321&#x27;,\n                stacktrace: &#x27;Traceback (most recent call last):\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\\\&quot;, line 302, in appstart\\n    print(args.output(await _handle_command(args, abort_sem, loop)), flush=True)\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\\\&quot;, line 196, in _handle_command\\n    atv = await connect(config, loop, protocol=Protocol.MRP)\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/__init__.py\\\&quot;, line 96, in connect\\n    for setup_data in proto_methods.setup(\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\\\&quot;, line 192, in setup\\n    stream = AirPlayStream(config, service)\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\\\&quot;, line 79, in __init__\\n    self._credentials: HapCredentials = parse_credentials(self.service.credentials)\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/auth/hap_pairing.py\\\&quot;, line 139, in parse_credentials\\n    raise exceptions.InvalidCredentialsError(\\\&quot;invalid credentials: \\\&quot; + detail_string)\\npyatv.exceptions.InvalidCredentialsError: invalid credentials: 321\\n&#x27;\n            });\n        })\n    });\n    yield new Promise(cb =&gt; {\n        device.once(&#x27;error&#x27;, error =&gt; {\n            assert.ok(error instanceof Error);\n            assert.ok(error.toString().includes(&#x27;invalid credentials: 321&#x27;));\n            cb(undefined);\n        });\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cc426bf5-f54c-4f96-96be-50748cb69cdb&quot;,&quot;parentUUID&quot;:&quot;655d7345-9f32-420d-a625-85fd8abf6c29&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not emit an update if new value is same as old one&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should not emit an update if new value is same as old one&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    let spawnCounter = 0;\n    let eventCounter = 0;\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            if (spawnCounter === 0) {\n                cp.onStdIn(() =&gt; cp.end());\n            }\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                title: &#x27;My Movie&#x27;\n            });\n            spawnCounter++;\n            if (spawnCounter &gt;= 2) {\n                cp.end();\n            }\n        })\n    });\n    const listener = () =&gt; {\n        eventCounter++;\n    };\n    device.on(&#x27;update&#x27;, listener);\n    yield new Promise(cb =&gt; setTimeout(cb, 0));\n    yield device.getState();\n    device.off(&#x27;update&#x27;, listener);\n    assert.strictEqual(spawnCounter, 2);\n    assert.strictEqual(eventCounter, 1);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0d54485c-8f60-40bb-8817-aa85933ea03a&quot;,&quot;parentUUID&quot;:&quot;655d7345-9f32-420d-a625-85fd8abf6c29&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error event if event listener throws an exception&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit error event if event listener throws an exception&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                title: &#x27;My Movie&#x27;\n            });\n        })\n    });\n    let callCounter = 0;\n    const error = new Error(&#x27;This is an error. Be nice.&#x27;);\n    device.once(&#x27;error&#x27;, err =&gt; {\n        assert.strictEqual(err, error);\n        callCounter++;\n    });\n    const listener = () =&gt; {\n        throw error;\n    };\n    device.on(&#x27;update&#x27;, listener);\n    yield new Promise(cb =&gt; setTimeout(cb, 0));\n    device.off(&#x27;update&#x27;, listener);\n    assert.strictEqual(callCounter, 1);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;211bc610-44a4-4ec7-ba79-04f8d4995621&quot;,&quot;parentUUID&quot;:&quot;655d7345-9f32-420d-a625-85fd8abf6c29&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should also work with powerState&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should also work with powerState&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                datetime: new Date().toJSON(),\n                power_state: &#x27;off&#x27;\n            });\n        })\n    });\n    yield new Promise(cb =&gt; {\n        device.once(&#x27;update:powerState&#x27;, event =&gt; {\n            assert.ok(event instanceof NodePyATVDeviceEvent);\n            assert.strictEqual(event.key, &#x27;powerState&#x27;);\n            assert.strictEqual(event.oldValue, null);\n            assert.strictEqual(event.newValue, &#x27;off&#x27;);\n            assert.strictEqual(event.newValue, NodePyATVPowerState.off);\n            assert.strictEqual(event.value, &#x27;off&#x27;);\n            assert.strictEqual(event.value, NodePyATVPowerState.off);\n            assert.deepStrictEqual(event.device, device);\n            cb(undefined);\n        });\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d7186a8a-1170-485e-b7c8-6d6f7615c1b2&quot;,&quot;parentUUID&quot;:&quot;655d7345-9f32-420d-a625-85fd8abf6c29&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only one event for powerState changes&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should only one event for powerState changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                datetime: new Date().toJSON(),\n                power_state: &#x27;off&#x27;\n            });\n            cp.end();\n        })\n    });\n    let counter = 0;\n    device.on(&#x27;update&#x27;, event =&gt; {\n        assert.ok(event instanceof NodePyATVDeviceEvent);\n        assert.strictEqual(event.key, &#x27;powerState&#x27;);\n        assert.strictEqual(event.oldValue, null);\n        assert.strictEqual(event.newValue, &#x27;off&#x27;);\n        assert.strictEqual(event.newValue, NodePyATVPowerState.off);\n        assert.strictEqual(event.value, &#x27;off&#x27;);\n        assert.strictEqual(event.value, NodePyATVPowerState.off);\n        assert.deepStrictEqual(event.device, device);\n        counter++;\n    });\n    yield new Promise(cb =&gt; setTimeout(cb, 10));\n    assert.strictEqual(counter, 1);\n    device.removeAllListeners(&#x27;update&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;289b0c27-f2ac-476e-851f-51488ad268c3&quot;,&quot;parentUUID&quot;:&quot;655d7345-9f32-420d-a625-85fd8abf6c29&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only one event for focusState changes&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should only one event for focusState changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                datetime: new Date().toJSON(),\n                focus_state: &#x27;unfocused&#x27;\n            });\n            cp.end();\n        })\n    });\n    let counter = 0;\n    device.on(&#x27;update&#x27;, event =&gt; {\n        assert.ok(event instanceof NodePyATVDeviceEvent);\n        assert.strictEqual(event.key, &#x27;focusState&#x27;);\n        assert.strictEqual(event.oldValue, null);\n        assert.strictEqual(event.newValue, &#x27;unfocused&#x27;);\n        assert.strictEqual(event.newValue, NodePyATVFocusState.unfocused);\n        assert.strictEqual(event.value, &#x27;unfocused&#x27;);\n        assert.strictEqual(event.value, NodePyATVFocusState.unfocused);\n        assert.deepStrictEqual(event.device, device);\n        counter++;\n    });\n    yield new Promise(cb =&gt; setTimeout(cb, 10));\n    assert.strictEqual(counter, 1);\n    device.removeAllListeners(&#x27;update&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c9eaacc5-c781-4995-9422-93a35b9e2e5b&quot;,&quot;parentUUID&quot;:&quot;655d7345-9f32-420d-a625-85fd8abf6c29&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only one event for outputDevices changes&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should only one event for outputDevices changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                datetime: new Date().toJSON(),\n                output_devices: [{\n                        name: &#x27;Living room&#x27;,\n                        identifier: &#x27;AAAAAAAA-BBBB-CCCC-DDDD-EEEEEEEEEEEE&#x27;\n                    }]\n            });\n            cp.end();\n        })\n    });\n    let counter = 0;\n    device.on(&#x27;update&#x27;, event =&gt; {\n        assert.ok(event instanceof NodePyATVDeviceEvent);\n        assert.strictEqual(event.key, &#x27;outputDevices&#x27;);\n        assert.strictEqual(event.oldValue, null);\n        assert.deepStrictEqual(event.newValue, [{\n                name: &#x27;Living room&#x27;,\n                identifier: &#x27;AAAAAAAA-BBBB-CCCC-DDDD-EEEEEEEEEEEE&#x27;\n            }]);\n        assert.deepStrictEqual(event.value, [{\n                name: &#x27;Living room&#x27;,\n                identifier: &#x27;AAAAAAAA-BBBB-CCCC-DDDD-EEEEEEEEEEEE&#x27;\n            }]);\n        assert.deepStrictEqual(event.device, device);\n        counter++;\n    });\n    yield new Promise(cb =&gt; setTimeout(cb, 10));\n    assert.strictEqual(counter, 1);\n    device.removeAllListeners(&#x27;update&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e5bb494c-21df-4515-a2c9-e5ca8313219a&quot;,&quot;parentUUID&quot;:&quot;655d7345-9f32-420d-a625-85fd8abf6c29&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only one event for volume changes&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should only one event for volume changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                datetime: new Date().toJSON(),\n                volume: 20.0\n            });\n            cp.end();\n        })\n    });\n    let counter = 0;\n    device.on(&#x27;update&#x27;, event =&gt; {\n        assert.ok(event instanceof NodePyATVDeviceEvent);\n        assert.strictEqual(event.key, &#x27;volume&#x27;);\n        assert.strictEqual(event.oldValue, null);\n        assert.strictEqual(event.newValue, 20);\n        assert.strictEqual(event.value, 20);\n        assert.deepStrictEqual(event.device, device);\n        counter++;\n    });\n    yield new Promise(cb =&gt; setTimeout(cb, 10));\n    assert.strictEqual(counter, 1);\n    device.removeAllListeners(&#x27;update&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;533a203d-1809-4445-be03-7f10849725b0&quot;,&quot;parentUUID&quot;:&quot;655d7345-9f32-420d-a625-85fd8abf6c29&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not trigger any events for newly added fields&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should not trigger any events for newly added fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                datetime: new Date().toJSON(),\n                foo: &#x27;bar&#x27;\n            });\n            cp.end();\n        })\n    });\n    device.on(&#x27;update&#x27;, event =&gt; {\n        assert.fail(`Got an update event for a new field: ${event}`);\n    });\n    yield new Promise(cb =&gt; setTimeout(cb, 10));\n    device.removeAllListeners(&#x27;update&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a19f0d66-a12c-4482-8e95-7dd2ef316b8d&quot;,&quot;parentUUID&quot;:&quot;655d7345-9f32-420d-a625-85fd8abf6c29&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ac0e882d-7aa7-4466-bc6d-4dfab2f077b1&quot;,&quot;95feb958-4abd-464b-bd06-a6fd4dcd472d&quot;,&quot;29e0deb4-46f1-4149-b077-33ed0bced836&quot;,&quot;cc426bf5-f54c-4f96-96be-50748cb69cdb&quot;,&quot;0d54485c-8f60-40bb-8817-aa85933ea03a&quot;,&quot;211bc610-44a4-4ec7-ba79-04f8d4995621&quot;,&quot;d7186a8a-1170-485e-b7c8-6d6f7615c1b2&quot;,&quot;289b0c27-f2ac-476e-851f-51488ad268c3&quot;,&quot;c9eaacc5-c781-4995-9422-93a35b9e2e5b&quot;,&quot;e5bb494c-21df-4515-a2c9-e5ca8313219a&quot;,&quot;533a203d-1809-4445-be03-7f10849725b0&quot;,&quot;a19f0d66-a12c-4482-8e95-7dd2ef316b8d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:63,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7c723d9b-4282-429b-b48d-719353b90172&quot;,&quot;title&quot;:&quot;start|stopListening()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should emit error if spawn fails&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should emit error if spawn fails&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const error = new Error();\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.error(error).end();\n        })\n    });\n    const listener = () =&gt; {\n        // empty listener\n    };\n    device.on(&#x27;update&#x27;, listener);\n    yield new Promise(cb =&gt; {\n        device.once(&#x27;error&#x27;, err =&gt; {\n            assert.strictEqual(err, error);\n            cb(undefined);\n        });\n    });\n    device.off(&#x27;update&#x27;, listener);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b4962fd-c0fd-407d-8f4f-fab6899a3bc4&quot;,&quot;parentUUID&quot;:&quot;7c723d9b-4282-429b-b48d-719353b90172&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error on stderr data&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should emit error on stderr data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.stderr(&#x27;Hello World!&#x27;).end();\n        })\n    });\n    const listener = () =&gt; {\n        // empty listener\n    };\n    device.on(&#x27;update&#x27;, listener);\n    yield new Promise(cb =&gt; {\n        device.once(&#x27;error&#x27;, err =&gt; {\n            assert.ok(err instanceof Error);\n            assert.ok(err.toString().includes(&#x27;Got stderr output from pyatv: Hello World!&#x27;));\n            cb(undefined);\n        });\n    });\n    device.off(&#x27;update&#x27;, listener);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ddd45d70-0a9d-4e71-9820-fbaeec858eff&quot;,&quot;parentUUID&quot;:&quot;7c723d9b-4282-429b-b48d-719353b90172&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error if stdout is not valid json&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should emit error if stdout is not valid json&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.stdout(&#x27;#&#x27;).end();\n        })\n    });\n    const listener = () =&gt; {\n        // empty listener\n    };\n    device.on(&#x27;update&#x27;, listener);\n    yield new Promise(cb =&gt; {\n        device.once(&#x27;error&#x27;, err =&gt; {\n            assert.ok(err instanceof Error);\n            assert.ok(err.toString().includes(&#x27;Unable to parse stdout json: SyntaxError&#x27;));\n            cb(undefined);\n        });\n    });\n    device.off(&#x27;update&#x27;, listener);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2090b384-5ad3-42f6-abbd-9fcc0e341166&quot;,&quot;parentUUID&quot;:&quot;7c723d9b-4282-429b-b48d-719353b90172&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should restart the process if it gets killed&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should restart the process if it gets killed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;pending&quot;,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3e4cbef8-d978-4c9d-90d0-1ce860b0e908&quot;,&quot;parentUUID&quot;:&quot;7c723d9b-4282-429b-b48d-719353b90172&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2b4962fd-c0fd-407d-8f4f-fab6899a3bc4&quot;,&quot;ddd45d70-0a9d-4e71-9820-fbaeec858eff&quot;,&quot;2090b384-5ad3-42f6-abbd-9fcc0e341166&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;3e4cbef8-d978-4c9d-90d0-1ce860b0e908&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4aecb853-9c30-4e49-99be-3953cbd52edb&quot;,&quot;title&quot;:&quot;addListener() / removeAllListeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work without any exceptions&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents addListener() / removeAllListeners() should work without any exceptions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                title: &#x27;My Movie&#x27;\n            });\n        })\n    });\n    const listener = () =&gt; {\n        // empty listener\n    };\n    device.addListener(&#x27;update&#x27;, listener);\n    device.removeAllListeners(&#x27;update&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b6b296f7-f70c-4b07-b41d-cba9774ca100&quot;,&quot;parentUUID&quot;:&quot;4aecb853-9c30-4e49-99be-3953cbd52edb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b6b296f7-f70c-4b07-b41d-cba9774ca100&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d9083074-440d-407b-a904-26b590940a09&quot;,&quot;title&quot;:&quot;emit()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents emit() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n    })\n});\nconst event = new NodePyATVDeviceEvent({\n    key: &#x27;dateTime&#x27;,\n    old: &#x27;foo&#x27;,\n    new: &#x27;bar&#x27;,\n    device\n});\nlet executions = 0;\ndevice.once(&#x27;test&#x27;, (e) =&gt; {\n    executions++;\n    assert.strictEqual(e, event);\n    assert.strictEqual(executions, 1);\n    done();\n});\ndevice.emit(&#x27;test&#x27;, event);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7e8716f5-838f-41c4-873d-84c15a54e7fa&quot;,&quot;parentUUID&quot;:&quot;d9083074-440d-407b-a904-26b590940a09&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7e8716f5-838f-41c4-873d-84c15a54e7fa&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5bb05a77-b401-4886-867e-12c2cb9eb01d&quot;,&quot;title&quot;:&quot;eventNames()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents eventNames() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n    })\n});\nconst listener = () =&gt; {\n    // ignore\n};\ndevice.on(&#x27;test&#x27;, listener);\nassert.deepStrictEqual(device.eventNames(), [&#x27;test&#x27;]);\ndevice.off(&#x27;test&#x27;, listener);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;34a86ee5-7b03-4442-8a77-45595d5b821c&quot;,&quot;parentUUID&quot;:&quot;5bb05a77-b401-4886-867e-12c2cb9eb01d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;34a86ee5-7b03-4442-8a77-45595d5b821c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;dc8b8517-57d0-4abf-a431-274750c01498&quot;,&quot;title&quot;:&quot;getMaxListeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents getMaxListeners() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n    })\n});\nconst result = device.getMaxListeners();\nassert.ok(typeof result, &#x27;number&#x27;);\nassert.ok(result &gt;= 10);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f2a6df05-7217-4edc-b90e-a7bba8f2fa7d&quot;,&quot;parentUUID&quot;:&quot;dc8b8517-57d0-4abf-a431-274750c01498&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f2a6df05-7217-4edc-b90e-a7bba8f2fa7d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;69012a1f-ade9-4825-8d93-7853486db078&quot;,&quot;title&quot;:&quot;listenerCount()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents listenerCount() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n    })\n});\nconst listener = () =&gt; {\n    // ignore\n};\nassert.deepStrictEqual(device.listenerCount(&#x27;test&#x27;), 0);\ndevice.on(&#x27;test&#x27;, listener);\nassert.deepStrictEqual(device.listenerCount(&#x27;test&#x27;), 1);\ndevice.off(&#x27;test&#x27;, listener);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e279521-d581-400e-bdec-7ce686c26007&quot;,&quot;parentUUID&quot;:&quot;69012a1f-ade9-4825-8d93-7853486db078&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8e279521-d581-400e-bdec-7ce686c26007&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5b5af537-ff34-476b-a213-0e346ab3838f&quot;,&quot;title&quot;:&quot;listeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents listeners() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n    })\n});\nconst listener = () =&gt; {\n    // ignore\n};\nassert.deepStrictEqual(device.listeners(&#x27;test&#x27;).length, 0);\ndevice.on(&#x27;test&#x27;, listener);\nassert.deepStrictEqual(device.listeners(&#x27;test&#x27;).length, 1);\nassert.deepStrictEqual(device.listeners(&#x27;test&#x27;)[0], listener);\ndevice.off(&#x27;test&#x27;, listener);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;29c891bb-a0e2-4a7e-b147-8f2e3684079b&quot;,&quot;parentUUID&quot;:&quot;5b5af537-ff34-476b-a213-0e346ab3838f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;29c891bb-a0e2-4a7e-b147-8f2e3684079b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;87a88a71-fb56-412f-8c64-ec47edae5e75&quot;,&quot;title&quot;:&quot;prependListener()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents prependListener() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n        cp.stdout({\n            result: &#x27;success&#x27;,\n            title: &#x27;My Movie&#x27;\n        });\n    })\n});\nconst listener = () =&gt; {\n    device.removeAllListeners(&#x27;update&#x27;);\n    done();\n};\ndevice.prependListener(&#x27;update&#x27;, listener);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;152eda50-ece6-47db-bd62-11f0b871225b&quot;,&quot;parentUUID&quot;:&quot;87a88a71-fb56-412f-8c64-ec47edae5e75&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;152eda50-ece6-47db-bd62-11f0b871225b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;34f61b35-83bc-4e74-a23a-58025fc69fd1&quot;,&quot;title&quot;:&quot;prependOnceListener()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents prependOnceListener() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n        cp.stdout({\n            result: &#x27;success&#x27;,\n            title: &#x27;My Movie&#x27;\n        });\n    })\n});\ndevice.prependOnceListener(&#x27;update&#x27;, () =&gt; done());&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1d77dec7-ec94-40cd-a62d-51b09fcec927&quot;,&quot;parentUUID&quot;:&quot;34f61b35-83bc-4e74-a23a-58025fc69fd1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1d77dec7-ec94-40cd-a62d-51b09fcec927&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9980a44a-90ca-4bd8-85f9-3136c7588256&quot;,&quot;title&quot;:&quot;rawListeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents rawListeners() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n    })\n});\nconst listener = () =&gt; {\n    // ignore\n};\nassert.deepStrictEqual(device.rawListeners(&#x27;test&#x27;).length, 0);\ndevice.on(&#x27;test&#x27;, listener);\nassert.deepStrictEqual(device.rawListeners(&#x27;test&#x27;).length, 1);\nassert.deepStrictEqual(device.rawListeners(&#x27;test&#x27;)[0], listener);\ndevice.off(&#x27;test&#x27;, listener);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9dcfed74-0c86-455a-94fa-07bcfeba2b7d&quot;,&quot;parentUUID&quot;:&quot;9980a44a-90ca-4bd8-85f9-3136c7588256&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9dcfed74-0c86-455a-94fa-07bcfeba2b7d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7e99b956-c31c-4bc7-be45-2ddbcd7214c8&quot;,&quot;title&quot;:&quot;removeListener()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work without any exceptions&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents removeListener() should work without any exceptions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                title: &#x27;My Movie&#x27;\n            });\n        })\n    });\n    const listener = () =&gt; {\n        // empty listener\n    };\n    device.addListener(&#x27;update&#x27;, listener);\n    assert.deepStrictEqual(device.listenerCount(&#x27;update&#x27;), 1);\n    device.removeListener(&#x27;update&#x27;, listener);\n    assert.deepStrictEqual(device.listenerCount(&#x27;update&#x27;), 0);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;81d93c93-06d4-4b48-97c1-0d32264ebb87&quot;,&quot;parentUUID&quot;:&quot;7e99b956-c31c-4bc7-be45-2ddbcd7214c8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;81d93c93-06d4-4b48-97c1-0d32264ebb87&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ad83b177-a54c-4480-8750-5d8a72572eba&quot;,&quot;title&quot;:&quot;NodePyATVDevice&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;a7c4a049-3fb7-4059-b5cc-e8755807ca8e&quot;,&quot;title&quot;:&quot;get name()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the name&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get name() should return the name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;\n});\nassert.strictEqual(device.name, &#x27;My Testdevice&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e435ddd7-0dab-40c9-a813-1737ff10a560&quot;,&quot;parentUUID&quot;:&quot;a7c4a049-3fb7-4059-b5cc-e8755807ca8e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e435ddd7-0dab-40c9-a813-1737ff10a560&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ec462615-96ec-47d7-abe6-40ff533d1ecd&quot;,&quot;title&quot;:&quot;get host()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the host&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get host() should return the host&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;\n});\nassert.strictEqual(device.host, &#x27;192.168.178.2&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;779516f9-8959-478d-8e9a-1f09578c2e71&quot;,&quot;parentUUID&quot;:&quot;ec462615-96ec-47d7-abe6-40ff533d1ecd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;779516f9-8959-478d-8e9a-1f09578c2e71&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;cc0f3d7a-29cd-4945-a30a-4a0253a616f3&quot;,&quot;title&quot;:&quot;get id()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the id&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get id() should return the id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    id: &#x27;*****&#x27;\n});\nassert.strictEqual(device.id, &#x27;*****&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;88ecf3c4-140b-4020-a625-7f56eebd2480&quot;,&quot;parentUUID&quot;:&quot;cc0f3d7a-29cd-4945-a30a-4a0253a616f3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;88ecf3c4-140b-4020-a625-7f56eebd2480&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5ca6ec19-604e-4347-8ae5-ea541ec39fae&quot;,&quot;title&quot;:&quot;get allIDs()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return all the IDs&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get allIDs() should return all the IDs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    id: &#x27;*****&#x27;,\n    allIDs: [\n        &#x27;some_id_1&#x27;,\n        &#x27;some_id_2&#x27;,\n        &#x27;some_id_3&#x27;,\n    ]\n});\nassert.deepStrictEqual(device.allIDs, [\n    &#x27;some_id_1&#x27;,\n    &#x27;some_id_2&#x27;,\n    &#x27;some_id_3&#x27;,\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9e4a3fbe-90b3-42dc-a937-e0494ccbc9d8&quot;,&quot;parentUUID&quot;:&quot;5ca6ec19-604e-4347-8ae5-ea541ec39fae&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9e4a3fbe-90b3-42dc-a937-e0494ccbc9d8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;30c6ecbd-e1c6-4d67-a249-485e5ae63b77&quot;,&quot;title&quot;:&quot;get protocol()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the protocol&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get protocol() should return the protocol&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    protocol: NodePyATVProtocol.airplay\n});\nassert.strictEqual(device.protocol, NodePyATVProtocol.airplay);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c0c7408b-7d28-4f4d-b80d-0a206f2e6bd9&quot;,&quot;parentUUID&quot;:&quot;30c6ecbd-e1c6-4d67-a249-485e5ae63b77&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c0c7408b-7d28-4f4d-b80d-0a206f2e6bd9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4d71da43-1b6e-48b6-a31d-37af92086563&quot;,&quot;title&quot;:&quot;get mac()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the mac&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get mac() should return the mac&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    mac: &#x27;AA:BB:CC:DD:EE:FF&#x27;\n});\nassert.strictEqual(device.mac, &#x27;AA:BB:CC:DD:EE:FF&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9e5ffcae-12c0-435e-8e6f-a5d265020416&quot;,&quot;parentUUID&quot;:&quot;4d71da43-1b6e-48b6-a31d-37af92086563&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9e5ffcae-12c0-435e-8e6f-a5d265020416&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2894202c-ba00-4686-a57f-f7765fe1fabf&quot;,&quot;title&quot;:&quot;get model()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the model if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get model() should return the model if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;,\n    id: &#x27;xxx&#x27;,\n    model: &#x27;Gen4K&#x27;\n});\nassert.strictEqual(device.model, &#x27;Gen4K&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3e9ed10f-4704-4401-bc80-fd6c0b517755&quot;,&quot;parentUUID&quot;:&quot;2894202c-ba00-4686-a57f-f7765fe1fabf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get model() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;\n});\nassert.strictEqual(device.model, undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;42265990-3283-4dd0-84ce-0780ad26569d&quot;,&quot;parentUUID&quot;:&quot;2894202c-ba00-4686-a57f-f7765fe1fabf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3e9ed10f-4704-4401-bc80-fd6c0b517755&quot;,&quot;42265990-3283-4dd0-84ce-0780ad26569d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;56ee4794-ba31-436a-b0df-5267a40a6ffc&quot;,&quot;title&quot;:&quot;get modelName()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the model name if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get modelName() should return the model name if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;,\n    id: &#x27;xxx&#x27;,\n    modelName: &#x27;Apple TV 4K&#x27;\n});\nassert.strictEqual(device.modelName, &#x27;Apple TV 4K&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;79cde5e9-0a98-4bcf-8560-225aefd98827&quot;,&quot;parentUUID&quot;:&quot;56ee4794-ba31-436a-b0df-5267a40a6ffc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get modelName() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;\n});\nassert.strictEqual(device.modelName, undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;13608a03-394d-48ad-98ba-58b69fa1986c&quot;,&quot;parentUUID&quot;:&quot;56ee4794-ba31-436a-b0df-5267a40a6ffc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;79cde5e9-0a98-4bcf-8560-225aefd98827&quot;,&quot;13608a03-394d-48ad-98ba-58b69fa1986c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a639e274-25b0-4fe5-8791-d43565c7b130&quot;,&quot;title&quot;:&quot;get os()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the operating system if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get os() should return the operating system if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;,\n    id: &#x27;xxx&#x27;,\n    os: &#x27;TvOS&#x27;\n});\nassert.strictEqual(device.os, &#x27;TvOS&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d210c2e6-8735-4aca-8cbe-790dc6bcac75&quot;,&quot;parentUUID&quot;:&quot;a639e274-25b0-4fe5-8791-d43565c7b130&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get os() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;\n});\nassert.strictEqual(device.os, undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;222de624-8515-4425-8c3f-de00bd6eb742&quot;,&quot;parentUUID&quot;:&quot;a639e274-25b0-4fe5-8791-d43565c7b130&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d210c2e6-8735-4aca-8cbe-790dc6bcac75&quot;,&quot;222de624-8515-4425-8c3f-de00bd6eb742&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7a1916f6-0634-47b5-b110-d7359e8151ee&quot;,&quot;title&quot;:&quot;get version()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the version if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get version() should return the version if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;,\n    id: &#x27;xxx&#x27;,\n    version: &#x27;15.5.1&#x27;\n});\nassert.strictEqual(device.version, &#x27;15.5.1&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d568a20a-6123-4dff-9bda-82b1f7e432a5&quot;,&quot;parentUUID&quot;:&quot;7a1916f6-0634-47b5-b110-d7359e8151ee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get version() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;\n});\nassert.strictEqual(device.version, undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c6bc42ab-85e9-4476-acfb-8f6e8a665a72&quot;,&quot;parentUUID&quot;:&quot;7a1916f6-0634-47b5-b110-d7359e8151ee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d568a20a-6123-4dff-9bda-82b1f7e432a5&quot;,&quot;c6bc42ab-85e9-4476-acfb-8f6e8a665a72&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9a0daf18-6eb3-4c4c-80aa-ba2dfde77c9a&quot;,&quot;title&quot;:&quot;get services()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the services if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get services() should return the services if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;,\n    id: &#x27;xxx&#x27;,\n    services: [\n        {\n            protocol: NodePyATVProtocol.mrp,\n            port: 49152\n        },\n        {\n            protocol: NodePyATVProtocol.airplay,\n            port: 7000\n        }\n    ]\n});\nassert.deepStrictEqual(device.services, [\n    {\n        protocol: &#x27;mrp&#x27;,\n        port: 49152\n    },\n    {\n        protocol: &#x27;airplay&#x27;,\n        port: 7000\n    }\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a75882df-de36-49ce-90e3-d7176f453d02&quot;,&quot;parentUUID&quot;:&quot;9a0daf18-6eb3-4c4c-80aa-ba2dfde77c9a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get services() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;\n});\nassert.strictEqual(device.services, undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2c0ddfbd-18b0-4db4-8312-bcde2bdc24d2&quot;,&quot;parentUUID&quot;:&quot;9a0daf18-6eb3-4c4c-80aa-ba2dfde77c9a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a75882df-de36-49ce-90e3-d7176f453d02&quot;,&quot;2c0ddfbd-18b0-4db4-8312-bcde2bdc24d2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3c4e8821-853c-4094-8839-84eb0db0f29a&quot;,&quot;title&quot;:&quot;get debug()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return true if set to true&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get debug() should return true if set to true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    debug: true\n});\nassert.strictEqual(device.debug, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;112ca3c7-92ed-4687-895d-98176d3ca180&quot;,&quot;parentUUID&quot;:&quot;3c4e8821-853c-4094-8839-84eb0db0f29a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return fn if set to custom function&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get debug() should return fn if set to custom function&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// eslint-disable-next-line @typescript-eslint/no-empty-function\nconst fn = () =&gt; {\n};\nconst device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    debug: fn\n});\nassert.strictEqual(device.debug, fn);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8f27406c-a3dc-4e5e-880f-fa895c1c4ba5&quot;,&quot;parentUUID&quot;:&quot;3c4e8821-853c-4094-8839-84eb0db0f29a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return false if unset&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get debug() should return false if unset&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;\n});\nassert.strictEqual(device.debug, undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e38b8768-fce1-445b-bd9d-0f84436857f2&quot;,&quot;parentUUID&quot;:&quot;3c4e8821-853c-4094-8839-84eb0db0f29a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;112ca3c7-92ed-4687-895d-98176d3ca180&quot;,&quot;8f27406c-a3dc-4e5e-880f-fa895c1c4ba5&quot;,&quot;e38b8768-fce1-445b-bd9d-0f84436857f2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;55c42d40-6872-475e-8c80-912ab290c30c&quot;,&quot;title&quot;:&quot;set debug()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work for debug = true&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;\n});\nassert.strictEqual(device.debug, undefined);\ndevice.debug = true;\nassert.strictEqual(device.debug, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bb6f4f24-f311-4dd2-b493-423d53b3078e&quot;,&quot;parentUUID&quot;:&quot;55c42d40-6872-475e-8c80-912ab290c30c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for debug = undefined&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = undefined&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    debug: true\n});\nassert.strictEqual(device.debug, true);\ndevice.debug = undefined;\nassert.strictEqual(device.debug, undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d165bbeb-30f5-410b-9009-e224c4b008ed&quot;,&quot;parentUUID&quot;:&quot;55c42d40-6872-475e-8c80-912ab290c30c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for debug = undefined&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = undefined&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    debug: true\n});\nassert.strictEqual(device.debug, true);\ndevice.debug = undefined;\nassert.strictEqual(device.debug, undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0b294267-c633-4fd4-bc28-c00f48d318be&quot;,&quot;parentUUID&quot;:&quot;55c42d40-6872-475e-8c80-912ab290c30c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for debug = fn&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = fn&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;\n});\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nconst fn = () =&gt; {\n};\nassert.strictEqual(device.debug, undefined);\ndevice.debug = fn;\nassert.strictEqual(device.debug, fn);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;181875bf-bf1b-4a91-bea2-c0066da43b82&quot;,&quot;parentUUID&quot;:&quot;55c42d40-6872-475e-8c80-912ab290c30c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bb6f4f24-f311-4dd2-b493-423d53b3078e&quot;,&quot;d165bbeb-30f5-410b-9009-e224c4b008ed&quot;,&quot;0b294267-c633-4fd4-bc28-c00f48d318be&quot;,&quot;181875bf-bf1b-4a91-bea2-c0066da43b82&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4b0be6f5-0890-4fd9-977b-ab48f81bc18d&quot;,&quot;title&quot;:&quot;toJSON()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a object representation&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice toJSON() should return a object representation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    id: &#x27;*****&#x27;,\n    protocol: NodePyATVProtocol.airplay\n});\nassert.deepEqual(device.toJSON(), {\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    id: &#x27;*****&#x27;,\n    protocol: NodePyATVProtocol.airplay\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9602edfc-6357-41c0-9022-8eac1d561582&quot;,&quot;parentUUID&quot;:&quot;4b0be6f5-0890-4fd9-977b-ab48f81bc18d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should be possible to create a new device from this&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice toJSON() should be possible to create a new device from this&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const config = {\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    id: &#x27;*****&#x27;,\n    protocol: NodePyATVProtocol.airplay\n};\nconst deviceA = new NodePyATVDevice(config);\nconst deviceB = new NodePyATVDevice(deviceA.toJSON());\nassert.deepEqual(deviceB.toJSON(), config);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;735b09f3-dd72-4625-a1f1-ede5bff73451&quot;,&quot;parentUUID&quot;:&quot;4b0be6f5-0890-4fd9-977b-ab48f81bc18d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9602edfc-6357-41c0-9022-8eac1d561582&quot;,&quot;735b09f3-dd72-4625-a1f1-ede5bff73451&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;95e05add-d01c-4968-bbbd-dc08d2023d05&quot;,&quot;title&quot;:&quot;toString()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice toString() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;\n});\nassert.strictEqual(device.toString(), &#x27;NodePyATVDevice(My Testdevice, 192.168.178.2)&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b47c790a-5a7a-4eaf-a1a8-978513de9b68&quot;,&quot;parentUUID&quot;:&quot;95e05add-d01c-4968-bbbd-dc08d2023d05&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b47c790a-5a7a-4eaf-a1a8-978513de9b68&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;92110c02-bee7-432f-92eb-926990f6dba5&quot;,&quot;title&quot;:&quot;getState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work [I]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should work [I]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;pending&quot;,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;665ea0af-429d-4cad-8b5d-551755b54407&quot;,&quot;parentUUID&quot;:&quot;92110c02-bee7-432f-92eb-926990f6dba5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                datetime: &#x27;2020-11-07T22:38:43.608030+01:00&#x27;,\n                hash: &#x27;100e0ab6-6ff5-4199-9c04-a7107ff78712&#x27;,\n                media_type: &#x27;video&#x27;,\n                device_state: &#x27;playing&#x27;,\n                title: &#x27;Solo: A Star Wars Story&#x27;,\n                artist: null,\n                album: null,\n                genre: null,\n                total_time: 8097,\n                position: 27,\n                shuffle: &#x27;off&#x27;,\n                repeat: &#x27;off&#x27;,\n                app: &#x27;Disney+&#x27;,\n                app_id: &#x27;com.disney.disneyplus&#x27;\n            });\n        })\n    });\n    const result = yield device.getState();\n    assert.deepStrictEqual(result, {\n        dateTime: new Date(&#x27;2020-11-07T22:38:43.608030+01:00&#x27;),\n        hash: &#x27;100e0ab6-6ff5-4199-9c04-a7107ff78712&#x27;,\n        mediaType: NodePyATVMediaType.video,\n        deviceState: NodePyATVDeviceState.playing,\n        focusState: null,\n        title: &#x27;Solo: A Star Wars Story&#x27;,\n        artist: null,\n        album: null,\n        genre: null,\n        totalTime: 8097,\n        volume: null,\n        position: 27,\n        shuffle: NodePyATVShuffleState.off,\n        repeat: NodePyATVRepeatState.off,\n        app: &#x27;Disney+&#x27;,\n        appId: &#x27;com.disney.disneyplus&#x27;,\n        powerState: null,\n        outputDevices: null\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ddf062d-ae82-4ab7-bf4f-f565081f61b6&quot;,&quot;parentUUID&quot;:&quot;92110c02-bee7-432f-92eb-926990f6dba5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should reject with error if pyatv fails&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should reject with error if pyatv fails&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;failure&#x27;,\n                datetime: &#x27;2021-11-24T21:13:36.424576+03:00&#x27;,\n                exception: &#x27;invalid credentials: 321&#x27;,\n                stacktrace: &#x27;Traceback (most recent call last):\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\\\&quot;, line 302, in appstart\\n    print(args.output(await _handle_command(args, abort_sem, loop)), flush=True)\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\\\&quot;, line 196, in _handle_command\\n    atv = await connect(config, loop, protocol=Protocol.MRP)\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/__init__.py\\\&quot;, line 96, in connect\\n    for setup_data in proto_methods.setup(\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\\\&quot;, line 192, in setup\\n    stream = AirPlayStream(config, service)\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\\\&quot;, line 79, in __init__\\n    self._credentials: HapCredentials = parse_credentials(self.service.credentials)\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/auth/hap_pairing.py\\\&quot;, line 139, in parse_credentials\\n    raise exceptions.InvalidCredentialsError(\\\&quot;invalid credentials: \\\&quot; + detail_string)\\npyatv.exceptions.InvalidCredentialsError: invalid credentials: 321\\n&#x27;\n            });\n        })\n    });\n    assert.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield device.getState();\n    }), /Got pyatv Error: invalid credentials: 321/);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;66584f66-afb7-439d-a3c0-c7a2de90919f&quot;,&quot;parentUUID&quot;:&quot;92110c02-bee7-432f-92eb-926990f6dba5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should cache requests for a bit&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should cache requests for a bit&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    let executions = 0;\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            executions++;\n            cp.end({\n                result: &#x27;success&#x27;,\n                datetime: new Date().toJSON(),\n                hash: &#x27;100e0ab6-6ff5-4199-9c04-a7107ff78712&#x27;,\n                media_type: &#x27;video&#x27;,\n                device_state: &#x27;playing&#x27;,\n                title: &#x27;Solo: A Star Wars Story&#x27;,\n                artist: null,\n                album: null,\n                genre: null,\n                total_time: 8097,\n                position: 27,\n                shuffle: &#x27;off&#x27;,\n                repeat: &#x27;off&#x27;,\n                app: &#x27;Disney+&#x27;,\n                app_id: &#x27;com.disney.disneyplus&#x27;\n            });\n        })\n    });\n    const firstResult = yield device.getState();\n    const secondResult = yield device.getState();\n    assert.strictEqual(firstResult.dateTime, secondResult.dateTime);\n    assert.strictEqual(executions, 1);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;10eda64e-b88a-488c-85b4-b6eeee08930e&quot;,&quot;parentUUID&quot;:&quot;92110c02-bee7-432f-92eb-926990f6dba5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update the position if cache was used&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should update the position if cache was used&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                datetime: new Date(new Date().getTime() - 1000).toJSON(),\n                hash: &#x27;100e0ab6-6ff5-4199-9c04-a7107ff78712&#x27;,\n                media_type: &#x27;video&#x27;,\n                device_state: &#x27;playing&#x27;,\n                title: &#x27;Solo: A Star Wars Story&#x27;,\n                artist: null,\n                album: null,\n                genre: null,\n                total_time: 8097,\n                position: 27,\n                shuffle: &#x27;off&#x27;,\n                repeat: &#x27;off&#x27;,\n                app: &#x27;Disney+&#x27;,\n                app_id: &#x27;com.disney.disneyplus&#x27;\n            });\n        })\n    });\n    const firstResult = yield device.getState();\n    assert.strictEqual(firstResult.position, 27);\n    const secondResult = yield device.getState();\n    assert.ok(secondResult.position);\n    assert.ok(secondResult.position &gt; 27, `Position should be &gt; 27, was ${secondResult.position}`);\n    assert.ok(secondResult.position &lt; 30, `Position should be &gt; 27, was ${secondResult.position}`);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;10faf296-ec76-41ff-ac5c-a947560bf4f1&quot;,&quot;parentUUID&quot;:&quot;92110c02-bee7-432f-92eb-926990f6dba5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0ddf062d-ae82-4ab7-bf4f-f565081f61b6&quot;,&quot;66584f66-afb7-439d-a3c0-c7a2de90919f&quot;,&quot;10eda64e-b88a-488c-85b4-b6eeee08930e&quot;,&quot;10faf296-ec76-41ff-ac5c-a947560bf4f1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;665ea0af-429d-4cad-8b5d-551755b54407&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;aed6a186-9171-48b9-a306-f98688740323&quot;,&quot;title&quot;:&quot;clearState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice clearState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    let executions = 0;\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            executions++;\n            cp.end({\n                result: &#x27;success&#x27;,\n                datetime: &#x27;2020-11-07T22:38:43.608030+01:00&#x27;,\n                title: &#x27;Solo: A Star Wars Story&#x27;\n            });\n        })\n    });\n    assert.deepStrictEqual(yield device.getTitle(), &#x27;Solo: A Star Wars Story&#x27;);\n    device.clearState();\n    assert.deepStrictEqual(yield device.getTitle(), &#x27;Solo: A Star Wars Story&#x27;);\n    assert.strictEqual(executions, 2);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b0737777-360f-4237-ab04-3b13b0ea0d9f&quot;,&quot;parentUUID&quot;:&quot;aed6a186-9171-48b9-a306-f98688740323&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b0737777-360f-4237-ab04-3b13b0ea0d9f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c76019e8-8921-4195-becd-0fa2c2495798&quot;,&quot;title&quot;:&quot;getDateTime()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getDateTime() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                datetime: new Date().toJSON()\n            });\n        })\n    });\n    const result = yield device.getDateTime();\n    assert.ok(result instanceof Date);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7728fa85-fcd2-42dc-b962-36fe2ba9ddc6&quot;,&quot;parentUUID&quot;:&quot;c76019e8-8921-4195-becd-0fa2c2495798&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7728fa85-fcd2-42dc-b962-36fe2ba9ddc6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d5982335-1137-4edc-a157-10b6088784d8&quot;,&quot;title&quot;:&quot;getHash()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getHash() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                hash: &#x27;12345&#x27;\n            });\n        })\n    });\n    const result = yield device.getHash();\n    assert.strictEqual(result, &#x27;12345&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;345fdf22-0d43-4606-a7e6-e25c0f48349c&quot;,&quot;parentUUID&quot;:&quot;d5982335-1137-4edc-a157-10b6088784d8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;345fdf22-0d43-4606-a7e6-e25c0f48349c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a5b027a5-ad05-4335-bee2-865f1b3535e1&quot;,&quot;title&quot;:&quot;getMediaType()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getMediaType() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                media_type: &#x27;video&#x27;\n            });\n        })\n    });\n    const result = yield device.getMediaType();\n    assert.deepStrictEqual(result, NodePyATVMediaType.video);\n    assert.deepStrictEqual(result, &#x27;video&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;92c98ae1-2cdc-43f4-a0b3-bff8ae0ce5ae&quot;,&quot;parentUUID&quot;:&quot;a5b027a5-ad05-4335-bee2-865f1b3535e1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;92c98ae1-2cdc-43f4-a0b3-bff8ae0ce5ae&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3f8966a7-854f-4ae4-a51e-ab7abf3898c1&quot;,&quot;title&quot;:&quot;getDeviceState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getDeviceState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                device_state: &#x27;seeking&#x27;\n            });\n        })\n    });\n    const result = yield device.getDeviceState();\n    assert.deepStrictEqual(result, NodePyATVDeviceState.seeking);\n    assert.deepStrictEqual(result, &#x27;seeking&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aa94ca43-3689-4dd1-aee4-913f7dc95275&quot;,&quot;parentUUID&quot;:&quot;3f8966a7-854f-4ae4-a51e-ab7abf3898c1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;aa94ca43-3689-4dd1-aee4-913f7dc95275&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;899793d7-ff7a-40d0-9057-4c1f80377381&quot;,&quot;title&quot;:&quot;getTitle()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getTitle() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                title: &#x27;My Movie&#x27;\n            });\n        })\n    });\n    const result = yield device.getTitle();\n    assert.strictEqual(result, &#x27;My Movie&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6c601054-32ea-42d6-bf8a-d502d56113bf&quot;,&quot;parentUUID&quot;:&quot;899793d7-ff7a-40d0-9057-4c1f80377381&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6c601054-32ea-42d6-bf8a-d502d56113bf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6057ab18-f325-4a0c-8d87-cdfce6b5459f&quot;,&quot;title&quot;:&quot;getArtist()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getArtist() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                artist: &#x27;My Artist&#x27;\n            });\n        })\n    });\n    const result = yield device.getArtist();\n    assert.strictEqual(result, &#x27;My Artist&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c43c88db-25de-484d-ad08-0a84dfd9c8ff&quot;,&quot;parentUUID&quot;:&quot;6057ab18-f325-4a0c-8d87-cdfce6b5459f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c43c88db-25de-484d-ad08-0a84dfd9c8ff&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;947dc6bf-b6b5-49ad-8a03-17ad06108483&quot;,&quot;title&quot;:&quot;getAlbum()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getAlbum() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                album: &#x27;My ALbum&#x27;\n            });\n        })\n    });\n    const result = yield device.getAlbum();\n    assert.strictEqual(result, &#x27;My ALbum&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;886f0e97-75b9-49f3-81b1-d6e84fa226bf&quot;,&quot;parentUUID&quot;:&quot;947dc6bf-b6b5-49ad-8a03-17ad06108483&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;886f0e97-75b9-49f3-81b1-d6e84fa226bf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7faa1ffa-c18a-4e17-9c67-f3eff4234daa&quot;,&quot;title&quot;:&quot;getGenre()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getGenre() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                genre: &#x27;My Genre&#x27;\n            });\n        })\n    });\n    const result = yield device.getGenre();\n    assert.strictEqual(result, &#x27;My Genre&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8476c5cb-e458-43e7-9662-c45af8a6c0dd&quot;,&quot;parentUUID&quot;:&quot;7faa1ffa-c18a-4e17-9c67-f3eff4234daa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8476c5cb-e458-43e7-9662-c45af8a6c0dd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bdc25a3b-5648-431c-ab49-8700e4c9d9ab&quot;,&quot;title&quot;:&quot;getTotalTime()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getTotalTime() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                total_time: 45\n            });\n        })\n    });\n    const result = yield device.getTotalTime();\n    assert.strictEqual(result, 45);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0e8bd22b-f448-42dc-abd2-714314c8a5b6&quot;,&quot;parentUUID&quot;:&quot;bdc25a3b-5648-431c-ab49-8700e4c9d9ab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0e8bd22b-f448-42dc-abd2-714314c8a5b6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;04f2577c-de7b-47fc-9f02-4f49a342e6c7&quot;,&quot;title&quot;:&quot;getPosition()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getPosition() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                position: 30\n            });\n        })\n    });\n    const result = yield device.getPosition();\n    assert.strictEqual(result, 30);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;312ae1b6-fb82-4022-b5ba-55c2d6e25dda&quot;,&quot;parentUUID&quot;:&quot;04f2577c-de7b-47fc-9f02-4f49a342e6c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;312ae1b6-fb82-4022-b5ba-55c2d6e25dda&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;02e5f389-1980-49f9-a326-3ac7e30853ce&quot;,&quot;title&quot;:&quot;getShuffle()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getShuffle() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                shuffle: &#x27;songs&#x27;\n            });\n        })\n    });\n    const result = yield device.getShuffle();\n    assert.deepStrictEqual(result, NodePyATVShuffleState.songs);\n    assert.deepStrictEqual(result, &#x27;songs&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;19510831-a0cc-4765-b97e-96d501f43e58&quot;,&quot;parentUUID&quot;:&quot;02e5f389-1980-49f9-a326-3ac7e30853ce&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;19510831-a0cc-4765-b97e-96d501f43e58&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0d9053c6-b43b-4595-b0ee-9b0b83e144f3&quot;,&quot;title&quot;:&quot;getRepeat()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getRepeat() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                repeat: &#x27;all&#x27;\n            });\n        })\n    });\n    const result = yield device.getRepeat();\n    assert.deepStrictEqual(result, NodePyATVRepeatState.all);\n    assert.deepStrictEqual(result, &#x27;all&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ba34ed11-322e-4362-a058-9532dc8efcfc&quot;,&quot;parentUUID&quot;:&quot;0d9053c6-b43b-4595-b0ee-9b0b83e144f3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ba34ed11-322e-4362-a058-9532dc8efcfc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e9d0e80c-38f6-4454-8ce1-5e611ba3480f&quot;,&quot;title&quot;:&quot;getApp()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getApp() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                app: &#x27;My App&#x27;\n            });\n        })\n    });\n    const result = yield device.getApp();\n    assert.strictEqual(result, &#x27;My App&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9dc6b701-5d5d-4a68-bf78-8b83b39d1b31&quot;,&quot;parentUUID&quot;:&quot;e9d0e80c-38f6-4454-8ce1-5e611ba3480f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9dc6b701-5d5d-4a68-bf78-8b83b39d1b31&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;76f83ff5-1b90-461d-8468-4d887eb4f7c9&quot;,&quot;title&quot;:&quot;getAppId()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getAppId() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                app_id: &#x27;app.example.com&#x27;\n            });\n        })\n    });\n    const result = yield device.getAppId();\n    assert.strictEqual(result, &#x27;app.example.com&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;11ca2ae4-56d0-4319-96d7-2c010ebb4bac&quot;,&quot;parentUUID&quot;:&quot;76f83ff5-1b90-461d-8468-4d887eb4f7c9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;11ca2ae4-56d0-4319-96d7-2c010ebb4bac&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;587cdeb3-d137-404c-b801-bf205e656cce&quot;,&quot;title&quot;:&quot;listApps()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice listApps() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;App: Fitness (com.apple.Fitness), App: Podcasts (com.apple.podcasts), &#x27; +\n                &#x27;App: Filme (com.apple.TVMovies), App: Prime Video (com.amazon.aiv.AIVApp), &#x27; +\n                &#x27;App: TV (com.apple.TVWatchList), App: Fotos (com.apple.TVPhotos), App: App Store &#x27; +\n                &#x27;(com.apple.TVAppStore), App: Arcade (com.apple.Arcade), App: TV-Sendungen (com.apple.TVShows), &#x27; +\n                &#x27;App: Suchen (com.apple.TVSearch), App: Live TV (de.couchfunk.WM2014), App: RTL+ &#x27; +\n                &#x27;(com.rtlinteractive.tvnow), App: Computer (com.apple.TVHomeSharing), App: ARTE &#x27; +\n                &#x27;(tv.arte.plus7), App: YouTube (com.google.ios.youtube), App: ARD Mediathek &#x27; +\n                &#x27;(de.swr.avp.ard.tablet), App: Disney+ (com.disney.disneyplus), App: Plex (com.plexapp.plex), &#x27; +\n                &#x27;App: Joyn (de.prosiebensat1digital.seventv), App: Einstellungen (com.apple.TVSettings), &#x27; +\n                &#x27;App: ZDFmediathek (de.zdf.mediathek.universal), App: Crossy Road (com.hipsterwhale.crossy), &#x27; +\n                &#x27;App: Netflix (com.netflix.Netflix), App: Infuse (com.firecore.infuse), &#x27; +\n                &#x27;App: Musik (com.apple.TVMusic)&#x27;);\n        })\n    });\n    const result = yield device.listApps();\n    assert.strictEqual(result.length, 25);\n    assert.strictEqual(result[0].id, &#x27;com.apple.Fitness&#x27;);\n    assert.strictEqual(result[0].name, &#x27;Fitness&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2862eb30-3ebf-4d28-8572-09d314e3c2c6&quot;,&quot;parentUUID&quot;:&quot;587cdeb3-d137-404c-b801-bf205e656cce&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2862eb30-3ebf-4d28-8572-09d314e3c2c6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d63693a6-fc39-4396-a3df-4a92972afb55&quot;,&quot;title&quot;:&quot;pressKey()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work with valid key&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pressKey() should work with valid key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    yield device.pressKey(NodePyATVKeys.home);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5bcaa2cc-502e-44fc-a31d-bb1d663c66ec&quot;,&quot;parentUUID&quot;:&quot;d63693a6-fc39-4396-a3df-4a92972afb55&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error with invalid key&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pressKey() should throw error with invalid key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;\n    });\n    yield assert.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        // @ts-ignore\n        yield device.pressKey(&#x27;foo&#x27;);\n    }), /Unsupported key value foo/);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b8374d09-d225-42b9-9c66-0ed857ad0393&quot;,&quot;parentUUID&quot;:&quot;d63693a6-fc39-4396-a3df-4a92972afb55&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if pyatv result is not success&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pressKey() should throw error if pyatv result is not success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;failure\&quot;}&#x27;);\n        })\n    });\n    yield assert.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield device.pressKey(NodePyATVKeys.home);\n    }), /Unable to parse pyatv response/);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;69944bac-5030-47f2-ac3b-a9d1778afb32&quot;,&quot;parentUUID&quot;:&quot;d63693a6-fc39-4396-a3df-4a92972afb55&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5bcaa2cc-502e-44fc-a31d-bb1d663c66ec&quot;,&quot;b8374d09-d225-42b9-9c66-0ed857ad0393&quot;,&quot;69944bac-5030-47f2-ac3b-a9d1778afb32&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d9ff605b-baf0-4a2b-88fc-76d7ec648d69&quot;,&quot;title&quot;:&quot;down()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice down() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4f206d23-ba44-4d1e-889d-40099b4fb8e0&quot;,&quot;parentUUID&quot;:&quot;d9ff605b-baf0-4a2b-88fc-76d7ec648d69&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4f206d23-ba44-4d1e-889d-40099b4fb8e0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9016ff0b-86c3-49aa-8d4a-687cd2826b73&quot;,&quot;title&quot;:&quot;home()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice home() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39ee3dc6-0a8f-4101-8711-4ec98eddce0b&quot;,&quot;parentUUID&quot;:&quot;9016ff0b-86c3-49aa-8d4a-687cd2826b73&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;39ee3dc6-0a8f-4101-8711-4ec98eddce0b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3adfd8c1-fe68-4ca1-a742-3c408642fcbd&quot;,&quot;title&quot;:&quot;homeHold()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice homeHold() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bedfe9ac-9ec2-4ad9-ac74-95d4e53d6ef6&quot;,&quot;parentUUID&quot;:&quot;3adfd8c1-fe68-4ca1-a742-3c408642fcbd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bedfe9ac-9ec2-4ad9-ac74-95d4e53d6ef6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e5e977f5-3e1f-44db-9590-44b5b423cbd0&quot;,&quot;title&quot;:&quot;left()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice left() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1a8472e9-e3ca-410c-a997-d3d48d84a1cf&quot;,&quot;parentUUID&quot;:&quot;e5e977f5-3e1f-44db-9590-44b5b423cbd0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1a8472e9-e3ca-410c-a997-d3d48d84a1cf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a5a40768-4ae1-4611-9b3e-bc4b2c7580f0&quot;,&quot;title&quot;:&quot;menu()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice menu() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0d73d3c6-a5e5-4c76-8f58-0dd2c7820998&quot;,&quot;parentUUID&quot;:&quot;a5a40768-4ae1-4611-9b3e-bc4b2c7580f0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0d73d3c6-a5e5-4c76-8f58-0dd2c7820998&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;46f8a5c3-be43-4cb1-8f16-43dfbc8b833f&quot;,&quot;title&quot;:&quot;next()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice next() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ccc95762-51d1-434f-a1ed-0873272d098f&quot;,&quot;parentUUID&quot;:&quot;46f8a5c3-be43-4cb1-8f16-43dfbc8b833f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ccc95762-51d1-434f-a1ed-0873272d098f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;af2a29cb-75d2-4cb7-9cb6-42d55ca70703&quot;,&quot;title&quot;:&quot;pause()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pause() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1c83c991-e750-4468-be22-74bb5f5306b2&quot;,&quot;parentUUID&quot;:&quot;af2a29cb-75d2-4cb7-9cb6-42d55ca70703&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1c83c991-e750-4468-be22-74bb5f5306b2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9aa7f214-8432-41f0-bded-690c976c3ad7&quot;,&quot;title&quot;:&quot;play()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice play() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ed085e80-ed8e-4ca5-90df-b48a12e7f5a7&quot;,&quot;parentUUID&quot;:&quot;9aa7f214-8432-41f0-bded-690c976c3ad7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ed085e80-ed8e-4ca5-90df-b48a12e7f5a7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bbab3b0a-9012-4026-8e7d-868cc9bab20b&quot;,&quot;title&quot;:&quot;playPause()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice playPause() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4cdb7113-087d-4d74-bafc-37c6a1789721&quot;,&quot;parentUUID&quot;:&quot;bbab3b0a-9012-4026-8e7d-868cc9bab20b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4cdb7113-087d-4d74-bafc-37c6a1789721&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f97eb1ef-1cd2-4433-8b5f-ec505250c60f&quot;,&quot;title&quot;:&quot;previous()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice previous() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8ee716db-dbf1-454a-af63-58219e93fc71&quot;,&quot;parentUUID&quot;:&quot;f97eb1ef-1cd2-4433-8b5f-ec505250c60f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8ee716db-dbf1-454a-af63-58219e93fc71&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d6ba6f8b-8791-4816-92ed-acdbd44a177f&quot;,&quot;title&quot;:&quot;right()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice right() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;76a2db9a-0fef-402a-bd39-d9461e17f743&quot;,&quot;parentUUID&quot;:&quot;d6ba6f8b-8791-4816-92ed-acdbd44a177f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;76a2db9a-0fef-402a-bd39-d9461e17f743&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;998b7889-e612-436e-acfe-57c701734b27&quot;,&quot;title&quot;:&quot;select()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice select() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;09c7228c-2e6d-4684-841d-023a5de7780a&quot;,&quot;parentUUID&quot;:&quot;998b7889-e612-436e-acfe-57c701734b27&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;09c7228c-2e6d-4684-841d-023a5de7780a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;81fe59f1-0698-42d0-8bcb-c4b158b86bb0&quot;,&quot;title&quot;:&quot;skipBackward()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice skipBackward() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;845e2d17-9d0d-4f28-b3f7-38274961b4aa&quot;,&quot;parentUUID&quot;:&quot;81fe59f1-0698-42d0-8bcb-c4b158b86bb0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;845e2d17-9d0d-4f28-b3f7-38274961b4aa&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c56a4604-c6c9-4055-8458-62cbc7561d4c&quot;,&quot;title&quot;:&quot;skipForward()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice skipForward() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;729652e3-c0d9-46dc-852f-bbc2297238fb&quot;,&quot;parentUUID&quot;:&quot;c56a4604-c6c9-4055-8458-62cbc7561d4c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;729652e3-c0d9-46dc-852f-bbc2297238fb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;04592c49-fd1d-45c8-9073-fea462df70a8&quot;,&quot;title&quot;:&quot;stop()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice stop() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;49f57234-6613-4870-95f3-b3e418b19cb6&quot;,&quot;parentUUID&quot;:&quot;04592c49-fd1d-45c8-9073-fea462df70a8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;49f57234-6613-4870-95f3-b3e418b19cb6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1026d5cb-11e8-4ac3-993b-7158f5c2ed48&quot;,&quot;title&quot;:&quot;suspend()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice suspend() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9fa9f121-168d-469b-8f42-8f0db354de1f&quot;,&quot;parentUUID&quot;:&quot;1026d5cb-11e8-4ac3-993b-7158f5c2ed48&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9fa9f121-168d-469b-8f42-8f0db354de1f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d6980fa4-9f4d-4624-b973-b5becbeeb1aa&quot;,&quot;title&quot;:&quot;topMenu()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice topMenu() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;47ba385d-3760-411f-b9b7-5b196f52aa38&quot;,&quot;parentUUID&quot;:&quot;d6980fa4-9f4d-4624-b973-b5becbeeb1aa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;47ba385d-3760-411f-b9b7-5b196f52aa38&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;61c475ff-b017-4336-b574-f3dc90818ff1&quot;,&quot;title&quot;:&quot;up()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice up() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;af592911-8b09-40ee-b066-0fcb5a59577f&quot;,&quot;parentUUID&quot;:&quot;61c475ff-b017-4336-b574-f3dc90818ff1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;af592911-8b09-40ee-b066-0fcb5a59577f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c9329f21-4083-464e-ac93-0335ed1b58dc&quot;,&quot;title&quot;:&quot;volumeDown()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice volumeDown() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;61faec59-b20f-4479-984b-a6eb7e655596&quot;,&quot;parentUUID&quot;:&quot;c9329f21-4083-464e-ac93-0335ed1b58dc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;61faec59-b20f-4479-984b-a6eb7e655596&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a9670892-5103-48e6-9348-d35a99464f86&quot;,&quot;title&quot;:&quot;volumeUp()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice volumeUp() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c1746e56-ba56-4117-b21b-ceb43b2039f5&quot;,&quot;parentUUID&quot;:&quot;a9670892-5103-48e6-9348-d35a99464f86&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c1746e56-ba56-4117-b21b-ceb43b2039f5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fff843e7-12ff-48c2-a7d4-ab2ae69739b1&quot;,&quot;title&quot;:&quot;wakeup()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice wakeup() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;565f3480-b61e-4c80-bb46-f02f912e1f3d&quot;,&quot;parentUUID&quot;:&quot;fff843e7-12ff-48c2-a7d4-ab2ae69739b1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;565f3480-b61e-4c80-bb46-f02f912e1f3d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9984ccd4-99fd-4ca5-ad2a-b8591cd166ad&quot;,&quot;title&quot;:&quot;turnOff()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice turnOff() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4a8ea84f-8625-46eb-ab2d-7d07dddaa66f&quot;,&quot;parentUUID&quot;:&quot;9984ccd4-99fd-4ca5-ad2a-b8591cd166ad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4a8ea84f-8625-46eb-ab2d-7d07dddaa66f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3dab61e0-0f61-45f0-afa0-9155780383e0&quot;,&quot;title&quot;:&quot;turnOn()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice turnOn() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b8c5715c-fcad-42de-b04b-fd19bda5a2d9&quot;,&quot;parentUUID&quot;:&quot;3dab61e0-0f61-45f0-afa0-9155780383e0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b8c5715c-fcad-42de-b04b-fd19bda5a2d9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e044513b-2051-463d-81bc-6c5df1d5a133&quot;,&quot;title&quot;:&quot;launchApp()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice launchApp() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;&#x27;);\n        })\n    });\n    yield device.launchApp(&#x27;com.apple.TVShows&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3d59a26a-cc8f-45a8-9e2f-904fac7716ab&quot;,&quot;parentUUID&quot;:&quot;e044513b-2051-463d-81bc-6c5df1d5a133&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3d59a26a-cc8f-45a8-9e2f-904fac7716ab&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;316a489b-6ba8-49d7-9e98-1cb06d45f806&quot;,&quot;title&quot;:&quot;NodePyATVInstance&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;9518a470-9955-49f8-a9da-0b4e7adabf9e&quot;,&quot;title&quot;:&quot;static version()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work with pyatv [L]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should work with pyatv [L]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:545,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    this.timeout(4000);\n    const result = yield NodePyATVInstance.version();\n    if (result.pyatv === null) {\n        throw new Error(&#x27;No version found for pyatv. Is it installed in test environment?&#x27;);\n    }\n    assert.equal(typeof result.pyatv, &#x27;string&#x27;, &#x27;result.pyatv is a string&#x27;);\n    assert.ok(result.pyatv.length &gt;= 5, &#x27;result.pyatv has content&#x27;);\n    assert.strictEqual(result.module, version);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;64bfe023-5fc6-4d3b-b4bd-1fed35e710a9&quot;,&quot;parentUUID&quot;:&quot;9518a470-9955-49f8-a9da-0b4e7adabf9e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the pyatv version&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return the pyatv version&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const result = yield NodePyATVInstance.version({\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.code(1);\n            cp.end(&#x27;atvremote 0.7.4&#x27;);\n        })\n    });\n    assert.ok(result.pyatv);\n    assert.strictEqual(result.pyatv, &#x27;0.7.4&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7aa1259f-84bb-449c-8317-1226404086f6&quot;,&quot;parentUUID&quot;:&quot;9518a470-9955-49f8-a9da-0b4e7adabf9e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the module version&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return the module version&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const result = yield NodePyATVInstance.version({\n        noColors: true,\n        spawn: createFakeSpawn(cp =&gt; cp.code(1).end())\n    });\n    assert.strictEqual(result.module, version);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9df1b7b3-c3ab-4f6e-9766-76147fe0a6d8&quot;,&quot;parentUUID&quot;:&quot;9518a470-9955-49f8-a9da-0b4e7adabf9e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle option.atvremotePath&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should handle option.atvremotePath&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield NodePyATVInstance.version({\n        atvremotePath: &#x27;/foo/bar&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            assert.strictEqual(cp.cmd(), &#x27;/foo/bar&#x27;);\n            cp.code(1).end();\n        })\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;75e50199-ac86-46a4-b600-5b8971e49971&quot;,&quot;parentUUID&quot;:&quot;9518a470-9955-49f8-a9da-0b4e7adabf9e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with option.debug = true&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should work with option.debug = true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield NodePyATVInstance.version({\n        debug: true,\n        spawn: createFakeSpawn(cp =&gt; cp.code(1).end())\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e13ca8cd-ab2a-432d-9a52-126677faae9e&quot;,&quot;parentUUID&quot;:&quot;9518a470-9955-49f8-a9da-0b4e7adabf9e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with option.noColors&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should work with option.noColors&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield NodePyATVInstance.version({\n        debug: () =&gt; {\n            // no debug log\n        },\n        noColors: true,\n        spawn: createFakeSpawn(cp =&gt; cp.code(1).end())\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eddcd1e7-8b66-43e5-adb7-80c1cc407971&quot;,&quot;parentUUID&quot;:&quot;9518a470-9955-49f8-a9da-0b4e7adabf9e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return null on pyatv stderr output&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return null on pyatv stderr output&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const result = yield NodePyATVInstance.version({\n        spawn: createFakeSpawn(cp =&gt; cp.stderr(&#x27;Hello World!&#x27;).code(123).end())\n    });\n    assert.strictEqual(result.pyatv, null);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8f57f1f1-b2db-47eb-a861-b7088f9ad991&quot;,&quot;parentUUID&quot;:&quot;9518a470-9955-49f8-a9da-0b4e7adabf9e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return null on pyatv error&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return null on pyatv error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const result = yield NodePyATVInstance.version({\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.error(new Error(&#x27;Hello world!&#x27;)).end();\n        })\n    });\n    assert.strictEqual(result.pyatv, null);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ce107e4-5acb-4750-b82e-032af38ce08b&quot;,&quot;parentUUID&quot;:&quot;9518a470-9955-49f8-a9da-0b4e7adabf9e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return null on invalid pyatv version&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return null on invalid pyatv version&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const result = yield NodePyATVInstance.version({\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.stdout(&#x27;atvremote 42&#x27;).code(1).end();\n        })\n    });\n    assert.strictEqual(result.pyatv, null);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;97e93c37-3dbc-46ae-b866-428a9d98c48e&quot;,&quot;parentUUID&quot;:&quot;9518a470-9955-49f8-a9da-0b4e7adabf9e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;64bfe023-5fc6-4d3b-b4bd-1fed35e710a9&quot;,&quot;7aa1259f-84bb-449c-8317-1226404086f6&quot;,&quot;9df1b7b3-c3ab-4f6e-9766-76147fe0a6d8&quot;,&quot;75e50199-ac86-46a4-b600-5b8971e49971&quot;,&quot;e13ca8cd-ab2a-432d-9a52-126677faae9e&quot;,&quot;eddcd1e7-8b66-43e5-adb7-80c1cc407971&quot;,&quot;8f57f1f1-b2db-47eb-a861-b7088f9ad991&quot;,&quot;0ce107e4-5acb-4750-b82e-032af38ce08b&quot;,&quot;97e93c37-3dbc-46ae-b866-428a9d98c48e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:558,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b82ce71e-4385-4170-8c07-f692e55716b1&quot;,&quot;title&quot;:&quot;static check()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should resolve in test environment [L]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should resolve in test environment [L]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5795,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    this.timeout(12000);\n    yield NodePyATVInstance.check();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a507c17b-5df8-4150-b072-32ee67cd9458&quot;,&quot;parentUUID&quot;:&quot;b82ce71e-4385-4170-8c07-f692e55716b1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return nice error message if pyatv was not found&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should return nice error message if pyatv was not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield assert.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield NodePyATVInstance.check({\n            spawn: createFakeSpawn(cp =&gt; {\n                cp.error(new Error(&#x27;spawn atvremote ENOENT&#x27;)).code(1).end();\n            })\n        });\n    }), /Unable to find pyatv. Is it installed?/);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7e93f89c-ac3d-4f56-9427-68979f356c9a&quot;,&quot;parentUUID&quot;:&quot;b82ce71e-4385-4170-8c07-f692e55716b1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return nice error message if myatv is too old&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should return nice error message if myatv is too old&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield assert.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield NodePyATVInstance.check({\n            spawn: createFakeSpawn(cp =&gt; {\n                cp.stdout(&#x27;atvremote 0.5.1&#x27;).code(1).end();\n            })\n        });\n    }), /Found pyatv, but unforunately it&#x27;s too old. Please update pyatv./);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;58d10ca9-a4af-4abd-b96c-d7800f71a64f&quot;,&quot;parentUUID&quot;:&quot;b82ce71e-4385-4170-8c07-f692e55716b1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return nice error message if scan failed&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should return nice error message if scan failed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    let i = 0;\n    yield assert.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield NodePyATVInstance.check({\n            spawn: createFakeSpawn(cp =&gt; {\n                if (i === 0) {\n                    cp.stdout(&#x27;atvremote 0.7.0&#x27;).code(1).end();\n                    i++;\n                }\n                else {\n                    cp.error(new Error(&#x27;spawn atvremote ENOENT&#x27;)).code(1).end();\n                }\n            })\n        });\n    }), /Unable to scan for devices/);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8be6e90e-cca6-4ad8-aec7-d295a6b5290f&quot;,&quot;parentUUID&quot;:&quot;b82ce71e-4385-4170-8c07-f692e55716b1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a507c17b-5df8-4150-b072-32ee67cd9458&quot;,&quot;7e93f89c-ac3d-4f56-9427-68979f356c9a&quot;,&quot;58d10ca9-a4af-4abd-b96c-d7800f71a64f&quot;,&quot;8be6e90e-cca6-4ad8-aec7-d295a6b5290f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5801,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c14396ef-f5f5-44a2-b80f-7d7c4a369544&quot;,&quot;title&quot;:&quot;static find()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work [L]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work [L]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5400,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    this.timeout(10000);\n    const result = yield NodePyATVInstance.find();\n    assert.ok(Array.isArray(result));\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;399ced74-c8ae-44d4-b7fc-78c598f1808f&quot;,&quot;parentUUID&quot;:&quot;c14396ef-f5f5-44a2-b80f-7d7c4a369544&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle option.atvscriptPath&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should handle option.atvscriptPath&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield NodePyATVInstance.find({\n        atvscriptPath: &#x27;/foo/bar&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            assert.strictEqual(cp.cmd(), &#x27;/foo/bar&#x27;);\n            cp.stdout({\n                &#x27;result&#x27;: &#x27;success&#x27;,\n                &#x27;datetime&#x27;: &#x27;2020-11-06T20:47:30.840022+01:00&#x27;,\n                &#x27;devices&#x27;: []\n            }).end();\n        })\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;16326576-ca6c-4df9-a09e-0a4e9b79c5af&quot;,&quot;parentUUID&quot;:&quot;c14396ef-f5f5-44a2-b80f-7d7c4a369544&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error on stderr output&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error on stderr output&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield assert.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield NodePyATVInstance.find({\n            spawn: createFakeSpawn(cp =&gt; {\n                cp.stderr(&#x27;Hello World!&#x27;).code(1).end();\n            })\n        });\n    }), /Unable to execute request/);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4f7f62b6-dfee-4194-9fd4-658d0f090ad5&quot;,&quot;parentUUID&quot;:&quot;c14396ef-f5f5-44a2-b80f-7d7c4a369544&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error on error&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield assert.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield NodePyATVInstance.find({\n            spawn: createFakeSpawn(cp =&gt; {\n                cp.error(new Error(&#x27;Hello world!&#x27;)).code(1).end();\n            })\n        });\n    }), /Hello world!/);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;98e92f7e-d2bc-4307-9ecd-34edfa78ff1b&quot;,&quot;parentUUID&quot;:&quot;c14396ef-f5f5-44a2-b80f-7d7c4a369544&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if atvscript result is not valid json&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error if atvscript result is not valid json&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield assert.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield NodePyATVInstance.find({\n            spawn: createFakeSpawn(cp =&gt; {\n                cp.stdout(JSON.stringify({\n                    &#x27;result&#x27;: &#x27;success&#x27;,\n                    &#x27;datetime&#x27;: &#x27;2020-11-06T20:47:30.840022+01:00&#x27;,\n                    &#x27;devices&#x27;: []\n                }).substr(1)).end();\n            })\n        });\n    }), /Unable to parse result/);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e5ec94ff-47a5-4aee-b6b0-edd3ecc662b7&quot;,&quot;parentUUID&quot;:&quot;c14396ef-f5f5-44a2-b80f-7d7c4a369544&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if atvscript result is not successfull&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error if atvscript result is not successfull&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield assert.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield NodePyATVInstance.find({\n            spawn: createFakeSpawn(cp =&gt; {\n                cp.stdout({\n                    result: &#x27;error&#x27;\n                }).code(1).end();\n            })\n        });\n    }), /Unable to parse pyatv response: /);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f1cd843a-c4bf-46a1-bb2c-1f5e09f3f2f2&quot;,&quot;parentUUID&quot;:&quot;c14396ef-f5f5-44a2-b80f-7d7c4a369544&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if atvscript result is without device array&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error if atvscript result is without device array&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield assert.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield NodePyATVInstance.find({\n            spawn: createFakeSpawn(cp =&gt; {\n                cp.stdout({\n                    result: &#x27;success&#x27;\n                }).code(1).end();\n            })\n        });\n    }), /Unable to parse pyatv response: /);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b621543f-9f20-4f82-b043-13955f895abd&quot;,&quot;parentUUID&quot;:&quot;c14396ef-f5f5-44a2-b80f-7d7c4a369544&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work if devices are without device_info / services&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work if devices are without device_info / services&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const devices = yield NodePyATVInstance.find({\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                datetime: &#x27;2020-11-06T20:47:30.840022+01:00&#x27;,\n                devices: [\n                    {\n                        name: &#x27;Vardagsrum&#x27;,\n                        address: &#x27;10.0.10.81&#x27;,\n                        identifier: &#x27;xxx&#x27;\n                    }\n                ]\n            }).code(1).end();\n        })\n    });\n    assert.strictEqual(devices.length, 1);\n    assert.strictEqual(devices[0].name, &#x27;Vardagsrum&#x27;);\n    assert.strictEqual(devices[0].host, &#x27;10.0.10.81&#x27;);\n    assert.strictEqual(devices[0].id, &#x27;xxx&#x27;);\n    assert.strictEqual(devices[0].model, undefined);\n    assert.strictEqual(devices[0].modelName, undefined);\n    assert.strictEqual(devices[0].os, undefined);\n    assert.strictEqual(devices[0].version, undefined);\n    assert.deepStrictEqual(devices[0].services, undefined);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;94e0b4f6-7cfd-42f2-8e30-561292ae7686&quot;,&quot;parentUUID&quot;:&quot;c14396ef-f5f5-44a2-b80f-7d7c4a369544&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work if devices are with device_info / services&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work if devices are with device_info / services&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const devices = yield NodePyATVInstance.find({\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                datetime: &#x27;2020-11-06T20:47:30.840022+01:00&#x27;,\n                devices: [\n                    {\n                        name: &#x27;Vardagsrum&#x27;,\n                        address: &#x27;10.0.10.81&#x27;,\n                        identifier: &#x27;xxx&#x27;,\n                        device_info: {\n                            &#x27;model&#x27;: &#x27;Gen4K&#x27;,\n                            &#x27;model_str&#x27;: &#x27;Apple TV 4K&#x27;,\n                            &#x27;operating_system&#x27;: &#x27;TvOS&#x27;,\n                            &#x27;version&#x27;: &#x27;15.5.1&#x27;\n                        },\n                        services: [\n                            {\n                                protocol: &#x27;mrp&#x27;,\n                                port: 49152\n                            },\n                            {\n                                protocol: &#x27;airplay&#x27;,\n                                port: 7000\n                            }\n                        ]\n                    }\n                ]\n            }).code(1).end();\n        })\n    });\n    assert.strictEqual(devices.length, 1);\n    assert.strictEqual(devices[0].name, &#x27;Vardagsrum&#x27;);\n    assert.strictEqual(devices[0].host, &#x27;10.0.10.81&#x27;);\n    assert.strictEqual(devices[0].id, &#x27;xxx&#x27;);\n    assert.strictEqual(devices[0].model, &#x27;Gen4K&#x27;);\n    assert.strictEqual(devices[0].modelName, &#x27;Apple TV 4K&#x27;);\n    assert.strictEqual(devices[0].os, &#x27;TvOS&#x27;);\n    assert.strictEqual(devices[0].version, &#x27;15.5.1&#x27;);\n    assert.deepStrictEqual(devices[0].services, [\n        {\n            protocol: NodePyATVProtocol.mrp,\n            port: 49152\n        },\n        {\n            protocol: NodePyATVProtocol.airplay,\n            port: 7000\n        }\n    ]);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ce214de4-20e0-48dd-b798-583947c0f1cd&quot;,&quot;parentUUID&quot;:&quot;c14396ef-f5f5-44a2-b80f-7d7c4a369544&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;399ced74-c8ae-44d4-b7fc-78c598f1808f&quot;,&quot;16326576-ca6c-4df9-a09e-0a4e9b79c5af&quot;,&quot;4f7f62b6-dfee-4194-9fd4-658d0f090ad5&quot;,&quot;98e92f7e-d2bc-4307-9ecd-34edfa78ff1b&quot;,&quot;e5ec94ff-47a5-4aee-b6b0-edd3ecc662b7&quot;,&quot;f1cd843a-c4bf-46a1-bb2c-1f5e09f3f2f2&quot;,&quot;b621543f-9f20-4f82-b043-13955f895abd&quot;,&quot;94e0b4f6-7cfd-42f2-8e30-561292ae7686&quot;,&quot;ce214de4-20e0-48dd-b798-583947c0f1cd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5413,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0afa46e8-f467-49a3-8d79-815573900219&quot;,&quot;title&quot;:&quot;static device()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should pass options to constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static device() should pass options to constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = NodePyATVInstance.device({ host: &#x27;192.168.178.6&#x27;, name: &#x27;My Testdevice&#x27; });\nassert.strictEqual(device.host, &#x27;192.168.178.6&#x27;);\nassert.strictEqual(device.name, &#x27;My Testdevice&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4f6b96dc-0fc0-4d6a-bcf5-b3ef42b04740&quot;,&quot;parentUUID&quot;:&quot;0afa46e8-f467-49a3-8d79-815573900219&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4f6b96dc-0fc0-4d6a-bcf5-b3ef42b04740&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;92832a76-5875-4f2b-bff2-762302dbed54&quot;,&quot;title&quot;:&quot;version()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance version() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const i = new NodePyATVInstance({ atvremotePath: &#x27;test&#x27; });\n    yield i.version({\n        spawn: createFakeSpawn(cp =&gt; {\n            assert.strictEqual(cp.cmd(), &#x27;test&#x27;);\n            cp.code(1).end();\n        })\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dc828821-42f2-45bb-91b8-25106e6e345e&quot;,&quot;parentUUID&quot;:&quot;92832a76-5875-4f2b-bff2-762302dbed54&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dc828821-42f2-45bb-91b8-25106e6e345e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c7ba12da-4983-4b17-bf6f-7bc2b6680a6b&quot;,&quot;title&quot;:&quot;check()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance check() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const i = new NodePyATVInstance({ atvremotePath: &#x27;test&#x27; });\n    yield assert.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield i.check({\n            spawn: createFakeSpawn(cp =&gt; {\n                assert.strictEqual(cp.cmd(), &#x27;test&#x27;);\n                cp.error(new Error(&#x27;spawn atvremote ENOENT&#x27;)).code(1).end();\n            })\n        });\n    }), /Unable to find pyatv. Is it installed?/);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c2c4c5c2-d5a3-4f35-82c4-1f97fca844c0&quot;,&quot;parentUUID&quot;:&quot;c7ba12da-4983-4b17-bf6f-7bc2b6680a6b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c2c4c5c2-d5a3-4f35-82c4-1f97fca844c0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f091a60d-9538-40b7-b2a9-69cf3ff86678&quot;,&quot;title&quot;:&quot;find()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance find() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const i = new NodePyATVInstance({ atvscriptPath: &#x27;test&#x27; });\n    yield i.find({\n        spawn: createFakeSpawn(cp =&gt; {\n            assert.strictEqual(cp.cmd(), &#x27;test&#x27;);\n            cp.stdout({\n                &#x27;result&#x27;: &#x27;success&#x27;,\n                &#x27;datetime&#x27;: &#x27;2020-11-06T20:47:30.840022+01:00&#x27;,\n                &#x27;devices&#x27;: []\n            }).end();\n        })\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d38ed51f-f9a5-48bf-bc0c-87f993c93938&quot;,&quot;parentUUID&quot;:&quot;f091a60d-9538-40b7-b2a9-69cf3ff86678&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d38ed51f-f9a5-48bf-bc0c-87f993c93938&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2bf21e1a-186b-46f4-9800-13ba38baa8e5&quot;,&quot;title&quot;:&quot;device()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance device() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const i = new NodePyATVInstance({ debug: true });\n    const d = i.device({ name: &#x27;My Testdevice&#x27;, host: &#x27;192.168.178.2&#x27; });\n    assert.deepStrictEqual(d.debug, true);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8cce0b7b-b722-4c0c-805f-d914b5ec9755&quot;,&quot;parentUUID&quot;:&quot;2bf21e1a-186b-46f4-9800-13ba38baa8e5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8cce0b7b-b722-4c0c-805f-d914b5ec9755&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f82677db-1336-490b-a10b-094f9931a85f&quot;,&quot;title&quot;:&quot;Type Exports&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Type NodePyATVProtocol should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVProtocol should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVProtocol);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8ae34362-45d3-46da-8c58-bd55e144b71a&quot;,&quot;parentUUID&quot;:&quot;f82677db-1336-490b-a10b-094f9931a85f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVMediaType should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVMediaType should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVMediaType);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8b6d0e58-cc2c-4c2c-9507-09a463da6559&quot;,&quot;parentUUID&quot;:&quot;f82677db-1336-490b-a10b-094f9931a85f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVDeviceEvent should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVDeviceEvent should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVDeviceEvent);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a86dde05-785a-458d-b0ad-5e992fe80b1d&quot;,&quot;parentUUID&quot;:&quot;f82677db-1336-490b-a10b-094f9931a85f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVDeviceState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVDeviceState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVDeviceState);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c73d28c-d17f-4e41-a864-3b8a0d6e515d&quot;,&quot;parentUUID&quot;:&quot;f82677db-1336-490b-a10b-094f9931a85f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVRepeatState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVRepeatState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVRepeatState);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9954ffd5-74ae-4b1f-958e-f39dff600a0d&quot;,&quot;parentUUID&quot;:&quot;f82677db-1336-490b-a10b-094f9931a85f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVShuffleState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVShuffleState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVShuffleState);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dbe53f29-5501-4944-8948-a50603b7f472&quot;,&quot;parentUUID&quot;:&quot;f82677db-1336-490b-a10b-094f9931a85f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVKeys should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVKeys should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVKeys);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;90c51342-fd3e-420c-8aa1-208e6b98fe17&quot;,&quot;parentUUID&quot;:&quot;f82677db-1336-490b-a10b-094f9931a85f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVInstanceOptions should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVInstanceOptions should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVListenerState);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;47c168cf-35a3-4432-9720-4064bacb5924&quot;,&quot;parentUUID&quot;:&quot;f82677db-1336-490b-a10b-094f9931a85f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVPowerState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVPowerState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVPowerState);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7f2830bc-f4e6-4582-aa8a-f731b355b9b6&quot;,&quot;parentUUID&quot;:&quot;f82677db-1336-490b-a10b-094f9931a85f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8ae34362-45d3-46da-8c58-bd55e144b71a&quot;,&quot;8b6d0e58-cc2c-4c2c-9507-09a463da6559&quot;,&quot;a86dde05-785a-458d-b0ad-5e992fe80b1d&quot;,&quot;8c73d28c-d17f-4e41-a864-3b8a0d6e515d&quot;,&quot;9954ffd5-74ae-4b1f-958e-f39dff600a0d&quot;,&quot;dbe53f29-5501-4944-8948-a50603b7f472&quot;,&quot;90c51342-fd3e-420c-8aa1-208e6b98fe17&quot;,&quot;47c168cf-35a3-4432-9720-4064bacb5924&quot;,&quot;7f2830bc-f4e6-4582-aa8a-f731b355b9b6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;afdef061-baf5-421c-b210-eb556cd2327f&quot;,&quot;title&quot;:&quot;Tools&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b21efdca-4f7e-47ab-acd8-598c75c2b1c3&quot;,&quot;title&quot;:&quot;addRequestId() / removeRequestId()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a string&quot;,&quot;fullTitle&quot;:&quot;Tools addRequestId() / removeRequestId() should return a string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = addRequestId();\nassert.strictEqual(typeof id, &#x27;string&#x27;);\nremoveRequestId(id);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8357179-5741-410c-adfd-0e75cbe547e1&quot;,&quot;parentUUID&quot;:&quot;b21efdca-4f7e-47ab-acd8-598c75c2b1c3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work if given id is not in index&quot;,&quot;fullTitle&quot;:&quot;Tools addRequestId() / removeRequestId() should work if given id is not in index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;removeRequestId(&#x27;FOO&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4042253e-e3ef-44a6-b2d3-319129636bde&quot;,&quot;parentUUID&quot;:&quot;b21efdca-4f7e-47ab-acd8-598c75c2b1c3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c8357179-5741-410c-adfd-0e75cbe547e1&quot;,&quot;4042253e-e3ef-44a6-b2d3-319129636bde&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9134e64d-dc15-4c4d-89bb-110ca8389e28&quot;,&quot;title&quot;:&quot;debug()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work without any options&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work without any options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(&#x27;TEST&#x27;, &#x27;Hello World.&#x27;, {});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a95bfde7-8a8f-44e8-b1f7-750f10891909&quot;,&quot;parentUUID&quot;:&quot;9134e64d-dc15-4c4d-89bb-110ca8389e28&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with default logger&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with default logger&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(&#x27;TEST&#x27;, &#x27;Hello World.&#x27;, { debug: true });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;097d8338-b59e-4f04-b935-9f3f6634bdcf&quot;,&quot;parentUUID&quot;:&quot;9134e64d-dc15-4c4d-89bb-110ca8389e28&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with custom logger&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with custom logger&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(&#x27;TEST&#x27;, &#x27;Hello World.&#x27;, {\n    debug: function (msg) {\n        assert.strictEqual(this, null);\n        assert.ok(msg.includes(&#x27;Hello World&#x27;));\n    }\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ade932df-2dd6-4ae1-9085-7c1927d9fb3a&quot;,&quot;parentUUID&quot;:&quot;9134e64d-dc15-4c4d-89bb-110ca8389e28&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with colors disabled&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with colors disabled&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(&#x27;TEST&#x27;, &#x27;Hello World.&#x27;, { noColors: true });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9e24811a-e6fe-4359-9aba-649ca3a47a88&quot;,&quot;parentUUID&quot;:&quot;9134e64d-dc15-4c4d-89bb-110ca8389e28&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with custom logger and colors disabled&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with custom logger and colors disabled&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(&#x27;TEST&#x27;, &#x27;Hello World.&#x27;, {\n    noColors: true,\n    debug: function (msg) {\n        assert.strictEqual(this, null);\n        assert.strictEqual(msg, &#x27;[node-pyatv][TEST] Hello World.&#x27;);\n    }\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e05fd480-a936-492f-8261-275b7bf48442&quot;,&quot;parentUUID&quot;:&quot;9134e64d-dc15-4c4d-89bb-110ca8389e28&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a95bfde7-8a8f-44e8-b1f7-750f10891909&quot;,&quot;097d8338-b59e-4f04-b935-9f3f6634bdcf&quot;,&quot;ade932df-2dd6-4ae1-9085-7c1927d9fb3a&quot;,&quot;9e24811a-e6fe-4359-9aba-649ca3a47a88&quot;,&quot;e05fd480-a936-492f-8261-275b7bf48442&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4bb7fe7d-a071-4c50-9aa6-a5198d552a30&quot;,&quot;title&quot;:&quot;getExecutable()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should handle atvremotePath if set&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle atvremotePath if set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = getExecutable(NodePyATVExecutableType.atvremote, {\n    atvremotePath: &#x27;/tmp/1&#x27;,\n    atvscriptPath: &#x27;/tmp/2&#x27;\n});\nassert.strictEqual(result, &#x27;/tmp/1&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e334b467-049a-4353-a56a-705ed9067f7f&quot;,&quot;parentUUID&quot;:&quot;4bb7fe7d-a071-4c50-9aa6-a5198d552a30&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle atvscriptPath if set&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle atvscriptPath if set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = getExecutable(NodePyATVExecutableType.atvscript, {\n    atvremotePath: &#x27;/tmp/1&#x27;,\n    atvscriptPath: &#x27;/tmp/2&#x27;\n});\nassert.strictEqual(result, &#x27;/tmp/2&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5356536b-85da-4f7a-b4a8-d4579b4fa45c&quot;,&quot;parentUUID&quot;:&quot;4bb7fe7d-a071-4c50-9aa6-a5198d552a30&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle default for atvremote&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle default for atvremote&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = getExecutable(NodePyATVExecutableType.atvremote, {\n    atvscriptPath: &#x27;/tmp&#x27;\n});\nassert.strictEqual(result, &#x27;atvremote&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;20522117-f6c9-4c71-aedd-a0f60e2b3645&quot;,&quot;parentUUID&quot;:&quot;4bb7fe7d-a071-4c50-9aa6-a5198d552a30&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle default for atvscript&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle default for atvscript&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = getExecutable(NodePyATVExecutableType.atvscript, {\n    atvremotePath: &#x27;/tmp&#x27;\n});\nassert.strictEqual(result, &#x27;atvscript&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7d8980bc-56e8-4ef4-bce5-40294fb80f18&quot;,&quot;parentUUID&quot;:&quot;4bb7fe7d-a071-4c50-9aa6-a5198d552a30&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e334b467-049a-4353-a56a-705ed9067f7f&quot;,&quot;5356536b-85da-4f7a-b4a8-d4579b4fa45c&quot;,&quot;20522117-f6c9-4c71-aedd-a0f60e2b3645&quot;,&quot;7d8980bc-56e8-4ef4-bce5-40294fb80f18&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;300fbfbe-c766-4cf0-96cb-5f46c1c921f1&quot;,&quot;title&quot;:&quot;getParameters()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;empty case&quot;,&quot;fullTitle&quot;:&quot;Tools getParameters() empty case&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const result = yield getParameters();\n    assert.deepEqual(result, []);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7a7a8b14-a40e-4a43-b5a4-5f3b9dd9f96a&quot;,&quot;parentUUID&quot;:&quot;300fbfbe-c766-4cf0-96cb-5f46c1c921f1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;easy case&quot;,&quot;fullTitle&quot;:&quot;Tools getParameters() easy case&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const result = yield getParameters({\n        host: &#x27;192.168.178.2&#x27;\n    });\n    assert.deepEqual(result, [&#x27;-s&#x27;, &#x27;192.168.178.2&#x27;]);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5373c08c-e9a5-47a3-9345-4836f6e4a889&quot;,&quot;parentUUID&quot;:&quot;300fbfbe-c766-4cf0-96cb-5f46c1c921f1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;full case&quot;,&quot;fullTitle&quot;:&quot;Tools getParameters() full case&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const result = yield getParameters({\n        hosts: [&#x27;192.168.178.2&#x27;, &#x27;192.168.178.3&#x27;],\n        id: &#x27;****&#x27;,\n        protocol: NodePyATVProtocol.mrp,\n        dmapCredentials: &#x27;****&#x27;,\n        mrpCredentials: &#x27;****&#x27;,\n        airplayCredentials: &#x27;****&#x27;,\n        companionCredentials: &#x27;1234&#x27;,\n        raopCredentials: &#x27;::foo:&#x27;\n    });\n    assert.deepEqual(result, [\n        &#x27;-s&#x27;, &#x27;192.168.178.2,192.168.178.3&#x27;,\n        &#x27;-i&#x27;, &#x27;****&#x27;,\n        &#x27;--protocol&#x27;, &#x27;mrp&#x27;,\n        &#x27;--dmap-credentials&#x27;, &#x27;****&#x27;,\n        &#x27;--mrp-credentials&#x27;, &#x27;****&#x27;,\n        &#x27;--airplay-credentials&#x27;, &#x27;****&#x27;,\n        &#x27;--companion-credentials&#x27;, &#x27;1234&#x27;,\n        &#x27;--raop-credentials&#x27;, &#x27;::foo:&#x27;\n    ]);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5f5d9b1b-d39f-4641-9ee4-d46bdbdd6dab&quot;,&quot;parentUUID&quot;:&quot;300fbfbe-c766-4cf0-96cb-5f46c1c921f1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7a7a8b14-a40e-4a43-b5a4-5f3b9dd9f96a&quot;,&quot;5373c08c-e9a5-47a3-9345-4836f6e4a889&quot;,&quot;5f5d9b1b-d39f-4641-9ee4-d46bdbdd6dab&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;87daee16-d6eb-4dc2-b085-a92fe824be4b&quot;,&quot;title&quot;:&quot;parseState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work with empty data&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should work with empty data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input = {};\nconst result = parseState(input, &#x27;&#x27;, {});\nassert.deepStrictEqual(result, {\n    dateTime: null,\n    hash: null,\n    mediaType: null,\n    deviceState: null,\n    title: null,\n    artist: null,\n    album: null,\n    genre: null,\n    totalTime: null,\n    position: null,\n    shuffle: null,\n    repeat: null,\n    app: null,\n    appId: null,\n    powerState: null,\n    focusState: null,\n    volume: null,\n    outputDevices: null\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a25d0a23-4bbf-4145-8987-9510a4143ef2&quot;,&quot;parentUUID&quot;:&quot;87daee16-d6eb-4dc2-b085-a92fe824be4b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work without data&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should work without data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// @ts-ignore\nconst result = parseState(null, &#x27;&#x27;, {});\nassert.deepStrictEqual(result, {\n    dateTime: null,\n    hash: null,\n    mediaType: null,\n    deviceState: null,\n    title: null,\n    artist: null,\n    album: null,\n    genre: null,\n    totalTime: null,\n    position: null,\n    shuffle: null,\n    repeat: null,\n    app: null,\n    appId: null,\n    powerState: null,\n    focusState: null,\n    volume: null,\n    outputDevices: null\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;73517fe3-4d74-451c-8df3-58d2e2aa6152&quot;,&quot;parentUUID&quot;:&quot;87daee16-d6eb-4dc2-b085-a92fe824be4b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with example data&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should work with example data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input = {\n    result: &#x27;success&#x27;,\n    datetime: &#x27;2020-11-07T22:38:43.608030+01:00&#x27;,\n    hash: &#x27;100e0ab6-6ff5-4199-9c04-a7107ff78712&#x27;,\n    media_type: &#x27;video&#x27;,\n    device_state: &#x27;playing&#x27;,\n    title: &#x27;Solo: A Star Wars Story&#x27;,\n    artist: null,\n    album: null,\n    genre: null,\n    total_time: 8097,\n    position: 27,\n    shuffle: &#x27;off&#x27;,\n    repeat: &#x27;off&#x27;,\n    app: &#x27;Disney+&#x27;,\n    app_id: &#x27;com.disney.disneyplus&#x27;,\n    power_state: null,\n    focus_state: null,\n    volume: null,\n    output_devices: null\n};\nconst result = parseState(input, &#x27;&#x27;, {});\nassert.deepStrictEqual(result, {\n    dateTime: new Date(&#x27;2020-11-07T22:38:43.608030+01:00&#x27;),\n    hash: &#x27;100e0ab6-6ff5-4199-9c04-a7107ff78712&#x27;,\n    mediaType: NodePyATVMediaType.video,\n    deviceState: NodePyATVDeviceState.playing,\n    title: &#x27;Solo: A Star Wars Story&#x27;,\n    artist: null,\n    album: null,\n    genre: null,\n    totalTime: 8097,\n    position: 27,\n    shuffle: NodePyATVShuffleState.off,\n    repeat: NodePyATVRepeatState.off,\n    app: &#x27;Disney+&#x27;,\n    appId: &#x27;com.disney.disneyplus&#x27;,\n    powerState: null,\n    focusState: null,\n    volume: null,\n    outputDevices: null\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9cfa5c45-a5f1-446d-aadd-a89ded81b276&quot;,&quot;parentUUID&quot;:&quot;87daee16-d6eb-4dc2-b085-a92fe824be4b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw an error for pyatv exceptions&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should throw an error for pyatv exceptions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input = {\n    result: &#x27;failure&#x27;,\n    datetime: &#x27;2021-11-24T21:13:36.424576+03:00&#x27;,\n    exception: &#x27;invalid credentials: 321&#x27;,\n    stacktrace: &#x27;Traceback (most recent call last):\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\\\&quot;, line 302, in appstart\\n    print(args.output(await _handle_command(args, abort_sem, loop)), flush=True)\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\\\&quot;, line 196, in _handle_command\\n    atv = await connect(config, loop, protocol=Protocol.MRP)\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/__init__.py\\\&quot;, line 96, in connect\\n    for setup_data in proto_methods.setup(\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\\\&quot;, line 192, in setup\\n    stream = AirPlayStream(config, service)\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\\\&quot;, line 79, in __init__\\n    self._credentials: HapCredentials = parse_credentials(self.service.credentials)\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/auth/hap_pairing.py\\\&quot;, line 139, in parse_credentials\\n    raise exceptions.InvalidCredentialsError(\\\&quot;invalid credentials: \\\&quot; + detail_string)\\npyatv.exceptions.InvalidCredentialsError: invalid credentials: 321\\n&#x27;\n};\nassert.throws(() =&gt; {\n    parseState(input, &#x27;&#x27;, {});\n}, /Got pyatv Error: invalid credentials: 321/);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;07974d7d-a7d5-4a33-8579-6c13e2b43427&quot;,&quot;parentUUID&quot;:&quot;87daee16-d6eb-4dc2-b085-a92fe824be4b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should ignore date if it&#x27;s an invalid date&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should ignore date if it&#x27;s an invalid date&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input = { datetime: &#x27;today&#x27; };\nconst result = parseState(input, &#x27;&#x27;, {});\nassert.deepStrictEqual(result, {\n    dateTime: null,\n    hash: null,\n    mediaType: null,\n    deviceState: null,\n    title: null,\n    artist: null,\n    album: null,\n    genre: null,\n    totalTime: null,\n    position: null,\n    shuffle: null,\n    repeat: null,\n    app: null,\n    appId: null,\n    powerState: null,\n    focusState: null,\n    volume: null,\n    outputDevices: null\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ba383646-4c6e-4594-a611-bc7648f435f5&quot;,&quot;parentUUID&quot;:&quot;87daee16-d6eb-4dc2-b085-a92fe824be4b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should ignore data if unsupported type&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should ignore data if unsupported type&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input = {\n    result: &#x27;success&#x27;,\n    datetime: true,\n    hash: 1337,\n    media_type: false,\n    device_state: 43,\n    title: undefined,\n    artist: 90,\n    album: Infinity,\n    genre: Math.PI,\n    total_time: &#x27;23min&#x27;,\n    position: &#x27;0:30.123&#x27;,\n    shuffle: false,\n    repeat: true,\n    app: 0,\n    app_id: 891645381647289,\n    power_state: null,\n    focus_state: null,\n    volume: null,\n    output_devices: null\n};\nconst result = parseState(input, &#x27;&#x27;, {});\nassert.deepStrictEqual(result, {\n    dateTime: null,\n    hash: null,\n    mediaType: null,\n    deviceState: null,\n    title: null,\n    artist: null,\n    album: null,\n    genre: null,\n    totalTime: null,\n    position: null,\n    shuffle: null,\n    repeat: null,\n    app: null,\n    appId: null,\n    powerState: null,\n    focusState: null,\n    volume: null,\n    outputDevices: null\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c4f1ef6-faa3-4753-be2e-c018fa8fb9b8&quot;,&quot;parentUUID&quot;:&quot;87daee16-d6eb-4dc2-b085-a92fe824be4b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should ignore enums with unsupported valid&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should ignore enums with unsupported valid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input = {\n    media_type: &#x27;3d-experience&#x27;,\n    device_state: &#x27;initiating&#x27;,\n    shuffle: &#x27;everything&#x27;,\n    repeat: &#x27;nothing&#x27;\n};\nconst result = parseState(input, &#x27;&#x27;, {});\nassert.deepStrictEqual(result, {\n    dateTime: null,\n    hash: null,\n    mediaType: null,\n    deviceState: null,\n    title: null,\n    artist: null,\n    album: null,\n    genre: null,\n    totalTime: null,\n    position: null,\n    shuffle: null,\n    repeat: null,\n    app: null,\n    appId: null,\n    powerState: null,\n    focusState: null,\n    volume: null,\n    outputDevices: null\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a72df886-54f9-4637-aba0-a4fc7cee3469&quot;,&quot;parentUUID&quot;:&quot;87daee16-d6eb-4dc2-b085-a92fe824be4b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a25d0a23-4bbf-4145-8987-9510a4143ef2&quot;,&quot;73517fe3-4d74-451c-8df3-58d2e2aa6152&quot;,&quot;9cfa5c45-a5f1-446d-aadd-a89ded81b276&quot;,&quot;07974d7d-a7d5-4a33-8579-6c13e2b43427&quot;,&quot;ba383646-4c6e-4594-a611-bc7648f435f5&quot;,&quot;8c4f1ef6-faa3-4753-be2e-c018fa8fb9b8&quot;,&quot;a72df886-54f9-4637-aba0-a4fc7cee3469&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;10.3.0&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;node-pyatv&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report/assets&quot;,&quot;jsonFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/mochawesome-report/mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>