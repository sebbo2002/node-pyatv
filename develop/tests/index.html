<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:102,&quot;tests&quot;:174,&quot;passes&quot;:172,&quot;pending&quot;:2,&quot;failures&quot;:0,&quot;start&quot;:&quot;2025-01-21T14:36:46.071Z&quot;,&quot;end&quot;:&quot;2025-01-21T14:36:58.086Z&quot;,&quot;duration&quot;:12015,&quot;testsRegistered&quot;:174,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:1.1494252873563218,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;4e584e9b-a480-4179-b8c6-3da44ef2e54b&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;358b3a19-4e41-44e2-960b-309e2ce8dedc&quot;,&quot;title&quot;:&quot;NodePyATVDeviceEvent&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;36651777-706a-4e58-8a72-dcc50df891fc&quot;,&quot;title&quot;:&quot;get key()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get key() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event=new NodePyATVDeviceEvent({key:\&quot;genre\&quot;,old:\&quot;Jazz\&quot;,new:\&quot;Rock\&quot;,device:new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testinstance\&quot;})});assert.strictEqual(event.key,\&quot;genre\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c8b52c2-612d-41fc-b629-3bc22368477e&quot;,&quot;parentUUID&quot;:&quot;36651777-706a-4e58-8a72-dcc50df891fc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8c8b52c2-612d-41fc-b629-3bc22368477e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;294e142b-a6be-44cb-8a38-aeb212cd31d9&quot;,&quot;title&quot;:&quot;get oldValue()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get oldValue() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event=new NodePyATVDeviceEvent({key:\&quot;genre\&quot;,old:\&quot;Jazz\&quot;,new:\&quot;Rock\&quot;,device:new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testinstance\&quot;})});assert.strictEqual(event.oldValue,\&quot;Jazz\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e3b19417-c2c0-4068-8be7-c42404f9726b&quot;,&quot;parentUUID&quot;:&quot;294e142b-a6be-44cb-8a38-aeb212cd31d9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e3b19417-c2c0-4068-8be7-c42404f9726b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;85671248-46a5-4876-b496-90d5254448f3&quot;,&quot;title&quot;:&quot;get newValue()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get newValue() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event=new NodePyATVDeviceEvent({key:\&quot;genre\&quot;,old:\&quot;Jazz\&quot;,new:\&quot;Rock\&quot;,device:new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testinstance\&quot;})});assert.strictEqual(event.newValue,\&quot;Rock\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;47e27b07-dfd9-4fa5-bf8c-a6593c8084f2&quot;,&quot;parentUUID&quot;:&quot;85671248-46a5-4876-b496-90d5254448f3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;47e27b07-dfd9-4fa5-bf8c-a6593c8084f2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5da3e124-18b9-4949-839c-2dbb85d3ec50&quot;,&quot;title&quot;:&quot;get value()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get value() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event=new NodePyATVDeviceEvent({key:\&quot;genre\&quot;,old:\&quot;Jazz\&quot;,new:\&quot;Rock\&quot;,device:new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testinstance\&quot;})});assert.strictEqual(event.value,\&quot;Rock\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2d36b4c2-8a49-4e8a-8feb-c77507991481&quot;,&quot;parentUUID&quot;:&quot;5da3e124-18b9-4949-839c-2dbb85d3ec50&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2d36b4c2-8a49-4e8a-8feb-c77507991481&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ae18f44b-cd79-4ad5-8754-dc38ea784179&quot;,&quot;title&quot;:&quot;get device()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get device() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testinstance\&quot;});const event=new NodePyATVDeviceEvent({key:\&quot;genre\&quot;,old:\&quot;Jazz\&quot;,new:\&quot;Rock\&quot;,device});assert.deepEqual(event.device,device)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8192f580-ccda-41c5-bf21-ac8afba2b9d3&quot;,&quot;parentUUID&quot;:&quot;ae18f44b-cd79-4ad5-8754-dc38ea784179&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8192f580-ccda-41c5-bf21-ac8afba2b9d3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;75fae61d-6318-4506-abf3-3f45ddbde22c&quot;,&quot;title&quot;:&quot;NodePyATVDeviceEvents&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;8b0de1ad-21ab-449b-a889-f92f39f43fa7&quot;,&quot;title&quot;:&quot;applyStateAndEmitEvents()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should emit update:key event&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit update:key event&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});await new Promise(cb=&gt;{device.once(\&quot;update:title\&quot;,event=&gt;{assert.ok(event instanceof NodePyATVDeviceEvent);assert.strictEqual(event.key,\&quot;title\&quot;);assert.strictEqual(event.oldValue,null);assert.strictEqual(event.newValue,\&quot;My Movie\&quot;);assert.strictEqual(event.value,\&quot;My Movie\&quot;);assert.deepStrictEqual(event.device,device);cb(void 0)})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;91549602-5b35-4a66-a29e-bf04d059d306&quot;,&quot;parentUUID&quot;:&quot;8b0de1ad-21ab-449b-a889-f92f39f43fa7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit update event&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit update event&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});await new Promise(cb=&gt;{device.once(\&quot;update\&quot;,event=&gt;{assert.ok(event instanceof NodePyATVDeviceEvent);assert.strictEqual(event.key,\&quot;title\&quot;);assert.strictEqual(event.oldValue,null);assert.strictEqual(event.newValue,\&quot;My Movie\&quot;);assert.strictEqual(event.value,\&quot;My Movie\&quot;);assert.deepStrictEqual(event.device,device);cb(void 0)})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;514828e0-8320-47a1-b41f-5a45c3492d33&quot;,&quot;parentUUID&quot;:&quot;8b0de1ad-21ab-449b-a889-f92f39f43fa7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit update:key event before update&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit update:key event before update&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});const sort=[];await Promise.race([new Promise(cb=&gt;{device.once(\&quot;update\&quot;,()=&gt;{sort.push(\&quot;update\&quot;);cb(void 0)})}),new Promise(cb=&gt;{device.once(\&quot;update:title\&quot;,()=&gt;{sort.push(\&quot;update:title\&quot;);cb(void 0)})})]);assert.deepStrictEqual(sort,[\&quot;update:title\&quot;,\&quot;update\&quot;])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;93c4ffd4-3fee-4b88-b7ca-f526778252d9&quot;,&quot;parentUUID&quot;:&quot;8b0de1ad-21ab-449b-a889-f92f39f43fa7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error events on failures&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit error events on failures&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;failure\&quot;,datetime:\&quot;2021-11-24T21:13:36.424576+03:00\&quot;,exception:\&quot;invalid credentials: 321\&quot;,stacktrace:&#x27;Traceback (most recent call last):\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\&quot;, line 302, in appstart\\n    print(args.output(await _handle_command(args, abort_sem, loop)), flush=True)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\&quot;, line 196, in _handle_command\\n    atv = await connect(config, loop, protocol=Protocol.MRP)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/__init__.py\&quot;, line 96, in connect\\n    for setup_data in proto_methods.setup(\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\&quot;, line 192, in setup\\n    stream = AirPlayStream(config, service)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\&quot;, line 79, in __init__\\n    self._credentials: HapCredentials = parse_credentials(self.service.credentials)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/auth/hap_pairing.py\&quot;, line 139, in parse_credentials\\n    raise exceptions.InvalidCredentialsError(\&quot;invalid credentials: \&quot; + detail_string)\\npyatv.exceptions.InvalidCredentialsError: invalid credentials: 321\\n&#x27;})})});await new Promise(cb=&gt;{device.once(\&quot;error\&quot;,error=&gt;{assert.ok(error instanceof Error);assert.ok(error.toString().includes(\&quot;invalid credentials: 321\&quot;));cb(void 0)})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fe875c3a-5f66-4d18-9635-6bbc80b44ae0&quot;,&quot;parentUUID&quot;:&quot;8b0de1ad-21ab-449b-a889-f92f39f43fa7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not emit an update if new value is same as old one&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should not emit an update if new value is same as old one&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let spawnCounter=0;let eventCounter=0;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{if(spawnCounter===0){cp.onStdIn(()=&gt;cp.end())}cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;});spawnCounter++;if(spawnCounter&gt;=2){cp.end()}})});const listener=__name(()=&gt;{eventCounter++},\&quot;listener\&quot;);device.on(\&quot;update\&quot;,listener);await new Promise(cb=&gt;setTimeout(cb,0));await device.getState();device.off(\&quot;update\&quot;,listener);assert.strictEqual(spawnCounter,2);assert.strictEqual(eventCounter,1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ad0282b5-ecce-4ec4-b534-d4bd36e77caa&quot;,&quot;parentUUID&quot;:&quot;8b0de1ad-21ab-449b-a889-f92f39f43fa7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error event if event listener throws an exception&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit error event if event listener throws an exception&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});let callCounter=0;const error=new Error(\&quot;This is an error. Be nice.\&quot;);device.once(\&quot;error\&quot;,err=&gt;{assert.strictEqual(err,error);callCounter++});const listener=__name(()=&gt;{throw error},\&quot;listener\&quot;);device.on(\&quot;update\&quot;,listener);await new Promise(cb=&gt;setTimeout(cb,0));device.off(\&quot;update\&quot;,listener);assert.strictEqual(callCounter,1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cd8ec142-b063-426f-aa95-ddbd5ed5a73f&quot;,&quot;parentUUID&quot;:&quot;8b0de1ad-21ab-449b-a889-f92f39f43fa7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should also work with powerState&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should also work with powerState&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,datetime:new Date().toJSON(),power_state:\&quot;off\&quot;})})});await new Promise(cb=&gt;{device.once(\&quot;update:powerState\&quot;,event=&gt;{assert.ok(event instanceof NodePyATVDeviceEvent);assert.strictEqual(event.key,\&quot;powerState\&quot;);assert.strictEqual(event.oldValue,null);assert.strictEqual(event.newValue,\&quot;off\&quot;);assert.strictEqual(event.newValue,NodePyATVPowerState.off);assert.strictEqual(event.value,\&quot;off\&quot;);assert.strictEqual(event.value,NodePyATVPowerState.off);assert.deepStrictEqual(event.device,device);cb(void 0)})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ca18a0cb-2af3-4f89-ab01-8cae801d38e8&quot;,&quot;parentUUID&quot;:&quot;8b0de1ad-21ab-449b-a889-f92f39f43fa7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only one event for powerState changes&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should only one event for powerState changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,datetime:new Date().toJSON(),power_state:\&quot;off\&quot;});cp.end()})});let counter=0;device.on(\&quot;update\&quot;,event=&gt;{assert.ok(event instanceof NodePyATVDeviceEvent);assert.strictEqual(event.key,\&quot;powerState\&quot;);assert.strictEqual(event.oldValue,null);assert.strictEqual(event.newValue,\&quot;off\&quot;);assert.strictEqual(event.newValue,NodePyATVPowerState.off);assert.strictEqual(event.value,\&quot;off\&quot;);assert.strictEqual(event.value,NodePyATVPowerState.off);assert.deepStrictEqual(event.device,device);counter++});await new Promise(cb=&gt;setTimeout(cb,10));assert.strictEqual(counter,1);device.removeAllListeners(\&quot;update\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9ef20cc1-3092-4c97-8648-de3ef2dcfc1c&quot;,&quot;parentUUID&quot;:&quot;8b0de1ad-21ab-449b-a889-f92f39f43fa7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only one event for focusState changes&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should only one event for focusState changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,datetime:new Date().toJSON(),focus_state:\&quot;unfocused\&quot;});cp.end()})});let counter=0;device.on(\&quot;update\&quot;,event=&gt;{assert.ok(event instanceof NodePyATVDeviceEvent);assert.strictEqual(event.key,\&quot;focusState\&quot;);assert.strictEqual(event.oldValue,null);assert.strictEqual(event.newValue,\&quot;unfocused\&quot;);assert.strictEqual(event.newValue,NodePyATVFocusState.unfocused);assert.strictEqual(event.value,\&quot;unfocused\&quot;);assert.strictEqual(event.value,NodePyATVFocusState.unfocused);assert.deepStrictEqual(event.device,device);counter++});await new Promise(cb=&gt;setTimeout(cb,10));assert.strictEqual(counter,1);device.removeAllListeners(\&quot;update\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41627705-ce39-4ed5-9a37-b43ad2202c75&quot;,&quot;parentUUID&quot;:&quot;8b0de1ad-21ab-449b-a889-f92f39f43fa7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only one event for outputDevices changes&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should only one event for outputDevices changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,datetime:new Date().toJSON(),output_devices:[{name:\&quot;Living room\&quot;,identifier:\&quot;AAAAAAAA-BBBB-CCCC-DDDD-EEEEEEEEEEEE\&quot;}]});cp.end()})});let counter=0;device.on(\&quot;update\&quot;,event=&gt;{assert.ok(event instanceof NodePyATVDeviceEvent);assert.strictEqual(event.key,\&quot;outputDevices\&quot;);assert.strictEqual(event.oldValue,null);assert.deepStrictEqual(event.newValue,[{name:\&quot;Living room\&quot;,identifier:\&quot;AAAAAAAA-BBBB-CCCC-DDDD-EEEEEEEEEEEE\&quot;}]);assert.deepStrictEqual(event.value,[{name:\&quot;Living room\&quot;,identifier:\&quot;AAAAAAAA-BBBB-CCCC-DDDD-EEEEEEEEEEEE\&quot;}]);assert.deepStrictEqual(event.device,device);counter++});await new Promise(cb=&gt;setTimeout(cb,10));assert.strictEqual(counter,1);device.removeAllListeners(\&quot;update\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;029b0f57-a84f-4e77-9734-d9b918f57ee4&quot;,&quot;parentUUID&quot;:&quot;8b0de1ad-21ab-449b-a889-f92f39f43fa7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only one event for volume changes&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should only one event for volume changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,datetime:new Date().toJSON(),volume:20});cp.end()})});let counter=0;device.on(\&quot;update\&quot;,event=&gt;{assert.ok(event instanceof NodePyATVDeviceEvent);assert.strictEqual(event.key,\&quot;volume\&quot;);assert.strictEqual(event.oldValue,null);assert.strictEqual(event.newValue,20);assert.strictEqual(event.value,20);assert.deepStrictEqual(event.device,device);counter++});await new Promise(cb=&gt;setTimeout(cb,10));assert.strictEqual(counter,1);device.removeAllListeners(\&quot;update\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3f6dee7d-b399-4aad-8897-4e3f81ed0de7&quot;,&quot;parentUUID&quot;:&quot;8b0de1ad-21ab-449b-a889-f92f39f43fa7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not trigger any events for newly added fields&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should not trigger any events for newly added fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,datetime:new Date().toJSON(),foo:\&quot;bar\&quot;});cp.end()})});device.on(\&quot;update\&quot;,event=&gt;{assert.fail(`Got an update event for a new field: ${event}`)});await new Promise(cb=&gt;setTimeout(cb,10));device.removeAllListeners(\&quot;update\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6b142479-debf-413c-9a86-b47b8f98e934&quot;,&quot;parentUUID&quot;:&quot;8b0de1ad-21ab-449b-a889-f92f39f43fa7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;91549602-5b35-4a66-a29e-bf04d059d306&quot;,&quot;514828e0-8320-47a1-b41f-5a45c3492d33&quot;,&quot;93c4ffd4-3fee-4b88-b7ca-f526778252d9&quot;,&quot;fe875c3a-5f66-4d18-9635-6bbc80b44ae0&quot;,&quot;ad0282b5-ecce-4ec4-b534-d4bd36e77caa&quot;,&quot;cd8ec142-b063-426f-aa95-ddbd5ed5a73f&quot;,&quot;ca18a0cb-2af3-4f89-ab01-8cae801d38e8&quot;,&quot;9ef20cc1-3092-4c97-8648-de3ef2dcfc1c&quot;,&quot;41627705-ce39-4ed5-9a37-b43ad2202c75&quot;,&quot;029b0f57-a84f-4e77-9734-d9b918f57ee4&quot;,&quot;3f6dee7d-b399-4aad-8897-4e3f81ed0de7&quot;,&quot;6b142479-debf-413c-9a86-b47b8f98e934&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:64,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0ca5745e-5368-443a-8a07-cc5e876a37a7&quot;,&quot;title&quot;:&quot;start|stopListening()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should emit error if spawn fails&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should emit error if spawn fails&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const error=new Error;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.error(error).end()})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);device.on(\&quot;update\&quot;,listener);await new Promise(cb=&gt;{device.once(\&quot;error\&quot;,err=&gt;{assert.strictEqual(err,error);cb(void 0)})});device.off(\&quot;update\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7260d0bc-2b8d-4aed-b13c-e1d715acf9e0&quot;,&quot;parentUUID&quot;:&quot;0ca5745e-5368-443a-8a07-cc5e876a37a7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error on stderr data&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should emit error on stderr data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.stderr(\&quot;Hello World!\&quot;).end()})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);device.on(\&quot;update\&quot;,listener);await new Promise(cb=&gt;{device.once(\&quot;error\&quot;,err=&gt;{assert.ok(err instanceof Error);assert.ok(err.toString().includes(\&quot;Got stderr output from pyatv: Hello World!\&quot;));cb(void 0)})});device.off(\&quot;update\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4d8d96f4-e8c6-41c4-b9e9-2d7fdc6536eb&quot;,&quot;parentUUID&quot;:&quot;0ca5745e-5368-443a-8a07-cc5e876a37a7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error if stdout is not valid json&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should emit error if stdout is not valid json&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.stdout(\&quot;#\&quot;).end()})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);device.on(\&quot;update\&quot;,listener);await new Promise(cb=&gt;{device.once(\&quot;error\&quot;,err=&gt;{assert.ok(err instanceof Error);assert.ok(err.toString().includes(\&quot;Unable to parse stdout json: SyntaxError\&quot;));cb(void 0)})});device.off(\&quot;update\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;983e1f96-cad3-4772-8772-512c539685a5&quot;,&quot;parentUUID&quot;:&quot;0ca5745e-5368-443a-8a07-cc5e876a37a7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should restart the process if it gets killed&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should restart the process if it gets killed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;pending&quot;,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9e47e4dd-aaac-419d-af3b-789ac8e3506a&quot;,&quot;parentUUID&quot;:&quot;0ca5745e-5368-443a-8a07-cc5e876a37a7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7260d0bc-2b8d-4aed-b13c-e1d715acf9e0&quot;,&quot;4d8d96f4-e8c6-41c4-b9e9-2d7fdc6536eb&quot;,&quot;983e1f96-cad3-4772-8772-512c539685a5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;9e47e4dd-aaac-419d-af3b-789ac8e3506a&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4541b239-3273-4166-9007-f1de62105e5a&quot;,&quot;title&quot;:&quot;addListener() / removeAllListeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work without any exceptions&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents addListener() / removeAllListeners() should work without any exceptions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);device.addListener(\&quot;update\&quot;,listener);device.removeAllListeners(\&quot;update\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d580c090-7542-4e0d-b4a1-2e509f6a1ba4&quot;,&quot;parentUUID&quot;:&quot;4541b239-3273-4166-9007-f1de62105e5a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d580c090-7542-4e0d-b4a1-2e509f6a1ba4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;78ce353f-2493-46c4-b4bf-3d0c2abe2c79&quot;,&quot;title&quot;:&quot;emit()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents emit() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end())})});const event=new NodePyATVDeviceEvent({key:\&quot;dateTime\&quot;,old:\&quot;foo\&quot;,new:\&quot;bar\&quot;,device});let executions=0;device.once(\&quot;test\&quot;,e=&gt;{executions++;assert.strictEqual(e,event);assert.strictEqual(executions,1);done()});device.emit(\&quot;test\&quot;,event)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;08563c9d-f0c5-4d4b-a16a-74bbb61afcfe&quot;,&quot;parentUUID&quot;:&quot;78ce353f-2493-46c4-b4bf-3d0c2abe2c79&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;08563c9d-f0c5-4d4b-a16a-74bbb61afcfe&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f548b107-a87d-4662-bfb5-fc23de30ccfe&quot;,&quot;title&quot;:&quot;eventNames()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents eventNames() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end())})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);device.on(\&quot;test\&quot;,listener);assert.deepStrictEqual(device.eventNames(),[\&quot;test\&quot;]);device.off(\&quot;test\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;de7615d7-3b2c-4614-90bb-2841193f81cb&quot;,&quot;parentUUID&quot;:&quot;f548b107-a87d-4662-bfb5-fc23de30ccfe&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;de7615d7-3b2c-4614-90bb-2841193f81cb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;18dcf5e7-f90e-4ae4-8168-65411a25b931&quot;,&quot;title&quot;:&quot;getMaxListeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents getMaxListeners() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end())})});const result=device.getMaxListeners();assert.ok(typeof result,\&quot;number\&quot;);assert.ok(result&gt;=10)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3c6166fe-ce49-4780-b201-efe6df6ed801&quot;,&quot;parentUUID&quot;:&quot;18dcf5e7-f90e-4ae4-8168-65411a25b931&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3c6166fe-ce49-4780-b201-efe6df6ed801&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f27529fb-b0f2-42db-8496-685a2a2445f2&quot;,&quot;title&quot;:&quot;listenerCount()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents listenerCount() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end())})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);assert.deepStrictEqual(device.listenerCount(\&quot;test\&quot;),0);device.on(\&quot;test\&quot;,listener);assert.deepStrictEqual(device.listenerCount(\&quot;test\&quot;),1);device.off(\&quot;test\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8828f86-974e-4b6e-9403-a47667c6be24&quot;,&quot;parentUUID&quot;:&quot;f27529fb-b0f2-42db-8496-685a2a2445f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c8828f86-974e-4b6e-9403-a47667c6be24&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e6546b99-f9a1-4abc-afbf-9eb34b2ff5af&quot;,&quot;title&quot;:&quot;listeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents listeners() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end())})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);assert.deepStrictEqual(device.listeners(\&quot;test\&quot;).length,0);device.on(\&quot;test\&quot;,listener);assert.deepStrictEqual(device.listeners(\&quot;test\&quot;).length,1);assert.deepStrictEqual(device.listeners(\&quot;test\&quot;)[0],listener);device.off(\&quot;test\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;372011e9-427e-4e82-a021-bb21d8a4bcce&quot;,&quot;parentUUID&quot;:&quot;e6546b99-f9a1-4abc-afbf-9eb34b2ff5af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;372011e9-427e-4e82-a021-bb21d8a4bcce&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0a000532-c228-47bc-bc06-c270fa50dd23&quot;,&quot;title&quot;:&quot;prependListener()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents prependListener() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});const listener=__name(()=&gt;{device.removeAllListeners(\&quot;update\&quot;);done()},\&quot;listener\&quot;);device.prependListener(\&quot;update\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;19d14c58-df17-450b-b65f-8a7bc4f765b6&quot;,&quot;parentUUID&quot;:&quot;0a000532-c228-47bc-bc06-c270fa50dd23&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;19d14c58-df17-450b-b65f-8a7bc4f765b6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c28f4475-a7f0-40f0-8476-4284886b2104&quot;,&quot;title&quot;:&quot;prependOnceListener()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents prependOnceListener() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});device.prependOnceListener(\&quot;update\&quot;,()=&gt;done())&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4ab48426-8812-48e9-b538-f06b9fb24d37&quot;,&quot;parentUUID&quot;:&quot;c28f4475-a7f0-40f0-8476-4284886b2104&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4ab48426-8812-48e9-b538-f06b9fb24d37&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b42e94be-46ac-4405-a646-ba891ac69a21&quot;,&quot;title&quot;:&quot;rawListeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents rawListeners() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end())})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);assert.deepStrictEqual(device.rawListeners(\&quot;test\&quot;).length,0);device.on(\&quot;test\&quot;,listener);assert.deepStrictEqual(device.rawListeners(\&quot;test\&quot;).length,1);assert.deepStrictEqual(device.rawListeners(\&quot;test\&quot;)[0],listener);device.off(\&quot;test\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7cd1c242-7832-47e7-86d1-1a8e89777310&quot;,&quot;parentUUID&quot;:&quot;b42e94be-46ac-4405-a646-ba891ac69a21&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7cd1c242-7832-47e7-86d1-1a8e89777310&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f32730ea-7a45-49ef-8cc1-769fb7edca45&quot;,&quot;title&quot;:&quot;removeListener()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work without any exceptions&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents removeListener() should work without any exceptions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);device.addListener(\&quot;update\&quot;,listener);assert.deepStrictEqual(device.listenerCount(\&quot;update\&quot;),1);device.removeListener(\&quot;update\&quot;,listener);assert.deepStrictEqual(device.listenerCount(\&quot;update\&quot;),0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;372bc18e-f262-41da-9686-be2c99afab8c&quot;,&quot;parentUUID&quot;:&quot;f32730ea-7a45-49ef-8cc1-769fb7edca45&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;372bc18e-f262-41da-9686-be2c99afab8c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e0268fff-336e-4724-a101-136f9b019df4&quot;,&quot;title&quot;:&quot;NodePyATVDevice&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;7c560f72-d1f1-4b72-9d09-35f2abb99efc&quot;,&quot;title&quot;:&quot;get name()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the name&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get name() should return the name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;});assert.strictEqual(device.name,\&quot;My Testdevice\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3f7b8caf-199e-4245-bdfc-4cb5b3484475&quot;,&quot;parentUUID&quot;:&quot;7c560f72-d1f1-4b72-9d09-35f2abb99efc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3f7b8caf-199e-4245-bdfc-4cb5b3484475&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;db1f433f-1829-4cb9-8eea-5d69f06ed11b&quot;,&quot;title&quot;:&quot;get host()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the host&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get host() should return the host&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;});assert.strictEqual(device.host,\&quot;192.168.178.2\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f1828b87-517e-4556-bbb6-dfe9d66c75b9&quot;,&quot;parentUUID&quot;:&quot;db1f433f-1829-4cb9-8eea-5d69f06ed11b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f1828b87-517e-4556-bbb6-dfe9d66c75b9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;defefefa-5d23-4b10-a1de-d6dd3c52911a&quot;,&quot;title&quot;:&quot;get id()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the id&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get id() should return the id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,id:\&quot;*****\&quot;});assert.strictEqual(device.id,\&quot;*****\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;587e2afd-62e1-42fc-b7a0-6fdd6ff0ed48&quot;,&quot;parentUUID&quot;:&quot;defefefa-5d23-4b10-a1de-d6dd3c52911a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;587e2afd-62e1-42fc-b7a0-6fdd6ff0ed48&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ebe698a5-7f2d-457d-a7d4-101078f7cef2&quot;,&quot;title&quot;:&quot;get allIDs()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return all the IDs&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get allIDs() should return all the IDs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,id:\&quot;*****\&quot;,allIDs:[\&quot;some_id_1\&quot;,\&quot;some_id_2\&quot;,\&quot;some_id_3\&quot;]});assert.deepStrictEqual(device.allIDs,[\&quot;some_id_1\&quot;,\&quot;some_id_2\&quot;,\&quot;some_id_3\&quot;])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3dae6f74-e3a1-4669-ac1d-255363eda89a&quot;,&quot;parentUUID&quot;:&quot;ebe698a5-7f2d-457d-a7d4-101078f7cef2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3dae6f74-e3a1-4669-ac1d-255363eda89a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;95180d4f-65cb-44cd-baa0-0c857fc4a769&quot;,&quot;title&quot;:&quot;get protocol()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the protocol&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get protocol() should return the protocol&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,protocol:NodePyATVProtocol.airplay});assert.strictEqual(device.protocol,NodePyATVProtocol.airplay)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;34636a13-ec16-4815-ae6c-2a9987466e5c&quot;,&quot;parentUUID&quot;:&quot;95180d4f-65cb-44cd-baa0-0c857fc4a769&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;34636a13-ec16-4815-ae6c-2a9987466e5c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;de6ef89d-c44d-4c4d-8113-3acb4d4395a0&quot;,&quot;title&quot;:&quot;get mac()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the mac&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get mac() should return the mac&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,mac:\&quot;AA:BB:CC:DD:EE:FF\&quot;});assert.strictEqual(device.mac,\&quot;AA:BB:CC:DD:EE:FF\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2017c608-86c1-42c1-a9a0-9d546a1f1ab9&quot;,&quot;parentUUID&quot;:&quot;de6ef89d-c44d-4c4d-8113-3acb4d4395a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2017c608-86c1-42c1-a9a0-9d546a1f1ab9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;385c6189-58bc-4ac0-8515-ef63ba387049&quot;,&quot;title&quot;:&quot;get model()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the model if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get model() should return the model if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;Vardagsrum\&quot;,host:\&quot;10.0.10.81\&quot;,id:\&quot;xxx\&quot;,model:\&quot;Gen4K\&quot;});assert.strictEqual(device.model,\&quot;Gen4K\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4694790c-d2bd-4097-ba33-d90b739c8ef1&quot;,&quot;parentUUID&quot;:&quot;385c6189-58bc-4ac0-8515-ef63ba387049&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get model() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;Vardagsrum\&quot;,host:\&quot;10.0.10.81\&quot;});assert.strictEqual(device.model,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9c2183b2-ab56-453a-80ef-9632a46a2809&quot;,&quot;parentUUID&quot;:&quot;385c6189-58bc-4ac0-8515-ef63ba387049&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4694790c-d2bd-4097-ba33-d90b739c8ef1&quot;,&quot;9c2183b2-ab56-453a-80ef-9632a46a2809&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ff2bd4f8-c8b7-4f1b-a51f-8acd52fb188d&quot;,&quot;title&quot;:&quot;get modelName()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the model name if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get modelName() should return the model name if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;Vardagsrum\&quot;,host:\&quot;10.0.10.81\&quot;,id:\&quot;xxx\&quot;,modelName:\&quot;Apple TV 4K\&quot;});assert.strictEqual(device.modelName,\&quot;Apple TV 4K\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6f91e4b0-634a-4bd8-b1a6-53f9e799662f&quot;,&quot;parentUUID&quot;:&quot;ff2bd4f8-c8b7-4f1b-a51f-8acd52fb188d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get modelName() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;Vardagsrum\&quot;,host:\&quot;10.0.10.81\&quot;});assert.strictEqual(device.modelName,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4a3346df-332d-45ef-8553-bc6d6552c50b&quot;,&quot;parentUUID&quot;:&quot;ff2bd4f8-c8b7-4f1b-a51f-8acd52fb188d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6f91e4b0-634a-4bd8-b1a6-53f9e799662f&quot;,&quot;4a3346df-332d-45ef-8553-bc6d6552c50b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0d35aa6e-95f7-44d1-8488-c35154f9e77e&quot;,&quot;title&quot;:&quot;get os()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the operating system if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get os() should return the operating system if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;Vardagsrum\&quot;,host:\&quot;10.0.10.81\&quot;,id:\&quot;xxx\&quot;,os:\&quot;TvOS\&quot;});assert.strictEqual(device.os,\&quot;TvOS\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d815a96d-9074-4767-93ea-75ea951e6c8a&quot;,&quot;parentUUID&quot;:&quot;0d35aa6e-95f7-44d1-8488-c35154f9e77e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get os() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;Vardagsrum\&quot;,host:\&quot;10.0.10.81\&quot;});assert.strictEqual(device.os,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b7dcbb29-3855-4a6b-8640-e447ddea5b89&quot;,&quot;parentUUID&quot;:&quot;0d35aa6e-95f7-44d1-8488-c35154f9e77e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d815a96d-9074-4767-93ea-75ea951e6c8a&quot;,&quot;b7dcbb29-3855-4a6b-8640-e447ddea5b89&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;41e5fe17-472d-440d-be2f-b7914e994b43&quot;,&quot;title&quot;:&quot;get version()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the version if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get version() should return the version if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;Vardagsrum\&quot;,host:\&quot;10.0.10.81\&quot;,id:\&quot;xxx\&quot;,version:\&quot;15.5.1\&quot;});assert.strictEqual(device.version,\&quot;15.5.1\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ec58ee0b-c581-4b23-b47f-2dc3e6efd956&quot;,&quot;parentUUID&quot;:&quot;41e5fe17-472d-440d-be2f-b7914e994b43&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get version() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;Vardagsrum\&quot;,host:\&quot;10.0.10.81\&quot;});assert.strictEqual(device.version,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9e7a1684-64db-4fa0-9438-938f656a3dd3&quot;,&quot;parentUUID&quot;:&quot;41e5fe17-472d-440d-be2f-b7914e994b43&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ec58ee0b-c581-4b23-b47f-2dc3e6efd956&quot;,&quot;9e7a1684-64db-4fa0-9438-938f656a3dd3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;edb251f9-6fb6-407d-89d9-5b9d7c675c84&quot;,&quot;title&quot;:&quot;get services()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the services if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get services() should return the services if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;Vardagsrum\&quot;,host:\&quot;10.0.10.81\&quot;,id:\&quot;xxx\&quot;,services:[{protocol:NodePyATVProtocol.mrp,port:49152},{protocol:NodePyATVProtocol.airplay,port:7e3}]});assert.deepStrictEqual(device.services,[{protocol:\&quot;mrp\&quot;,port:49152},{protocol:\&quot;airplay\&quot;,port:7e3}])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f7e43dcc-334b-4669-895e-65abc738f14c&quot;,&quot;parentUUID&quot;:&quot;edb251f9-6fb6-407d-89d9-5b9d7c675c84&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get services() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;Vardagsrum\&quot;,host:\&quot;10.0.10.81\&quot;});assert.strictEqual(device.services,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fa3f7fed-d216-4afe-bfd5-d7b5e75a5b27&quot;,&quot;parentUUID&quot;:&quot;edb251f9-6fb6-407d-89d9-5b9d7c675c84&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f7e43dcc-334b-4669-895e-65abc738f14c&quot;,&quot;fa3f7fed-d216-4afe-bfd5-d7b5e75a5b27&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1f596d2c-41a2-48ea-b8f1-20883428dbc4&quot;,&quot;title&quot;:&quot;get debug()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return true if set to true&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get debug() should return true if set to true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,debug:true});assert.strictEqual(device.debug,true)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;760857a1-8e66-4636-a388-6de9f37858cb&quot;,&quot;parentUUID&quot;:&quot;1f596d2c-41a2-48ea-b8f1-20883428dbc4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return fn if set to custom function&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get debug() should return fn if set to custom function&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fn=__name(()=&gt;{},\&quot;fn\&quot;);const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,debug:fn});assert.strictEqual(device.debug,fn)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bda04fdd-b672-4d10-b35c-fbcc453d46cc&quot;,&quot;parentUUID&quot;:&quot;1f596d2c-41a2-48ea-b8f1-20883428dbc4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return false if unset&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get debug() should return false if unset&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;});assert.strictEqual(device.debug,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7714a098-cf24-4cfe-9730-b2bd9bee6d6d&quot;,&quot;parentUUID&quot;:&quot;1f596d2c-41a2-48ea-b8f1-20883428dbc4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;760857a1-8e66-4636-a388-6de9f37858cb&quot;,&quot;bda04fdd-b672-4d10-b35c-fbcc453d46cc&quot;,&quot;7714a098-cf24-4cfe-9730-b2bd9bee6d6d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d3f8f05e-ef8c-4249-989d-5a40054653ab&quot;,&quot;title&quot;:&quot;set debug()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work for debug = true&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;});assert.strictEqual(device.debug,void 0);device.debug=true;assert.strictEqual(device.debug,true)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8783fccd-ee02-40a8-86e4-084587a62508&quot;,&quot;parentUUID&quot;:&quot;d3f8f05e-ef8c-4249-989d-5a40054653ab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for debug = undefined&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = undefined&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,debug:true});assert.strictEqual(device.debug,true);device.debug=void 0;assert.strictEqual(device.debug,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;286d035a-c64c-4ee5-9280-4bb36c641457&quot;,&quot;parentUUID&quot;:&quot;d3f8f05e-ef8c-4249-989d-5a40054653ab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for debug = undefined&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = undefined&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,debug:true});assert.strictEqual(device.debug,true);device.debug=void 0;assert.strictEqual(device.debug,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6d88cbd2-8e78-4fc1-90ed-2d28740d4872&quot;,&quot;parentUUID&quot;:&quot;d3f8f05e-ef8c-4249-989d-5a40054653ab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for debug = fn&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = fn&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;});const fn=__name(()=&gt;{},\&quot;fn\&quot;);assert.strictEqual(device.debug,void 0);device.debug=fn;assert.strictEqual(device.debug,fn)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e78d6717-b1af-48d2-aa77-c515d901376b&quot;,&quot;parentUUID&quot;:&quot;d3f8f05e-ef8c-4249-989d-5a40054653ab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8783fccd-ee02-40a8-86e4-084587a62508&quot;,&quot;286d035a-c64c-4ee5-9280-4bb36c641457&quot;,&quot;6d88cbd2-8e78-4fc1-90ed-2d28740d4872&quot;,&quot;e78d6717-b1af-48d2-aa77-c515d901376b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;93feb48b-329b-427b-bcd9-4e97cc73b549&quot;,&quot;title&quot;:&quot;toJSON()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a object representation&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice toJSON() should return a object representation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,id:\&quot;*****\&quot;,protocol:NodePyATVProtocol.airplay});assert.deepEqual(device.toJSON(),{name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,id:\&quot;*****\&quot;,protocol:NodePyATVProtocol.airplay})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b33d35de-abc4-478c-8fcf-f923e74d9b11&quot;,&quot;parentUUID&quot;:&quot;93feb48b-329b-427b-bcd9-4e97cc73b549&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should be possible to create a new device from this&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice toJSON() should be possible to create a new device from this&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const config={name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,id:\&quot;*****\&quot;,protocol:NodePyATVProtocol.airplay};const deviceA=new NodePyATVDevice(config);const deviceB=new NodePyATVDevice(deviceA.toJSON());assert.deepEqual(deviceB.toJSON(),config)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a81c8639-08a1-4982-a3a6-9e4854b2780b&quot;,&quot;parentUUID&quot;:&quot;93feb48b-329b-427b-bcd9-4e97cc73b549&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b33d35de-abc4-478c-8fcf-f923e74d9b11&quot;,&quot;a81c8639-08a1-4982-a3a6-9e4854b2780b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ddd14361-945e-419d-8bc6-05321b13487f&quot;,&quot;title&quot;:&quot;toString()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice toString() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;});assert.strictEqual(device.toString(),\&quot;NodePyATVDevice(My Testdevice, 192.168.178.2)\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;427ef6bb-3f5f-4661-9a2f-bcd586952023&quot;,&quot;parentUUID&quot;:&quot;ddd14361-945e-419d-8bc6-05321b13487f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;427ef6bb-3f5f-4661-9a2f-bcd586952023&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e4a2ca50-badd-42c2-9732-99acd00bbb74&quot;,&quot;title&quot;:&quot;getState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work [I]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should work [I]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;pending&quot;,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;be113518-cc7b-4097-8098-bc2a5fccfded&quot;,&quot;parentUUID&quot;:&quot;e4a2ca50-badd-42c2-9732-99acd00bbb74&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,datetime:\&quot;2020-11-07T22:38:43.608030+01:00\&quot;,hash:\&quot;100e0ab6-6ff5-4199-9c04-a7107ff78712\&quot;,media_type:\&quot;video\&quot;,device_state:\&quot;playing\&quot;,title:\&quot;Solo: A Star Wars Story\&quot;,artist:null,album:null,genre:null,total_time:8097,position:27,shuffle:\&quot;off\&quot;,repeat:\&quot;off\&quot;,app:\&quot;Disney+\&quot;,app_id:\&quot;com.disney.disneyplus\&quot;})})});const result=await device.getState();assert.deepStrictEqual(result,{dateTime:new Date(\&quot;2020-11-07T22:38:43.608030+01:00\&quot;),hash:\&quot;100e0ab6-6ff5-4199-9c04-a7107ff78712\&quot;,mediaType:NodePyATVMediaType.video,deviceState:NodePyATVDeviceState.playing,focusState:null,title:\&quot;Solo: A Star Wars Story\&quot;,artist:null,album:null,genre:null,totalTime:8097,volume:null,position:27,shuffle:NodePyATVShuffleState.off,repeat:NodePyATVRepeatState.off,app:\&quot;Disney+\&quot;,appId:\&quot;com.disney.disneyplus\&quot;,powerState:null,outputDevices:null,contentIdentifier:null,iTunesStoreIdentifier:null,episodeNumber:null,seasonNumber:null,seriesName:null})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3b90457e-0425-4c71-9a3a-914445668012&quot;,&quot;parentUUID&quot;:&quot;e4a2ca50-badd-42c2-9732-99acd00bbb74&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should reject with error if pyatv fails&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should reject with error if pyatv fails&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;failure\&quot;,datetime:\&quot;2021-11-24T21:13:36.424576+03:00\&quot;,exception:\&quot;invalid credentials: 321\&quot;,stacktrace:&#x27;Traceback (most recent call last):\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\&quot;, line 302, in appstart\\n    print(args.output(await _handle_command(args, abort_sem, loop)), flush=True)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\&quot;, line 196, in _handle_command\\n    atv = await connect(config, loop, protocol=Protocol.MRP)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/__init__.py\&quot;, line 96, in connect\\n    for setup_data in proto_methods.setup(\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\&quot;, line 192, in setup\\n    stream = AirPlayStream(config, service)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\&quot;, line 79, in __init__\\n    self._credentials: HapCredentials = parse_credentials(self.service.credentials)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/auth/hap_pairing.py\&quot;, line 139, in parse_credentials\\n    raise exceptions.InvalidCredentialsError(\&quot;invalid credentials: \&quot; + detail_string)\\npyatv.exceptions.InvalidCredentialsError: invalid credentials: 321\\n&#x27;})})});assert.rejects(async()=&gt;{await device.getState()},/Got pyatv Error: invalid credentials: 321/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0e3a955c-570e-45e4-91b3-c2e3992aac61&quot;,&quot;parentUUID&quot;:&quot;e4a2ca50-badd-42c2-9732-99acd00bbb74&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should cache requests for a bit&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should cache requests for a bit&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let executions=0;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{executions++;cp.end({result:\&quot;success\&quot;,datetime:new Date().toJSON(),hash:\&quot;100e0ab6-6ff5-4199-9c04-a7107ff78712\&quot;,media_type:\&quot;video\&quot;,device_state:\&quot;playing\&quot;,title:\&quot;Solo: A Star Wars Story\&quot;,artist:null,album:null,genre:null,total_time:8097,position:27,shuffle:\&quot;off\&quot;,repeat:\&quot;off\&quot;,app:\&quot;Disney+\&quot;,app_id:\&quot;com.disney.disneyplus\&quot;})})});const firstResult=await device.getState();const secondResult=await device.getState();assert.strictEqual(firstResult.dateTime,secondResult.dateTime);assert.strictEqual(executions,1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3adce437-3251-49a8-a0ec-276ad19f1c17&quot;,&quot;parentUUID&quot;:&quot;e4a2ca50-badd-42c2-9732-99acd00bbb74&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update the position if cache was used&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should update the position if cache was used&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,datetime:new Date(new Date().getTime()-1e3).toJSON(),hash:\&quot;100e0ab6-6ff5-4199-9c04-a7107ff78712\&quot;,media_type:\&quot;video\&quot;,device_state:\&quot;playing\&quot;,title:\&quot;Solo: A Star Wars Story\&quot;,artist:null,album:null,genre:null,total_time:8097,position:27,shuffle:\&quot;off\&quot;,repeat:\&quot;off\&quot;,app:\&quot;Disney+\&quot;,app_id:\&quot;com.disney.disneyplus\&quot;})})});const firstResult=await device.getState();assert.strictEqual(firstResult.position,27);const secondResult=await device.getState();assert.ok(secondResult.position);assert.ok(secondResult.position&gt;27,`Position should be &gt; 27, was ${secondResult.position}`);assert.ok(secondResult.position&lt;30,`Position should be &gt; 27, was ${secondResult.position}`)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fd03eac5-f9ac-4140-8a0d-66474094a239&quot;,&quot;parentUUID&quot;:&quot;e4a2ca50-badd-42c2-9732-99acd00bbb74&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3b90457e-0425-4c71-9a3a-914445668012&quot;,&quot;0e3a955c-570e-45e4-91b3-c2e3992aac61&quot;,&quot;3adce437-3251-49a8-a0ec-276ad19f1c17&quot;,&quot;fd03eac5-f9ac-4140-8a0d-66474094a239&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;be113518-cc7b-4097-8098-bc2a5fccfded&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7ec80297-0949-4e51-9265-e8fb93ca4d1c&quot;,&quot;title&quot;:&quot;clearState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice clearState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let executions=0;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{executions++;cp.end({result:\&quot;success\&quot;,datetime:\&quot;2020-11-07T22:38:43.608030+01:00\&quot;,title:\&quot;Solo: A Star Wars Story\&quot;})})});assert.deepStrictEqual(await device.getTitle(),\&quot;Solo: A Star Wars Story\&quot;);device.clearState();assert.deepStrictEqual(await device.getTitle(),\&quot;Solo: A Star Wars Story\&quot;);assert.strictEqual(executions,2)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a1033065-6db3-41a0-b98b-dfd5975b5b22&quot;,&quot;parentUUID&quot;:&quot;7ec80297-0949-4e51-9265-e8fb93ca4d1c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a1033065-6db3-41a0-b98b-dfd5975b5b22&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0008ec13-821e-4f8c-9bf5-fbe3f7848772&quot;,&quot;title&quot;:&quot;getDateTime()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getDateTime() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,datetime:new Date().toJSON()})})});const result=await device.getDateTime();assert.ok(result instanceof Date)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8fc5a50a-2038-4164-b727-c55e22954406&quot;,&quot;parentUUID&quot;:&quot;0008ec13-821e-4f8c-9bf5-fbe3f7848772&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8fc5a50a-2038-4164-b727-c55e22954406&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;56483f68-8727-4de3-82df-ae45535ed5e7&quot;,&quot;title&quot;:&quot;getHash()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getHash() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,hash:\&quot;12345\&quot;})})});const result=await device.getHash();assert.strictEqual(result,\&quot;12345\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1b628e17-2a10-41c4-b8a2-3adc5fdcd8d5&quot;,&quot;parentUUID&quot;:&quot;56483f68-8727-4de3-82df-ae45535ed5e7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1b628e17-2a10-41c4-b8a2-3adc5fdcd8d5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d3eae506-6c87-4b8e-918e-58e348b52a64&quot;,&quot;title&quot;:&quot;getMediaType()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getMediaType() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,media_type:\&quot;video\&quot;})})});const result=await device.getMediaType();assert.deepStrictEqual(result,NodePyATVMediaType.video);assert.deepStrictEqual(result,\&quot;video\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1fd84066-36f6-4211-a8da-a7a56b314634&quot;,&quot;parentUUID&quot;:&quot;d3eae506-6c87-4b8e-918e-58e348b52a64&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1fd84066-36f6-4211-a8da-a7a56b314634&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;13b0ad10-28de-4728-9d38-47e75e8965b3&quot;,&quot;title&quot;:&quot;getDeviceState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getDeviceState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,device_state:\&quot;seeking\&quot;})})});const result=await device.getDeviceState();assert.deepStrictEqual(result,NodePyATVDeviceState.seeking);assert.deepStrictEqual(result,\&quot;seeking\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ec0e656e-8b43-4385-9929-5e950a0b2515&quot;,&quot;parentUUID&quot;:&quot;13b0ad10-28de-4728-9d38-47e75e8965b3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ec0e656e-8b43-4385-9929-5e950a0b2515&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f1565361-6f34-48e9-9ac9-83ab016ddd18&quot;,&quot;title&quot;:&quot;getTitle()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getTitle() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});const result=await device.getTitle();assert.strictEqual(result,\&quot;My Movie\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;22895d51-bcb0-4a73-a5ff-99dbe19ea03b&quot;,&quot;parentUUID&quot;:&quot;f1565361-6f34-48e9-9ac9-83ab016ddd18&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;22895d51-bcb0-4a73-a5ff-99dbe19ea03b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;302d95c7-2a58-4d44-88bf-33f8f402a90a&quot;,&quot;title&quot;:&quot;getArtist()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getArtist() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,artist:\&quot;My Artist\&quot;})})});const result=await device.getArtist();assert.strictEqual(result,\&quot;My Artist\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;470635c3-857d-4c9d-aea3-cd722251bc97&quot;,&quot;parentUUID&quot;:&quot;302d95c7-2a58-4d44-88bf-33f8f402a90a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;470635c3-857d-4c9d-aea3-cd722251bc97&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;44fcc178-167c-45aa-88be-e0ede44cbf09&quot;,&quot;title&quot;:&quot;getAlbum()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getAlbum() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,album:\&quot;My ALbum\&quot;})})});const result=await device.getAlbum();assert.strictEqual(result,\&quot;My ALbum\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3d881d2b-0743-4a70-9618-2a87f7943c1f&quot;,&quot;parentUUID&quot;:&quot;44fcc178-167c-45aa-88be-e0ede44cbf09&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3d881d2b-0743-4a70-9618-2a87f7943c1f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b515a35e-7fa6-4dcb-9c00-378528c21353&quot;,&quot;title&quot;:&quot;getGenre()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getGenre() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,genre:\&quot;My Genre\&quot;})})});const result=await device.getGenre();assert.strictEqual(result,\&quot;My Genre\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eb022196-5100-4815-a667-c11d57af2e04&quot;,&quot;parentUUID&quot;:&quot;b515a35e-7fa6-4dcb-9c00-378528c21353&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;eb022196-5100-4815-a667-c11d57af2e04&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4f0efee9-1ca2-40a1-92d1-c3b8620ad48e&quot;,&quot;title&quot;:&quot;getTotalTime()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getTotalTime() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,total_time:45})})});const result=await device.getTotalTime();assert.strictEqual(result,45)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e3a9c453-182a-4393-845f-6551d816d6f7&quot;,&quot;parentUUID&quot;:&quot;4f0efee9-1ca2-40a1-92d1-c3b8620ad48e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e3a9c453-182a-4393-845f-6551d816d6f7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c90d8713-35f2-4266-9f77-b48b46dc6d62&quot;,&quot;title&quot;:&quot;getPosition()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getPosition() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,position:30})})});const result=await device.getPosition();assert.strictEqual(result,30)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;82da19a6-500d-4687-933d-235c6976228c&quot;,&quot;parentUUID&quot;:&quot;c90d8713-35f2-4266-9f77-b48b46dc6d62&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;82da19a6-500d-4687-933d-235c6976228c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f1b6b4b7-877e-4a29-b4ae-0084a24f2321&quot;,&quot;title&quot;:&quot;getShuffle()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getShuffle() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,shuffle:\&quot;songs\&quot;})})});const result=await device.getShuffle();assert.deepStrictEqual(result,NodePyATVShuffleState.songs);assert.deepStrictEqual(result,\&quot;songs\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;00fa710a-47c5-4dbd-9fdc-556d34f7e880&quot;,&quot;parentUUID&quot;:&quot;f1b6b4b7-877e-4a29-b4ae-0084a24f2321&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;00fa710a-47c5-4dbd-9fdc-556d34f7e880&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b69b6c4b-2961-4c5d-862b-b0cc9a310ad0&quot;,&quot;title&quot;:&quot;getRepeat()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getRepeat() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,repeat:\&quot;all\&quot;})})});const result=await device.getRepeat();assert.deepStrictEqual(result,NodePyATVRepeatState.all);assert.deepStrictEqual(result,\&quot;all\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;44be4652-a558-4f00-932a-141e2743dee0&quot;,&quot;parentUUID&quot;:&quot;b69b6c4b-2961-4c5d-862b-b0cc9a310ad0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;44be4652-a558-4f00-932a-141e2743dee0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;10406e21-d7d2-48ed-a020-408474ed1965&quot;,&quot;title&quot;:&quot;getApp()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getApp() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,app:\&quot;My App\&quot;})})});const result=await device.getApp();assert.strictEqual(result,\&quot;My App\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9e574718-0e6d-4b12-9d34-d788a0d6ab3f&quot;,&quot;parentUUID&quot;:&quot;10406e21-d7d2-48ed-a020-408474ed1965&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9e574718-0e6d-4b12-9d34-d788a0d6ab3f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3b044979-2c04-478c-addc-6332928c5961&quot;,&quot;title&quot;:&quot;getAppId()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getAppId() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,app_id:\&quot;app.example.com\&quot;})})});const result=await device.getAppId();assert.strictEqual(result,\&quot;app.example.com\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0d274175-c3bc-4752-98fe-53dda197518f&quot;,&quot;parentUUID&quot;:&quot;3b044979-2c04-478c-addc-6332928c5961&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0d274175-c3bc-4752-98fe-53dda197518f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6d18e936-4db0-4ad0-844e-234d9fbfce8e&quot;,&quot;title&quot;:&quot;getPowerState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getPowerState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,power_state:\&quot;on\&quot;})})});const result=await device.getPowerState();assert.strictEqual(result,NodePyATVPowerState.on)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bd59fbd4-015b-4bec-8ac9-00ae2ac895a0&quot;,&quot;parentUUID&quot;:&quot;6d18e936-4db0-4ad0-844e-234d9fbfce8e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bd59fbd4-015b-4bec-8ac9-00ae2ac895a0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2180f223-8ca0-49c4-afdb-a9349320413e&quot;,&quot;title&quot;:&quot;getVolume()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getVolume() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,volume:50})})});const result=await device.getVolume();assert.strictEqual(result,50)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a497cb91-c012-4a44-ae3e-3b74918e8a1d&quot;,&quot;parentUUID&quot;:&quot;2180f223-8ca0-49c4-afdb-a9349320413e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a497cb91-c012-4a44-ae3e-3b74918e8a1d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f88a69e4-d303-4332-84d7-a19765cafd78&quot;,&quot;title&quot;:&quot;getFocusState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getFocusState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,focus_state:\&quot;focused\&quot;})})});const result=await device.getFocusState();assert.strictEqual(result,NodePyATVFocusState.focused)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;de40a810-eba0-4985-a04b-394dea0f174b&quot;,&quot;parentUUID&quot;:&quot;f88a69e4-d303-4332-84d7-a19765cafd78&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;de40a810-eba0-4985-a04b-394dea0f174b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a8192510-fa3b-495f-9c6c-522a70cca694&quot;,&quot;title&quot;:&quot;getOutputDevices()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getOutputDevices() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,output_devices:[{identifier:\&quot;foo\&quot;,name:\&quot;Apple TV\&quot;}]})})});const result=await device.getOutputDevices();assert.deepStrictEqual(result,[{identifier:\&quot;foo\&quot;,name:\&quot;Apple TV\&quot;}])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;06602a08-58e9-4d55-86ee-1d89e863b62c&quot;,&quot;parentUUID&quot;:&quot;a8192510-fa3b-495f-9c6c-522a70cca694&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;06602a08-58e9-4d55-86ee-1d89e863b62c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;91283b90-a285-4060-b5c4-e5d673ec13a3&quot;,&quot;title&quot;:&quot;getContentIdentifier()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getContentIdentifier() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,content_identifier:\&quot;1234\&quot;})})});const result=await device.getContentIdentifier();assert.strictEqual(result,\&quot;1234\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2e22d4b4-bcc7-4f01-bd37-291d616bec1f&quot;,&quot;parentUUID&quot;:&quot;91283b90-a285-4060-b5c4-e5d673ec13a3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2e22d4b4-bcc7-4f01-bd37-291d616bec1f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;652bfd0d-5c63-44eb-9e15-00eba0f9d1ff&quot;,&quot;title&quot;:&quot;getiTunesStoreIdentifier()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getiTunesStoreIdentifier() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,itunes_store_identifier:1234})})});const result=await device.getiTunesStoreIdentifier();assert.strictEqual(result,1234)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6c75ac8f-f6f8-46d9-add8-5b969f743dd6&quot;,&quot;parentUUID&quot;:&quot;652bfd0d-5c63-44eb-9e15-00eba0f9d1ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6c75ac8f-f6f8-46d9-add8-5b969f743dd6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8cf4745c-1dc6-4224-a02a-a2375de0a92e&quot;,&quot;title&quot;:&quot;getEpisodeNumber()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getEpisodeNumber() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,episode_number:12})})});const result=await device.getEpisodeNumber();assert.strictEqual(result,12)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;90c95af4-8bd7-4c06-85bf-731180fc0695&quot;,&quot;parentUUID&quot;:&quot;8cf4745c-1dc6-4224-a02a-a2375de0a92e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;90c95af4-8bd7-4c06-85bf-731180fc0695&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e6f67426-b31f-4355-ac48-01456b5fa3b3&quot;,&quot;title&quot;:&quot;getSeasonNumber()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getSeasonNumber() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,season_number:2})})});const result=await device.getSeasonNumber();assert.strictEqual(result,2)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;352f3851-2361-4236-beba-7ec991f1924a&quot;,&quot;parentUUID&quot;:&quot;e6f67426-b31f-4355-ac48-01456b5fa3b3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;352f3851-2361-4236-beba-7ec991f1924a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1d09d2b8-656e-495e-a7cd-1f6a1f36e123&quot;,&quot;title&quot;:&quot;getSeriesName()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getSeriesName() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,series_name:\&quot;The Testing Disaster\&quot;})})});const result=await device.getSeriesName();assert.strictEqual(result,\&quot;The Testing Disaster\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0e3a659a-b269-4ce3-b6cc-6a38b35680c8&quot;,&quot;parentUUID&quot;:&quot;1d09d2b8-656e-495e-a7cd-1f6a1f36e123&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0e3a659a-b269-4ce3-b6cc-6a38b35680c8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;40ece036-8db4-4839-9e91-08bfd684f437&quot;,&quot;title&quot;:&quot;listApps()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice listApps() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(\&quot;App: Fitness (com.apple.Fitness), App: Podcasts (com.apple.podcasts), App: Filme (com.apple.TVMovies), App: Prime Video (com.amazon.aiv.AIVApp), App: TV (com.apple.TVWatchList), App: Fotos (com.apple.TVPhotos), App: App\\xA0Store (com.apple.TVAppStore), App: Arcade (com.apple.Arcade), App: TV-Sendungen (com.apple.TVShows), App: Suchen (com.apple.TVSearch), App: Live TV (de.couchfunk.WM2014), App: RTL+ (com.rtlinteractive.tvnow), App: Computer (com.apple.TVHomeSharing), App: ARTE (tv.arte.plus7), App: YouTube (com.google.ios.youtube), App: ARD Mediathek (de.swr.avp.ard.tablet), App: Disney+ (com.disney.disneyplus), App: Plex (com.plexapp.plex), App: Joyn (de.prosiebensat1digital.seventv), App: Einstellungen (com.apple.TVSettings), App: ZDFmediathek (de.zdf.mediathek.universal), App: Crossy Road (com.hipsterwhale.crossy), App: Netflix (com.netflix.Netflix), App: Infuse (com.firecore.infuse), App: Musik (com.apple.TVMusic)\&quot;)})});const result=await device.listApps();assert.strictEqual(result.length,25);assert.strictEqual(result[0].id,\&quot;com.apple.Fitness\&quot;);assert.strictEqual(result[0].name,\&quot;Fitness\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;61c353a7-7eb5-4c06-b3de-76138856510f&quot;,&quot;parentUUID&quot;:&quot;40ece036-8db4-4839-9e91-08bfd684f437&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;61c353a7-7eb5-4c06-b3de-76138856510f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;cd8da77a-d6a1-4e95-8dba-8da98df43782&quot;,&quot;title&quot;:&quot;pressKey()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work with valid key&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pressKey() should work with valid key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device.pressKey(NodePyATVKeys.home)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2e954f36-2fd1-426f-8531-fcedfd81bc69&quot;,&quot;parentUUID&quot;:&quot;cd8da77a-d6a1-4e95-8dba-8da98df43782&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error with invalid key&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pressKey() should throw error with invalid key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;});await assert.rejects(async()=&gt;{await device.pressKey(\&quot;foo\&quot;)},/Unsupported key value foo/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8caf3ed3-6e55-46f1-831f-fe3ca6b89ee2&quot;,&quot;parentUUID&quot;:&quot;cd8da77a-d6a1-4e95-8dba-8da98df43782&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if pyatv result is not success&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pressKey() should throw error if pyatv result is not success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;failure\&quot;}&#x27;)})});await assert.rejects(async()=&gt;{await device.pressKey(NodePyATVKeys.home)},/Unable to parse pyatv response/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;28a0c069-c2fb-4ffd-95dc-9e90979a7692&quot;,&quot;parentUUID&quot;:&quot;cd8da77a-d6a1-4e95-8dba-8da98df43782&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2e954f36-2fd1-426f-8531-fcedfd81bc69&quot;,&quot;8caf3ed3-6e55-46f1-831f-fe3ca6b89ee2&quot;,&quot;28a0c069-c2fb-4ffd-95dc-9e90979a7692&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fbc26146-9d4e-47f7-8ceb-5ab03e821d1b&quot;,&quot;title&quot;:&quot;down()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice down() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1c06d072-3ba7-4445-bab8-8619dbbb0d0c&quot;,&quot;parentUUID&quot;:&quot;fbc26146-9d4e-47f7-8ceb-5ab03e821d1b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1c06d072-3ba7-4445-bab8-8619dbbb0d0c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1f851625-d616-4f85-80ad-0eff68a038ee&quot;,&quot;title&quot;:&quot;home()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice home() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c1db5a27-d819-48e9-91d7-5c6d4ffb84d8&quot;,&quot;parentUUID&quot;:&quot;1f851625-d616-4f85-80ad-0eff68a038ee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c1db5a27-d819-48e9-91d7-5c6d4ffb84d8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5f7661ff-7368-4939-8c51-35a455e52dfb&quot;,&quot;title&quot;:&quot;homeHold()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice homeHold() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;85ac5835-f605-4944-bfa9-3ab1bed8c253&quot;,&quot;parentUUID&quot;:&quot;5f7661ff-7368-4939-8c51-35a455e52dfb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;85ac5835-f605-4944-bfa9-3ab1bed8c253&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7fc1a670-6087-4b98-a9bb-22859ef59803&quot;,&quot;title&quot;:&quot;left()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice left() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fa7b5a6a-3820-4f21-897d-ab8343efd48b&quot;,&quot;parentUUID&quot;:&quot;7fc1a670-6087-4b98-a9bb-22859ef59803&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fa7b5a6a-3820-4f21-897d-ab8343efd48b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5d7a3795-516a-4ec2-95a3-412e58173c8e&quot;,&quot;title&quot;:&quot;menu()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice menu() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ef4d6d4-96f5-4c7c-b626-386934d28e35&quot;,&quot;parentUUID&quot;:&quot;5d7a3795-516a-4ec2-95a3-412e58173c8e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0ef4d6d4-96f5-4c7c-b626-386934d28e35&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;180c7034-a700-41f7-b80a-0c08f46d319a&quot;,&quot;title&quot;:&quot;next()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice next() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dd666571-8e4f-40bd-b6ad-c83927e03f8c&quot;,&quot;parentUUID&quot;:&quot;180c7034-a700-41f7-b80a-0c08f46d319a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dd666571-8e4f-40bd-b6ad-c83927e03f8c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fad62521-d10f-4288-83e4-4ae5be545c0a&quot;,&quot;title&quot;:&quot;pause()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pause() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fbfba588-4d8b-4e35-90d2-f33db9ee97c8&quot;,&quot;parentUUID&quot;:&quot;fad62521-d10f-4288-83e4-4ae5be545c0a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fbfba588-4d8b-4e35-90d2-f33db9ee97c8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5c75ed95-b4be-4d14-9638-83c59e0fbfdb&quot;,&quot;title&quot;:&quot;play()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice play() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;abad72d4-73be-4666-baa2-f7f9b2cc06de&quot;,&quot;parentUUID&quot;:&quot;5c75ed95-b4be-4d14-9638-83c59e0fbfdb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;abad72d4-73be-4666-baa2-f7f9b2cc06de&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7ed8ee0f-ddd5-4578-aa09-eeef317163a5&quot;,&quot;title&quot;:&quot;playPause()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice playPause() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a1de1cce-fbb6-4f8c-9c42-62957639695a&quot;,&quot;parentUUID&quot;:&quot;7ed8ee0f-ddd5-4578-aa09-eeef317163a5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a1de1cce-fbb6-4f8c-9c42-62957639695a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1545592b-2def-418a-bd13-c5c4bf4811cb&quot;,&quot;title&quot;:&quot;previous()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice previous() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e8ba4413-ff72-43d5-9ff3-d6c6a761fc94&quot;,&quot;parentUUID&quot;:&quot;1545592b-2def-418a-bd13-c5c4bf4811cb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e8ba4413-ff72-43d5-9ff3-d6c6a761fc94&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e779b964-c77f-42f2-a023-3a0913a0c115&quot;,&quot;title&quot;:&quot;right()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice right() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;717c2656-0cbd-418a-8ffc-3ac4c3aa5bea&quot;,&quot;parentUUID&quot;:&quot;e779b964-c77f-42f2-a023-3a0913a0c115&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;717c2656-0cbd-418a-8ffc-3ac4c3aa5bea&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c154f412-e1ce-4821-8bf3-eda0b771c8dc&quot;,&quot;title&quot;:&quot;select()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice select() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3140c681-a861-4d4a-be7a-d2c9acb3e08f&quot;,&quot;parentUUID&quot;:&quot;c154f412-e1ce-4821-8bf3-eda0b771c8dc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3140c681-a861-4d4a-be7a-d2c9acb3e08f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3440e52e-06b0-4a39-82fe-3097dfffc216&quot;,&quot;title&quot;:&quot;skipBackward()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice skipBackward() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ec1ecf2f-2859-4aba-9fcb-0e39c6461534&quot;,&quot;parentUUID&quot;:&quot;3440e52e-06b0-4a39-82fe-3097dfffc216&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ec1ecf2f-2859-4aba-9fcb-0e39c6461534&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;15e7d6b8-de8b-4532-91d5-b8c845e246b8&quot;,&quot;title&quot;:&quot;skipForward()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice skipForward() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0058c7a7-6d33-42a4-a12a-e2a30e49278a&quot;,&quot;parentUUID&quot;:&quot;15e7d6b8-de8b-4532-91d5-b8c845e246b8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0058c7a7-6d33-42a4-a12a-e2a30e49278a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ff7e9fe2-e720-4695-b597-1b371085747a&quot;,&quot;title&quot;:&quot;stop()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice stop() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;144384ec-0914-4860-81ee-c58ba282a4ea&quot;,&quot;parentUUID&quot;:&quot;ff7e9fe2-e720-4695-b597-1b371085747a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;144384ec-0914-4860-81ee-c58ba282a4ea&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e53af4fd-2145-4119-9a23-7d9af5a762e8&quot;,&quot;title&quot;:&quot;suspend()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice suspend() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8532a45b-39b3-49c8-a59b-3db1984be2a5&quot;,&quot;parentUUID&quot;:&quot;e53af4fd-2145-4119-9a23-7d9af5a762e8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8532a45b-39b3-49c8-a59b-3db1984be2a5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d68064a7-c0cc-4418-bdbe-f7cf4f1feee4&quot;,&quot;title&quot;:&quot;topMenu()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice topMenu() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8581ed0d-3524-4444-b05b-6ecbb3f219ef&quot;,&quot;parentUUID&quot;:&quot;d68064a7-c0cc-4418-bdbe-f7cf4f1feee4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8581ed0d-3524-4444-b05b-6ecbb3f219ef&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6dc3d47b-a1d2-4cfe-af1c-a9e1a87f0494&quot;,&quot;title&quot;:&quot;up()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice up() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4026a933-6914-4b52-a420-50cf0b096a53&quot;,&quot;parentUUID&quot;:&quot;6dc3d47b-a1d2-4cfe-af1c-a9e1a87f0494&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4026a933-6914-4b52-a420-50cf0b096a53&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4305a347-6306-4c73-9f10-0fb158510267&quot;,&quot;title&quot;:&quot;volumeDown()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice volumeDown() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ff06acc7-8486-4795-b936-9b875d5e6350&quot;,&quot;parentUUID&quot;:&quot;4305a347-6306-4c73-9f10-0fb158510267&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ff06acc7-8486-4795-b936-9b875d5e6350&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ddd3a64f-6dfe-425d-b244-63c2df2743c3&quot;,&quot;title&quot;:&quot;volumeUp()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice volumeUp() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d9b1cee4-016c-42cf-85ba-2b95ac17fe76&quot;,&quot;parentUUID&quot;:&quot;ddd3a64f-6dfe-425d-b244-63c2df2743c3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d9b1cee4-016c-42cf-85ba-2b95ac17fe76&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;225b2dcb-c74b-4892-898f-7a1caf695e42&quot;,&quot;title&quot;:&quot;wakeup()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice wakeup() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7a51fb0d-0fb0-4921-9264-df599b3d86b3&quot;,&quot;parentUUID&quot;:&quot;225b2dcb-c74b-4892-898f-7a1caf695e42&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7a51fb0d-0fb0-4921-9264-df599b3d86b3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bba72c82-e32a-4a99-9d43-3b0fec6b88f0&quot;,&quot;title&quot;:&quot;turnOff()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice turnOff() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ef4e8ee5-baec-4013-87e4-06ae164b1cde&quot;,&quot;parentUUID&quot;:&quot;bba72c82-e32a-4a99-9d43-3b0fec6b88f0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ef4e8ee5-baec-4013-87e4-06ae164b1cde&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7ad07309-0e18-4aec-92e9-16229848bc9a&quot;,&quot;title&quot;:&quot;turnOn()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice turnOn() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;028d40e3-ea91-47f9-90ed-fcdf8f12a151&quot;,&quot;parentUUID&quot;:&quot;7ad07309-0e18-4aec-92e9-16229848bc9a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;028d40e3-ea91-47f9-90ed-fcdf8f12a151&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;44a25687-66cf-4450-8a49-5012c378399c&quot;,&quot;title&quot;:&quot;launchApp()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice launchApp() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(\&quot;\&quot;)})});await device.launchApp(\&quot;com.apple.TVShows\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9adf092d-3e7e-43f5-91d7-31477f281ad5&quot;,&quot;parentUUID&quot;:&quot;44a25687-66cf-4450-8a49-5012c378399c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9adf092d-3e7e-43f5-91d7-31477f281ad5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2c11b263-3a76-4bb4-8b21-af45973ce824&quot;,&quot;title&quot;:&quot;NodePyATVInstance&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;4c2b87d5-99e4-4baa-bead-58f54a3abd7b&quot;,&quot;title&quot;:&quot;static version()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work with pyatv [L]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should work with pyatv [L]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:479,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(4e3);const result=await NodePyATVInstance.version();if(result.pyatv===null){throw new Error(\&quot;No version found for pyatv. Is it installed in test environment?\&quot;)}assert.equal(typeof result.pyatv,\&quot;string\&quot;,\&quot;result.pyatv is a string\&quot;);assert.ok(result.pyatv.length&gt;=5,\&quot;result.pyatv has content\&quot;);assert.strictEqual(result.module,version)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6a212e94-e529-4ae3-9528-eaf506659ac6&quot;,&quot;parentUUID&quot;:&quot;4c2b87d5-99e4-4baa-bead-58f54a3abd7b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the pyatv version&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return the pyatv version&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await NodePyATVInstance.version({spawn:createFakeSpawn(cp=&gt;{cp.code(1);cp.end(\&quot;atvremote 0.7.4\&quot;)})});assert.ok(result.pyatv);assert.strictEqual(result.pyatv,\&quot;0.7.4\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4fe3f9a4-d557-418d-ba05-f7ec6336545f&quot;,&quot;parentUUID&quot;:&quot;4c2b87d5-99e4-4baa-bead-58f54a3abd7b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the module version&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return the module version&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await NodePyATVInstance.version({noColors:true,spawn:createFakeSpawn(cp=&gt;cp.code(1).end())});assert.strictEqual(result.module,version)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;881fc026-fbd0-4a9a-af2a-1ec13abc82d8&quot;,&quot;parentUUID&quot;:&quot;4c2b87d5-99e4-4baa-bead-58f54a3abd7b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle option.atvremotePath&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should handle option.atvremotePath&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await NodePyATVInstance.version({atvremotePath:\&quot;/foo/bar\&quot;,spawn:createFakeSpawn(cp=&gt;{assert.strictEqual(cp.cmd(),\&quot;/foo/bar\&quot;);cp.code(1).end()})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8a7a487f-97d3-4c91-af64-4a0c89b8d960&quot;,&quot;parentUUID&quot;:&quot;4c2b87d5-99e4-4baa-bead-58f54a3abd7b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with option.debug = true&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should work with option.debug = true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await NodePyATVInstance.version({debug:true,spawn:createFakeSpawn(cp=&gt;cp.code(1).end())})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3b6307ce-3a0d-4f3a-926c-0ac6a660957e&quot;,&quot;parentUUID&quot;:&quot;4c2b87d5-99e4-4baa-bead-58f54a3abd7b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with option.noColors&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should work with option.noColors&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await NodePyATVInstance.version({debug:__name(()=&gt;{},\&quot;debug\&quot;),noColors:true,spawn:createFakeSpawn(cp=&gt;cp.code(1).end())})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fb0263f6-d5c2-4f98-8495-8d7d73f086a9&quot;,&quot;parentUUID&quot;:&quot;4c2b87d5-99e4-4baa-bead-58f54a3abd7b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return null on pyatv stderr output&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return null on pyatv stderr output&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await NodePyATVInstance.version({spawn:createFakeSpawn(cp=&gt;cp.stderr(\&quot;Hello World!\&quot;).code(123).end())});assert.strictEqual(result.pyatv,null)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;12d6f274-03b1-458d-8d78-ad20aa4af89a&quot;,&quot;parentUUID&quot;:&quot;4c2b87d5-99e4-4baa-bead-58f54a3abd7b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return null on pyatv error&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return null on pyatv error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await NodePyATVInstance.version({spawn:createFakeSpawn(cp=&gt;{cp.error(new Error(\&quot;Hello world!\&quot;)).end()})});assert.strictEqual(result.pyatv,null)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;69f2c769-3ccb-4df8-a10b-9af38b90c316&quot;,&quot;parentUUID&quot;:&quot;4c2b87d5-99e4-4baa-bead-58f54a3abd7b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return null on invalid pyatv version&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return null on invalid pyatv version&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await NodePyATVInstance.version({spawn:createFakeSpawn(cp=&gt;{cp.stdout(\&quot;atvremote 42\&quot;).code(1).end()})});assert.strictEqual(result.pyatv,null)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;114297cc-d00f-4023-8de0-da5040fdaeb1&quot;,&quot;parentUUID&quot;:&quot;4c2b87d5-99e4-4baa-bead-58f54a3abd7b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6a212e94-e529-4ae3-9528-eaf506659ac6&quot;,&quot;4fe3f9a4-d557-418d-ba05-f7ec6336545f&quot;,&quot;881fc026-fbd0-4a9a-af2a-1ec13abc82d8&quot;,&quot;8a7a487f-97d3-4c91-af64-4a0c89b8d960&quot;,&quot;3b6307ce-3a0d-4f3a-926c-0ac6a660957e&quot;,&quot;fb0263f6-d5c2-4f98-8495-8d7d73f086a9&quot;,&quot;12d6f274-03b1-458d-8d78-ad20aa4af89a&quot;,&quot;69f2c769-3ccb-4df8-a10b-9af38b90c316&quot;,&quot;114297cc-d00f-4023-8de0-da5040fdaeb1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:493,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;91c79a24-d365-4e85-afe6-00aa5d4a8007&quot;,&quot;title&quot;:&quot;static check()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should resolve in test environment [L]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should resolve in test environment [L]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5866,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(12e3);await NodePyATVInstance.check()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e346680f-2549-4b01-9f73-fb93f538c2e8&quot;,&quot;parentUUID&quot;:&quot;91c79a24-d365-4e85-afe6-00aa5d4a8007&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return nice error message if pyatv was not found&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should return nice error message if pyatv was not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.check({spawn:createFakeSpawn(cp=&gt;{cp.error(new Error(\&quot;spawn atvremote ENOENT\&quot;)).code(1).end()})})},/Unable to find pyatv. Is it installed?/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e850332e-7efe-4de1-a943-1e967179043f&quot;,&quot;parentUUID&quot;:&quot;91c79a24-d365-4e85-afe6-00aa5d4a8007&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return nice error message if myatv is too old&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should return nice error message if myatv is too old&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.check({spawn:createFakeSpawn(cp=&gt;{cp.stdout(\&quot;atvremote 0.5.1\&quot;).code(1).end()})})},/Found pyatv, but unforunately it&#x27;s too old. Please update pyatv./)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4200223b-bfc7-4c2e-84fa-84b3acee1c2c&quot;,&quot;parentUUID&quot;:&quot;91c79a24-d365-4e85-afe6-00aa5d4a8007&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return nice error message if scan failed&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should return nice error message if scan failed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let i=0;await assert.rejects(async()=&gt;{await NodePyATVInstance.check({spawn:createFakeSpawn(cp=&gt;{if(i===0){cp.stdout(\&quot;atvremote 0.7.0\&quot;).code(1).end();i++}else{cp.error(new Error(\&quot;spawn atvremote ENOENT\&quot;)).code(1).end()}})})},/Unable to scan for devices/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c19841ff-455d-4838-ad44-2b2f468ee044&quot;,&quot;parentUUID&quot;:&quot;91c79a24-d365-4e85-afe6-00aa5d4a8007&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e346680f-2549-4b01-9f73-fb93f538c2e8&quot;,&quot;e850332e-7efe-4de1-a943-1e967179043f&quot;,&quot;4200223b-bfc7-4c2e-84fa-84b3acee1c2c&quot;,&quot;c19841ff-455d-4838-ad44-2b2f468ee044&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5873,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e8f15996-3087-4bf0-a9d5-ca2ff6ad6a17&quot;,&quot;title&quot;:&quot;static find()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work [L]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work [L]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5445,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(1e4);const result=await NodePyATVInstance.find();assert.ok(Array.isArray(result))&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7d5433e8-a6c4-4aac-a007-9689b86b9b99&quot;,&quot;parentUUID&quot;:&quot;e8f15996-3087-4bf0-a9d5-ca2ff6ad6a17&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle option.atvscriptPath&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should handle option.atvscriptPath&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await NodePyATVInstance.find({atvscriptPath:\&quot;/foo/bar\&quot;,spawn:createFakeSpawn(cp=&gt;{assert.strictEqual(cp.cmd(),\&quot;/foo/bar\&quot;);cp.stdout({\&quot;result\&quot;:\&quot;success\&quot;,\&quot;datetime\&quot;:\&quot;2020-11-06T20:47:30.840022+01:00\&quot;,\&quot;devices\&quot;:[]}).end()})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;899ca4e8-9db9-419c-ada0-ac17d3138a92&quot;,&quot;parentUUID&quot;:&quot;e8f15996-3087-4bf0-a9d5-ca2ff6ad6a17&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error on stderr output&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error on stderr output&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stderr(\&quot;Hello World!\&quot;).code(1).end()})})},/Unable to execute request/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ffe81870-ddae-487a-9e61-97f5141b8740&quot;,&quot;parentUUID&quot;:&quot;e8f15996-3087-4bf0-a9d5-ca2ff6ad6a17&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error on error&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.error(new Error(\&quot;Hello world!\&quot;)).code(1).end()})})},/Hello world!/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;989144cd-e5f8-4825-9df2-3dc82c4fba9c&quot;,&quot;parentUUID&quot;:&quot;e8f15996-3087-4bf0-a9d5-ca2ff6ad6a17&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error on pyatv failure&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error on pyatv failure&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout({result:\&quot;failure\&quot;,datetime:\&quot;2020-11-06T20:47:30.840022+01:00\&quot;,error:\&quot;Task exception was never retrieved\&quot;,exception:\&quot;[Errno 113] Connect call failed\&quot;}).code(1).end()})})},/Unable to find any devices, but received 1 error: /)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;40dea82f-4b1f-4b8f-bb1b-2465f20d60b5&quot;,&quot;parentUUID&quot;:&quot;e8f15996-3087-4bf0-a9d5-ca2ff6ad6a17&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if atvscript result is not valid json&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error if atvscript result is not valid json&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout(JSON.stringify({\&quot;result\&quot;:\&quot;success\&quot;,\&quot;datetime\&quot;:\&quot;2020-11-06T20:47:30.840022+01:00\&quot;,\&quot;devices\&quot;:[]}).substr(1)).end()})})},/Unable to parse result/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f645798f-80f3-4aa4-b56d-a023e49e90f2&quot;,&quot;parentUUID&quot;:&quot;e8f15996-3087-4bf0-a9d5-ca2ff6ad6a17&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if atvscript result is not successfull&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error if atvscript result is not successfull&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout({result:\&quot;error\&quot;}).code(1).end()})})},/Unable to parse pyatv response: /)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;506da2bd-1a33-4906-a9b2-ac2ec55236a8&quot;,&quot;parentUUID&quot;:&quot;e8f15996-3087-4bf0-a9d5-ca2ff6ad6a17&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if atvscript result is without device array&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error if atvscript result is without device array&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout({result:\&quot;success\&quot;}).code(1).end()})})},/Unable to parse pyatv response: /)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ac5d316-1cc1-4e6a-8f6b-5ef8419e7d07&quot;,&quot;parentUUID&quot;:&quot;e8f15996-3087-4bf0-a9d5-ca2ff6ad6a17&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work if devices are without device_info / services&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work if devices are without device_info / services&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const devices=await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout({result:\&quot;success\&quot;,datetime:\&quot;2020-11-06T20:47:30.840022+01:00\&quot;,devices:[{name:\&quot;Vardagsrum\&quot;,address:\&quot;10.0.10.81\&quot;,identifier:\&quot;xxx\&quot;}]}).code(1).end()})});assert.strictEqual(devices.length,1);assert.strictEqual(devices[0].name,\&quot;Vardagsrum\&quot;);assert.strictEqual(devices[0].host,\&quot;10.0.10.81\&quot;);assert.strictEqual(devices[0].id,\&quot;xxx\&quot;);assert.strictEqual(devices[0].model,void 0);assert.strictEqual(devices[0].modelName,void 0);assert.strictEqual(devices[0].os,void 0);assert.strictEqual(devices[0].version,void 0);assert.deepStrictEqual(devices[0].services,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2f2a132f-0e80-498a-be21-0ec2fde0447e&quot;,&quot;parentUUID&quot;:&quot;e8f15996-3087-4bf0-a9d5-ca2ff6ad6a17&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work if devices are with device_info / services&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work if devices are with device_info / services&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const devices=await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout({result:\&quot;success\&quot;,datetime:\&quot;2020-11-06T20:47:30.840022+01:00\&quot;,devices:[{name:\&quot;Vardagsrum\&quot;,address:\&quot;10.0.10.81\&quot;,identifier:\&quot;xxx\&quot;,device_info:{\&quot;model\&quot;:\&quot;Gen4K\&quot;,\&quot;model_str\&quot;:\&quot;Apple TV 4K\&quot;,\&quot;operating_system\&quot;:\&quot;TvOS\&quot;,\&quot;version\&quot;:\&quot;15.5.1\&quot;},services:[{protocol:\&quot;mrp\&quot;,port:49152},{protocol:\&quot;airplay\&quot;,port:7e3}]}]}).code(1).end()})});assert.strictEqual(devices.length,1);assert.strictEqual(devices[0].name,\&quot;Vardagsrum\&quot;);assert.strictEqual(devices[0].host,\&quot;10.0.10.81\&quot;);assert.strictEqual(devices[0].id,\&quot;xxx\&quot;);assert.strictEqual(devices[0].model,\&quot;Gen4K\&quot;);assert.strictEqual(devices[0].modelName,\&quot;Apple TV 4K\&quot;);assert.strictEqual(devices[0].os,\&quot;TvOS\&quot;);assert.strictEqual(devices[0].version,\&quot;15.5.1\&quot;);assert.deepStrictEqual(devices[0].services,[{protocol:NodePyATVProtocol.mrp,port:49152},{protocol:NodePyATVProtocol.airplay,port:7e3}])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;defc00ed-f502-4885-b4f9-72af8318efc6&quot;,&quot;parentUUID&quot;:&quot;e8f15996-3087-4bf0-a9d5-ca2ff6ad6a17&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for unicast scans&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work for unicast scans&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const devices=await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout(`{\&quot;result\&quot;: \&quot;failure\&quot;, \&quot;datetime\&quot;: \&quot;2024-05-18T16:20:18.103087-06:00\&quot;, \&quot;error\&quot;: \&quot;Task exception was never retrieved\&quot;, \&quot;exception\&quot;: \&quot;[Errno 113] Connect call failed (&#x27;10.0.0.232&#x27;, 32498)\&quot;, \&quot;stacktrace\&quot;: \&quot;Traceback (most recent call last):\\\\n  File \\\\\&quot;/var/lib/homebridge/appletv-enhanced/.venv/lib/python3.11/site-packages/pyatv/support/knock.py\\\\\&quot;, line 28, in _async_knock\\\\n    _, writer = await asyncio.wait_for(\\\\n                ^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/tasks.py\\\\\&quot;, line 479, in wait_for\\\\n    return fut.result()\\\\n           ^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/streams.py\\\\\&quot;, line 48, in open_connection\\\\n    transport, _ = await loop.create_connection(\\\\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1085, in create_connection\\\\n    raise exceptions[0]\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1069, in create_connection\\\\n    sock = await self._connect_sock(\\\\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 973, in _connect_sock\\\\n    await self.sock_connect(sock, address)\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 634, in sock_connect\\\\n    return await fut\\\\n           ^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 674, in _sock_connect_cb\\\\n    raise OSError(err, f&#x27;Connect call failed {address}&#x27;)\\\\nOSError: [Errno 113] Connect call failed (&#x27;10.0.0.232&#x27;, 32498)\\\\n\&quot;}\n{\&quot;result\&quot;: \&quot;failure\&quot;, \&quot;datetime\&quot;: \&quot;2024-05-18T16:20:18.114744-06:00\&quot;, \&quot;error\&quot;: \&quot;Task exception was never retrieved\&quot;, \&quot;exception\&quot;: \&quot;[Errno 113] Connect call failed (&#x27;10.0.0.229&#x27;, 32498)\&quot;, \&quot;stacktrace\&quot;: \&quot;Traceback (most recent call last):\\\\n  File \\\\\&quot;/var/lib/homebridge/appletv-enhanced/.venv/lib/python3.11/site-packages/pyatv/support/knock.py\\\\\&quot;, line 28, in _async_knock\\\\n    _, writer = await asyncio.wait_for(\\\\n                ^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/tasks.py\\\\\&quot;, line 479, in wait_for\\\\n    return fut.result()\\\\n           ^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/streams.py\\\\\&quot;, line 48, in open_connection\\\\n    transport, _ = await loop.create_connection(\\\\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1085, in create_connection\\\\n    raise exceptions[0]\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1069, in create_connection\\\\n    sock = await self._connect_sock(\\\\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 973, in _connect_sock\\\\n    await self.sock_connect(sock, address)\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 634, in sock_connect\\\\n    return await fut\\\\n           ^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 674, in _sock_connect_cb\\\\n    raise OSError(err, f&#x27;Connect call failed {address}&#x27;)\\\\nOSError: [Errno 113] Connect call failed (&#x27;10.0.0.229&#x27;, 32498)\\\\n\&quot;}\n{\&quot;result\&quot;: \&quot;success\&quot;, \&quot;datetime\&quot;: \&quot;2024-05-18T16:20:20.042648-06:00\&quot;, \&quot;devices\&quot;: [{\&quot;name\&quot;: \&quot;Living Room\&quot;, \&quot;address\&quot;: \&quot;10.0.0.30\&quot;, \&quot;identifier\&quot;: \&quot;37323C0E-99E6-4CC3-A006-1ED5368FFF8C\&quot;, \&quot;all_identifiers\&quot;: [\&quot;86B730B2-5189-4B6A-BCAA-CDDB18F05FA8\&quot;, \&quot;C8:D0:83:E9:D0:49\&quot;, \&quot;37323C0E-99E6-4CC3-A006-1ED5368FFF8C\&quot;, \&quot;C8D083E9D049\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;C8:D0:83:E9:D0:49\&quot;, \&quot;model\&quot;: \&quot;Gen4K\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4K\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.5\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49154}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}, {\&quot;name\&quot;: \&quot;Kitchen\&quot;, \&quot;address\&quot;: \&quot;10.0.0.79\&quot;, \&quot;identifier\&quot;: \&quot;45B6A67A-9FAD-497D-95EF-7FC5ECB3371C\&quot;, \&quot;all_identifiers\&quot;: [\&quot;B163C908-000F-4983-BDC7-BEFD76887EF5\&quot;, \&quot;C8:69:CD:63:2A:11\&quot;, \&quot;45B6A67A-9FAD-497D-95EF-7FC5ECB3371C\&quot;, \&quot;C869CD632A11\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;C8:69:CD:63:2A:11\&quot;, \&quot;model\&quot;: \&quot;Gen4\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.4\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49157}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}, {\&quot;name\&quot;: \&quot;Bedroom\&quot;, \&quot;address\&quot;: \&quot;10.0.0.20\&quot;, \&quot;identifier\&quot;: \&quot;CA55DA36-ADEF-4DBC-A0B3-BA68B0C53E40\&quot;, \&quot;all_identifiers\&quot;: [\&quot;08:66:98:BC:37:1F\&quot;, \&quot;108F35A0-FF21-4884-96C2-145AAAB1B4C4\&quot;, \&quot;CA55DA36-ADEF-4DBC-A0B3-BA68B0C53E40\&quot;, \&quot;086698BC371F\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;08:66:98:BC:37:1F\&quot;, \&quot;model\&quot;: \&quot;Gen4\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.4\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49154}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}, {\&quot;name\&quot;: \&quot;Basement\&quot;, \&quot;address\&quot;: \&quot;10.0.0.156\&quot;, \&quot;identifier\&quot;: \&quot;C02B27DB-2AF3-43E7-8EF7-885E1E9AB3B4\&quot;, \&quot;all_identifiers\&quot;: [\&quot;8BDB6773-479F-4C01-A185-29FF5516F2C2\&quot;, \&quot;D0:03:4B:4C:2A:2E\&quot;, \&quot;C02B27DB-2AF3-43E7-8EF7-885E1E9AB3B4\&quot;, \&quot;D0034B4C2A2E\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;D0:03:4B:4C:2A:2E\&quot;, \&quot;model\&quot;: \&quot;Gen4\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.4\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49154}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}]}`).code(1).end()})});assert.strictEqual(devices.length,4);assert.strictEqual(devices[0].name,\&quot;Living Room\&quot;);assert.strictEqual(devices[0].host,\&quot;10.0.0.30\&quot;);assert.strictEqual(devices[0].id,\&quot;37323C0E-99E6-4CC3-A006-1ED5368FFF8C\&quot;);assert.strictEqual(devices[1].name,\&quot;Kitchen\&quot;);assert.strictEqual(devices[1].host,\&quot;10.0.0.79\&quot;);assert.strictEqual(devices[1].id,\&quot;45B6A67A-9FAD-497D-95EF-7FC5ECB3371C\&quot;);assert.strictEqual(devices[2].name,\&quot;Bedroom\&quot;);assert.strictEqual(devices[2].host,\&quot;10.0.0.20\&quot;);assert.strictEqual(devices[2].id,\&quot;CA55DA36-ADEF-4DBC-A0B3-BA68B0C53E40\&quot;);assert.strictEqual(devices[3].name,\&quot;Basement\&quot;);assert.strictEqual(devices[3].host,\&quot;10.0.0.156\&quot;);assert.strictEqual(devices[3].id,\&quot;C02B27DB-2AF3-43E7-8EF7-885E1E9AB3B4\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;edd93688-de5d-47ac-b022-f1e105c5a401&quot;,&quot;parentUUID&quot;:&quot;e8f15996-3087-4bf0-a9d5-ca2ff6ad6a17&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for unicast scans with returnDevicesAndErrors = true&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work for unicast scans with returnDevicesAndErrors = true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response=await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout(`{\&quot;result\&quot;: \&quot;failure\&quot;, \&quot;datetime\&quot;: \&quot;2024-05-18T16:20:18.103087-06:00\&quot;, \&quot;error\&quot;: \&quot;Task exception was never retrieved\&quot;, \&quot;exception\&quot;: \&quot;[Errno 113] Connect call failed (&#x27;10.0.0.232&#x27;, 32498)\&quot;, \&quot;stacktrace\&quot;: \&quot;Traceback (most recent call last):\\\\n  File \\\\\&quot;/var/lib/homebridge/appletv-enhanced/.venv/lib/python3.11/site-packages/pyatv/support/knock.py\\\\\&quot;, line 28, in _async_knock\\\\n    _, writer = await asyncio.wait_for(\\\\n                ^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/tasks.py\\\\\&quot;, line 479, in wait_for\\\\n    return fut.result()\\\\n           ^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/streams.py\\\\\&quot;, line 48, in open_connection\\\\n    transport, _ = await loop.create_connection(\\\\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1085, in create_connection\\\\n    raise exceptions[0]\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1069, in create_connection\\\\n    sock = await self._connect_sock(\\\\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 973, in _connect_sock\\\\n    await self.sock_connect(sock, address)\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 634, in sock_connect\\\\n    return await fut\\\\n           ^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 674, in _sock_connect_cb\\\\n    raise OSError(err, f&#x27;Connect call failed {address}&#x27;)\\\\nOSError: [Errno 113] Connect call failed (&#x27;10.0.0.232&#x27;, 32498)\\\\n\&quot;}\n{\&quot;result\&quot;: \&quot;failure\&quot;, \&quot;datetime\&quot;: \&quot;2024-05-18T16:20:18.114744-06:00\&quot;, \&quot;error\&quot;: \&quot;Task exception was never retrieved\&quot;, \&quot;exception\&quot;: \&quot;[Errno 113] Connect call failed (&#x27;10.0.0.229&#x27;, 32498)\&quot;, \&quot;stacktrace\&quot;: \&quot;Traceback (most recent call last):\\\\n  File \\\\\&quot;/var/lib/homebridge/appletv-enhanced/.venv/lib/python3.11/site-packages/pyatv/support/knock.py\\\\\&quot;, line 28, in _async_knock\\\\n    _, writer = await asyncio.wait_for(\\\\n                ^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/tasks.py\\\\\&quot;, line 479, in wait_for\\\\n    return fut.result()\\\\n           ^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/streams.py\\\\\&quot;, line 48, in open_connection\\\\n    transport, _ = await loop.create_connection(\\\\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1085, in create_connection\\\\n    raise exceptions[0]\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1069, in create_connection\\\\n    sock = await self._connect_sock(\\\\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 973, in _connect_sock\\\\n    await self.sock_connect(sock, address)\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 634, in sock_connect\\\\n    return await fut\\\\n           ^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 674, in _sock_connect_cb\\\\n    raise OSError(err, f&#x27;Connect call failed {address}&#x27;)\\\\nOSError: [Errno 113] Connect call failed (&#x27;10.0.0.229&#x27;, 32498)\\\\n\&quot;}\n{\&quot;result\&quot;: \&quot;success\&quot;, \&quot;datetime\&quot;: \&quot;2024-05-18T16:20:20.042648-06:00\&quot;, \&quot;devices\&quot;: [{\&quot;name\&quot;: \&quot;Living Room\&quot;, \&quot;address\&quot;: \&quot;10.0.0.30\&quot;, \&quot;identifier\&quot;: \&quot;37323C0E-99E6-4CC3-A006-1ED5368FFF8C\&quot;, \&quot;all_identifiers\&quot;: [\&quot;86B730B2-5189-4B6A-BCAA-CDDB18F05FA8\&quot;, \&quot;C8:D0:83:E9:D0:49\&quot;, \&quot;37323C0E-99E6-4CC3-A006-1ED5368FFF8C\&quot;, \&quot;C8D083E9D049\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;C8:D0:83:E9:D0:49\&quot;, \&quot;model\&quot;: \&quot;Gen4K\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4K\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.5\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49154}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}, {\&quot;name\&quot;: \&quot;Kitchen\&quot;, \&quot;address\&quot;: \&quot;10.0.0.79\&quot;, \&quot;identifier\&quot;: \&quot;45B6A67A-9FAD-497D-95EF-7FC5ECB3371C\&quot;, \&quot;all_identifiers\&quot;: [\&quot;B163C908-000F-4983-BDC7-BEFD76887EF5\&quot;, \&quot;C8:69:CD:63:2A:11\&quot;, \&quot;45B6A67A-9FAD-497D-95EF-7FC5ECB3371C\&quot;, \&quot;C869CD632A11\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;C8:69:CD:63:2A:11\&quot;, \&quot;model\&quot;: \&quot;Gen4\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.4\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49157}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}, {\&quot;name\&quot;: \&quot;Bedroom\&quot;, \&quot;address\&quot;: \&quot;10.0.0.20\&quot;, \&quot;identifier\&quot;: \&quot;CA55DA36-ADEF-4DBC-A0B3-BA68B0C53E40\&quot;, \&quot;all_identifiers\&quot;: [\&quot;08:66:98:BC:37:1F\&quot;, \&quot;108F35A0-FF21-4884-96C2-145AAAB1B4C4\&quot;, \&quot;CA55DA36-ADEF-4DBC-A0B3-BA68B0C53E40\&quot;, \&quot;086698BC371F\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;08:66:98:BC:37:1F\&quot;, \&quot;model\&quot;: \&quot;Gen4\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.4\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49154}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}, {\&quot;name\&quot;: \&quot;Basement\&quot;, \&quot;address\&quot;: \&quot;10.0.0.156\&quot;, \&quot;identifier\&quot;: \&quot;C02B27DB-2AF3-43E7-8EF7-885E1E9AB3B4\&quot;, \&quot;all_identifiers\&quot;: [\&quot;8BDB6773-479F-4C01-A185-29FF5516F2C2\&quot;, \&quot;D0:03:4B:4C:2A:2E\&quot;, \&quot;C02B27DB-2AF3-43E7-8EF7-885E1E9AB3B4\&quot;, \&quot;D0034B4C2A2E\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;D0:03:4B:4C:2A:2E\&quot;, \&quot;model\&quot;: \&quot;Gen4\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.4\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49154}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}]}`).code(1).end()})},true);assert.strictEqual(response.devices.length,4);assert.strictEqual(response.errors.length,2);assert.strictEqual(response.devices[0].name,\&quot;Living Room\&quot;);assert.strictEqual(response.devices[0].host,\&quot;10.0.0.30\&quot;);assert.strictEqual(response.devices[0].id,\&quot;37323C0E-99E6-4CC3-A006-1ED5368FFF8C\&quot;);assert.strictEqual(response.devices[1].name,\&quot;Kitchen\&quot;);assert.strictEqual(response.devices[1].host,\&quot;10.0.0.79\&quot;);assert.strictEqual(response.devices[1].id,\&quot;45B6A67A-9FAD-497D-95EF-7FC5ECB3371C\&quot;);assert.strictEqual(response.devices[2].name,\&quot;Bedroom\&quot;);assert.strictEqual(response.devices[2].host,\&quot;10.0.0.20\&quot;);assert.strictEqual(response.devices[2].id,\&quot;CA55DA36-ADEF-4DBC-A0B3-BA68B0C53E40\&quot;);assert.strictEqual(response.devices[3].name,\&quot;Basement\&quot;);assert.strictEqual(response.devices[3].host,\&quot;10.0.0.156\&quot;);assert.strictEqual(response.devices[3].id,\&quot;C02B27DB-2AF3-43E7-8EF7-885E1E9AB3B4\&quot;);assert.strictEqual(response.errors[0].exception,\&quot;[Errno 113] Connect call failed (&#x27;10.0.0.232&#x27;, 32498)\&quot;);assert.strictEqual(response.errors[1].exception,\&quot;[Errno 113] Connect call failed (&#x27;10.0.0.229&#x27;, 32498)\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;046b7f23-2976-4ddb-b580-c306fb4728ad&quot;,&quot;parentUUID&quot;:&quot;e8f15996-3087-4bf0-a9d5-ca2ff6ad6a17&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7d5433e8-a6c4-4aac-a007-9689b86b9b99&quot;,&quot;899ca4e8-9db9-419c-ada0-ac17d3138a92&quot;,&quot;ffe81870-ddae-487a-9e61-97f5141b8740&quot;,&quot;989144cd-e5f8-4825-9df2-3dc82c4fba9c&quot;,&quot;40dea82f-4b1f-4b8f-bb1b-2465f20d60b5&quot;,&quot;f645798f-80f3-4aa4-b56d-a023e49e90f2&quot;,&quot;506da2bd-1a33-4906-a9b2-ac2ec55236a8&quot;,&quot;0ac5d316-1cc1-4e6a-8f6b-5ef8419e7d07&quot;,&quot;2f2a132f-0e80-498a-be21-0ec2fde0447e&quot;,&quot;defc00ed-f502-4885-b4f9-72af8318efc6&quot;,&quot;edd93688-de5d-47ac-b022-f1e105c5a401&quot;,&quot;046b7f23-2976-4ddb-b580-c306fb4728ad&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5457,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8a6e5c3e-7b3e-4546-96bd-0d3d42ec0390&quot;,&quot;title&quot;:&quot;static device()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should pass options to constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static device() should pass options to constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=NodePyATVInstance.device({host:\&quot;192.168.178.6\&quot;,name:\&quot;My Testdevice\&quot;});assert.strictEqual(device.host,\&quot;192.168.178.6\&quot;);assert.strictEqual(device.name,\&quot;My Testdevice\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b306bac9-9c54-43e0-babf-14253c23e383&quot;,&quot;parentUUID&quot;:&quot;8a6e5c3e-7b3e-4546-96bd-0d3d42ec0390&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b306bac9-9c54-43e0-babf-14253c23e383&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4452ec66-be3d-474e-9058-37fc57f7f3d7&quot;,&quot;title&quot;:&quot;version()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance version() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const i=new NodePyATVInstance({atvremotePath:\&quot;test\&quot;});await i.version({spawn:createFakeSpawn(cp=&gt;{assert.strictEqual(cp.cmd(),\&quot;test\&quot;);cp.code(1).end()})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;30c21d43-dfc4-4083-8a31-4090b229c91c&quot;,&quot;parentUUID&quot;:&quot;4452ec66-be3d-474e-9058-37fc57f7f3d7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;30c21d43-dfc4-4083-8a31-4090b229c91c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a6ee1a48-1cdb-43d6-82fc-22507fefe896&quot;,&quot;title&quot;:&quot;check()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance check() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const i=new NodePyATVInstance({atvremotePath:\&quot;test\&quot;});await assert.rejects(async()=&gt;{await i.check({spawn:createFakeSpawn(cp=&gt;{assert.strictEqual(cp.cmd(),\&quot;test\&quot;);cp.error(new Error(\&quot;spawn atvremote ENOENT\&quot;)).code(1).end()})})},/Unable to find pyatv. Is it installed?/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;10f60815-57f1-4c88-8341-c307771db62a&quot;,&quot;parentUUID&quot;:&quot;a6ee1a48-1cdb-43d6-82fc-22507fefe896&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;10f60815-57f1-4c88-8341-c307771db62a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1db18a50-715b-4009-99ad-c14161c71571&quot;,&quot;title&quot;:&quot;find()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance find() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const i=new NodePyATVInstance({atvscriptPath:\&quot;test\&quot;});await i.find({spawn:createFakeSpawn(cp=&gt;{assert.strictEqual(cp.cmd(),\&quot;test\&quot;);cp.stdout({\&quot;result\&quot;:\&quot;success\&quot;,\&quot;datetime\&quot;:\&quot;2020-11-06T20:47:30.840022+01:00\&quot;,\&quot;devices\&quot;:[]}).end()})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6719ab45-94fb-4755-b328-b1e137d5e37d&quot;,&quot;parentUUID&quot;:&quot;1db18a50-715b-4009-99ad-c14161c71571&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6719ab45-94fb-4755-b328-b1e137d5e37d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;dbb9c099-8d31-4606-92b0-251359ce7c9d&quot;,&quot;title&quot;:&quot;device()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance device() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const i=new NodePyATVInstance({debug:true});const d=i.device({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;});assert.deepStrictEqual(d.debug,true)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0d3d5a9b-68ee-421e-b209-8996539f5bbb&quot;,&quot;parentUUID&quot;:&quot;dbb9c099-8d31-4606-92b0-251359ce7c9d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0d3d5a9b-68ee-421e-b209-8996539f5bbb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;07fcf8e3-436d-4835-8a52-45653a825a66&quot;,&quot;title&quot;:&quot;Type Exports&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Type NodePyATVProtocol should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVProtocol should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVProtocol)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;34804947-01de-45bf-be59-8f3b2157576c&quot;,&quot;parentUUID&quot;:&quot;07fcf8e3-436d-4835-8a52-45653a825a66&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVMediaType should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVMediaType should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVMediaType)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;80e9b77c-6bdf-4de0-959c-1df9c138d056&quot;,&quot;parentUUID&quot;:&quot;07fcf8e3-436d-4835-8a52-45653a825a66&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVDeviceEvent should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVDeviceEvent should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVDeviceEvent)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;15620bb7-4c28-4209-95f7-ed212246222b&quot;,&quot;parentUUID&quot;:&quot;07fcf8e3-436d-4835-8a52-45653a825a66&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVDeviceState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVDeviceState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVDeviceState)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1b48c90a-0ed1-40bc-98d4-10a0fb596938&quot;,&quot;parentUUID&quot;:&quot;07fcf8e3-436d-4835-8a52-45653a825a66&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVRepeatState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVRepeatState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVRepeatState)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;818c5416-0b03-4792-8c88-f7c650c2e42d&quot;,&quot;parentUUID&quot;:&quot;07fcf8e3-436d-4835-8a52-45653a825a66&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVShuffleState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVShuffleState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVShuffleState)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1c3b239b-2728-4b24-8a8d-dbb63987711f&quot;,&quot;parentUUID&quot;:&quot;07fcf8e3-436d-4835-8a52-45653a825a66&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVKeys should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVKeys should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVKeys)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;92584f68-a4c8-4e81-be69-2e48a841189f&quot;,&quot;parentUUID&quot;:&quot;07fcf8e3-436d-4835-8a52-45653a825a66&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVInstanceOptions should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVInstanceOptions should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVListenerState)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8af1b06c-e48d-4df5-a179-ea9b5fdb83e9&quot;,&quot;parentUUID&quot;:&quot;07fcf8e3-436d-4835-8a52-45653a825a66&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVPowerState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVPowerState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVPowerState)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c25a3f24-68f3-422e-b41d-c60e30a6fbe4&quot;,&quot;parentUUID&quot;:&quot;07fcf8e3-436d-4835-8a52-45653a825a66&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;34804947-01de-45bf-be59-8f3b2157576c&quot;,&quot;80e9b77c-6bdf-4de0-959c-1df9c138d056&quot;,&quot;15620bb7-4c28-4209-95f7-ed212246222b&quot;,&quot;1b48c90a-0ed1-40bc-98d4-10a0fb596938&quot;,&quot;818c5416-0b03-4792-8c88-f7c650c2e42d&quot;,&quot;1c3b239b-2728-4b24-8a8d-dbb63987711f&quot;,&quot;92584f68-a4c8-4e81-be69-2e48a841189f&quot;,&quot;8af1b06c-e48d-4df5-a179-ea9b5fdb83e9&quot;,&quot;c25a3f24-68f3-422e-b41d-c60e30a6fbe4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;90f248bb-a0a5-440a-bd6f-57adad20cb7f&quot;,&quot;title&quot;:&quot;Tools&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;a6d5bf09-d991-4d11-a866-ccb878c30095&quot;,&quot;title&quot;:&quot;addRequestId() / removeRequestId()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a string&quot;,&quot;fullTitle&quot;:&quot;Tools addRequestId() / removeRequestId() should return a string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id=addRequestId();assert.strictEqual(typeof id,\&quot;string\&quot;);removeRequestId(id)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;26821aa5-276c-479f-b710-4e15fe757be0&quot;,&quot;parentUUID&quot;:&quot;a6d5bf09-d991-4d11-a866-ccb878c30095&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work if given id is not in index&quot;,&quot;fullTitle&quot;:&quot;Tools addRequestId() / removeRequestId() should work if given id is not in index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;removeRequestId(\&quot;FOO\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;be3971fa-9551-4e4b-b5e7-bf5b99f89de1&quot;,&quot;parentUUID&quot;:&quot;a6d5bf09-d991-4d11-a866-ccb878c30095&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;26821aa5-276c-479f-b710-4e15fe757be0&quot;,&quot;be3971fa-9551-4e4b-b5e7-bf5b99f89de1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1f42bdde-5bb7-42e2-a221-611454bc45db&quot;,&quot;title&quot;:&quot;debug()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work without any options&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work without any options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(\&quot;TEST\&quot;,\&quot;Hello World.\&quot;,{})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f2f43c98-dbcf-4d99-adf6-ce3903b4a19e&quot;,&quot;parentUUID&quot;:&quot;1f42bdde-5bb7-42e2-a221-611454bc45db&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with default logger&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with default logger&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(\&quot;TEST\&quot;,\&quot;Hello World.\&quot;,{debug:true})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;22b51cd3-0b1d-4237-8426-6791e416df17&quot;,&quot;parentUUID&quot;:&quot;1f42bdde-5bb7-42e2-a221-611454bc45db&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with custom logger&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with custom logger&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(\&quot;TEST\&quot;,\&quot;Hello World.\&quot;,{debug:__name(function(msg){assert.strictEqual(this,null);assert.ok(msg.includes(\&quot;Hello World\&quot;))},\&quot;debug\&quot;)})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9ce90d74-44ad-4e67-a438-9f7e65c1cbac&quot;,&quot;parentUUID&quot;:&quot;1f42bdde-5bb7-42e2-a221-611454bc45db&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with colors disabled&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with colors disabled&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(\&quot;TEST\&quot;,\&quot;Hello World.\&quot;,{noColors:true})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6930384b-9b4b-44f8-827e-2628f09779b3&quot;,&quot;parentUUID&quot;:&quot;1f42bdde-5bb7-42e2-a221-611454bc45db&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with custom logger and colors disabled&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with custom logger and colors disabled&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(\&quot;TEST\&quot;,\&quot;Hello World.\&quot;,{noColors:true,debug:__name(function(msg){assert.strictEqual(this,null);assert.strictEqual(msg,\&quot;[node-pyatv][TEST] Hello World.\&quot;)},\&quot;debug\&quot;)})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c5651d8a-d05d-4825-94a8-6e4c64ddd5b8&quot;,&quot;parentUUID&quot;:&quot;1f42bdde-5bb7-42e2-a221-611454bc45db&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f2f43c98-dbcf-4d99-adf6-ce3903b4a19e&quot;,&quot;22b51cd3-0b1d-4237-8426-6791e416df17&quot;,&quot;9ce90d74-44ad-4e67-a438-9f7e65c1cbac&quot;,&quot;6930384b-9b4b-44f8-827e-2628f09779b3&quot;,&quot;c5651d8a-d05d-4825-94a8-6e4c64ddd5b8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;32edcff0-c173-4ee5-8fc9-079986c483ac&quot;,&quot;title&quot;:&quot;getExecutable()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should handle atvremotePath if set&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle atvremotePath if set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=getExecutable(NodePyATVExecutableType.atvremote,{atvremotePath:\&quot;/tmp/1\&quot;,atvscriptPath:\&quot;/tmp/2\&quot;});assert.strictEqual(result,\&quot;/tmp/1\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1d325a33-a75b-4190-9652-4c9c8ae242bc&quot;,&quot;parentUUID&quot;:&quot;32edcff0-c173-4ee5-8fc9-079986c483ac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle atvscriptPath if set&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle atvscriptPath if set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=getExecutable(NodePyATVExecutableType.atvscript,{atvremotePath:\&quot;/tmp/1\&quot;,atvscriptPath:\&quot;/tmp/2\&quot;});assert.strictEqual(result,\&quot;/tmp/2\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5d83e7f5-17b5-427c-8d6d-1372aa69b3ba&quot;,&quot;parentUUID&quot;:&quot;32edcff0-c173-4ee5-8fc9-079986c483ac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle default for atvremote&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle default for atvremote&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=getExecutable(NodePyATVExecutableType.atvremote,{atvscriptPath:\&quot;/tmp\&quot;});assert.strictEqual(result,\&quot;atvremote\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f7559f69-c16f-4f04-8937-43b24680dd28&quot;,&quot;parentUUID&quot;:&quot;32edcff0-c173-4ee5-8fc9-079986c483ac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle default for atvscript&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle default for atvscript&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=getExecutable(NodePyATVExecutableType.atvscript,{atvremotePath:\&quot;/tmp\&quot;});assert.strictEqual(result,\&quot;atvscript\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;74b5e49c-92b8-401f-aa48-553ed420acad&quot;,&quot;parentUUID&quot;:&quot;32edcff0-c173-4ee5-8fc9-079986c483ac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1d325a33-a75b-4190-9652-4c9c8ae242bc&quot;,&quot;5d83e7f5-17b5-427c-8d6d-1372aa69b3ba&quot;,&quot;f7559f69-c16f-4f04-8937-43b24680dd28&quot;,&quot;74b5e49c-92b8-401f-aa48-553ed420acad&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f6e837ae-8acb-49ff-851a-bf4a9e16ea98&quot;,&quot;title&quot;:&quot;getParameters()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;empty case&quot;,&quot;fullTitle&quot;:&quot;Tools getParameters() empty case&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await getParameters();assert.deepEqual(result,[])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3c2ce570-5b3b-4baa-af83-7b24b9ef2fb8&quot;,&quot;parentUUID&quot;:&quot;f6e837ae-8acb-49ff-851a-bf4a9e16ea98&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;easy case&quot;,&quot;fullTitle&quot;:&quot;Tools getParameters() easy case&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await getParameters({host:\&quot;192.168.178.2\&quot;});assert.deepEqual(result,[\&quot;-s\&quot;,\&quot;192.168.178.2\&quot;])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5475ee5b-b7ac-4552-aa58-4a0b150e20ff&quot;,&quot;parentUUID&quot;:&quot;f6e837ae-8acb-49ff-851a-bf4a9e16ea98&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;full case&quot;,&quot;fullTitle&quot;:&quot;Tools getParameters() full case&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await getParameters({hosts:[\&quot;192.168.178.2\&quot;,\&quot;192.168.178.3\&quot;],id:\&quot;****\&quot;,protocol:NodePyATVProtocol.mrp,dmapCredentials:\&quot;****\&quot;,mrpCredentials:\&quot;****\&quot;,airplayCredentials:\&quot;****\&quot;,companionCredentials:\&quot;1234\&quot;,raopCredentials:\&quot;::foo:\&quot;});assert.deepEqual(result,[\&quot;-s\&quot;,\&quot;192.168.178.2,192.168.178.3\&quot;,\&quot;-i\&quot;,\&quot;****\&quot;,\&quot;--protocol\&quot;,\&quot;mrp\&quot;,\&quot;--dmap-credentials\&quot;,\&quot;****\&quot;,\&quot;--mrp-credentials\&quot;,\&quot;****\&quot;,\&quot;--airplay-credentials\&quot;,\&quot;****\&quot;,\&quot;--companion-credentials\&quot;,\&quot;1234\&quot;,\&quot;--raop-credentials\&quot;,\&quot;::foo:\&quot;])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3d1f50f6-7825-41b4-a969-fb1c8d1b026b&quot;,&quot;parentUUID&quot;:&quot;f6e837ae-8acb-49ff-851a-bf4a9e16ea98&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3c2ce570-5b3b-4baa-af83-7b24b9ef2fb8&quot;,&quot;5475ee5b-b7ac-4552-aa58-4a0b150e20ff&quot;,&quot;3d1f50f6-7825-41b4-a969-fb1c8d1b026b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8abe8cbd-d460-483b-9d5d-a5e15772e517&quot;,&quot;title&quot;:&quot;parseState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work with empty data&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should work with empty data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input={};const result=parseState(input,\&quot;\&quot;,{});assert.deepStrictEqual(result,{dateTime:null,hash:null,mediaType:null,deviceState:null,title:null,artist:null,album:null,genre:null,totalTime:null,position:null,shuffle:null,repeat:null,app:null,appId:null,powerState:null,focusState:null,volume:null,outputDevices:null,contentIdentifier:null,iTunesStoreIdentifier:null,episodeNumber:null,seasonNumber:null,seriesName:null})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a998806f-5211-4592-9e4a-0c71d5fbb824&quot;,&quot;parentUUID&quot;:&quot;8abe8cbd-d460-483b-9d5d-a5e15772e517&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work without data&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should work without data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=parseState(null,\&quot;\&quot;,{});assert.deepStrictEqual(result,{dateTime:null,hash:null,mediaType:null,deviceState:null,title:null,artist:null,album:null,genre:null,totalTime:null,position:null,shuffle:null,repeat:null,app:null,appId:null,powerState:null,focusState:null,volume:null,outputDevices:null,contentIdentifier:null,iTunesStoreIdentifier:null,episodeNumber:null,seasonNumber:null,seriesName:null})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;94d3fdee-0048-43d4-b2e7-d6c820cd9dac&quot;,&quot;parentUUID&quot;:&quot;8abe8cbd-d460-483b-9d5d-a5e15772e517&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with example data&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should work with example data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input={result:\&quot;success\&quot;,datetime:\&quot;2020-11-07T22:38:43.608030+01:00\&quot;,hash:\&quot;100e0ab6-6ff5-4199-9c04-a7107ff78712\&quot;,media_type:\&quot;video\&quot;,device_state:\&quot;playing\&quot;,title:\&quot;Solo: A Star Wars Story\&quot;,artist:null,album:null,genre:null,total_time:8097,position:27,shuffle:\&quot;off\&quot;,repeat:\&quot;off\&quot;,app:\&quot;Disney+\&quot;,app_id:\&quot;com.disney.disneyplus\&quot;,power_state:null,focus_state:null,volume:null,output_devices:null,content_identifier:null,itunes_store_identifier:null,episode_number:null,season_number:null,series_name:null};const result=parseState(input,\&quot;\&quot;,{});assert.deepStrictEqual(result,{dateTime:new Date(\&quot;2020-11-07T22:38:43.608030+01:00\&quot;),hash:\&quot;100e0ab6-6ff5-4199-9c04-a7107ff78712\&quot;,mediaType:NodePyATVMediaType.video,deviceState:NodePyATVDeviceState.playing,title:\&quot;Solo: A Star Wars Story\&quot;,artist:null,album:null,genre:null,totalTime:8097,position:27,shuffle:NodePyATVShuffleState.off,repeat:NodePyATVRepeatState.off,app:\&quot;Disney+\&quot;,appId:\&quot;com.disney.disneyplus\&quot;,powerState:null,focusState:null,volume:null,outputDevices:null,contentIdentifier:null,iTunesStoreIdentifier:null,episodeNumber:null,seasonNumber:null,seriesName:null})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d3cea90f-cb5c-4861-a213-1358f1e6e05f&quot;,&quot;parentUUID&quot;:&quot;8abe8cbd-d460-483b-9d5d-a5e15772e517&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw an error for pyatv exceptions&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should throw an error for pyatv exceptions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input={result:\&quot;failure\&quot;,datetime:\&quot;2021-11-24T21:13:36.424576+03:00\&quot;,exception:\&quot;invalid credentials: 321\&quot;,stacktrace:&#x27;Traceback (most recent call last):\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\&quot;, line 302, in appstart\\n    print(args.output(await _handle_command(args, abort_sem, loop)), flush=True)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\&quot;, line 196, in _handle_command\\n    atv = await connect(config, loop, protocol=Protocol.MRP)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/__init__.py\&quot;, line 96, in connect\\n    for setup_data in proto_methods.setup(\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\&quot;, line 192, in setup\\n    stream = AirPlayStream(config, service)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\&quot;, line 79, in __init__\\n    self._credentials: HapCredentials = parse_credentials(self.service.credentials)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/auth/hap_pairing.py\&quot;, line 139, in parse_credentials\\n    raise exceptions.InvalidCredentialsError(\&quot;invalid credentials: \&quot; + detail_string)\\npyatv.exceptions.InvalidCredentialsError: invalid credentials: 321\\n&#x27;};assert.throws(()=&gt;{parseState(input,\&quot;\&quot;,{})},/Got pyatv Error: invalid credentials: 321/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f46bc660-954f-4c77-af72-0820dc30313a&quot;,&quot;parentUUID&quot;:&quot;8abe8cbd-d460-483b-9d5d-a5e15772e517&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should ignore date if it&#x27;s an invalid date&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should ignore date if it&#x27;s an invalid date&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input={datetime:\&quot;today\&quot;};const result=parseState(input,\&quot;\&quot;,{});assert.deepStrictEqual(result,{dateTime:null,hash:null,mediaType:null,deviceState:null,title:null,artist:null,album:null,genre:null,totalTime:null,position:null,shuffle:null,repeat:null,app:null,appId:null,powerState:null,focusState:null,volume:null,outputDevices:null,contentIdentifier:null,iTunesStoreIdentifier:null,episodeNumber:null,seasonNumber:null,seriesName:null})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;68026c0a-8a45-452b-917b-ec8064464784&quot;,&quot;parentUUID&quot;:&quot;8abe8cbd-d460-483b-9d5d-a5e15772e517&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should ignore data if unsupported type&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should ignore data if unsupported type&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input={result:\&quot;success\&quot;,datetime:true,hash:1337,media_type:false,device_state:43,title:void 0,artist:90,album:Infinity,genre:Math.PI,total_time:\&quot;23min\&quot;,position:\&quot;0:30.123\&quot;,shuffle:false,repeat:true,app:0,app_id:891645381647289,power_state:null,focus_state:null,volume:null,output_devices:null,content_identifier:null,itunes_store_identifier:null,episode_number:null,season_number:null,series_name:null};const result=parseState(input,\&quot;\&quot;,{});assert.deepStrictEqual(result,{dateTime:null,hash:null,mediaType:null,deviceState:null,title:null,artist:null,album:null,genre:null,totalTime:null,position:null,shuffle:null,repeat:null,app:null,appId:null,powerState:null,focusState:null,volume:null,outputDevices:null,contentIdentifier:null,iTunesStoreIdentifier:null,episodeNumber:null,seasonNumber:null,seriesName:null})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b2c25580-e3d5-471f-a901-9790ce890ec0&quot;,&quot;parentUUID&quot;:&quot;8abe8cbd-d460-483b-9d5d-a5e15772e517&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should ignore enums with unsupported valid&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should ignore enums with unsupported valid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input={media_type:\&quot;3d-experience\&quot;,device_state:\&quot;initiating\&quot;,shuffle:\&quot;everything\&quot;,repeat:\&quot;nothing\&quot;};const result=parseState(input,\&quot;\&quot;,{});assert.deepStrictEqual(result,{dateTime:null,hash:null,mediaType:null,deviceState:null,title:null,artist:null,album:null,genre:null,totalTime:null,position:null,shuffle:null,repeat:null,app:null,appId:null,powerState:null,focusState:null,volume:null,outputDevices:null,contentIdentifier:null,iTunesStoreIdentifier:null,episodeNumber:null,seasonNumber:null,seriesName:null})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ccd12aa8-15fd-4680-874e-92468f975f20&quot;,&quot;parentUUID&quot;:&quot;8abe8cbd-d460-483b-9d5d-a5e15772e517&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a998806f-5211-4592-9e4a-0c71d5fbb824&quot;,&quot;94d3fdee-0048-43d4-b2e7-d6c820cd9dac&quot;,&quot;d3cea90f-cb5c-4861-a213-1358f1e6e05f&quot;,&quot;f46bc660-954f-4c77-af72-0820dc30313a&quot;,&quot;68026c0a-8a45-452b-917b-ec8064464784&quot;,&quot;b2c25580-e3d5-471f-a901-9790ce890ec0&quot;,&quot;ccd12aa8-15fd-4680-874e-92468f975f20&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;11.0.1&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;node-pyatv&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report/assets&quot;,&quot;jsonFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/mochawesome-report/mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>