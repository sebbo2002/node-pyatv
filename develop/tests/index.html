<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:93,&quot;tests&quot;:162,&quot;passes&quot;:160,&quot;pending&quot;:2,&quot;failures&quot;:0,&quot;start&quot;:&quot;2024-01-15T17:32:31.250Z&quot;,&quot;end&quot;:&quot;2024-01-15T17:32:43.078Z&quot;,&quot;duration&quot;:11828,&quot;testsRegistered&quot;:162,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:1.2345679012345678,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;c719070c-5e12-4602-a670-ffd225d8c1b8&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;752048da-7ee1-458a-a84b-133b3428c326&quot;,&quot;title&quot;:&quot;NodePyATVDeviceEvent&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c25b66e9-15df-42a6-bbec-4472bd659acd&quot;,&quot;title&quot;:&quot;get key()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get key() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event = new NodePyATVDeviceEvent({\n    key: &#x27;genre&#x27;,\n    old: &#x27;Jazz&#x27;,\n    new: &#x27;Rock&#x27;,\n    device: new NodePyATVDevice({\n        host: &#x27;192.168.178.2&#x27;,\n        name: &#x27;My Testinstance&#x27;\n    })\n});\nassert.strictEqual(event.key, &#x27;genre&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f83dc03e-cc02-476f-ae83-5be2abec5cef&quot;,&quot;parentUUID&quot;:&quot;c25b66e9-15df-42a6-bbec-4472bd659acd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f83dc03e-cc02-476f-ae83-5be2abec5cef&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;40f3197c-399c-411f-adc2-0d3d013a8f66&quot;,&quot;title&quot;:&quot;get oldValue()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get oldValue() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event = new NodePyATVDeviceEvent({\n    key: &#x27;genre&#x27;,\n    old: &#x27;Jazz&#x27;,\n    new: &#x27;Rock&#x27;,\n    device: new NodePyATVDevice({\n        host: &#x27;192.168.178.2&#x27;,\n        name: &#x27;My Testinstance&#x27;\n    })\n});\nassert.strictEqual(event.oldValue, &#x27;Jazz&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;33dfcdc0-1c81-4096-8e63-7b272d9e610e&quot;,&quot;parentUUID&quot;:&quot;40f3197c-399c-411f-adc2-0d3d013a8f66&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;33dfcdc0-1c81-4096-8e63-7b272d9e610e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e0743c84-6001-477c-acc6-4026796847c8&quot;,&quot;title&quot;:&quot;get newValue()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get newValue() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event = new NodePyATVDeviceEvent({\n    key: &#x27;genre&#x27;,\n    old: &#x27;Jazz&#x27;,\n    new: &#x27;Rock&#x27;,\n    device: new NodePyATVDevice({\n        host: &#x27;192.168.178.2&#x27;,\n        name: &#x27;My Testinstance&#x27;\n    })\n});\nassert.strictEqual(event.newValue, &#x27;Rock&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f2de630a-07d7-48e1-9052-bfbb30dc8222&quot;,&quot;parentUUID&quot;:&quot;e0743c84-6001-477c-acc6-4026796847c8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f2de630a-07d7-48e1-9052-bfbb30dc8222&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8464572d-cd42-465b-ab16-ff92b3115f86&quot;,&quot;title&quot;:&quot;get value()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get value() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event = new NodePyATVDeviceEvent({\n    key: &#x27;genre&#x27;,\n    old: &#x27;Jazz&#x27;,\n    new: &#x27;Rock&#x27;,\n    device: new NodePyATVDevice({\n        host: &#x27;192.168.178.2&#x27;,\n        name: &#x27;My Testinstance&#x27;\n    })\n});\nassert.strictEqual(event.value, &#x27;Rock&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a090ca46-3403-4542-9e68-a8dfb465553e&quot;,&quot;parentUUID&quot;:&quot;8464572d-cd42-465b-ab16-ff92b3115f86&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a090ca46-3403-4542-9e68-a8dfb465553e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d1ffbf69-4981-467c-b474-3aac853ea5e9&quot;,&quot;title&quot;:&quot;get device()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get device() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    host: &#x27;192.168.178.2&#x27;,\n    name: &#x27;My Testinstance&#x27;\n});\nconst event = new NodePyATVDeviceEvent({\n    key: &#x27;genre&#x27;,\n    old: &#x27;Jazz&#x27;,\n    new: &#x27;Rock&#x27;,\n    device\n});\nassert.deepEqual(event.device, device);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;00be2421-ca40-43b0-8509-7f3d253fc93e&quot;,&quot;parentUUID&quot;:&quot;d1ffbf69-4981-467c-b474-3aac853ea5e9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;00be2421-ca40-43b0-8509-7f3d253fc93e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;43f51a8e-4a14-45fd-b548-5b8bbffd9ddc&quot;,&quot;title&quot;:&quot;NodePyATVDeviceEvents&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;7a32cae1-b9c2-4d8c-898c-c80b6f845fba&quot;,&quot;title&quot;:&quot;applyStateAndEmitEvents()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should emit update:key event&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit update:key event&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                title: &#x27;My Movie&#x27;\n            });\n        })\n    });\n    yield new Promise(cb =&gt; {\n        device.once(&#x27;update:title&#x27;, event =&gt; {\n            assert.ok(event instanceof NodePyATVDeviceEvent);\n            assert.strictEqual(event.key, &#x27;title&#x27;);\n            assert.strictEqual(event.oldValue, null);\n            assert.strictEqual(event.newValue, &#x27;My Movie&#x27;);\n            assert.strictEqual(event.value, &#x27;My Movie&#x27;);\n            assert.deepStrictEqual(event.device, device);\n            cb(undefined);\n        });\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;de4e981d-5a6f-406c-86ef-a6a286104340&quot;,&quot;parentUUID&quot;:&quot;7a32cae1-b9c2-4d8c-898c-c80b6f845fba&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit update event&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit update event&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                title: &#x27;My Movie&#x27;\n            });\n        })\n    });\n    yield new Promise(cb =&gt; {\n        device.once(&#x27;update&#x27;, event =&gt; {\n            assert.ok(event instanceof NodePyATVDeviceEvent);\n            assert.strictEqual(event.key, &#x27;title&#x27;);\n            assert.strictEqual(event.oldValue, null);\n            assert.strictEqual(event.newValue, &#x27;My Movie&#x27;);\n            assert.strictEqual(event.value, &#x27;My Movie&#x27;);\n            assert.deepStrictEqual(event.device, device);\n            cb(undefined);\n        });\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;536f385d-31c0-4107-8f65-3012160acfba&quot;,&quot;parentUUID&quot;:&quot;7a32cae1-b9c2-4d8c-898c-c80b6f845fba&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit update:key event before update&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit update:key event before update&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                title: &#x27;My Movie&#x27;\n            });\n        })\n    });\n    const sort = [];\n    yield Promise.race([\n        new Promise(cb =&gt; {\n            device.once(&#x27;update&#x27;, () =&gt; {\n                sort.push(&#x27;update&#x27;);\n                cb(undefined);\n            });\n        }),\n        new Promise(cb =&gt; {\n            device.once(&#x27;update:title&#x27;, () =&gt; {\n                sort.push(&#x27;update:title&#x27;);\n                cb(undefined);\n            });\n        })\n    ]);\n    assert.deepStrictEqual(sort, [&#x27;update:title&#x27;, &#x27;update&#x27;]);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9c25958a-e9cc-4961-93db-d9f3cc474d90&quot;,&quot;parentUUID&quot;:&quot;7a32cae1-b9c2-4d8c-898c-c80b6f845fba&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error events on failures&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit error events on failures&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;failure&#x27;,\n                datetime: &#x27;2021-11-24T21:13:36.424576+03:00&#x27;,\n                exception: &#x27;invalid credentials: 321&#x27;,\n                stacktrace: &#x27;Traceback (most recent call last):\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\\\&quot;, line 302, in appstart\\n    print(args.output(await _handle_command(args, abort_sem, loop)), flush=True)\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\\\&quot;, line 196, in _handle_command\\n    atv = await connect(config, loop, protocol=Protocol.MRP)\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/__init__.py\\\&quot;, line 96, in connect\\n    for setup_data in proto_methods.setup(\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\\\&quot;, line 192, in setup\\n    stream = AirPlayStream(config, service)\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\\\&quot;, line 79, in __init__\\n    self._credentials: HapCredentials = parse_credentials(self.service.credentials)\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/auth/hap_pairing.py\\\&quot;, line 139, in parse_credentials\\n    raise exceptions.InvalidCredentialsError(\\\&quot;invalid credentials: \\\&quot; + detail_string)\\npyatv.exceptions.InvalidCredentialsError: invalid credentials: 321\\n&#x27;\n            });\n        })\n    });\n    yield new Promise(cb =&gt; {\n        device.once(&#x27;error&#x27;, error =&gt; {\n            assert.ok(error instanceof Error);\n            assert.ok(error.toString().includes(&#x27;invalid credentials: 321&#x27;));\n            cb(undefined);\n        });\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e14dfd36-c8a3-422f-aab3-6e42b6773dfb&quot;,&quot;parentUUID&quot;:&quot;7a32cae1-b9c2-4d8c-898c-c80b6f845fba&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not emit an update if new value is same as old one&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should not emit an update if new value is same as old one&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    let spawnCounter = 0;\n    let eventCounter = 0;\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            if (spawnCounter === 0) {\n                cp.onStdIn(() =&gt; cp.end());\n            }\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                title: &#x27;My Movie&#x27;\n            });\n            spawnCounter++;\n            if (spawnCounter &gt;= 2) {\n                cp.end();\n            }\n        })\n    });\n    const listener = () =&gt; {\n        eventCounter++;\n    };\n    device.on(&#x27;update&#x27;, listener);\n    yield new Promise(cb =&gt; setTimeout(cb, 0));\n    yield device.getState();\n    device.off(&#x27;update&#x27;, listener);\n    assert.strictEqual(spawnCounter, 2);\n    assert.strictEqual(eventCounter, 1);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0bf887f2-7c38-4004-bfa6-0c298a3a15af&quot;,&quot;parentUUID&quot;:&quot;7a32cae1-b9c2-4d8c-898c-c80b6f845fba&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error event if event listener throws an exception&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit error event if event listener throws an exception&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                title: &#x27;My Movie&#x27;\n            });\n        })\n    });\n    let callCounter = 0;\n    const error = new Error(&#x27;This is an error. Be nice.&#x27;);\n    device.once(&#x27;error&#x27;, err =&gt; {\n        assert.strictEqual(err, error);\n        callCounter++;\n    });\n    const listener = () =&gt; {\n        throw error;\n    };\n    device.on(&#x27;update&#x27;, listener);\n    yield new Promise(cb =&gt; setTimeout(cb, 0));\n    device.off(&#x27;update&#x27;, listener);\n    assert.strictEqual(callCounter, 1);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8aa452ae-752b-46de-955f-9b7f30d2997e&quot;,&quot;parentUUID&quot;:&quot;7a32cae1-b9c2-4d8c-898c-c80b6f845fba&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should also work with powerState&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should also work with powerState&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                datetime: new Date().toJSON(),\n                power_state: &#x27;off&#x27;\n            });\n        })\n    });\n    yield new Promise(cb =&gt; {\n        device.once(&#x27;update:powerState&#x27;, event =&gt; {\n            assert.ok(event instanceof NodePyATVDeviceEvent);\n            assert.strictEqual(event.key, &#x27;powerState&#x27;);\n            assert.strictEqual(event.oldValue, null);\n            assert.strictEqual(event.newValue, &#x27;off&#x27;);\n            assert.strictEqual(event.newValue, NodePyATVPowerState.off);\n            assert.strictEqual(event.value, &#x27;off&#x27;);\n            assert.strictEqual(event.value, NodePyATVPowerState.off);\n            assert.deepStrictEqual(event.device, device);\n            cb(undefined);\n        });\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e1ecc469-e11f-4c2e-8551-3aace90721b5&quot;,&quot;parentUUID&quot;:&quot;7a32cae1-b9c2-4d8c-898c-c80b6f845fba&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only one event for powerState changes&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should only one event for powerState changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                datetime: new Date().toJSON(),\n                power_state: &#x27;off&#x27;\n            });\n            cp.end();\n        })\n    });\n    let counter = 0;\n    device.on(&#x27;update&#x27;, event =&gt; {\n        assert.ok(event instanceof NodePyATVDeviceEvent);\n        assert.strictEqual(event.key, &#x27;powerState&#x27;);\n        assert.strictEqual(event.oldValue, null);\n        assert.strictEqual(event.newValue, &#x27;off&#x27;);\n        assert.strictEqual(event.newValue, NodePyATVPowerState.off);\n        assert.strictEqual(event.value, &#x27;off&#x27;);\n        assert.strictEqual(event.value, NodePyATVPowerState.off);\n        assert.deepStrictEqual(event.device, device);\n        counter++;\n    });\n    yield new Promise(cb =&gt; setTimeout(cb, 10));\n    assert.strictEqual(counter, 1);\n    device.removeAllListeners(&#x27;update&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ecdbe4c7-f02f-43af-8a16-d278d1df88d5&quot;,&quot;parentUUID&quot;:&quot;7a32cae1-b9c2-4d8c-898c-c80b6f845fba&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only one event for focusState changes&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should only one event for focusState changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                datetime: new Date().toJSON(),\n                focus_state: &#x27;unfocused&#x27;\n            });\n            cp.end();\n        })\n    });\n    let counter = 0;\n    device.on(&#x27;update&#x27;, event =&gt; {\n        assert.ok(event instanceof NodePyATVDeviceEvent);\n        assert.strictEqual(event.key, &#x27;focusState&#x27;);\n        assert.strictEqual(event.oldValue, null);\n        assert.strictEqual(event.newValue, &#x27;unfocused&#x27;);\n        assert.strictEqual(event.newValue, NodePyATVFocusState.unfocused);\n        assert.strictEqual(event.value, &#x27;unfocused&#x27;);\n        assert.strictEqual(event.value, NodePyATVFocusState.unfocused);\n        assert.deepStrictEqual(event.device, device);\n        counter++;\n    });\n    yield new Promise(cb =&gt; setTimeout(cb, 10));\n    assert.strictEqual(counter, 1);\n    device.removeAllListeners(&#x27;update&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7ec2158f-a394-40a1-9b5d-f80365737f40&quot;,&quot;parentUUID&quot;:&quot;7a32cae1-b9c2-4d8c-898c-c80b6f845fba&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only one event for outputDevices changes&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should only one event for outputDevices changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                datetime: new Date().toJSON(),\n                output_devices: [{\n                        name: &#x27;Living room&#x27;,\n                        identifier: &#x27;AAAAAAAA-BBBB-CCCC-DDDD-EEEEEEEEEEEE&#x27;\n                    }]\n            });\n            cp.end();\n        })\n    });\n    let counter = 0;\n    device.on(&#x27;update&#x27;, event =&gt; {\n        assert.ok(event instanceof NodePyATVDeviceEvent);\n        assert.strictEqual(event.key, &#x27;outputDevices&#x27;);\n        assert.strictEqual(event.oldValue, null);\n        assert.deepStrictEqual(event.newValue, [{\n                name: &#x27;Living room&#x27;,\n                identifier: &#x27;AAAAAAAA-BBBB-CCCC-DDDD-EEEEEEEEEEEE&#x27;\n            }]);\n        assert.deepStrictEqual(event.value, [{\n                name: &#x27;Living room&#x27;,\n                identifier: &#x27;AAAAAAAA-BBBB-CCCC-DDDD-EEEEEEEEEEEE&#x27;\n            }]);\n        assert.deepStrictEqual(event.device, device);\n        counter++;\n    });\n    yield new Promise(cb =&gt; setTimeout(cb, 10));\n    assert.strictEqual(counter, 1);\n    device.removeAllListeners(&#x27;update&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;98b724a5-2628-4d38-81d4-319a281964ef&quot;,&quot;parentUUID&quot;:&quot;7a32cae1-b9c2-4d8c-898c-c80b6f845fba&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only one event for volume changes&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should only one event for volume changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                datetime: new Date().toJSON(),\n                volume: 20.0\n            });\n            cp.end();\n        })\n    });\n    let counter = 0;\n    device.on(&#x27;update&#x27;, event =&gt; {\n        assert.ok(event instanceof NodePyATVDeviceEvent);\n        assert.strictEqual(event.key, &#x27;volume&#x27;);\n        assert.strictEqual(event.oldValue, null);\n        assert.strictEqual(event.newValue, 20);\n        assert.strictEqual(event.value, 20);\n        assert.deepStrictEqual(event.device, device);\n        counter++;\n    });\n    yield new Promise(cb =&gt; setTimeout(cb, 10));\n    assert.strictEqual(counter, 1);\n    device.removeAllListeners(&#x27;update&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;00b3adde-6fd5-42f9-8d76-2b716c268cf6&quot;,&quot;parentUUID&quot;:&quot;7a32cae1-b9c2-4d8c-898c-c80b6f845fba&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not trigger any events for newly added fields&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should not trigger any events for newly added fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                datetime: new Date().toJSON(),\n                foo: &#x27;bar&#x27;\n            });\n            cp.end();\n        })\n    });\n    device.on(&#x27;update&#x27;, event =&gt; {\n        assert.fail(`Got an update event for a new field: ${event}`);\n    });\n    yield new Promise(cb =&gt; setTimeout(cb, 10));\n    device.removeAllListeners(&#x27;update&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c9d6a2df-da70-4d91-a0d5-44de6479a634&quot;,&quot;parentUUID&quot;:&quot;7a32cae1-b9c2-4d8c-898c-c80b6f845fba&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;de4e981d-5a6f-406c-86ef-a6a286104340&quot;,&quot;536f385d-31c0-4107-8f65-3012160acfba&quot;,&quot;9c25958a-e9cc-4961-93db-d9f3cc474d90&quot;,&quot;e14dfd36-c8a3-422f-aab3-6e42b6773dfb&quot;,&quot;0bf887f2-7c38-4004-bfa6-0c298a3a15af&quot;,&quot;8aa452ae-752b-46de-955f-9b7f30d2997e&quot;,&quot;e1ecc469-e11f-4c2e-8551-3aace90721b5&quot;,&quot;ecdbe4c7-f02f-43af-8a16-d278d1df88d5&quot;,&quot;7ec2158f-a394-40a1-9b5d-f80365737f40&quot;,&quot;98b724a5-2628-4d38-81d4-319a281964ef&quot;,&quot;00b3adde-6fd5-42f9-8d76-2b716c268cf6&quot;,&quot;c9d6a2df-da70-4d91-a0d5-44de6479a634&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:71,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6e39998c-f322-45f7-a508-895f93c00c98&quot;,&quot;title&quot;:&quot;start|stopListening()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should emit error if spawn fails&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should emit error if spawn fails&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const error = new Error();\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.error(error).end();\n        })\n    });\n    const listener = () =&gt; {\n        // empty listener\n    };\n    device.on(&#x27;update&#x27;, listener);\n    yield new Promise(cb =&gt; {\n        device.once(&#x27;error&#x27;, err =&gt; {\n            assert.strictEqual(err, error);\n            cb(undefined);\n        });\n    });\n    device.off(&#x27;update&#x27;, listener);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;854398c2-0745-42c1-ad0d-f5c96d2486d4&quot;,&quot;parentUUID&quot;:&quot;6e39998c-f322-45f7-a508-895f93c00c98&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error on stderr data&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should emit error on stderr data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.stderr(&#x27;Hello World!&#x27;).end();\n        })\n    });\n    const listener = () =&gt; {\n        // empty listener\n    };\n    device.on(&#x27;update&#x27;, listener);\n    yield new Promise(cb =&gt; {\n        device.once(&#x27;error&#x27;, err =&gt; {\n            assert.ok(err instanceof Error);\n            assert.ok(err.toString().includes(&#x27;Got stderr output from pyatv: Hello World!&#x27;));\n            cb(undefined);\n        });\n    });\n    device.off(&#x27;update&#x27;, listener);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;af038ff0-d366-4e98-b0ab-256e631b2c45&quot;,&quot;parentUUID&quot;:&quot;6e39998c-f322-45f7-a508-895f93c00c98&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error if stdout is not valid json&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should emit error if stdout is not valid json&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.stdout(&#x27;#&#x27;).end();\n        })\n    });\n    const listener = () =&gt; {\n        // empty listener\n    };\n    device.on(&#x27;update&#x27;, listener);\n    yield new Promise(cb =&gt; {\n        device.once(&#x27;error&#x27;, err =&gt; {\n            assert.ok(err instanceof Error);\n            assert.ok(err.toString().includes(&#x27;Unable to parse stdout json: SyntaxError&#x27;));\n            cb(undefined);\n        });\n    });\n    device.off(&#x27;update&#x27;, listener);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;226f6027-bc96-4036-b438-e6c6c326d655&quot;,&quot;parentUUID&quot;:&quot;6e39998c-f322-45f7-a508-895f93c00c98&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should restart the process if it gets killed&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should restart the process if it gets killed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;pending&quot;,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7360998e-412f-4738-861a-fe4bd95acff0&quot;,&quot;parentUUID&quot;:&quot;6e39998c-f322-45f7-a508-895f93c00c98&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;854398c2-0745-42c1-ad0d-f5c96d2486d4&quot;,&quot;af038ff0-d366-4e98-b0ab-256e631b2c45&quot;,&quot;226f6027-bc96-4036-b438-e6c6c326d655&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;7360998e-412f-4738-861a-fe4bd95acff0&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;aa313c60-e754-485a-a0bf-b03db4029e92&quot;,&quot;title&quot;:&quot;addListener() / removeAllListeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work without any exceptions&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents addListener() / removeAllListeners() should work without any exceptions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                title: &#x27;My Movie&#x27;\n            });\n        })\n    });\n    const listener = () =&gt; {\n        // empty listener\n    };\n    device.addListener(&#x27;update&#x27;, listener);\n    device.removeAllListeners(&#x27;update&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;77c7cfb9-4f5c-40f2-951a-1a41370aa46a&quot;,&quot;parentUUID&quot;:&quot;aa313c60-e754-485a-a0bf-b03db4029e92&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;77c7cfb9-4f5c-40f2-951a-1a41370aa46a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;76c4c92a-23fd-49aa-824f-a3659530f11a&quot;,&quot;title&quot;:&quot;emit()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents emit() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n    })\n});\nconst event = new NodePyATVDeviceEvent({\n    key: &#x27;dateTime&#x27;,\n    old: &#x27;foo&#x27;,\n    new: &#x27;bar&#x27;,\n    device\n});\nlet executions = 0;\ndevice.once(&#x27;test&#x27;, (e) =&gt; {\n    executions++;\n    assert.strictEqual(e, event);\n    assert.strictEqual(executions, 1);\n    done();\n});\ndevice.emit(&#x27;test&#x27;, event);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c5ea3e7-9a61-44c3-92f4-a6c552b6b89c&quot;,&quot;parentUUID&quot;:&quot;76c4c92a-23fd-49aa-824f-a3659530f11a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8c5ea3e7-9a61-44c3-92f4-a6c552b6b89c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;85908aaf-703e-428a-8282-67bbc187f54a&quot;,&quot;title&quot;:&quot;eventNames()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents eventNames() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n    })\n});\nconst listener = () =&gt; {\n    // ignore\n};\ndevice.on(&#x27;test&#x27;, listener);\nassert.deepStrictEqual(device.eventNames(), [&#x27;test&#x27;]);\ndevice.off(&#x27;test&#x27;, listener);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;46265f58-573a-48f7-9532-92a3abb9d7fd&quot;,&quot;parentUUID&quot;:&quot;85908aaf-703e-428a-8282-67bbc187f54a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;46265f58-573a-48f7-9532-92a3abb9d7fd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;40cbe1a0-a8f6-491a-aca3-f44758170c1c&quot;,&quot;title&quot;:&quot;getMaxListeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents getMaxListeners() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n    })\n});\nconst result = device.getMaxListeners();\nassert.ok(typeof result, &#x27;number&#x27;);\nassert.ok(result &gt;= 10);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2bf7cf9d-d721-47f6-8a71-6e4c43c656be&quot;,&quot;parentUUID&quot;:&quot;40cbe1a0-a8f6-491a-aca3-f44758170c1c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2bf7cf9d-d721-47f6-8a71-6e4c43c656be&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4ee91025-47bd-4323-96f8-b6f08a2c61b9&quot;,&quot;title&quot;:&quot;listenerCount()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents listenerCount() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n    })\n});\nconst listener = () =&gt; {\n    // ignore\n};\nassert.deepStrictEqual(device.listenerCount(&#x27;test&#x27;), 0);\ndevice.on(&#x27;test&#x27;, listener);\nassert.deepStrictEqual(device.listenerCount(&#x27;test&#x27;), 1);\ndevice.off(&#x27;test&#x27;, listener);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;58f62281-c6dd-4618-a949-4c2c7ae03a58&quot;,&quot;parentUUID&quot;:&quot;4ee91025-47bd-4323-96f8-b6f08a2c61b9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;58f62281-c6dd-4618-a949-4c2c7ae03a58&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a6e845a6-6a90-4476-bf33-f29c8aefdc9f&quot;,&quot;title&quot;:&quot;listeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents listeners() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n    })\n});\nconst listener = () =&gt; {\n    // ignore\n};\nassert.deepStrictEqual(device.listeners(&#x27;test&#x27;).length, 0);\ndevice.on(&#x27;test&#x27;, listener);\nassert.deepStrictEqual(device.listeners(&#x27;test&#x27;).length, 1);\nassert.deepStrictEqual(device.listeners(&#x27;test&#x27;)[0], listener);\ndevice.off(&#x27;test&#x27;, listener);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f41fad8a-c06a-41d9-a4bd-f8f08d05a8d8&quot;,&quot;parentUUID&quot;:&quot;a6e845a6-6a90-4476-bf33-f29c8aefdc9f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f41fad8a-c06a-41d9-a4bd-f8f08d05a8d8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;edfb12b6-8bc7-4bdc-b2fd-650031873412&quot;,&quot;title&quot;:&quot;prependListener()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents prependListener() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n        cp.stdout({\n            result: &#x27;success&#x27;,\n            title: &#x27;My Movie&#x27;\n        });\n    })\n});\nconst listener = () =&gt; {\n    device.removeAllListeners(&#x27;update&#x27;);\n    done();\n};\ndevice.prependListener(&#x27;update&#x27;, listener);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b7441c0a-be4c-42a1-8a72-328805ffac5b&quot;,&quot;parentUUID&quot;:&quot;edfb12b6-8bc7-4bdc-b2fd-650031873412&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b7441c0a-be4c-42a1-8a72-328805ffac5b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;46150877-5f37-498e-8f02-8a57269ac86e&quot;,&quot;title&quot;:&quot;prependOnceListener()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents prependOnceListener() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n        cp.stdout({\n            result: &#x27;success&#x27;,\n            title: &#x27;My Movie&#x27;\n        });\n    })\n});\ndevice.prependOnceListener(&#x27;update&#x27;, () =&gt; done());&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ff9efeaa-27f1-4a79-acad-31bbc08d6fba&quot;,&quot;parentUUID&quot;:&quot;46150877-5f37-498e-8f02-8a57269ac86e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ff9efeaa-27f1-4a79-acad-31bbc08d6fba&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d9c5b6ea-9a85-4f20-9ad2-3c38fe6307ae&quot;,&quot;title&quot;:&quot;rawListeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents rawListeners() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n    })\n});\nconst listener = () =&gt; {\n    // ignore\n};\nassert.deepStrictEqual(device.rawListeners(&#x27;test&#x27;).length, 0);\ndevice.on(&#x27;test&#x27;, listener);\nassert.deepStrictEqual(device.rawListeners(&#x27;test&#x27;).length, 1);\nassert.deepStrictEqual(device.rawListeners(&#x27;test&#x27;)[0], listener);\ndevice.off(&#x27;test&#x27;, listener);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;df170af6-2d2b-4a0a-8021-44351db03aba&quot;,&quot;parentUUID&quot;:&quot;d9c5b6ea-9a85-4f20-9ad2-3c38fe6307ae&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;df170af6-2d2b-4a0a-8021-44351db03aba&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4e9c2002-0924-48f3-8d88-fcb230de2e34&quot;,&quot;title&quot;:&quot;removeListener()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work without any exceptions&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents removeListener() should work without any exceptions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                title: &#x27;My Movie&#x27;\n            });\n        })\n    });\n    const listener = () =&gt; {\n        // empty listener\n    };\n    device.addListener(&#x27;update&#x27;, listener);\n    assert.deepStrictEqual(device.listenerCount(&#x27;update&#x27;), 1);\n    device.removeListener(&#x27;update&#x27;, listener);\n    assert.deepStrictEqual(device.listenerCount(&#x27;update&#x27;), 0);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a795f238-e6ce-4bc2-9b26-2df92025bb7e&quot;,&quot;parentUUID&quot;:&quot;4e9c2002-0924-48f3-8d88-fcb230de2e34&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a795f238-e6ce-4bc2-9b26-2df92025bb7e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;68ace052-3a6e-49e7-b0ab-31e7aff487ed&quot;,&quot;title&quot;:&quot;NodePyATVDevice&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;4eee926c-0df6-4d9d-a99b-65815cf1774a&quot;,&quot;title&quot;:&quot;get name()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the name&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get name() should return the name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;\n});\nassert.strictEqual(device.name, &#x27;My Testdevice&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4b0b0ec6-bcd3-4c52-ac4f-6c5c4c8a3503&quot;,&quot;parentUUID&quot;:&quot;4eee926c-0df6-4d9d-a99b-65815cf1774a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4b0b0ec6-bcd3-4c52-ac4f-6c5c4c8a3503&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4db3f49e-e07a-4898-a185-52678dfd7293&quot;,&quot;title&quot;:&quot;get host()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the host&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get host() should return the host&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;\n});\nassert.strictEqual(device.host, &#x27;192.168.178.2&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4b3b5c4f-8548-47f1-b634-e2def35fe7d2&quot;,&quot;parentUUID&quot;:&quot;4db3f49e-e07a-4898-a185-52678dfd7293&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4b3b5c4f-8548-47f1-b634-e2def35fe7d2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;005fe0d6-a2a9-4772-8229-bedaf64969bf&quot;,&quot;title&quot;:&quot;get id()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the id&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get id() should return the id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    id: &#x27;*****&#x27;\n});\nassert.strictEqual(device.id, &#x27;*****&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9943a804-3584-49aa-b10b-5335834185f0&quot;,&quot;parentUUID&quot;:&quot;005fe0d6-a2a9-4772-8229-bedaf64969bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9943a804-3584-49aa-b10b-5335834185f0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;54608140-30f9-4348-ab05-40d2a4ad377c&quot;,&quot;title&quot;:&quot;get allIDs()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return all the IDs&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get allIDs() should return all the IDs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    id: &#x27;*****&#x27;,\n    allIDs: [\n        &#x27;some_id_1&#x27;,\n        &#x27;some_id_2&#x27;,\n        &#x27;some_id_3&#x27;,\n    ]\n});\nassert.deepStrictEqual(device.allIDs, [\n    &#x27;some_id_1&#x27;,\n    &#x27;some_id_2&#x27;,\n    &#x27;some_id_3&#x27;,\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fb412d17-4ed7-4d8a-b414-04709cfc53c6&quot;,&quot;parentUUID&quot;:&quot;54608140-30f9-4348-ab05-40d2a4ad377c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fb412d17-4ed7-4d8a-b414-04709cfc53c6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;db59d1bc-bbb1-4d99-bbdb-fa860d36322c&quot;,&quot;title&quot;:&quot;get protocol()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the protocol&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get protocol() should return the protocol&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    protocol: NodePyATVProtocol.airplay\n});\nassert.strictEqual(device.protocol, NodePyATVProtocol.airplay);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f936ddb-1e78-46b6-9bbe-95c1220e3151&quot;,&quot;parentUUID&quot;:&quot;db59d1bc-bbb1-4d99-bbdb-fa860d36322c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1f936ddb-1e78-46b6-9bbe-95c1220e3151&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;019fb331-1270-4856-b6d9-bc210ff129bc&quot;,&quot;title&quot;:&quot;get mac()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the mac&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get mac() should return the mac&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    mac: &#x27;AA:BB:CC:DD:EE:FF&#x27;\n});\nassert.strictEqual(device.mac, &#x27;AA:BB:CC:DD:EE:FF&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7e731b40-06cd-4f22-ab93-205a971fb5bc&quot;,&quot;parentUUID&quot;:&quot;019fb331-1270-4856-b6d9-bc210ff129bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7e731b40-06cd-4f22-ab93-205a971fb5bc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3f97e952-c9c0-43f2-a5e6-972a947e596b&quot;,&quot;title&quot;:&quot;get model()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the model if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get model() should return the model if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;,\n    id: &#x27;xxx&#x27;,\n    model: &#x27;Gen4K&#x27;\n});\nassert.strictEqual(device.model, &#x27;Gen4K&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6eb58fde-c811-4f1c-aab3-9d82b60c7585&quot;,&quot;parentUUID&quot;:&quot;3f97e952-c9c0-43f2-a5e6-972a947e596b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get model() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;\n});\nassert.strictEqual(device.model, undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ff1312ab-1677-49f4-a8f0-fab5aebc2693&quot;,&quot;parentUUID&quot;:&quot;3f97e952-c9c0-43f2-a5e6-972a947e596b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6eb58fde-c811-4f1c-aab3-9d82b60c7585&quot;,&quot;ff1312ab-1677-49f4-a8f0-fab5aebc2693&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5ee95d51-e215-4cac-a7ac-23004f2e4ea5&quot;,&quot;title&quot;:&quot;get modelName()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the model name if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get modelName() should return the model name if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;,\n    id: &#x27;xxx&#x27;,\n    modelName: &#x27;Apple TV 4K&#x27;\n});\nassert.strictEqual(device.modelName, &#x27;Apple TV 4K&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ee782e8d-2e58-4103-8c48-c4118d0d7631&quot;,&quot;parentUUID&quot;:&quot;5ee95d51-e215-4cac-a7ac-23004f2e4ea5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get modelName() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;\n});\nassert.strictEqual(device.modelName, undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5342560d-cb04-474a-ab74-45627afb435c&quot;,&quot;parentUUID&quot;:&quot;5ee95d51-e215-4cac-a7ac-23004f2e4ea5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ee782e8d-2e58-4103-8c48-c4118d0d7631&quot;,&quot;5342560d-cb04-474a-ab74-45627afb435c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4a9becf5-2c45-4af9-8048-907008f8876b&quot;,&quot;title&quot;:&quot;get os()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the operating system if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get os() should return the operating system if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;,\n    id: &#x27;xxx&#x27;,\n    os: &#x27;TvOS&#x27;\n});\nassert.strictEqual(device.os, &#x27;TvOS&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8dda1d17-f906-4c83-a975-b2dbe0fb61f0&quot;,&quot;parentUUID&quot;:&quot;4a9becf5-2c45-4af9-8048-907008f8876b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get os() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;\n});\nassert.strictEqual(device.os, undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6da4bcda-ced6-4e8a-886e-62b03b7ba1f1&quot;,&quot;parentUUID&quot;:&quot;4a9becf5-2c45-4af9-8048-907008f8876b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8dda1d17-f906-4c83-a975-b2dbe0fb61f0&quot;,&quot;6da4bcda-ced6-4e8a-886e-62b03b7ba1f1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7b89bfbc-42de-484f-89a7-cda4e2f6bf5f&quot;,&quot;title&quot;:&quot;get version()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the version if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get version() should return the version if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;,\n    id: &#x27;xxx&#x27;,\n    version: &#x27;15.5.1&#x27;\n});\nassert.strictEqual(device.version, &#x27;15.5.1&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ab0b566-a937-4817-9ebc-fe4c917768eb&quot;,&quot;parentUUID&quot;:&quot;7b89bfbc-42de-484f-89a7-cda4e2f6bf5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get version() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;\n});\nassert.strictEqual(device.version, undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a644abc2-713d-4743-b0a5-d43ca30f3301&quot;,&quot;parentUUID&quot;:&quot;7b89bfbc-42de-484f-89a7-cda4e2f6bf5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2ab0b566-a937-4817-9ebc-fe4c917768eb&quot;,&quot;a644abc2-713d-4743-b0a5-d43ca30f3301&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ef621c1e-9617-4f65-a967-999de4a26c7c&quot;,&quot;title&quot;:&quot;get services()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the services if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get services() should return the services if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;,\n    id: &#x27;xxx&#x27;,\n    services: [\n        {\n            protocol: NodePyATVProtocol.mrp,\n            port: 49152\n        },\n        {\n            protocol: NodePyATVProtocol.airplay,\n            port: 7000\n        }\n    ]\n});\nassert.deepStrictEqual(device.services, [\n    {\n        protocol: &#x27;mrp&#x27;,\n        port: 49152\n    },\n    {\n        protocol: &#x27;airplay&#x27;,\n        port: 7000\n    }\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;98a40b54-399e-47f1-9c36-18a4fe4217e2&quot;,&quot;parentUUID&quot;:&quot;ef621c1e-9617-4f65-a967-999de4a26c7c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get services() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;\n});\nassert.strictEqual(device.services, undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4433661b-612c-4205-85a9-34b02b1b80ba&quot;,&quot;parentUUID&quot;:&quot;ef621c1e-9617-4f65-a967-999de4a26c7c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;98a40b54-399e-47f1-9c36-18a4fe4217e2&quot;,&quot;4433661b-612c-4205-85a9-34b02b1b80ba&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a7592327-206a-409f-9a4c-30407aadf527&quot;,&quot;title&quot;:&quot;get debug()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return true if set to true&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get debug() should return true if set to true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    debug: true\n});\nassert.strictEqual(device.debug, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f1f36424-2c27-42d9-bb3b-637db1a7564a&quot;,&quot;parentUUID&quot;:&quot;a7592327-206a-409f-9a4c-30407aadf527&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return fn if set to custom function&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get debug() should return fn if set to custom function&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// eslint-disable-next-line @typescript-eslint/no-empty-function\nconst fn = () =&gt; {\n};\nconst device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    debug: fn\n});\nassert.strictEqual(device.debug, fn);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b366d0c6-5e4d-4cac-a379-fbee1b88ebe5&quot;,&quot;parentUUID&quot;:&quot;a7592327-206a-409f-9a4c-30407aadf527&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return false if unset&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get debug() should return false if unset&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;\n});\nassert.strictEqual(device.debug, undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d0195d96-62c3-49f2-aaa3-0e68c4247e0b&quot;,&quot;parentUUID&quot;:&quot;a7592327-206a-409f-9a4c-30407aadf527&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f1f36424-2c27-42d9-bb3b-637db1a7564a&quot;,&quot;b366d0c6-5e4d-4cac-a379-fbee1b88ebe5&quot;,&quot;d0195d96-62c3-49f2-aaa3-0e68c4247e0b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7509cf01-1d77-4cea-9e4f-c1bd61254244&quot;,&quot;title&quot;:&quot;set debug()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work for debug = true&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;\n});\nassert.strictEqual(device.debug, undefined);\ndevice.debug = true;\nassert.strictEqual(device.debug, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;acf30a88-7005-4b4e-af59-bd673815dafd&quot;,&quot;parentUUID&quot;:&quot;7509cf01-1d77-4cea-9e4f-c1bd61254244&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for debug = undefined&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = undefined&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    debug: true\n});\nassert.strictEqual(device.debug, true);\ndevice.debug = undefined;\nassert.strictEqual(device.debug, undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3bf4b5b0-9b54-41a9-98b0-3f7f18774217&quot;,&quot;parentUUID&quot;:&quot;7509cf01-1d77-4cea-9e4f-c1bd61254244&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for debug = undefined&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = undefined&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    debug: true\n});\nassert.strictEqual(device.debug, true);\ndevice.debug = undefined;\nassert.strictEqual(device.debug, undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;66687ee1-d765-43a7-9f56-72d868feacc8&quot;,&quot;parentUUID&quot;:&quot;7509cf01-1d77-4cea-9e4f-c1bd61254244&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for debug = fn&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = fn&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;\n});\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nconst fn = () =&gt; {\n};\nassert.strictEqual(device.debug, undefined);\ndevice.debug = fn;\nassert.strictEqual(device.debug, fn);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c96e48d4-bd7c-4f61-81b3-c01c74be3e97&quot;,&quot;parentUUID&quot;:&quot;7509cf01-1d77-4cea-9e4f-c1bd61254244&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;acf30a88-7005-4b4e-af59-bd673815dafd&quot;,&quot;3bf4b5b0-9b54-41a9-98b0-3f7f18774217&quot;,&quot;66687ee1-d765-43a7-9f56-72d868feacc8&quot;,&quot;c96e48d4-bd7c-4f61-81b3-c01c74be3e97&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;eaa36803-4603-4928-a7e3-dd3c132bbab6&quot;,&quot;title&quot;:&quot;toJSON()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a object representation&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice toJSON() should return a object representation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    id: &#x27;*****&#x27;,\n    protocol: NodePyATVProtocol.airplay\n});\nassert.deepEqual(device.toJSON(), {\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    id: &#x27;*****&#x27;,\n    protocol: NodePyATVProtocol.airplay\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4c6722ed-f7de-4e1e-884c-f9c3b86973be&quot;,&quot;parentUUID&quot;:&quot;eaa36803-4603-4928-a7e3-dd3c132bbab6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should be possible to create a new device from this&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice toJSON() should be possible to create a new device from this&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const config = {\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    id: &#x27;*****&#x27;,\n    protocol: NodePyATVProtocol.airplay\n};\nconst deviceA = new NodePyATVDevice(config);\nconst deviceB = new NodePyATVDevice(deviceA.toJSON());\nassert.deepEqual(deviceB.toJSON(), config);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d54b17da-8636-47a1-9277-0a218490de8a&quot;,&quot;parentUUID&quot;:&quot;eaa36803-4603-4928-a7e3-dd3c132bbab6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4c6722ed-f7de-4e1e-884c-f9c3b86973be&quot;,&quot;d54b17da-8636-47a1-9277-0a218490de8a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;25d56b29-5ebc-4161-a859-fba02f733662&quot;,&quot;title&quot;:&quot;toString()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice toString() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;\n});\nassert.strictEqual(device.toString(), &#x27;NodePyATVDevice(My Testdevice, 192.168.178.2)&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3f79c62b-dd05-4e15-beee-ca222d71dbab&quot;,&quot;parentUUID&quot;:&quot;25d56b29-5ebc-4161-a859-fba02f733662&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3f79c62b-dd05-4e15-beee-ca222d71dbab&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;45f74784-036c-4b88-afea-f04528d867eb&quot;,&quot;title&quot;:&quot;getState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work [I]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should work [I]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;pending&quot;,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3d80c092-d165-4f32-9cc0-45c42e483944&quot;,&quot;parentUUID&quot;:&quot;45f74784-036c-4b88-afea-f04528d867eb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                datetime: &#x27;2020-11-07T22:38:43.608030+01:00&#x27;,\n                hash: &#x27;100e0ab6-6ff5-4199-9c04-a7107ff78712&#x27;,\n                media_type: &#x27;video&#x27;,\n                device_state: &#x27;playing&#x27;,\n                title: &#x27;Solo: A Star Wars Story&#x27;,\n                artist: null,\n                album: null,\n                genre: null,\n                total_time: 8097,\n                position: 27,\n                shuffle: &#x27;off&#x27;,\n                repeat: &#x27;off&#x27;,\n                app: &#x27;Disney+&#x27;,\n                app_id: &#x27;com.disney.disneyplus&#x27;\n            });\n        })\n    });\n    const result = yield device.getState();\n    assert.deepStrictEqual(result, {\n        dateTime: new Date(&#x27;2020-11-07T22:38:43.608030+01:00&#x27;),\n        hash: &#x27;100e0ab6-6ff5-4199-9c04-a7107ff78712&#x27;,\n        mediaType: NodePyATVMediaType.video,\n        deviceState: NodePyATVDeviceState.playing,\n        focusState: null,\n        title: &#x27;Solo: A Star Wars Story&#x27;,\n        artist: null,\n        album: null,\n        genre: null,\n        totalTime: 8097,\n        volume: null,\n        position: 27,\n        shuffle: NodePyATVShuffleState.off,\n        repeat: NodePyATVRepeatState.off,\n        app: &#x27;Disney+&#x27;,\n        appId: &#x27;com.disney.disneyplus&#x27;,\n        powerState: null,\n        outputDevices: null\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;10bd11c1-49d6-4070-a1a8-2f634e8aaa97&quot;,&quot;parentUUID&quot;:&quot;45f74784-036c-4b88-afea-f04528d867eb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should reject with error if pyatv fails&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should reject with error if pyatv fails&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;failure&#x27;,\n                datetime: &#x27;2021-11-24T21:13:36.424576+03:00&#x27;,\n                exception: &#x27;invalid credentials: 321&#x27;,\n                stacktrace: &#x27;Traceback (most recent call last):\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\\\&quot;, line 302, in appstart\\n    print(args.output(await _handle_command(args, abort_sem, loop)), flush=True)\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\\\&quot;, line 196, in _handle_command\\n    atv = await connect(config, loop, protocol=Protocol.MRP)\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/__init__.py\\\&quot;, line 96, in connect\\n    for setup_data in proto_methods.setup(\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\\\&quot;, line 192, in setup\\n    stream = AirPlayStream(config, service)\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\\\&quot;, line 79, in __init__\\n    self._credentials: HapCredentials = parse_credentials(self.service.credentials)\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/auth/hap_pairing.py\\\&quot;, line 139, in parse_credentials\\n    raise exceptions.InvalidCredentialsError(\\\&quot;invalid credentials: \\\&quot; + detail_string)\\npyatv.exceptions.InvalidCredentialsError: invalid credentials: 321\\n&#x27;\n            });\n        })\n    });\n    assert.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield device.getState();\n    }), /Got pyatv Error: invalid credentials: 321/);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9ac040ae-7ba8-48ca-9279-fe6ac4d78ef6&quot;,&quot;parentUUID&quot;:&quot;45f74784-036c-4b88-afea-f04528d867eb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should cache requests for a bit&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should cache requests for a bit&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    let executions = 0;\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            executions++;\n            cp.end({\n                result: &#x27;success&#x27;,\n                datetime: new Date().toJSON(),\n                hash: &#x27;100e0ab6-6ff5-4199-9c04-a7107ff78712&#x27;,\n                media_type: &#x27;video&#x27;,\n                device_state: &#x27;playing&#x27;,\n                title: &#x27;Solo: A Star Wars Story&#x27;,\n                artist: null,\n                album: null,\n                genre: null,\n                total_time: 8097,\n                position: 27,\n                shuffle: &#x27;off&#x27;,\n                repeat: &#x27;off&#x27;,\n                app: &#x27;Disney+&#x27;,\n                app_id: &#x27;com.disney.disneyplus&#x27;\n            });\n        })\n    });\n    const firstResult = yield device.getState();\n    const secondResult = yield device.getState();\n    assert.strictEqual(firstResult.dateTime, secondResult.dateTime);\n    assert.strictEqual(executions, 1);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e249eae2-8909-4fcc-9eba-28f02ed099ab&quot;,&quot;parentUUID&quot;:&quot;45f74784-036c-4b88-afea-f04528d867eb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update the position if cache was used&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should update the position if cache was used&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                datetime: new Date(new Date().getTime() - 1000).toJSON(),\n                hash: &#x27;100e0ab6-6ff5-4199-9c04-a7107ff78712&#x27;,\n                media_type: &#x27;video&#x27;,\n                device_state: &#x27;playing&#x27;,\n                title: &#x27;Solo: A Star Wars Story&#x27;,\n                artist: null,\n                album: null,\n                genre: null,\n                total_time: 8097,\n                position: 27,\n                shuffle: &#x27;off&#x27;,\n                repeat: &#x27;off&#x27;,\n                app: &#x27;Disney+&#x27;,\n                app_id: &#x27;com.disney.disneyplus&#x27;\n            });\n        })\n    });\n    const firstResult = yield device.getState();\n    assert.strictEqual(firstResult.position, 27);\n    const secondResult = yield device.getState();\n    assert.ok(secondResult.position);\n    assert.ok(secondResult.position &gt; 27, `Position should be &gt; 27, was ${secondResult.position}`);\n    assert.ok(secondResult.position &lt; 30, `Position should be &gt; 27, was ${secondResult.position}`);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1c8b4cf8-9519-4193-86b0-8d944004d0a4&quot;,&quot;parentUUID&quot;:&quot;45f74784-036c-4b88-afea-f04528d867eb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;10bd11c1-49d6-4070-a1a8-2f634e8aaa97&quot;,&quot;9ac040ae-7ba8-48ca-9279-fe6ac4d78ef6&quot;,&quot;e249eae2-8909-4fcc-9eba-28f02ed099ab&quot;,&quot;1c8b4cf8-9519-4193-86b0-8d944004d0a4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;3d80c092-d165-4f32-9cc0-45c42e483944&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e2b60cb3-9983-4e40-adac-f551f9f2b7ce&quot;,&quot;title&quot;:&quot;clearState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice clearState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    let executions = 0;\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            executions++;\n            cp.end({\n                result: &#x27;success&#x27;,\n                datetime: &#x27;2020-11-07T22:38:43.608030+01:00&#x27;,\n                title: &#x27;Solo: A Star Wars Story&#x27;\n            });\n        })\n    });\n    assert.deepStrictEqual(yield device.getTitle(), &#x27;Solo: A Star Wars Story&#x27;);\n    device.clearState();\n    assert.deepStrictEqual(yield device.getTitle(), &#x27;Solo: A Star Wars Story&#x27;);\n    assert.strictEqual(executions, 2);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c2ff86a5-eb2a-4a87-a7ff-b52dcda40cf4&quot;,&quot;parentUUID&quot;:&quot;e2b60cb3-9983-4e40-adac-f551f9f2b7ce&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c2ff86a5-eb2a-4a87-a7ff-b52dcda40cf4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;274125de-0485-499e-a08f-3ac9f113a433&quot;,&quot;title&quot;:&quot;getDateTime()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getDateTime() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                datetime: new Date().toJSON()\n            });\n        })\n    });\n    const result = yield device.getDateTime();\n    assert.ok(result instanceof Date);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c88feafe-837c-40bb-a050-d22e58a14587&quot;,&quot;parentUUID&quot;:&quot;274125de-0485-499e-a08f-3ac9f113a433&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c88feafe-837c-40bb-a050-d22e58a14587&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;88d0b565-6078-44cc-a2ef-f0463047c80b&quot;,&quot;title&quot;:&quot;getHash()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getHash() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                hash: &#x27;12345&#x27;\n            });\n        })\n    });\n    const result = yield device.getHash();\n    assert.strictEqual(result, &#x27;12345&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6baab586-2a12-4a31-bca1-bef6817e3267&quot;,&quot;parentUUID&quot;:&quot;88d0b565-6078-44cc-a2ef-f0463047c80b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6baab586-2a12-4a31-bca1-bef6817e3267&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2ee7aa5a-7c16-4f68-a14b-014986c314fe&quot;,&quot;title&quot;:&quot;getMediaType()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getMediaType() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                media_type: &#x27;video&#x27;\n            });\n        })\n    });\n    const result = yield device.getMediaType();\n    assert.deepStrictEqual(result, NodePyATVMediaType.video);\n    assert.deepStrictEqual(result, &#x27;video&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d1d91ffa-2b01-4f41-bee6-4bb88a1a7e65&quot;,&quot;parentUUID&quot;:&quot;2ee7aa5a-7c16-4f68-a14b-014986c314fe&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d1d91ffa-2b01-4f41-bee6-4bb88a1a7e65&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;61973b55-91d6-4266-b02b-fd607c7bc796&quot;,&quot;title&quot;:&quot;getDeviceState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getDeviceState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                device_state: &#x27;seeking&#x27;\n            });\n        })\n    });\n    const result = yield device.getDeviceState();\n    assert.deepStrictEqual(result, NodePyATVDeviceState.seeking);\n    assert.deepStrictEqual(result, &#x27;seeking&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7fbb367d-2696-4ca4-b1c6-10d93d05dfc5&quot;,&quot;parentUUID&quot;:&quot;61973b55-91d6-4266-b02b-fd607c7bc796&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7fbb367d-2696-4ca4-b1c6-10d93d05dfc5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;87d4e1f1-387a-42b7-b6d9-c72dd688d5d5&quot;,&quot;title&quot;:&quot;getTitle()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getTitle() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                title: &#x27;My Movie&#x27;\n            });\n        })\n    });\n    const result = yield device.getTitle();\n    assert.strictEqual(result, &#x27;My Movie&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;823b85bb-304b-4eef-986c-aeb81df6a82a&quot;,&quot;parentUUID&quot;:&quot;87d4e1f1-387a-42b7-b6d9-c72dd688d5d5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;823b85bb-304b-4eef-986c-aeb81df6a82a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6cb5cac1-ee40-48ef-8d36-1cfe9ff39d43&quot;,&quot;title&quot;:&quot;getArtist()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getArtist() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                artist: &#x27;My Artist&#x27;\n            });\n        })\n    });\n    const result = yield device.getArtist();\n    assert.strictEqual(result, &#x27;My Artist&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41c4f79b-b3af-4c98-b8f3-63bb9966d68e&quot;,&quot;parentUUID&quot;:&quot;6cb5cac1-ee40-48ef-8d36-1cfe9ff39d43&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;41c4f79b-b3af-4c98-b8f3-63bb9966d68e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8e015177-46c5-48fd-8527-e6ccc9dcf072&quot;,&quot;title&quot;:&quot;getAlbum()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getAlbum() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                album: &#x27;My ALbum&#x27;\n            });\n        })\n    });\n    const result = yield device.getAlbum();\n    assert.strictEqual(result, &#x27;My ALbum&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0a0f685a-abd8-47c3-b803-90708b50a57e&quot;,&quot;parentUUID&quot;:&quot;8e015177-46c5-48fd-8527-e6ccc9dcf072&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0a0f685a-abd8-47c3-b803-90708b50a57e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;cac1e389-d238-4b09-a53e-dc0cfe7315ef&quot;,&quot;title&quot;:&quot;getGenre()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getGenre() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                genre: &#x27;My Genre&#x27;\n            });\n        })\n    });\n    const result = yield device.getGenre();\n    assert.strictEqual(result, &#x27;My Genre&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ce0eef48-9cdd-4920-9ef3-3236f78dc37e&quot;,&quot;parentUUID&quot;:&quot;cac1e389-d238-4b09-a53e-dc0cfe7315ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ce0eef48-9cdd-4920-9ef3-3236f78dc37e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;79a6af08-6b5d-45b9-9e62-26e221982fcd&quot;,&quot;title&quot;:&quot;getTotalTime()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getTotalTime() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                total_time: 45\n            });\n        })\n    });\n    const result = yield device.getTotalTime();\n    assert.strictEqual(result, 45);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;50566532-bc05-42a6-97bd-10e0d3d31158&quot;,&quot;parentUUID&quot;:&quot;79a6af08-6b5d-45b9-9e62-26e221982fcd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;50566532-bc05-42a6-97bd-10e0d3d31158&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;30d2a915-e714-449b-9673-6969b17d7833&quot;,&quot;title&quot;:&quot;getPosition()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getPosition() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                position: 30\n            });\n        })\n    });\n    const result = yield device.getPosition();\n    assert.strictEqual(result, 30);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;88c30973-91f4-4b56-9fa5-34e8d8ee65dd&quot;,&quot;parentUUID&quot;:&quot;30d2a915-e714-449b-9673-6969b17d7833&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;88c30973-91f4-4b56-9fa5-34e8d8ee65dd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7189e95a-224e-40ed-a023-addf2718fa30&quot;,&quot;title&quot;:&quot;getShuffle()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getShuffle() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                shuffle: &#x27;songs&#x27;\n            });\n        })\n    });\n    const result = yield device.getShuffle();\n    assert.deepStrictEqual(result, NodePyATVShuffleState.songs);\n    assert.deepStrictEqual(result, &#x27;songs&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a4cbdf37-b882-4323-ba9a-142c5adea63a&quot;,&quot;parentUUID&quot;:&quot;7189e95a-224e-40ed-a023-addf2718fa30&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a4cbdf37-b882-4323-ba9a-142c5adea63a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a5341a10-ae07-477e-b446-28a78fa90450&quot;,&quot;title&quot;:&quot;getRepeat()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getRepeat() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                repeat: &#x27;all&#x27;\n            });\n        })\n    });\n    const result = yield device.getRepeat();\n    assert.deepStrictEqual(result, NodePyATVRepeatState.all);\n    assert.deepStrictEqual(result, &#x27;all&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39a93eb9-2c29-4b4a-96de-0ebd3c18145f&quot;,&quot;parentUUID&quot;:&quot;a5341a10-ae07-477e-b446-28a78fa90450&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;39a93eb9-2c29-4b4a-96de-0ebd3c18145f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ca2f1a7c-87f3-446a-a907-3de55bad11e4&quot;,&quot;title&quot;:&quot;getApp()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getApp() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                app: &#x27;My App&#x27;\n            });\n        })\n    });\n    const result = yield device.getApp();\n    assert.strictEqual(result, &#x27;My App&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d44ff59e-22d5-4eb6-af94-73158d1140c2&quot;,&quot;parentUUID&quot;:&quot;ca2f1a7c-87f3-446a-a907-3de55bad11e4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d44ff59e-22d5-4eb6-af94-73158d1140c2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6519a654-cf22-486c-97cb-d56ebc231c05&quot;,&quot;title&quot;:&quot;getAppId()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getAppId() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                app_id: &#x27;app.example.com&#x27;\n            });\n        })\n    });\n    const result = yield device.getAppId();\n    assert.strictEqual(result, &#x27;app.example.com&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a4aae3be-e900-481a-9a26-126f96dc7f71&quot;,&quot;parentUUID&quot;:&quot;6519a654-cf22-486c-97cb-d56ebc231c05&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a4aae3be-e900-481a-9a26-126f96dc7f71&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;dae1dd3a-6096-4e76-a4c7-ab2819b64b53&quot;,&quot;title&quot;:&quot;listApps()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice listApps() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;App: Fitness (com.apple.Fitness), App: Podcasts (com.apple.podcasts), &#x27; +\n                &#x27;App: Filme (com.apple.TVMovies), App: Prime Video (com.amazon.aiv.AIVApp), &#x27; +\n                &#x27;App: TV (com.apple.TVWatchList), App: Fotos (com.apple.TVPhotos), App: AppStore &#x27; +\n                &#x27;(com.apple.TVAppStore), App: Arcade (com.apple.Arcade), App: TV-Sendungen (com.apple.TVShows), &#x27; +\n                &#x27;App: Suchen (com.apple.TVSearch), App: Live TV (de.couchfunk.WM2014), App: RTL+ &#x27; +\n                &#x27;(com.rtlinteractive.tvnow), App: Computer (com.apple.TVHomeSharing), App: ARTE &#x27; +\n                &#x27;(tv.arte.plus7), App: YouTube (com.google.ios.youtube), App: ARD Mediathek &#x27; +\n                &#x27;(de.swr.avp.ard.tablet), App: Disney+ (com.disney.disneyplus), App: Plex (com.plexapp.plex), &#x27; +\n                &#x27;App: Joyn (de.prosiebensat1digital.seventv), App: Einstellungen (com.apple.TVSettings), &#x27; +\n                &#x27;App: ZDFmediathek (de.zdf.mediathek.universal), App: Crossy Road (com.hipsterwhale.crossy), &#x27; +\n                &#x27;App: Netflix (com.netflix.Netflix), App: Infuse (com.firecore.infuse), &#x27; +\n                &#x27;App: Musik (com.apple.TVMusic)&#x27;);\n        })\n    });\n    const result = yield device.listApps();\n    assert.strictEqual(result.length, 25);\n    assert.strictEqual(result[0].id, &#x27;com.apple.Fitness&#x27;);\n    assert.strictEqual(result[0].name, &#x27;Fitness&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4b81554a-a039-4e23-96f9-94e9ed2193d9&quot;,&quot;parentUUID&quot;:&quot;dae1dd3a-6096-4e76-a4c7-ab2819b64b53&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4b81554a-a039-4e23-96f9-94e9ed2193d9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6331b951-0333-43b4-9cad-c85c66f7bbc1&quot;,&quot;title&quot;:&quot;pressKey()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work with valid key&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pressKey() should work with valid key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    yield device.pressKey(NodePyATVKeys.home);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bf73832c-dfa5-4855-85f9-de0710d62fd5&quot;,&quot;parentUUID&quot;:&quot;6331b951-0333-43b4-9cad-c85c66f7bbc1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error with invalid key&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pressKey() should throw error with invalid key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;\n    });\n    yield assert.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        // @ts-ignore\n        yield device.pressKey(&#x27;foo&#x27;);\n    }), /Unsupported key value foo/);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1232d3f5-d600-44ae-ad48-42a2b4e67bc8&quot;,&quot;parentUUID&quot;:&quot;6331b951-0333-43b4-9cad-c85c66f7bbc1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if pyatv result is not success&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pressKey() should throw error if pyatv result is not success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;failure\&quot;}&#x27;);\n        })\n    });\n    yield assert.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield device.pressKey(NodePyATVKeys.home);\n    }), /Unable to parse pyatv response/);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5b6c6c72-e34f-4543-8d81-da8421926881&quot;,&quot;parentUUID&quot;:&quot;6331b951-0333-43b4-9cad-c85c66f7bbc1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bf73832c-dfa5-4855-85f9-de0710d62fd5&quot;,&quot;1232d3f5-d600-44ae-ad48-42a2b4e67bc8&quot;,&quot;5b6c6c72-e34f-4543-8d81-da8421926881&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f6e97dad-4e6e-461b-beb5-3df7efbbc3ae&quot;,&quot;title&quot;:&quot;down()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice down() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5165ea4d-0ff2-4b7e-8e29-4ccb0849a441&quot;,&quot;parentUUID&quot;:&quot;f6e97dad-4e6e-461b-beb5-3df7efbbc3ae&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5165ea4d-0ff2-4b7e-8e29-4ccb0849a441&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9965cc96-fe06-44a0-b008-c32de2a4374a&quot;,&quot;title&quot;:&quot;home()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice home() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;38bc7feb-845c-4616-bd36-3bd3dbeda348&quot;,&quot;parentUUID&quot;:&quot;9965cc96-fe06-44a0-b008-c32de2a4374a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;38bc7feb-845c-4616-bd36-3bd3dbeda348&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;94e422c8-83fa-4b67-ab47-eb3d9908c830&quot;,&quot;title&quot;:&quot;homeHold()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice homeHold() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;074fbd8f-ccc5-49b3-925f-0eef4f1a95a3&quot;,&quot;parentUUID&quot;:&quot;94e422c8-83fa-4b67-ab47-eb3d9908c830&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;074fbd8f-ccc5-49b3-925f-0eef4f1a95a3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0ff9e3d4-c150-418d-b363-01a54910ba64&quot;,&quot;title&quot;:&quot;left()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice left() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b00dd69-280a-4cf7-99e1-76c6e5a7c380&quot;,&quot;parentUUID&quot;:&quot;0ff9e3d4-c150-418d-b363-01a54910ba64&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2b00dd69-280a-4cf7-99e1-76c6e5a7c380&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;910d29a2-595d-4da5-809e-2a764e27f627&quot;,&quot;title&quot;:&quot;menu()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice menu() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;214d42c3-21ab-4f55-8708-1274c97cc068&quot;,&quot;parentUUID&quot;:&quot;910d29a2-595d-4da5-809e-2a764e27f627&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;214d42c3-21ab-4f55-8708-1274c97cc068&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;47643bdc-9e0e-496a-b33b-d563b4799dfb&quot;,&quot;title&quot;:&quot;next()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice next() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2dc70357-6eb8-4258-b17b-7f26cd726802&quot;,&quot;parentUUID&quot;:&quot;47643bdc-9e0e-496a-b33b-d563b4799dfb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2dc70357-6eb8-4258-b17b-7f26cd726802&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8d1b4471-c036-4bb0-a834-3ef556c71ed0&quot;,&quot;title&quot;:&quot;pause()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pause() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0fd2b5b6-8aa8-4c14-a8eb-711c9689243f&quot;,&quot;parentUUID&quot;:&quot;8d1b4471-c036-4bb0-a834-3ef556c71ed0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0fd2b5b6-8aa8-4c14-a8eb-711c9689243f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7760e65c-cab4-47c6-876f-64b0f6d19bd8&quot;,&quot;title&quot;:&quot;play()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice play() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;670a9a98-f2c4-45b5-b65f-ccaba64ddc51&quot;,&quot;parentUUID&quot;:&quot;7760e65c-cab4-47c6-876f-64b0f6d19bd8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;670a9a98-f2c4-45b5-b65f-ccaba64ddc51&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;15ffa7dc-0186-4bc2-88a4-cf7f0f0ce216&quot;,&quot;title&quot;:&quot;playPause()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice playPause() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;618156d9-4903-4cc0-b94a-e1dd51dfeb32&quot;,&quot;parentUUID&quot;:&quot;15ffa7dc-0186-4bc2-88a4-cf7f0f0ce216&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;618156d9-4903-4cc0-b94a-e1dd51dfeb32&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ec062a67-346f-419c-9e9d-6131038a3be1&quot;,&quot;title&quot;:&quot;previous()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice previous() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1b895e2c-dae6-495e-8c4f-d0a9f1e1a80e&quot;,&quot;parentUUID&quot;:&quot;ec062a67-346f-419c-9e9d-6131038a3be1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1b895e2c-dae6-495e-8c4f-d0a9f1e1a80e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a3b54f68-5419-4eea-92f6-e2546711975a&quot;,&quot;title&quot;:&quot;right()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice right() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e5f50829-fc89-4bfe-8b84-a8dc3632263f&quot;,&quot;parentUUID&quot;:&quot;a3b54f68-5419-4eea-92f6-e2546711975a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e5f50829-fc89-4bfe-8b84-a8dc3632263f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ca4edb7d-ec89-4874-b159-a33034d8e9ed&quot;,&quot;title&quot;:&quot;select()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice select() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bfc011de-1dc0-4e75-8e50-44f170f79eb4&quot;,&quot;parentUUID&quot;:&quot;ca4edb7d-ec89-4874-b159-a33034d8e9ed&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bfc011de-1dc0-4e75-8e50-44f170f79eb4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;35144fcb-3026-421e-ab57-2cb8c388d706&quot;,&quot;title&quot;:&quot;skipBackward()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice skipBackward() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;07786eb2-ed54-471b-a434-658fca4a6f8f&quot;,&quot;parentUUID&quot;:&quot;35144fcb-3026-421e-ab57-2cb8c388d706&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;07786eb2-ed54-471b-a434-658fca4a6f8f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9eb88404-b290-4c53-a691-98cc9f418cbb&quot;,&quot;title&quot;:&quot;skipForward()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice skipForward() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;32bd4f9e-d220-40e6-8e0f-5121af88a2f6&quot;,&quot;parentUUID&quot;:&quot;9eb88404-b290-4c53-a691-98cc9f418cbb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;32bd4f9e-d220-40e6-8e0f-5121af88a2f6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e4c94a7c-638d-4144-b602-46d0afafeda0&quot;,&quot;title&quot;:&quot;stop()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice stop() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6b650162-b2c9-4b8b-be29-db2eec84bfdf&quot;,&quot;parentUUID&quot;:&quot;e4c94a7c-638d-4144-b602-46d0afafeda0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6b650162-b2c9-4b8b-be29-db2eec84bfdf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ba26ca02-c717-438e-b379-bf44d6da88b6&quot;,&quot;title&quot;:&quot;suspend()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice suspend() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c4f1ff7f-49c6-4d28-80ca-31e7286e2be0&quot;,&quot;parentUUID&quot;:&quot;ba26ca02-c717-438e-b379-bf44d6da88b6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c4f1ff7f-49c6-4d28-80ca-31e7286e2be0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;320248e3-6232-433c-b7e1-2e7d55c68818&quot;,&quot;title&quot;:&quot;topMenu()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice topMenu() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7684de79-89e1-44b2-be52-7b478cbdc99e&quot;,&quot;parentUUID&quot;:&quot;320248e3-6232-433c-b7e1-2e7d55c68818&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7684de79-89e1-44b2-be52-7b478cbdc99e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f8453e90-47c4-4231-89e0-352eb0592646&quot;,&quot;title&quot;:&quot;up()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice up() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;45f96e53-86d3-4fdf-bdee-087133efe9c9&quot;,&quot;parentUUID&quot;:&quot;f8453e90-47c4-4231-89e0-352eb0592646&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;45f96e53-86d3-4fdf-bdee-087133efe9c9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;685952b9-8da9-4383-a77e-1d8d952133a6&quot;,&quot;title&quot;:&quot;volumeDown()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice volumeDown() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;76b7c99a-9b64-4d9d-bce3-606123867782&quot;,&quot;parentUUID&quot;:&quot;685952b9-8da9-4383-a77e-1d8d952133a6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;76b7c99a-9b64-4d9d-bce3-606123867782&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;25408484-ea6e-46f3-b9d8-03e2c094bc42&quot;,&quot;title&quot;:&quot;volumeUp()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice volumeUp() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b0f11fd4-8de5-42ef-9a00-e147a2c435aa&quot;,&quot;parentUUID&quot;:&quot;25408484-ea6e-46f3-b9d8-03e2c094bc42&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b0f11fd4-8de5-42ef-9a00-e147a2c435aa&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1febfb84-0e67-4b07-b827-e5f7f09b4a32&quot;,&quot;title&quot;:&quot;wakeup()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice wakeup() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;26760f5a-07f2-4d58-8e96-886591a4b763&quot;,&quot;parentUUID&quot;:&quot;1febfb84-0e67-4b07-b827-e5f7f09b4a32&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;26760f5a-07f2-4d58-8e96-886591a4b763&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;78fa11c3-7d08-4e4e-88fd-ab218f0cc221&quot;,&quot;title&quot;:&quot;turnOff()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice turnOff() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;309792aa-d94c-4fd7-b861-c825ca42e445&quot;,&quot;parentUUID&quot;:&quot;78fa11c3-7d08-4e4e-88fd-ab218f0cc221&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;309792aa-d94c-4fd7-b861-c825ca42e445&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b82a0044-ab69-4676-b97d-17b7902406d6&quot;,&quot;title&quot;:&quot;turnOn()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice turnOn() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ca1e165-ea5c-497f-9915-a466a5fbda85&quot;,&quot;parentUUID&quot;:&quot;b82a0044-ab69-4676-b97d-17b7902406d6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2ca1e165-ea5c-497f-9915-a466a5fbda85&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;23e5c218-a6a1-42d8-8ac2-81944802a970&quot;,&quot;title&quot;:&quot;launchApp()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice launchApp() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;&#x27;);\n        })\n    });\n    yield device.launchApp(&#x27;com.apple.TVShows&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;31f6ed95-7e46-44ca-9377-7c80982a59d2&quot;,&quot;parentUUID&quot;:&quot;23e5c218-a6a1-42d8-8ac2-81944802a970&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;31f6ed95-7e46-44ca-9377-7c80982a59d2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4607d199-7a10-438e-a47a-1b7c3a6410da&quot;,&quot;title&quot;:&quot;NodePyATVInstance&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b65a847d-f28a-4b09-b704-f22174041a8a&quot;,&quot;title&quot;:&quot;static version()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work with pyatv [L]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should work with pyatv [L]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:429,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    this.timeout(4000);\n    const result = yield NodePyATVInstance.version();\n    if (result.pyatv === null) {\n        throw new Error(&#x27;No version found for pyatv. Is it installed in test environment?&#x27;);\n    }\n    assert.equal(typeof result.pyatv, &#x27;string&#x27;, &#x27;result.pyatv is a string&#x27;);\n    assert.ok(result.pyatv.length &gt;= 5, &#x27;result.pyatv has content&#x27;);\n    assert.strictEqual(result.module, version);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f5069259-cdda-427d-b521-da7e01047610&quot;,&quot;parentUUID&quot;:&quot;b65a847d-f28a-4b09-b704-f22174041a8a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the pyatv version&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return the pyatv version&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const result = yield NodePyATVInstance.version({\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.code(1);\n            cp.end(&#x27;atvremote 0.7.4&#x27;);\n        })\n    });\n    assert.ok(result.pyatv);\n    assert.strictEqual(result.pyatv, &#x27;0.7.4&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a446441d-d8e4-4916-852e-fea905cb38e5&quot;,&quot;parentUUID&quot;:&quot;b65a847d-f28a-4b09-b704-f22174041a8a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the module version&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return the module version&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const result = yield NodePyATVInstance.version({\n        noColors: true,\n        spawn: createFakeSpawn(cp =&gt; cp.code(1).end())\n    });\n    assert.strictEqual(result.module, version);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b381f748-1bad-4d91-a638-5eb225e7deea&quot;,&quot;parentUUID&quot;:&quot;b65a847d-f28a-4b09-b704-f22174041a8a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle option.atvremotePath&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should handle option.atvremotePath&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield NodePyATVInstance.version({\n        atvremotePath: &#x27;/foo/bar&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            assert.strictEqual(cp.cmd(), &#x27;/foo/bar&#x27;);\n            cp.code(1).end();\n        })\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2a2c0bb8-bcf9-46bd-8399-7151664b9aa5&quot;,&quot;parentUUID&quot;:&quot;b65a847d-f28a-4b09-b704-f22174041a8a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with option.debug = true&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should work with option.debug = true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield NodePyATVInstance.version({\n        debug: true,\n        spawn: createFakeSpawn(cp =&gt; cp.code(1).end())\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;70303aa3-8457-4910-9d95-6bbb4606985b&quot;,&quot;parentUUID&quot;:&quot;b65a847d-f28a-4b09-b704-f22174041a8a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with option.noColors&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should work with option.noColors&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield NodePyATVInstance.version({\n        debug: () =&gt; {\n            // no debug log\n        },\n        noColors: true,\n        spawn: createFakeSpawn(cp =&gt; cp.code(1).end())\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b35759f0-2cef-48c3-94f6-330ad35a99c7&quot;,&quot;parentUUID&quot;:&quot;b65a847d-f28a-4b09-b704-f22174041a8a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return null on pyatv stderr output&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return null on pyatv stderr output&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const result = yield NodePyATVInstance.version({\n        spawn: createFakeSpawn(cp =&gt; cp.stderr(&#x27;Hello World!&#x27;).code(123).end())\n    });\n    assert.strictEqual(result.pyatv, null);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c4f71c3c-f75b-4d78-acc7-ef17f63a2709&quot;,&quot;parentUUID&quot;:&quot;b65a847d-f28a-4b09-b704-f22174041a8a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return null on pyatv error&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return null on pyatv error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const result = yield NodePyATVInstance.version({\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.error(new Error(&#x27;Hello world!&#x27;)).end();\n        })\n    });\n    assert.strictEqual(result.pyatv, null);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7d0dbe27-85d5-47ee-a8ef-18d7a6c04566&quot;,&quot;parentUUID&quot;:&quot;b65a847d-f28a-4b09-b704-f22174041a8a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return null on invalid pyatv version&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return null on invalid pyatv version&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const result = yield NodePyATVInstance.version({\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.stdout(&#x27;atvremote 42&#x27;).code(1).end();\n        })\n    });\n    assert.strictEqual(result.pyatv, null);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b114ffe3-f7be-4c59-82bb-1e2a9e61afd3&quot;,&quot;parentUUID&quot;:&quot;b65a847d-f28a-4b09-b704-f22174041a8a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f5069259-cdda-427d-b521-da7e01047610&quot;,&quot;a446441d-d8e4-4916-852e-fea905cb38e5&quot;,&quot;b381f748-1bad-4d91-a638-5eb225e7deea&quot;,&quot;2a2c0bb8-bcf9-46bd-8399-7151664b9aa5&quot;,&quot;70303aa3-8457-4910-9d95-6bbb4606985b&quot;,&quot;b35759f0-2cef-48c3-94f6-330ad35a99c7&quot;,&quot;c4f71c3c-f75b-4d78-acc7-ef17f63a2709&quot;,&quot;7d0dbe27-85d5-47ee-a8ef-18d7a6c04566&quot;,&quot;b114ffe3-f7be-4c59-82bb-1e2a9e61afd3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:442,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2de74b33-cb22-4bd7-a81d-a5f5a3c8399d&quot;,&quot;title&quot;:&quot;static check()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should resolve in test environment [L]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should resolve in test environment [L]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5782,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    this.timeout(12000);\n    yield NodePyATVInstance.check();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5c94a43e-7e01-4307-ae11-e2a2f7c03739&quot;,&quot;parentUUID&quot;:&quot;2de74b33-cb22-4bd7-a81d-a5f5a3c8399d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return nice error message if pyatv was not found&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should return nice error message if pyatv was not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield assert.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield NodePyATVInstance.check({\n            spawn: createFakeSpawn(cp =&gt; {\n                cp.error(new Error(&#x27;spawn atvremote ENOENT&#x27;)).code(1).end();\n            })\n        });\n    }), /Unable to find pyatv. Is it installed?/);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eb737e8b-70c6-4acc-be4a-6d6d40c8f348&quot;,&quot;parentUUID&quot;:&quot;2de74b33-cb22-4bd7-a81d-a5f5a3c8399d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return nice error message if myatv is too old&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should return nice error message if myatv is too old&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield assert.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield NodePyATVInstance.check({\n            spawn: createFakeSpawn(cp =&gt; {\n                cp.stdout(&#x27;atvremote 0.5.1&#x27;).code(1).end();\n            })\n        });\n    }), /Found pyatv, but unforunately it&#x27;s too old. Please update pyatv./);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ecd38803-a532-45d3-88c1-098ffb8975e1&quot;,&quot;parentUUID&quot;:&quot;2de74b33-cb22-4bd7-a81d-a5f5a3c8399d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return nice error message if scan failed&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should return nice error message if scan failed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    let i = 0;\n    yield assert.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield NodePyATVInstance.check({\n            spawn: createFakeSpawn(cp =&gt; {\n                if (i === 0) {\n                    cp.stdout(&#x27;atvremote 0.7.0&#x27;).code(1).end();\n                    i++;\n                }\n                else {\n                    cp.error(new Error(&#x27;spawn atvremote ENOENT&#x27;)).code(1).end();\n                }\n            })\n        });\n    }), /Unable to scan for devices/);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4b99b437-2163-44ed-a83b-8bfa46496575&quot;,&quot;parentUUID&quot;:&quot;2de74b33-cb22-4bd7-a81d-a5f5a3c8399d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5c94a43e-7e01-4307-ae11-e2a2f7c03739&quot;,&quot;eb737e8b-70c6-4acc-be4a-6d6d40c8f348&quot;,&quot;ecd38803-a532-45d3-88c1-098ffb8975e1&quot;,&quot;4b99b437-2163-44ed-a83b-8bfa46496575&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5789,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4d0a0785-eb8c-4cfd-a7d9-a296a9792ef2&quot;,&quot;title&quot;:&quot;static find()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work [L]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work [L]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5393,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    this.timeout(10000);\n    const result = yield NodePyATVInstance.find();\n    assert.ok(Array.isArray(result));\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;235d9688-0afd-4af8-b378-8952477042c7&quot;,&quot;parentUUID&quot;:&quot;4d0a0785-eb8c-4cfd-a7d9-a296a9792ef2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle option.atvscriptPath&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should handle option.atvscriptPath&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield NodePyATVInstance.find({\n        atvscriptPath: &#x27;/foo/bar&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            assert.strictEqual(cp.cmd(), &#x27;/foo/bar&#x27;);\n            cp.stdout({\n                &#x27;result&#x27;: &#x27;success&#x27;,\n                &#x27;datetime&#x27;: &#x27;2020-11-06T20:47:30.840022+01:00&#x27;,\n                &#x27;devices&#x27;: []\n            }).end();\n        })\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c69b0e93-9195-423c-8df3-256bed9e7c7b&quot;,&quot;parentUUID&quot;:&quot;4d0a0785-eb8c-4cfd-a7d9-a296a9792ef2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error on stderr output&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error on stderr output&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield assert.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield NodePyATVInstance.find({\n            spawn: createFakeSpawn(cp =&gt; {\n                cp.stderr(&#x27;Hello World!&#x27;).code(1).end();\n            })\n        });\n    }), /Unable to execute request/);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;250f613c-4df3-4eb5-9a9c-0b944c6d5790&quot;,&quot;parentUUID&quot;:&quot;4d0a0785-eb8c-4cfd-a7d9-a296a9792ef2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error on error&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield assert.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield NodePyATVInstance.find({\n            spawn: createFakeSpawn(cp =&gt; {\n                cp.error(new Error(&#x27;Hello world!&#x27;)).code(1).end();\n            })\n        });\n    }), /Hello world!/);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;76c962ee-46d6-4021-8185-ac615efe4aa4&quot;,&quot;parentUUID&quot;:&quot;4d0a0785-eb8c-4cfd-a7d9-a296a9792ef2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if atvscript result is not valid json&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error if atvscript result is not valid json&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield assert.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield NodePyATVInstance.find({\n            spawn: createFakeSpawn(cp =&gt; {\n                cp.stdout(JSON.stringify({\n                    &#x27;result&#x27;: &#x27;success&#x27;,\n                    &#x27;datetime&#x27;: &#x27;2020-11-06T20:47:30.840022+01:00&#x27;,\n                    &#x27;devices&#x27;: []\n                }).substr(1)).end();\n            })\n        });\n    }), /Unable to parse result/);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1ac0b9ee-618c-4fa3-941a-c0fa2d4a29fd&quot;,&quot;parentUUID&quot;:&quot;4d0a0785-eb8c-4cfd-a7d9-a296a9792ef2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if atvscript result is not successfull&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error if atvscript result is not successfull&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield assert.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield NodePyATVInstance.find({\n            spawn: createFakeSpawn(cp =&gt; {\n                cp.stdout({\n                    result: &#x27;error&#x27;\n                }).code(1).end();\n            })\n        });\n    }), /Unable to parse pyatv response: /);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8f65517f-90f1-46aa-a665-2d16e0da85d5&quot;,&quot;parentUUID&quot;:&quot;4d0a0785-eb8c-4cfd-a7d9-a296a9792ef2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if atvscript result is without device array&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error if atvscript result is without device array&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield assert.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield NodePyATVInstance.find({\n            spawn: createFakeSpawn(cp =&gt; {\n                cp.stdout({\n                    result: &#x27;success&#x27;\n                }).code(1).end();\n            })\n        });\n    }), /Unable to parse pyatv response: /);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;44f58da4-fe50-4a1f-9193-20df03b9feb2&quot;,&quot;parentUUID&quot;:&quot;4d0a0785-eb8c-4cfd-a7d9-a296a9792ef2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work if devices are without device_info / services&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work if devices are without device_info / services&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const devices = yield NodePyATVInstance.find({\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                datetime: &#x27;2020-11-06T20:47:30.840022+01:00&#x27;,\n                devices: [\n                    {\n                        name: &#x27;Vardagsrum&#x27;,\n                        address: &#x27;10.0.10.81&#x27;,\n                        identifier: &#x27;xxx&#x27;\n                    }\n                ]\n            }).code(1).end();\n        })\n    });\n    assert.strictEqual(devices.length, 1);\n    assert.strictEqual(devices[0].name, &#x27;Vardagsrum&#x27;);\n    assert.strictEqual(devices[0].host, &#x27;10.0.10.81&#x27;);\n    assert.strictEqual(devices[0].id, &#x27;xxx&#x27;);\n    assert.strictEqual(devices[0].model, undefined);\n    assert.strictEqual(devices[0].modelName, undefined);\n    assert.strictEqual(devices[0].os, undefined);\n    assert.strictEqual(devices[0].version, undefined);\n    assert.deepStrictEqual(devices[0].services, undefined);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5662123a-b0a2-4a34-8c4c-a4c157b90ea0&quot;,&quot;parentUUID&quot;:&quot;4d0a0785-eb8c-4cfd-a7d9-a296a9792ef2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work if devices are with device_info / services&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work if devices are with device_info / services&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const devices = yield NodePyATVInstance.find({\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                datetime: &#x27;2020-11-06T20:47:30.840022+01:00&#x27;,\n                devices: [\n                    {\n                        name: &#x27;Vardagsrum&#x27;,\n                        address: &#x27;10.0.10.81&#x27;,\n                        identifier: &#x27;xxx&#x27;,\n                        device_info: {\n                            &#x27;model&#x27;: &#x27;Gen4K&#x27;,\n                            &#x27;model_str&#x27;: &#x27;Apple TV 4K&#x27;,\n                            &#x27;operating_system&#x27;: &#x27;TvOS&#x27;,\n                            &#x27;version&#x27;: &#x27;15.5.1&#x27;\n                        },\n                        services: [\n                            {\n                                protocol: &#x27;mrp&#x27;,\n                                port: 49152\n                            },\n                            {\n                                protocol: &#x27;airplay&#x27;,\n                                port: 7000\n                            }\n                        ]\n                    }\n                ]\n            }).code(1).end();\n        })\n    });\n    assert.strictEqual(devices.length, 1);\n    assert.strictEqual(devices[0].name, &#x27;Vardagsrum&#x27;);\n    assert.strictEqual(devices[0].host, &#x27;10.0.10.81&#x27;);\n    assert.strictEqual(devices[0].id, &#x27;xxx&#x27;);\n    assert.strictEqual(devices[0].model, &#x27;Gen4K&#x27;);\n    assert.strictEqual(devices[0].modelName, &#x27;Apple TV 4K&#x27;);\n    assert.strictEqual(devices[0].os, &#x27;TvOS&#x27;);\n    assert.strictEqual(devices[0].version, &#x27;15.5.1&#x27;);\n    assert.deepStrictEqual(devices[0].services, [\n        {\n            protocol: NodePyATVProtocol.mrp,\n            port: 49152\n        },\n        {\n            protocol: NodePyATVProtocol.airplay,\n            port: 7000\n        }\n    ]);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;56690ac8-1bee-4bf3-8fb4-17a3cb3f8dee&quot;,&quot;parentUUID&quot;:&quot;4d0a0785-eb8c-4cfd-a7d9-a296a9792ef2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;235d9688-0afd-4af8-b378-8952477042c7&quot;,&quot;c69b0e93-9195-423c-8df3-256bed9e7c7b&quot;,&quot;250f613c-4df3-4eb5-9a9c-0b944c6d5790&quot;,&quot;76c962ee-46d6-4021-8185-ac615efe4aa4&quot;,&quot;1ac0b9ee-618c-4fa3-941a-c0fa2d4a29fd&quot;,&quot;8f65517f-90f1-46aa-a665-2d16e0da85d5&quot;,&quot;44f58da4-fe50-4a1f-9193-20df03b9feb2&quot;,&quot;5662123a-b0a2-4a34-8c4c-a4c157b90ea0&quot;,&quot;56690ac8-1bee-4bf3-8fb4-17a3cb3f8dee&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5405,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ab7b8453-892d-4e6b-94cd-b5fb03d3d90c&quot;,&quot;title&quot;:&quot;static device()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should pass options to constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static device() should pass options to constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = NodePyATVInstance.device({ host: &#x27;192.168.178.6&#x27;, name: &#x27;My Testdevice&#x27; });\nassert.strictEqual(device.host, &#x27;192.168.178.6&#x27;);\nassert.strictEqual(device.name, &#x27;My Testdevice&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5e922cce-d281-47e7-b24a-c77c1a51af53&quot;,&quot;parentUUID&quot;:&quot;ab7b8453-892d-4e6b-94cd-b5fb03d3d90c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5e922cce-d281-47e7-b24a-c77c1a51af53&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fef9a1bf-701b-46c8-bed6-97d30331850b&quot;,&quot;title&quot;:&quot;version()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance version() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const i = new NodePyATVInstance({ atvremotePath: &#x27;test&#x27; });\n    yield i.version({\n        spawn: createFakeSpawn(cp =&gt; {\n            assert.strictEqual(cp.cmd(), &#x27;test&#x27;);\n            cp.code(1).end();\n        })\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5cea46fb-b631-40ea-840b-19738be0648e&quot;,&quot;parentUUID&quot;:&quot;fef9a1bf-701b-46c8-bed6-97d30331850b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5cea46fb-b631-40ea-840b-19738be0648e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;48673e93-d9c7-43f6-926c-f58047984d96&quot;,&quot;title&quot;:&quot;check()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance check() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const i = new NodePyATVInstance({ atvremotePath: &#x27;test&#x27; });\n    yield assert.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield i.check({\n            spawn: createFakeSpawn(cp =&gt; {\n                assert.strictEqual(cp.cmd(), &#x27;test&#x27;);\n                cp.error(new Error(&#x27;spawn atvremote ENOENT&#x27;)).code(1).end();\n            })\n        });\n    }), /Unable to find pyatv. Is it installed?/);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2094146b-a4e1-4693-895b-970feb12d63b&quot;,&quot;parentUUID&quot;:&quot;48673e93-d9c7-43f6-926c-f58047984d96&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2094146b-a4e1-4693-895b-970feb12d63b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;13694232-5372-479c-ba89-9180665844a1&quot;,&quot;title&quot;:&quot;find()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance find() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const i = new NodePyATVInstance({ atvscriptPath: &#x27;test&#x27; });\n    yield i.find({\n        spawn: createFakeSpawn(cp =&gt; {\n            assert.strictEqual(cp.cmd(), &#x27;test&#x27;);\n            cp.stdout({\n                &#x27;result&#x27;: &#x27;success&#x27;,\n                &#x27;datetime&#x27;: &#x27;2020-11-06T20:47:30.840022+01:00&#x27;,\n                &#x27;devices&#x27;: []\n            }).end();\n        })\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;38e8ddfd-1d45-4c98-aab6-6b6556ead842&quot;,&quot;parentUUID&quot;:&quot;13694232-5372-479c-ba89-9180665844a1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;38e8ddfd-1d45-4c98-aab6-6b6556ead842&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b9ec4204-ff49-4415-ba0b-1d8c638762a5&quot;,&quot;title&quot;:&quot;device()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance device() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const i = new NodePyATVInstance({ debug: true });\n    const d = i.device({ name: &#x27;My Testdevice&#x27;, host: &#x27;192.168.178.2&#x27; });\n    assert.deepStrictEqual(d.debug, true);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0281e651-a4f3-48e8-ab38-b8b8d610c4c3&quot;,&quot;parentUUID&quot;:&quot;b9ec4204-ff49-4415-ba0b-1d8c638762a5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0281e651-a4f3-48e8-ab38-b8b8d610c4c3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;12b01b7b-5b33-43a3-9686-dcda8549f826&quot;,&quot;title&quot;:&quot;Type Exports&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Type NodePyATVProtocol should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVProtocol should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVProtocol);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;677b5bf3-509d-4e25-8577-d944bae464e8&quot;,&quot;parentUUID&quot;:&quot;12b01b7b-5b33-43a3-9686-dcda8549f826&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVMediaType should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVMediaType should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVMediaType);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fcef1b69-dff3-491a-9882-07dea032f539&quot;,&quot;parentUUID&quot;:&quot;12b01b7b-5b33-43a3-9686-dcda8549f826&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVDeviceEvent should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVDeviceEvent should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVDeviceEvent);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e13628a-0759-40cf-bf36-58cfed2e1bd1&quot;,&quot;parentUUID&quot;:&quot;12b01b7b-5b33-43a3-9686-dcda8549f826&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVDeviceState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVDeviceState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVDeviceState);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;009ff575-9c1a-4fc7-a58d-a7a7d931367d&quot;,&quot;parentUUID&quot;:&quot;12b01b7b-5b33-43a3-9686-dcda8549f826&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVRepeatState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVRepeatState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVRepeatState);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a0e248e6-b1e2-49cb-b677-5da4a46f087c&quot;,&quot;parentUUID&quot;:&quot;12b01b7b-5b33-43a3-9686-dcda8549f826&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVShuffleState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVShuffleState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVShuffleState);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2159cea6-84ca-4c05-962d-98806b7f1d4e&quot;,&quot;parentUUID&quot;:&quot;12b01b7b-5b33-43a3-9686-dcda8549f826&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVKeys should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVKeys should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVKeys);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0fd3dfd2-d609-4da0-820d-15ccff1dfae1&quot;,&quot;parentUUID&quot;:&quot;12b01b7b-5b33-43a3-9686-dcda8549f826&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVInstanceOptions should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVInstanceOptions should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVListenerState);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c22d0592-a59d-49c7-abc9-b5d2201d946b&quot;,&quot;parentUUID&quot;:&quot;12b01b7b-5b33-43a3-9686-dcda8549f826&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVPowerState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVPowerState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVPowerState);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a4f5ba17-3bcb-4f25-9d09-9e29c0044b91&quot;,&quot;parentUUID&quot;:&quot;12b01b7b-5b33-43a3-9686-dcda8549f826&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;677b5bf3-509d-4e25-8577-d944bae464e8&quot;,&quot;fcef1b69-dff3-491a-9882-07dea032f539&quot;,&quot;8e13628a-0759-40cf-bf36-58cfed2e1bd1&quot;,&quot;009ff575-9c1a-4fc7-a58d-a7a7d931367d&quot;,&quot;a0e248e6-b1e2-49cb-b677-5da4a46f087c&quot;,&quot;2159cea6-84ca-4c05-962d-98806b7f1d4e&quot;,&quot;0fd3dfd2-d609-4da0-820d-15ccff1dfae1&quot;,&quot;c22d0592-a59d-49c7-abc9-b5d2201d946b&quot;,&quot;a4f5ba17-3bcb-4f25-9d09-9e29c0044b91&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f30c16fb-42ce-4dc4-9c4d-8e8082a2644d&quot;,&quot;title&quot;:&quot;Tools&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ed575f63-6639-40eb-bf0b-7abd97e21198&quot;,&quot;title&quot;:&quot;addRequestId() / removeRequestId()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a string&quot;,&quot;fullTitle&quot;:&quot;Tools addRequestId() / removeRequestId() should return a string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = addRequestId();\nassert.strictEqual(typeof id, &#x27;string&#x27;);\nremoveRequestId(id);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bd272dd6-ba81-4683-89b8-5d132da05d48&quot;,&quot;parentUUID&quot;:&quot;ed575f63-6639-40eb-bf0b-7abd97e21198&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work if given id is not in index&quot;,&quot;fullTitle&quot;:&quot;Tools addRequestId() / removeRequestId() should work if given id is not in index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;removeRequestId(&#x27;FOO&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6a4084e4-6e9d-4d4e-a691-4dc9ad091fba&quot;,&quot;parentUUID&quot;:&quot;ed575f63-6639-40eb-bf0b-7abd97e21198&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bd272dd6-ba81-4683-89b8-5d132da05d48&quot;,&quot;6a4084e4-6e9d-4d4e-a691-4dc9ad091fba&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9969ab57-900d-43ed-ac8e-1ad6bba766ec&quot;,&quot;title&quot;:&quot;debug()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work without any options&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work without any options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(&#x27;TEST&#x27;, &#x27;Hello World.&#x27;, {});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1ffa7e54-35b3-4146-ab45-009e97ea2a6d&quot;,&quot;parentUUID&quot;:&quot;9969ab57-900d-43ed-ac8e-1ad6bba766ec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with default logger&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with default logger&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(&#x27;TEST&#x27;, &#x27;Hello World.&#x27;, { debug: true });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8cf9993-04f0-492c-a9b4-187b1865aa48&quot;,&quot;parentUUID&quot;:&quot;9969ab57-900d-43ed-ac8e-1ad6bba766ec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with custom logger&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with custom logger&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(&#x27;TEST&#x27;, &#x27;Hello World.&#x27;, {\n    debug: function (msg) {\n        assert.strictEqual(this, null);\n        assert.ok(msg.includes(&#x27;Hello World&#x27;));\n    }\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;55301a92-d917-45cf-9c6f-100b080cc8e3&quot;,&quot;parentUUID&quot;:&quot;9969ab57-900d-43ed-ac8e-1ad6bba766ec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with colors disabled&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with colors disabled&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(&#x27;TEST&#x27;, &#x27;Hello World.&#x27;, { noColors: true });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8bcd917e-0afd-47e3-a984-5ace73450d6a&quot;,&quot;parentUUID&quot;:&quot;9969ab57-900d-43ed-ac8e-1ad6bba766ec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with custom logger and colors disabled&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with custom logger and colors disabled&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(&#x27;TEST&#x27;, &#x27;Hello World.&#x27;, {\n    noColors: true,\n    debug: function (msg) {\n        assert.strictEqual(this, null);\n        assert.strictEqual(msg, &#x27;[node-pyatv][TEST] Hello World.&#x27;);\n    }\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1349d720-a7dd-437e-b21e-b6dca53755d8&quot;,&quot;parentUUID&quot;:&quot;9969ab57-900d-43ed-ac8e-1ad6bba766ec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1ffa7e54-35b3-4146-ab45-009e97ea2a6d&quot;,&quot;c8cf9993-04f0-492c-a9b4-187b1865aa48&quot;,&quot;55301a92-d917-45cf-9c6f-100b080cc8e3&quot;,&quot;8bcd917e-0afd-47e3-a984-5ace73450d6a&quot;,&quot;1349d720-a7dd-437e-b21e-b6dca53755d8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fd21284a-f1d1-4bbb-9f6b-1ea7f62a07c6&quot;,&quot;title&quot;:&quot;getExecutable()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should handle atvremotePath if set&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle atvremotePath if set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = getExecutable(NodePyATVExecutableType.atvremote, {\n    atvremotePath: &#x27;/tmp/1&#x27;,\n    atvscriptPath: &#x27;/tmp/2&#x27;\n});\nassert.strictEqual(result, &#x27;/tmp/1&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;33f67c5c-8e4f-4a27-b4e0-1fe1a1551b80&quot;,&quot;parentUUID&quot;:&quot;fd21284a-f1d1-4bbb-9f6b-1ea7f62a07c6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle atvscriptPath if set&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle atvscriptPath if set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = getExecutable(NodePyATVExecutableType.atvscript, {\n    atvremotePath: &#x27;/tmp/1&#x27;,\n    atvscriptPath: &#x27;/tmp/2&#x27;\n});\nassert.strictEqual(result, &#x27;/tmp/2&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1fbfb2a6-0a4c-4c26-aa40-aa441855c11c&quot;,&quot;parentUUID&quot;:&quot;fd21284a-f1d1-4bbb-9f6b-1ea7f62a07c6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle default for atvremote&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle default for atvremote&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = getExecutable(NodePyATVExecutableType.atvremote, {\n    atvscriptPath: &#x27;/tmp&#x27;\n});\nassert.strictEqual(result, &#x27;atvremote&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6a396790-0519-4c2e-8ac9-c542cb45a28e&quot;,&quot;parentUUID&quot;:&quot;fd21284a-f1d1-4bbb-9f6b-1ea7f62a07c6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle default for atvscript&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle default for atvscript&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = getExecutable(NodePyATVExecutableType.atvscript, {\n    atvremotePath: &#x27;/tmp&#x27;\n});\nassert.strictEqual(result, &#x27;atvscript&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3a4c405b-f8c4-4fd2-b3f6-c0776035d303&quot;,&quot;parentUUID&quot;:&quot;fd21284a-f1d1-4bbb-9f6b-1ea7f62a07c6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;33f67c5c-8e4f-4a27-b4e0-1fe1a1551b80&quot;,&quot;1fbfb2a6-0a4c-4c26-aa40-aa441855c11c&quot;,&quot;6a396790-0519-4c2e-8ac9-c542cb45a28e&quot;,&quot;3a4c405b-f8c4-4fd2-b3f6-c0776035d303&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d4517841-ff62-420e-85ea-29f6d0936c97&quot;,&quot;title&quot;:&quot;getParameters()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;empty case&quot;,&quot;fullTitle&quot;:&quot;Tools getParameters() empty case&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const result = yield getParameters();\n    assert.deepEqual(result, []);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b17b10ae-5a06-4bf4-be4b-5bc665b98802&quot;,&quot;parentUUID&quot;:&quot;d4517841-ff62-420e-85ea-29f6d0936c97&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;easy case&quot;,&quot;fullTitle&quot;:&quot;Tools getParameters() easy case&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const result = yield getParameters({\n        host: &#x27;192.168.178.2&#x27;\n    });\n    assert.deepEqual(result, [&#x27;-s&#x27;, &#x27;192.168.178.2&#x27;]);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;042597c3-c32d-4635-8ddb-5bc6879fbb60&quot;,&quot;parentUUID&quot;:&quot;d4517841-ff62-420e-85ea-29f6d0936c97&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;full case&quot;,&quot;fullTitle&quot;:&quot;Tools getParameters() full case&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const result = yield getParameters({\n        hosts: [&#x27;192.168.178.2&#x27;, &#x27;192.168.178.3&#x27;],\n        id: &#x27;****&#x27;,\n        protocol: NodePyATVProtocol.mrp,\n        dmapCredentials: &#x27;****&#x27;,\n        mrpCredentials: &#x27;****&#x27;,\n        airplayCredentials: &#x27;****&#x27;,\n        companionCredentials: &#x27;1234&#x27;,\n        raopCredentials: &#x27;::foo:&#x27;\n    });\n    assert.deepEqual(result, [\n        &#x27;-s&#x27;, &#x27;192.168.178.2,192.168.178.3&#x27;,\n        &#x27;-i&#x27;, &#x27;****&#x27;,\n        &#x27;--protocol&#x27;, &#x27;mrp&#x27;,\n        &#x27;--dmap-credentials&#x27;, &#x27;****&#x27;,\n        &#x27;--mrp-credentials&#x27;, &#x27;****&#x27;,\n        &#x27;--airplay-credentials&#x27;, &#x27;****&#x27;,\n        &#x27;--companion-credentials&#x27;, &#x27;1234&#x27;,\n        &#x27;--raop-credentials&#x27;, &#x27;::foo:&#x27;\n    ]);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;28da3fda-8e99-4412-af50-c94d9b19824d&quot;,&quot;parentUUID&quot;:&quot;d4517841-ff62-420e-85ea-29f6d0936c97&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b17b10ae-5a06-4bf4-be4b-5bc665b98802&quot;,&quot;042597c3-c32d-4635-8ddb-5bc6879fbb60&quot;,&quot;28da3fda-8e99-4412-af50-c94d9b19824d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3bf2c9f3-89a6-4e09-a603-d2028d19c8b4&quot;,&quot;title&quot;:&quot;parseState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work with empty data&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should work with empty data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input = {};\nconst result = parseState(input, &#x27;&#x27;, {});\nassert.deepStrictEqual(result, {\n    dateTime: null,\n    hash: null,\n    mediaType: null,\n    deviceState: null,\n    title: null,\n    artist: null,\n    album: null,\n    genre: null,\n    totalTime: null,\n    position: null,\n    shuffle: null,\n    repeat: null,\n    app: null,\n    appId: null,\n    powerState: null,\n    focusState: null,\n    volume: null,\n    outputDevices: null\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f1bceb5f-4887-48fc-a619-f55e0efd4ae2&quot;,&quot;parentUUID&quot;:&quot;3bf2c9f3-89a6-4e09-a603-d2028d19c8b4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work without data&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should work without data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// @ts-ignore\nconst result = parseState(null, &#x27;&#x27;, {});\nassert.deepStrictEqual(result, {\n    dateTime: null,\n    hash: null,\n    mediaType: null,\n    deviceState: null,\n    title: null,\n    artist: null,\n    album: null,\n    genre: null,\n    totalTime: null,\n    position: null,\n    shuffle: null,\n    repeat: null,\n    app: null,\n    appId: null,\n    powerState: null,\n    focusState: null,\n    volume: null,\n    outputDevices: null\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0e581b40-d7f3-4e98-ba28-e4e91a24a004&quot;,&quot;parentUUID&quot;:&quot;3bf2c9f3-89a6-4e09-a603-d2028d19c8b4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with example data&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should work with example data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input = {\n    result: &#x27;success&#x27;,\n    datetime: &#x27;2020-11-07T22:38:43.608030+01:00&#x27;,\n    hash: &#x27;100e0ab6-6ff5-4199-9c04-a7107ff78712&#x27;,\n    media_type: &#x27;video&#x27;,\n    device_state: &#x27;playing&#x27;,\n    title: &#x27;Solo: A Star Wars Story&#x27;,\n    artist: null,\n    album: null,\n    genre: null,\n    total_time: 8097,\n    position: 27,\n    shuffle: &#x27;off&#x27;,\n    repeat: &#x27;off&#x27;,\n    app: &#x27;Disney+&#x27;,\n    app_id: &#x27;com.disney.disneyplus&#x27;,\n    powerState: null,\n    focusState: null,\n    volume: null,\n    outputDevices: null\n};\nconst result = parseState(input, &#x27;&#x27;, {});\nassert.deepStrictEqual(result, {\n    dateTime: new Date(&#x27;2020-11-07T22:38:43.608030+01:00&#x27;),\n    hash: &#x27;100e0ab6-6ff5-4199-9c04-a7107ff78712&#x27;,\n    mediaType: NodePyATVMediaType.video,\n    deviceState: NodePyATVDeviceState.playing,\n    title: &#x27;Solo: A Star Wars Story&#x27;,\n    artist: null,\n    album: null,\n    genre: null,\n    totalTime: 8097,\n    position: 27,\n    shuffle: NodePyATVShuffleState.off,\n    repeat: NodePyATVRepeatState.off,\n    app: &#x27;Disney+&#x27;,\n    appId: &#x27;com.disney.disneyplus&#x27;,\n    powerState: null,\n    focusState: null,\n    volume: null,\n    outputDevices: null\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f08dd20-88b4-4208-9611-6fee0fa3ebfa&quot;,&quot;parentUUID&quot;:&quot;3bf2c9f3-89a6-4e09-a603-d2028d19c8b4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw an error for pyatv exceptions&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should throw an error for pyatv exceptions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input = {\n    result: &#x27;failure&#x27;,\n    datetime: &#x27;2021-11-24T21:13:36.424576+03:00&#x27;,\n    exception: &#x27;invalid credentials: 321&#x27;,\n    stacktrace: &#x27;Traceback (most recent call last):\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\\\&quot;, line 302, in appstart\\n    print(args.output(await _handle_command(args, abort_sem, loop)), flush=True)\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\\\&quot;, line 196, in _handle_command\\n    atv = await connect(config, loop, protocol=Protocol.MRP)\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/__init__.py\\\&quot;, line 96, in connect\\n    for setup_data in proto_methods.setup(\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\\\&quot;, line 192, in setup\\n    stream = AirPlayStream(config, service)\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\\\&quot;, line 79, in __init__\\n    self._credentials: HapCredentials = parse_credentials(self.service.credentials)\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/auth/hap_pairing.py\\\&quot;, line 139, in parse_credentials\\n    raise exceptions.InvalidCredentialsError(\\\&quot;invalid credentials: \\\&quot; + detail_string)\\npyatv.exceptions.InvalidCredentialsError: invalid credentials: 321\\n&#x27;\n};\nassert.throws(() =&gt; {\n    parseState(input, &#x27;&#x27;, {});\n}, /Got pyatv Error: invalid credentials: 321/);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ee6324db-e88d-44f5-b245-aa185f14aa57&quot;,&quot;parentUUID&quot;:&quot;3bf2c9f3-89a6-4e09-a603-d2028d19c8b4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should ignore date if it&#x27;s an invalid date&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should ignore date if it&#x27;s an invalid date&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input = { datetime: &#x27;today&#x27; };\nconst result = parseState(input, &#x27;&#x27;, {});\nassert.deepStrictEqual(result, {\n    dateTime: null,\n    hash: null,\n    mediaType: null,\n    deviceState: null,\n    title: null,\n    artist: null,\n    album: null,\n    genre: null,\n    totalTime: null,\n    position: null,\n    shuffle: null,\n    repeat: null,\n    app: null,\n    appId: null,\n    powerState: null,\n    focusState: null,\n    volume: null,\n    outputDevices: null\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7c4be543-7527-4f5b-9fbd-59657d87eca5&quot;,&quot;parentUUID&quot;:&quot;3bf2c9f3-89a6-4e09-a603-d2028d19c8b4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should ignore data if unsupported type&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should ignore data if unsupported type&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input = {\n    result: &#x27;success&#x27;,\n    datetime: true,\n    hash: 1337,\n    media_type: false,\n    device_state: 43,\n    title: undefined,\n    artist: 90,\n    album: Infinity,\n    genre: Math.PI,\n    total_time: &#x27;23min&#x27;,\n    position: &#x27;0:30.123&#x27;,\n    shuffle: false,\n    repeat: true,\n    app: 0,\n    app_id: 891645381647289,\n    powerState: null,\n    focusState: null,\n    volume: null,\n    outputDevices: null\n};\nconst result = parseState(input, &#x27;&#x27;, {});\nassert.deepStrictEqual(result, {\n    dateTime: null,\n    hash: null,\n    mediaType: null,\n    deviceState: null,\n    title: null,\n    artist: null,\n    album: null,\n    genre: null,\n    totalTime: null,\n    position: null,\n    shuffle: null,\n    repeat: null,\n    app: null,\n    appId: null,\n    powerState: null,\n    focusState: null,\n    volume: null,\n    outputDevices: null\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;74b4e505-6872-46b4-bb24-933301e0b2fc&quot;,&quot;parentUUID&quot;:&quot;3bf2c9f3-89a6-4e09-a603-d2028d19c8b4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should ignore enums with unsupported valid&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should ignore enums with unsupported valid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input = {\n    media_type: &#x27;3d-experience&#x27;,\n    device_state: &#x27;initiating&#x27;,\n    shuffle: &#x27;everything&#x27;,\n    repeat: &#x27;nothing&#x27;\n};\nconst result = parseState(input, &#x27;&#x27;, {});\nassert.deepStrictEqual(result, {\n    dateTime: null,\n    hash: null,\n    mediaType: null,\n    deviceState: null,\n    title: null,\n    artist: null,\n    album: null,\n    genre: null,\n    totalTime: null,\n    position: null,\n    shuffle: null,\n    repeat: null,\n    app: null,\n    appId: null,\n    powerState: null,\n    focusState: null,\n    volume: null,\n    outputDevices: null\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b1389f55-48ca-48ba-91f5-3326c2d561ea&quot;,&quot;parentUUID&quot;:&quot;3bf2c9f3-89a6-4e09-a603-d2028d19c8b4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f1bceb5f-4887-48fc-a619-f55e0efd4ae2&quot;,&quot;0e581b40-d7f3-4e98-ba28-e4e91a24a004&quot;,&quot;1f08dd20-88b4-4208-9611-6fee0fa3ebfa&quot;,&quot;ee6324db-e88d-44f5-b245-aa185f14aa57&quot;,&quot;7c4be543-7527-4f5b-9fbd-59657d87eca5&quot;,&quot;74b4e505-6872-46b4-bb24-933301e0b2fc&quot;,&quot;b1389f55-48ca-48ba-91f5-3326c2d561ea&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;10.2.0&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;node-pyatv&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report/assets&quot;,&quot;jsonFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/mochawesome-report/mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>