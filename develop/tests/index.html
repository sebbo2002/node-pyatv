<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:101,&quot;tests&quot;:173,&quot;passes&quot;:171,&quot;pending&quot;:2,&quot;failures&quot;:0,&quot;start&quot;:&quot;2024-11-05T10:06:14.900Z&quot;,&quot;end&quot;:&quot;2024-11-05T10:06:26.734Z&quot;,&quot;duration&quot;:11834,&quot;testsRegistered&quot;:173,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:1.1560693641618496,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;440883d4-66ff-41ed-bd3c-577029ec5910&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;8a231257-5684-4260-9e9c-56c73b07f576&quot;,&quot;title&quot;:&quot;NodePyATVDeviceEvent&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;546a3611-ef6f-4822-bd08-7c5f134d9033&quot;,&quot;title&quot;:&quot;get key()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get key() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event=new NodePyATVDeviceEvent({key:\&quot;genre\&quot;,old:\&quot;Jazz\&quot;,new:\&quot;Rock\&quot;,device:new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testinstance\&quot;})});assert.strictEqual(event.key,\&quot;genre\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e9543093-c727-4e32-a469-da8eadb375c4&quot;,&quot;parentUUID&quot;:&quot;546a3611-ef6f-4822-bd08-7c5f134d9033&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e9543093-c727-4e32-a469-da8eadb375c4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;af809986-9e41-41b2-8189-703798ea4285&quot;,&quot;title&quot;:&quot;get oldValue()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get oldValue() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event=new NodePyATVDeviceEvent({key:\&quot;genre\&quot;,old:\&quot;Jazz\&quot;,new:\&quot;Rock\&quot;,device:new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testinstance\&quot;})});assert.strictEqual(event.oldValue,\&quot;Jazz\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1431c9fe-d3a7-4f3f-abd7-2480a3096dcb&quot;,&quot;parentUUID&quot;:&quot;af809986-9e41-41b2-8189-703798ea4285&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1431c9fe-d3a7-4f3f-abd7-2480a3096dcb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ac014aa5-2f5b-46a2-8ac2-8421f5b2ddc4&quot;,&quot;title&quot;:&quot;get newValue()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get newValue() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event=new NodePyATVDeviceEvent({key:\&quot;genre\&quot;,old:\&quot;Jazz\&quot;,new:\&quot;Rock\&quot;,device:new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testinstance\&quot;})});assert.strictEqual(event.newValue,\&quot;Rock\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f2305f5c-cab7-475b-b1a5-9302d5a108c4&quot;,&quot;parentUUID&quot;:&quot;ac014aa5-2f5b-46a2-8ac2-8421f5b2ddc4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f2305f5c-cab7-475b-b1a5-9302d5a108c4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4dea6ad3-d46b-4b8a-9418-02578dabe431&quot;,&quot;title&quot;:&quot;get value()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get value() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event=new NodePyATVDeviceEvent({key:\&quot;genre\&quot;,old:\&quot;Jazz\&quot;,new:\&quot;Rock\&quot;,device:new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testinstance\&quot;})});assert.strictEqual(event.value,\&quot;Rock\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;156962a0-908d-44c8-bed1-44a50841209a&quot;,&quot;parentUUID&quot;:&quot;4dea6ad3-d46b-4b8a-9418-02578dabe431&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;156962a0-908d-44c8-bed1-44a50841209a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;80f58415-38ba-4078-ad92-2d483094131a&quot;,&quot;title&quot;:&quot;get device()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get device() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testinstance\&quot;});const event=new NodePyATVDeviceEvent({key:\&quot;genre\&quot;,old:\&quot;Jazz\&quot;,new:\&quot;Rock\&quot;,device});assert.deepEqual(event.device,device)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;48d7ebf4-f400-4ae8-bedc-843512785e03&quot;,&quot;parentUUID&quot;:&quot;80f58415-38ba-4078-ad92-2d483094131a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;48d7ebf4-f400-4ae8-bedc-843512785e03&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b1ab8e5e-14ee-4210-be29-cdc240512cec&quot;,&quot;title&quot;:&quot;NodePyATVDeviceEvents&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c6b01a65-1206-4371-ad2a-485225d05a45&quot;,&quot;title&quot;:&quot;applyStateAndEmitEvents()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should emit update:key event&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit update:key event&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});await new Promise(cb=&gt;{device.once(\&quot;update:title\&quot;,event=&gt;{assert.ok(event instanceof NodePyATVDeviceEvent);assert.strictEqual(event.key,\&quot;title\&quot;);assert.strictEqual(event.oldValue,null);assert.strictEqual(event.newValue,\&quot;My Movie\&quot;);assert.strictEqual(event.value,\&quot;My Movie\&quot;);assert.deepStrictEqual(event.device,device);cb(void 0)})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;def93784-8c62-474d-a656-a40c56986ea5&quot;,&quot;parentUUID&quot;:&quot;c6b01a65-1206-4371-ad2a-485225d05a45&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit update event&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit update event&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});await new Promise(cb=&gt;{device.once(\&quot;update\&quot;,event=&gt;{assert.ok(event instanceof NodePyATVDeviceEvent);assert.strictEqual(event.key,\&quot;title\&quot;);assert.strictEqual(event.oldValue,null);assert.strictEqual(event.newValue,\&quot;My Movie\&quot;);assert.strictEqual(event.value,\&quot;My Movie\&quot;);assert.deepStrictEqual(event.device,device);cb(void 0)})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c5f12a03-2e1d-4be1-b3e5-2f2d113206e7&quot;,&quot;parentUUID&quot;:&quot;c6b01a65-1206-4371-ad2a-485225d05a45&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit update:key event before update&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit update:key event before update&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});const sort=[];await Promise.race([new Promise(cb=&gt;{device.once(\&quot;update\&quot;,()=&gt;{sort.push(\&quot;update\&quot;);cb(void 0)})}),new Promise(cb=&gt;{device.once(\&quot;update:title\&quot;,()=&gt;{sort.push(\&quot;update:title\&quot;);cb(void 0)})})]);assert.deepStrictEqual(sort,[\&quot;update:title\&quot;,\&quot;update\&quot;])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b3cf0889-984e-4d6a-b098-979a3e1a147f&quot;,&quot;parentUUID&quot;:&quot;c6b01a65-1206-4371-ad2a-485225d05a45&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error events on failures&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit error events on failures&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;failure\&quot;,datetime:\&quot;2021-11-24T21:13:36.424576+03:00\&quot;,exception:\&quot;invalid credentials: 321\&quot;,stacktrace:&#x27;Traceback (most recent call last):\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\&quot;, line 302, in appstart\\n    print(args.output(await _handle_command(args, abort_sem, loop)), flush=True)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\&quot;, line 196, in _handle_command\\n    atv = await connect(config, loop, protocol=Protocol.MRP)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/__init__.py\&quot;, line 96, in connect\\n    for setup_data in proto_methods.setup(\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\&quot;, line 192, in setup\\n    stream = AirPlayStream(config, service)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\&quot;, line 79, in __init__\\n    self._credentials: HapCredentials = parse_credentials(self.service.credentials)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/auth/hap_pairing.py\&quot;, line 139, in parse_credentials\\n    raise exceptions.InvalidCredentialsError(\&quot;invalid credentials: \&quot; + detail_string)\\npyatv.exceptions.InvalidCredentialsError: invalid credentials: 321\\n&#x27;})})});await new Promise(cb=&gt;{device.once(\&quot;error\&quot;,error=&gt;{assert.ok(error instanceof Error);assert.ok(error.toString().includes(\&quot;invalid credentials: 321\&quot;));cb(void 0)})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8b0daf7b-c552-4eca-8237-d09ebaef51cb&quot;,&quot;parentUUID&quot;:&quot;c6b01a65-1206-4371-ad2a-485225d05a45&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not emit an update if new value is same as old one&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should not emit an update if new value is same as old one&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let spawnCounter=0;let eventCounter=0;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{if(spawnCounter===0){cp.onStdIn(()=&gt;cp.end())}cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;});spawnCounter++;if(spawnCounter&gt;=2){cp.end()}})});const listener=__name(()=&gt;{eventCounter++},\&quot;listener\&quot;);device.on(\&quot;update\&quot;,listener);await new Promise(cb=&gt;setTimeout(cb,0));await device.getState();device.off(\&quot;update\&quot;,listener);assert.strictEqual(spawnCounter,2);assert.strictEqual(eventCounter,1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cac523a5-ef59-4ba0-bde7-4cee11ef4851&quot;,&quot;parentUUID&quot;:&quot;c6b01a65-1206-4371-ad2a-485225d05a45&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error event if event listener throws an exception&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit error event if event listener throws an exception&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});let callCounter=0;const error=new Error(\&quot;This is an error. Be nice.\&quot;);device.once(\&quot;error\&quot;,err=&gt;{assert.strictEqual(err,error);callCounter++});const listener=__name(()=&gt;{throw error},\&quot;listener\&quot;);device.on(\&quot;update\&quot;,listener);await new Promise(cb=&gt;setTimeout(cb,0));device.off(\&quot;update\&quot;,listener);assert.strictEqual(callCounter,1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f5c4d12b-09e0-4282-9c6b-f9f26185460e&quot;,&quot;parentUUID&quot;:&quot;c6b01a65-1206-4371-ad2a-485225d05a45&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should also work with powerState&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should also work with powerState&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,datetime:new Date().toJSON(),power_state:\&quot;off\&quot;})})});await new Promise(cb=&gt;{device.once(\&quot;update:powerState\&quot;,event=&gt;{assert.ok(event instanceof NodePyATVDeviceEvent);assert.strictEqual(event.key,\&quot;powerState\&quot;);assert.strictEqual(event.oldValue,null);assert.strictEqual(event.newValue,\&quot;off\&quot;);assert.strictEqual(event.newValue,NodePyATVPowerState.off);assert.strictEqual(event.value,\&quot;off\&quot;);assert.strictEqual(event.value,NodePyATVPowerState.off);assert.deepStrictEqual(event.device,device);cb(void 0)})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;01685296-2efe-4ad9-8af1-be71ddb3cf17&quot;,&quot;parentUUID&quot;:&quot;c6b01a65-1206-4371-ad2a-485225d05a45&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only one event for powerState changes&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should only one event for powerState changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,datetime:new Date().toJSON(),power_state:\&quot;off\&quot;});cp.end()})});let counter=0;device.on(\&quot;update\&quot;,event=&gt;{assert.ok(event instanceof NodePyATVDeviceEvent);assert.strictEqual(event.key,\&quot;powerState\&quot;);assert.strictEqual(event.oldValue,null);assert.strictEqual(event.newValue,\&quot;off\&quot;);assert.strictEqual(event.newValue,NodePyATVPowerState.off);assert.strictEqual(event.value,\&quot;off\&quot;);assert.strictEqual(event.value,NodePyATVPowerState.off);assert.deepStrictEqual(event.device,device);counter++});await new Promise(cb=&gt;setTimeout(cb,10));assert.strictEqual(counter,1);device.removeAllListeners(\&quot;update\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7f04c8a4-df14-44c2-8fde-0ff4fddfc3e6&quot;,&quot;parentUUID&quot;:&quot;c6b01a65-1206-4371-ad2a-485225d05a45&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only one event for focusState changes&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should only one event for focusState changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,datetime:new Date().toJSON(),focus_state:\&quot;unfocused\&quot;});cp.end()})});let counter=0;device.on(\&quot;update\&quot;,event=&gt;{assert.ok(event instanceof NodePyATVDeviceEvent);assert.strictEqual(event.key,\&quot;focusState\&quot;);assert.strictEqual(event.oldValue,null);assert.strictEqual(event.newValue,\&quot;unfocused\&quot;);assert.strictEqual(event.newValue,NodePyATVFocusState.unfocused);assert.strictEqual(event.value,\&quot;unfocused\&quot;);assert.strictEqual(event.value,NodePyATVFocusState.unfocused);assert.deepStrictEqual(event.device,device);counter++});await new Promise(cb=&gt;setTimeout(cb,10));assert.strictEqual(counter,1);device.removeAllListeners(\&quot;update\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4b3d84d7-0cdc-4711-8c89-4482ba72c723&quot;,&quot;parentUUID&quot;:&quot;c6b01a65-1206-4371-ad2a-485225d05a45&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only one event for outputDevices changes&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should only one event for outputDevices changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,datetime:new Date().toJSON(),output_devices:[{name:\&quot;Living room\&quot;,identifier:\&quot;AAAAAAAA-BBBB-CCCC-DDDD-EEEEEEEEEEEE\&quot;}]});cp.end()})});let counter=0;device.on(\&quot;update\&quot;,event=&gt;{assert.ok(event instanceof NodePyATVDeviceEvent);assert.strictEqual(event.key,\&quot;outputDevices\&quot;);assert.strictEqual(event.oldValue,null);assert.deepStrictEqual(event.newValue,[{name:\&quot;Living room\&quot;,identifier:\&quot;AAAAAAAA-BBBB-CCCC-DDDD-EEEEEEEEEEEE\&quot;}]);assert.deepStrictEqual(event.value,[{name:\&quot;Living room\&quot;,identifier:\&quot;AAAAAAAA-BBBB-CCCC-DDDD-EEEEEEEEEEEE\&quot;}]);assert.deepStrictEqual(event.device,device);counter++});await new Promise(cb=&gt;setTimeout(cb,10));assert.strictEqual(counter,1);device.removeAllListeners(\&quot;update\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3350867d-c3f6-4ad4-8ee2-791c54f57812&quot;,&quot;parentUUID&quot;:&quot;c6b01a65-1206-4371-ad2a-485225d05a45&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only one event for volume changes&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should only one event for volume changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,datetime:new Date().toJSON(),volume:20});cp.end()})});let counter=0;device.on(\&quot;update\&quot;,event=&gt;{assert.ok(event instanceof NodePyATVDeviceEvent);assert.strictEqual(event.key,\&quot;volume\&quot;);assert.strictEqual(event.oldValue,null);assert.strictEqual(event.newValue,20);assert.strictEqual(event.value,20);assert.deepStrictEqual(event.device,device);counter++});await new Promise(cb=&gt;setTimeout(cb,10));assert.strictEqual(counter,1);device.removeAllListeners(\&quot;update\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d1e453f9-06d9-4951-975e-65164c0d8cc6&quot;,&quot;parentUUID&quot;:&quot;c6b01a65-1206-4371-ad2a-485225d05a45&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not trigger any events for newly added fields&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should not trigger any events for newly added fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,datetime:new Date().toJSON(),foo:\&quot;bar\&quot;});cp.end()})});device.on(\&quot;update\&quot;,event=&gt;{assert.fail(`Got an update event for a new field: ${event}`)});await new Promise(cb=&gt;setTimeout(cb,10));device.removeAllListeners(\&quot;update\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;58e9e259-4432-4ae1-a90f-09f88c54fb4c&quot;,&quot;parentUUID&quot;:&quot;c6b01a65-1206-4371-ad2a-485225d05a45&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;def93784-8c62-474d-a656-a40c56986ea5&quot;,&quot;c5f12a03-2e1d-4be1-b3e5-2f2d113206e7&quot;,&quot;b3cf0889-984e-4d6a-b098-979a3e1a147f&quot;,&quot;8b0daf7b-c552-4eca-8237-d09ebaef51cb&quot;,&quot;cac523a5-ef59-4ba0-bde7-4cee11ef4851&quot;,&quot;f5c4d12b-09e0-4282-9c6b-f9f26185460e&quot;,&quot;01685296-2efe-4ad9-8af1-be71ddb3cf17&quot;,&quot;7f04c8a4-df14-44c2-8fde-0ff4fddfc3e6&quot;,&quot;4b3d84d7-0cdc-4711-8c89-4482ba72c723&quot;,&quot;3350867d-c3f6-4ad4-8ee2-791c54f57812&quot;,&quot;d1e453f9-06d9-4951-975e-65164c0d8cc6&quot;,&quot;58e9e259-4432-4ae1-a90f-09f88c54fb4c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:66,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;825dd757-2b70-4a51-bc48-3bbf25b9b439&quot;,&quot;title&quot;:&quot;start|stopListening()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should emit error if spawn fails&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should emit error if spawn fails&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const error=new Error;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.error(error).end()})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);device.on(\&quot;update\&quot;,listener);await new Promise(cb=&gt;{device.once(\&quot;error\&quot;,err=&gt;{assert.strictEqual(err,error);cb(void 0)})});device.off(\&quot;update\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bdc8e836-24c2-4cf5-b738-0eea13745e1a&quot;,&quot;parentUUID&quot;:&quot;825dd757-2b70-4a51-bc48-3bbf25b9b439&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error on stderr data&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should emit error on stderr data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.stderr(\&quot;Hello World!\&quot;).end()})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);device.on(\&quot;update\&quot;,listener);await new Promise(cb=&gt;{device.once(\&quot;error\&quot;,err=&gt;{assert.ok(err instanceof Error);assert.ok(err.toString().includes(\&quot;Got stderr output from pyatv: Hello World!\&quot;));cb(void 0)})});device.off(\&quot;update\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0410d2c1-6981-4d3f-95e5-c171c27fba22&quot;,&quot;parentUUID&quot;:&quot;825dd757-2b70-4a51-bc48-3bbf25b9b439&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error if stdout is not valid json&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should emit error if stdout is not valid json&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.stdout(\&quot;#\&quot;).end()})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);device.on(\&quot;update\&quot;,listener);await new Promise(cb=&gt;{device.once(\&quot;error\&quot;,err=&gt;{assert.ok(err instanceof Error);assert.ok(err.toString().includes(\&quot;Unable to parse stdout json: SyntaxError\&quot;));cb(void 0)})});device.off(\&quot;update\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5d959563-9e6d-48ae-9307-dd1e568dba4b&quot;,&quot;parentUUID&quot;:&quot;825dd757-2b70-4a51-bc48-3bbf25b9b439&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should restart the process if it gets killed&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should restart the process if it gets killed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;pending&quot;,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;21256049-f6d3-47e8-ab5f-3d381f4c26e6&quot;,&quot;parentUUID&quot;:&quot;825dd757-2b70-4a51-bc48-3bbf25b9b439&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bdc8e836-24c2-4cf5-b738-0eea13745e1a&quot;,&quot;0410d2c1-6981-4d3f-95e5-c171c27fba22&quot;,&quot;5d959563-9e6d-48ae-9307-dd1e568dba4b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;21256049-f6d3-47e8-ab5f-3d381f4c26e6&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c102b272-20b7-4ae7-982c-44c75f668f13&quot;,&quot;title&quot;:&quot;addListener() / removeAllListeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work without any exceptions&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents addListener() / removeAllListeners() should work without any exceptions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);device.addListener(\&quot;update\&quot;,listener);device.removeAllListeners(\&quot;update\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a653458d-ac27-4c92-9958-979cf6b3f1c8&quot;,&quot;parentUUID&quot;:&quot;c102b272-20b7-4ae7-982c-44c75f668f13&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a653458d-ac27-4c92-9958-979cf6b3f1c8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3f7dad06-e1d5-4c0f-80f8-eef1c69c1fe4&quot;,&quot;title&quot;:&quot;emit()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents emit() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end())})});const event=new NodePyATVDeviceEvent({key:\&quot;dateTime\&quot;,old:\&quot;foo\&quot;,new:\&quot;bar\&quot;,device});let executions=0;device.once(\&quot;test\&quot;,e=&gt;{executions++;assert.strictEqual(e,event);assert.strictEqual(executions,1);done()});device.emit(\&quot;test\&quot;,event)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;67e618a7-2ce3-433b-8d14-af89c60f66f1&quot;,&quot;parentUUID&quot;:&quot;3f7dad06-e1d5-4c0f-80f8-eef1c69c1fe4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;67e618a7-2ce3-433b-8d14-af89c60f66f1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;12a4e50a-2cf7-4024-aabf-732d9c1b4f43&quot;,&quot;title&quot;:&quot;eventNames()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents eventNames() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end())})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);device.on(\&quot;test\&quot;,listener);assert.deepStrictEqual(device.eventNames(),[\&quot;test\&quot;]);device.off(\&quot;test\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ea0ba371-b0a9-4e21-96f7-7eb611e34f88&quot;,&quot;parentUUID&quot;:&quot;12a4e50a-2cf7-4024-aabf-732d9c1b4f43&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ea0ba371-b0a9-4e21-96f7-7eb611e34f88&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;664f620e-e351-4ab5-94c1-0663d9923712&quot;,&quot;title&quot;:&quot;getMaxListeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents getMaxListeners() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end())})});const result=device.getMaxListeners();assert.ok(typeof result,\&quot;number\&quot;);assert.ok(result&gt;=10)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d641e103-1031-41e8-9292-75606dc578bb&quot;,&quot;parentUUID&quot;:&quot;664f620e-e351-4ab5-94c1-0663d9923712&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d641e103-1031-41e8-9292-75606dc578bb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;91783ed4-4fed-4c15-8dde-572ef5224767&quot;,&quot;title&quot;:&quot;listenerCount()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents listenerCount() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end())})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);assert.deepStrictEqual(device.listenerCount(\&quot;test\&quot;),0);device.on(\&quot;test\&quot;,listener);assert.deepStrictEqual(device.listenerCount(\&quot;test\&quot;),1);device.off(\&quot;test\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d0f8a1b1-c046-4770-b305-7308d4d8c4be&quot;,&quot;parentUUID&quot;:&quot;91783ed4-4fed-4c15-8dde-572ef5224767&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d0f8a1b1-c046-4770-b305-7308d4d8c4be&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3cc45cb0-8d90-4241-a7c5-7f0767aa1e56&quot;,&quot;title&quot;:&quot;listeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents listeners() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end())})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);assert.deepStrictEqual(device.listeners(\&quot;test\&quot;).length,0);device.on(\&quot;test\&quot;,listener);assert.deepStrictEqual(device.listeners(\&quot;test\&quot;).length,1);assert.deepStrictEqual(device.listeners(\&quot;test\&quot;)[0],listener);device.off(\&quot;test\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c494d55-867b-4bfc-816d-dfbf7bab0e2a&quot;,&quot;parentUUID&quot;:&quot;3cc45cb0-8d90-4241-a7c5-7f0767aa1e56&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8c494d55-867b-4bfc-816d-dfbf7bab0e2a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d682a6d5-caa1-4bb9-a20d-0f2c5e210533&quot;,&quot;title&quot;:&quot;prependListener()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents prependListener() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});const listener=__name(()=&gt;{device.removeAllListeners(\&quot;update\&quot;);done()},\&quot;listener\&quot;);device.prependListener(\&quot;update\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;72286bcc-dbc6-4c60-af66-fcecf830610f&quot;,&quot;parentUUID&quot;:&quot;d682a6d5-caa1-4bb9-a20d-0f2c5e210533&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;72286bcc-dbc6-4c60-af66-fcecf830610f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8a3a304a-f873-47cb-abe1-6f683009dd4c&quot;,&quot;title&quot;:&quot;prependOnceListener()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents prependOnceListener() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});device.prependOnceListener(\&quot;update\&quot;,()=&gt;done())&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;45838489-4c92-4eea-8903-bb0cc328a36f&quot;,&quot;parentUUID&quot;:&quot;8a3a304a-f873-47cb-abe1-6f683009dd4c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;45838489-4c92-4eea-8903-bb0cc328a36f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0f01b051-768f-4ec2-ae64-e9108c3cbddc&quot;,&quot;title&quot;:&quot;rawListeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents rawListeners() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end())})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);assert.deepStrictEqual(device.rawListeners(\&quot;test\&quot;).length,0);device.on(\&quot;test\&quot;,listener);assert.deepStrictEqual(device.rawListeners(\&quot;test\&quot;).length,1);assert.deepStrictEqual(device.rawListeners(\&quot;test\&quot;)[0],listener);device.off(\&quot;test\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;589fc4f5-2fc7-41f3-886b-9c3297d35d40&quot;,&quot;parentUUID&quot;:&quot;0f01b051-768f-4ec2-ae64-e9108c3cbddc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;589fc4f5-2fc7-41f3-886b-9c3297d35d40&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2c4c2c41-2f5d-4298-a774-a78e6ceca4d5&quot;,&quot;title&quot;:&quot;removeListener()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work without any exceptions&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents removeListener() should work without any exceptions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);device.addListener(\&quot;update\&quot;,listener);assert.deepStrictEqual(device.listenerCount(\&quot;update\&quot;),1);device.removeListener(\&quot;update\&quot;,listener);assert.deepStrictEqual(device.listenerCount(\&quot;update\&quot;),0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5824ac25-8852-4167-bff9-f6109d917e80&quot;,&quot;parentUUID&quot;:&quot;2c4c2c41-2f5d-4298-a774-a78e6ceca4d5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5824ac25-8852-4167-bff9-f6109d917e80&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;063172f3-8c64-42ba-a8cc-6fa373275481&quot;,&quot;title&quot;:&quot;NodePyATVDevice&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;58a8ee0e-96e0-4a82-bb23-aa31cf56fc5f&quot;,&quot;title&quot;:&quot;get name()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the name&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get name() should return the name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;});assert.strictEqual(device.name,\&quot;My Testdevice\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d2f94371-50a4-4ca8-b11f-a822fa04ad91&quot;,&quot;parentUUID&quot;:&quot;58a8ee0e-96e0-4a82-bb23-aa31cf56fc5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d2f94371-50a4-4ca8-b11f-a822fa04ad91&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8e22b5bf-38c9-4a20-876e-074f48d16429&quot;,&quot;title&quot;:&quot;get host()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the host&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get host() should return the host&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;});assert.strictEqual(device.host,\&quot;192.168.178.2\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eccf2146-09a7-4d2a-a2d0-a760a94c7fd7&quot;,&quot;parentUUID&quot;:&quot;8e22b5bf-38c9-4a20-876e-074f48d16429&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;eccf2146-09a7-4d2a-a2d0-a760a94c7fd7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7e2e3616-9acf-4fc8-9c86-0b83562e3252&quot;,&quot;title&quot;:&quot;get id()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the id&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get id() should return the id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,id:\&quot;*****\&quot;});assert.strictEqual(device.id,\&quot;*****\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41a70520-daa3-4fd1-a8f3-857a4dcea507&quot;,&quot;parentUUID&quot;:&quot;7e2e3616-9acf-4fc8-9c86-0b83562e3252&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;41a70520-daa3-4fd1-a8f3-857a4dcea507&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6290222f-e918-4733-866e-d40c1614aa3e&quot;,&quot;title&quot;:&quot;get allIDs()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return all the IDs&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get allIDs() should return all the IDs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,id:\&quot;*****\&quot;,allIDs:[\&quot;some_id_1\&quot;,\&quot;some_id_2\&quot;,\&quot;some_id_3\&quot;]});assert.deepStrictEqual(device.allIDs,[\&quot;some_id_1\&quot;,\&quot;some_id_2\&quot;,\&quot;some_id_3\&quot;])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b483b364-7eb7-4efd-82c5-7749dac5a7b8&quot;,&quot;parentUUID&quot;:&quot;6290222f-e918-4733-866e-d40c1614aa3e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b483b364-7eb7-4efd-82c5-7749dac5a7b8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5f7c7b88-b4de-4be3-8e88-2ec3f0f8f5c7&quot;,&quot;title&quot;:&quot;get protocol()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the protocol&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get protocol() should return the protocol&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,protocol:NodePyATVProtocol.airplay});assert.strictEqual(device.protocol,NodePyATVProtocol.airplay)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7024d225-2479-42b0-a511-0de4ebeaa52c&quot;,&quot;parentUUID&quot;:&quot;5f7c7b88-b4de-4be3-8e88-2ec3f0f8f5c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7024d225-2479-42b0-a511-0de4ebeaa52c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f1a7326b-30cd-4277-8dbb-0d78d38d5e3f&quot;,&quot;title&quot;:&quot;get mac()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the mac&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get mac() should return the mac&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,mac:\&quot;AA:BB:CC:DD:EE:FF\&quot;});assert.strictEqual(device.mac,\&quot;AA:BB:CC:DD:EE:FF\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fc969f5e-98c7-4c74-a1e2-2a03bf289d5d&quot;,&quot;parentUUID&quot;:&quot;f1a7326b-30cd-4277-8dbb-0d78d38d5e3f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fc969f5e-98c7-4c74-a1e2-2a03bf289d5d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;382f5338-a038-41e9-be6a-baad979622c7&quot;,&quot;title&quot;:&quot;get model()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the model if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get model() should return the model if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;Vardagsrum\&quot;,host:\&quot;10.0.10.81\&quot;,id:\&quot;xxx\&quot;,model:\&quot;Gen4K\&quot;});assert.strictEqual(device.model,\&quot;Gen4K\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;97e46f48-77e2-4995-afc7-35aca472f53d&quot;,&quot;parentUUID&quot;:&quot;382f5338-a038-41e9-be6a-baad979622c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get model() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;Vardagsrum\&quot;,host:\&quot;10.0.10.81\&quot;});assert.strictEqual(device.model,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f26bfabb-9cfd-4de1-93f8-dca5ab64aada&quot;,&quot;parentUUID&quot;:&quot;382f5338-a038-41e9-be6a-baad979622c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;97e46f48-77e2-4995-afc7-35aca472f53d&quot;,&quot;f26bfabb-9cfd-4de1-93f8-dca5ab64aada&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7d5dc21a-e5e8-4961-ae04-786a3339debd&quot;,&quot;title&quot;:&quot;get modelName()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the model name if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get modelName() should return the model name if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;Vardagsrum\&quot;,host:\&quot;10.0.10.81\&quot;,id:\&quot;xxx\&quot;,modelName:\&quot;Apple TV 4K\&quot;});assert.strictEqual(device.modelName,\&quot;Apple TV 4K\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;38e32fcc-1e46-4ae5-9676-ccdddb8f8382&quot;,&quot;parentUUID&quot;:&quot;7d5dc21a-e5e8-4961-ae04-786a3339debd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get modelName() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;Vardagsrum\&quot;,host:\&quot;10.0.10.81\&quot;});assert.strictEqual(device.modelName,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;505c2fdf-b58a-4a57-8e89-d50bef907ff8&quot;,&quot;parentUUID&quot;:&quot;7d5dc21a-e5e8-4961-ae04-786a3339debd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;38e32fcc-1e46-4ae5-9676-ccdddb8f8382&quot;,&quot;505c2fdf-b58a-4a57-8e89-d50bef907ff8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b9971fc0-c59c-4c06-971c-e8967f317764&quot;,&quot;title&quot;:&quot;get os()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the operating system if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get os() should return the operating system if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;Vardagsrum\&quot;,host:\&quot;10.0.10.81\&quot;,id:\&quot;xxx\&quot;,os:\&quot;TvOS\&quot;});assert.strictEqual(device.os,\&quot;TvOS\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;964b15d4-991e-48c3-a3a5-73dc3e3c5524&quot;,&quot;parentUUID&quot;:&quot;b9971fc0-c59c-4c06-971c-e8967f317764&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get os() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;Vardagsrum\&quot;,host:\&quot;10.0.10.81\&quot;});assert.strictEqual(device.os,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;46b33cf4-a403-4d15-bf14-8df48c2687ce&quot;,&quot;parentUUID&quot;:&quot;b9971fc0-c59c-4c06-971c-e8967f317764&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;964b15d4-991e-48c3-a3a5-73dc3e3c5524&quot;,&quot;46b33cf4-a403-4d15-bf14-8df48c2687ce&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5a600dd5-b7df-4c71-a799-837f7a625db2&quot;,&quot;title&quot;:&quot;get version()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the version if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get version() should return the version if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;Vardagsrum\&quot;,host:\&quot;10.0.10.81\&quot;,id:\&quot;xxx\&quot;,version:\&quot;15.5.1\&quot;});assert.strictEqual(device.version,\&quot;15.5.1\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dc9159b5-cca5-4d67-ada7-bdb7784c6e11&quot;,&quot;parentUUID&quot;:&quot;5a600dd5-b7df-4c71-a799-837f7a625db2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get version() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;Vardagsrum\&quot;,host:\&quot;10.0.10.81\&quot;});assert.strictEqual(device.version,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e3c0131a-bc56-44f9-bda3-4ae073a9d22a&quot;,&quot;parentUUID&quot;:&quot;5a600dd5-b7df-4c71-a799-837f7a625db2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dc9159b5-cca5-4d67-ada7-bdb7784c6e11&quot;,&quot;e3c0131a-bc56-44f9-bda3-4ae073a9d22a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ae21b841-59fe-40b8-81a8-14ec8b8f1f67&quot;,&quot;title&quot;:&quot;get services()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the services if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get services() should return the services if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;Vardagsrum\&quot;,host:\&quot;10.0.10.81\&quot;,id:\&quot;xxx\&quot;,services:[{protocol:NodePyATVProtocol.mrp,port:49152},{protocol:NodePyATVProtocol.airplay,port:7e3}]});assert.deepStrictEqual(device.services,[{protocol:\&quot;mrp\&quot;,port:49152},{protocol:\&quot;airplay\&quot;,port:7e3}])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c7b5fb7-ccdd-401a-b223-ca4ece61adee&quot;,&quot;parentUUID&quot;:&quot;ae21b841-59fe-40b8-81a8-14ec8b8f1f67&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get services() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;Vardagsrum\&quot;,host:\&quot;10.0.10.81\&quot;});assert.strictEqual(device.services,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;772e55b4-d9f8-4762-a9de-e7ff936a9f60&quot;,&quot;parentUUID&quot;:&quot;ae21b841-59fe-40b8-81a8-14ec8b8f1f67&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8c7b5fb7-ccdd-401a-b223-ca4ece61adee&quot;,&quot;772e55b4-d9f8-4762-a9de-e7ff936a9f60&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;10020bb8-0247-454a-87c1-07af561fb05f&quot;,&quot;title&quot;:&quot;get debug()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return true if set to true&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get debug() should return true if set to true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,debug:true});assert.strictEqual(device.debug,true)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c5504a94-0e15-4957-9bd3-235973c9c071&quot;,&quot;parentUUID&quot;:&quot;10020bb8-0247-454a-87c1-07af561fb05f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return fn if set to custom function&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get debug() should return fn if set to custom function&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fn=__name(()=&gt;{},\&quot;fn\&quot;);const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,debug:fn});assert.strictEqual(device.debug,fn)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f3922da6-d707-4764-9649-a677b4566374&quot;,&quot;parentUUID&quot;:&quot;10020bb8-0247-454a-87c1-07af561fb05f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return false if unset&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get debug() should return false if unset&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;});assert.strictEqual(device.debug,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3e66cef8-7a9f-4614-80ba-85b2099d8c19&quot;,&quot;parentUUID&quot;:&quot;10020bb8-0247-454a-87c1-07af561fb05f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c5504a94-0e15-4957-9bd3-235973c9c071&quot;,&quot;f3922da6-d707-4764-9649-a677b4566374&quot;,&quot;3e66cef8-7a9f-4614-80ba-85b2099d8c19&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;797794d7-a118-450e-80e2-0a77f2d26f8c&quot;,&quot;title&quot;:&quot;set debug()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work for debug = true&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;});assert.strictEqual(device.debug,void 0);device.debug=true;assert.strictEqual(device.debug,true)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4b950779-5e40-453a-b93c-c9674ec474e4&quot;,&quot;parentUUID&quot;:&quot;797794d7-a118-450e-80e2-0a77f2d26f8c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for debug = undefined&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = undefined&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,debug:true});assert.strictEqual(device.debug,true);device.debug=void 0;assert.strictEqual(device.debug,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bd432b0c-e151-4fed-b55c-cc53021f9786&quot;,&quot;parentUUID&quot;:&quot;797794d7-a118-450e-80e2-0a77f2d26f8c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for debug = undefined&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = undefined&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,debug:true});assert.strictEqual(device.debug,true);device.debug=void 0;assert.strictEqual(device.debug,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;95bde989-b4ef-469c-abfe-028b2f351cc0&quot;,&quot;parentUUID&quot;:&quot;797794d7-a118-450e-80e2-0a77f2d26f8c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for debug = fn&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = fn&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;});const fn=__name(()=&gt;{},\&quot;fn\&quot;);assert.strictEqual(device.debug,void 0);device.debug=fn;assert.strictEqual(device.debug,fn)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;73c59ca5-6ef6-4747-af68-b727e3c2f618&quot;,&quot;parentUUID&quot;:&quot;797794d7-a118-450e-80e2-0a77f2d26f8c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4b950779-5e40-453a-b93c-c9674ec474e4&quot;,&quot;bd432b0c-e151-4fed-b55c-cc53021f9786&quot;,&quot;95bde989-b4ef-469c-abfe-028b2f351cc0&quot;,&quot;73c59ca5-6ef6-4747-af68-b727e3c2f618&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2f797e89-e01f-462d-aed8-146ce031a5e7&quot;,&quot;title&quot;:&quot;toJSON()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a object representation&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice toJSON() should return a object representation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,id:\&quot;*****\&quot;,protocol:NodePyATVProtocol.airplay});assert.deepEqual(device.toJSON(),{name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,id:\&quot;*****\&quot;,protocol:NodePyATVProtocol.airplay})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;df678653-6e87-4bfa-9cca-34bbc2d800d6&quot;,&quot;parentUUID&quot;:&quot;2f797e89-e01f-462d-aed8-146ce031a5e7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should be possible to create a new device from this&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice toJSON() should be possible to create a new device from this&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const config={name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,id:\&quot;*****\&quot;,protocol:NodePyATVProtocol.airplay};const deviceA=new NodePyATVDevice(config);const deviceB=new NodePyATVDevice(deviceA.toJSON());assert.deepEqual(deviceB.toJSON(),config)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2adea324-9590-4508-a9f5-86d12094edd4&quot;,&quot;parentUUID&quot;:&quot;2f797e89-e01f-462d-aed8-146ce031a5e7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;df678653-6e87-4bfa-9cca-34bbc2d800d6&quot;,&quot;2adea324-9590-4508-a9f5-86d12094edd4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b6cc0a8e-93b9-4365-8ce7-3136f96a2085&quot;,&quot;title&quot;:&quot;toString()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice toString() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;});assert.strictEqual(device.toString(),\&quot;NodePyATVDevice(My Testdevice, 192.168.178.2)\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2c1b50a8-8dbb-4dff-ab9a-99f7a195e61c&quot;,&quot;parentUUID&quot;:&quot;b6cc0a8e-93b9-4365-8ce7-3136f96a2085&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2c1b50a8-8dbb-4dff-ab9a-99f7a195e61c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0175e422-9791-44f6-8e4a-92ebb36d0f3e&quot;,&quot;title&quot;:&quot;getState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work [I]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should work [I]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;pending&quot;,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;02bc2259-7f60-4e97-b738-b88fc5045200&quot;,&quot;parentUUID&quot;:&quot;0175e422-9791-44f6-8e4a-92ebb36d0f3e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,datetime:\&quot;2020-11-07T22:38:43.608030+01:00\&quot;,hash:\&quot;100e0ab6-6ff5-4199-9c04-a7107ff78712\&quot;,media_type:\&quot;video\&quot;,device_state:\&quot;playing\&quot;,title:\&quot;Solo: A Star Wars Story\&quot;,artist:null,album:null,genre:null,total_time:8097,position:27,shuffle:\&quot;off\&quot;,repeat:\&quot;off\&quot;,app:\&quot;Disney+\&quot;,app_id:\&quot;com.disney.disneyplus\&quot;})})});const result=await device.getState();assert.deepStrictEqual(result,{dateTime:new Date(\&quot;2020-11-07T22:38:43.608030+01:00\&quot;),hash:\&quot;100e0ab6-6ff5-4199-9c04-a7107ff78712\&quot;,mediaType:NodePyATVMediaType.video,deviceState:NodePyATVDeviceState.playing,focusState:null,title:\&quot;Solo: A Star Wars Story\&quot;,artist:null,album:null,genre:null,totalTime:8097,volume:null,position:27,shuffle:NodePyATVShuffleState.off,repeat:NodePyATVRepeatState.off,app:\&quot;Disney+\&quot;,appId:\&quot;com.disney.disneyplus\&quot;,powerState:null,outputDevices:null,contentIdentifier:null,episodeNumber:null,seasonNumber:null,seriesName:null})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bb4585bd-7d58-45ea-9888-35d5d37d744b&quot;,&quot;parentUUID&quot;:&quot;0175e422-9791-44f6-8e4a-92ebb36d0f3e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should reject with error if pyatv fails&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should reject with error if pyatv fails&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;failure\&quot;,datetime:\&quot;2021-11-24T21:13:36.424576+03:00\&quot;,exception:\&quot;invalid credentials: 321\&quot;,stacktrace:&#x27;Traceback (most recent call last):\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\&quot;, line 302, in appstart\\n    print(args.output(await _handle_command(args, abort_sem, loop)), flush=True)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\&quot;, line 196, in _handle_command\\n    atv = await connect(config, loop, protocol=Protocol.MRP)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/__init__.py\&quot;, line 96, in connect\\n    for setup_data in proto_methods.setup(\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\&quot;, line 192, in setup\\n    stream = AirPlayStream(config, service)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\&quot;, line 79, in __init__\\n    self._credentials: HapCredentials = parse_credentials(self.service.credentials)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/auth/hap_pairing.py\&quot;, line 139, in parse_credentials\\n    raise exceptions.InvalidCredentialsError(\&quot;invalid credentials: \&quot; + detail_string)\\npyatv.exceptions.InvalidCredentialsError: invalid credentials: 321\\n&#x27;})})});assert.rejects(async()=&gt;{await device.getState()},/Got pyatv Error: invalid credentials: 321/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5a915d50-6736-46c4-a859-87608da5456e&quot;,&quot;parentUUID&quot;:&quot;0175e422-9791-44f6-8e4a-92ebb36d0f3e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should cache requests for a bit&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should cache requests for a bit&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let executions=0;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{executions++;cp.end({result:\&quot;success\&quot;,datetime:new Date().toJSON(),hash:\&quot;100e0ab6-6ff5-4199-9c04-a7107ff78712\&quot;,media_type:\&quot;video\&quot;,device_state:\&quot;playing\&quot;,title:\&quot;Solo: A Star Wars Story\&quot;,artist:null,album:null,genre:null,total_time:8097,position:27,shuffle:\&quot;off\&quot;,repeat:\&quot;off\&quot;,app:\&quot;Disney+\&quot;,app_id:\&quot;com.disney.disneyplus\&quot;})})});const firstResult=await device.getState();const secondResult=await device.getState();assert.strictEqual(firstResult.dateTime,secondResult.dateTime);assert.strictEqual(executions,1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9c676d66-7191-4cfe-a428-863fab23dab9&quot;,&quot;parentUUID&quot;:&quot;0175e422-9791-44f6-8e4a-92ebb36d0f3e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update the position if cache was used&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should update the position if cache was used&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,datetime:new Date(new Date().getTime()-1e3).toJSON(),hash:\&quot;100e0ab6-6ff5-4199-9c04-a7107ff78712\&quot;,media_type:\&quot;video\&quot;,device_state:\&quot;playing\&quot;,title:\&quot;Solo: A Star Wars Story\&quot;,artist:null,album:null,genre:null,total_time:8097,position:27,shuffle:\&quot;off\&quot;,repeat:\&quot;off\&quot;,app:\&quot;Disney+\&quot;,app_id:\&quot;com.disney.disneyplus\&quot;})})});const firstResult=await device.getState();assert.strictEqual(firstResult.position,27);const secondResult=await device.getState();assert.ok(secondResult.position);assert.ok(secondResult.position&gt;27,`Position should be &gt; 27, was ${secondResult.position}`);assert.ok(secondResult.position&lt;30,`Position should be &gt; 27, was ${secondResult.position}`)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;815bf97e-4420-410b-8c2e-fb40068c5526&quot;,&quot;parentUUID&quot;:&quot;0175e422-9791-44f6-8e4a-92ebb36d0f3e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bb4585bd-7d58-45ea-9888-35d5d37d744b&quot;,&quot;5a915d50-6736-46c4-a859-87608da5456e&quot;,&quot;9c676d66-7191-4cfe-a428-863fab23dab9&quot;,&quot;815bf97e-4420-410b-8c2e-fb40068c5526&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;02bc2259-7f60-4e97-b738-b88fc5045200&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1b64c50c-4d7c-4c47-bab2-2bd252e55482&quot;,&quot;title&quot;:&quot;clearState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice clearState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let executions=0;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{executions++;cp.end({result:\&quot;success\&quot;,datetime:\&quot;2020-11-07T22:38:43.608030+01:00\&quot;,title:\&quot;Solo: A Star Wars Story\&quot;})})});assert.deepStrictEqual(await device.getTitle(),\&quot;Solo: A Star Wars Story\&quot;);device.clearState();assert.deepStrictEqual(await device.getTitle(),\&quot;Solo: A Star Wars Story\&quot;);assert.strictEqual(executions,2)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;78707af3-f745-4a28-8d26-798f146686be&quot;,&quot;parentUUID&quot;:&quot;1b64c50c-4d7c-4c47-bab2-2bd252e55482&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;78707af3-f745-4a28-8d26-798f146686be&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;522c8cff-50ff-45e5-b7cd-69661c94ac38&quot;,&quot;title&quot;:&quot;getDateTime()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getDateTime() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,datetime:new Date().toJSON()})})});const result=await device.getDateTime();assert.ok(result instanceof Date)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e56684e-0f72-4639-af0b-9f4fbbcac105&quot;,&quot;parentUUID&quot;:&quot;522c8cff-50ff-45e5-b7cd-69661c94ac38&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8e56684e-0f72-4639-af0b-9f4fbbcac105&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b64a0ab4-87a8-4b1c-a28a-a005a8c9e959&quot;,&quot;title&quot;:&quot;getHash()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getHash() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,hash:\&quot;12345\&quot;})})});const result=await device.getHash();assert.strictEqual(result,\&quot;12345\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;723c3d35-4650-4fcf-a916-1f90b097e01e&quot;,&quot;parentUUID&quot;:&quot;b64a0ab4-87a8-4b1c-a28a-a005a8c9e959&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;723c3d35-4650-4fcf-a916-1f90b097e01e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6dee5e50-8ef2-4ebc-9347-782a57327a23&quot;,&quot;title&quot;:&quot;getMediaType()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getMediaType() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,media_type:\&quot;video\&quot;})})});const result=await device.getMediaType();assert.deepStrictEqual(result,NodePyATVMediaType.video);assert.deepStrictEqual(result,\&quot;video\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a4251dfd-d5da-48b0-abf8-4ae1fde16020&quot;,&quot;parentUUID&quot;:&quot;6dee5e50-8ef2-4ebc-9347-782a57327a23&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a4251dfd-d5da-48b0-abf8-4ae1fde16020&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fbc0f6ac-35d2-4a1c-9620-b4d7c59029ab&quot;,&quot;title&quot;:&quot;getDeviceState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getDeviceState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,device_state:\&quot;seeking\&quot;})})});const result=await device.getDeviceState();assert.deepStrictEqual(result,NodePyATVDeviceState.seeking);assert.deepStrictEqual(result,\&quot;seeking\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9235c685-265e-488d-8a6a-a7a88c5ec0a7&quot;,&quot;parentUUID&quot;:&quot;fbc0f6ac-35d2-4a1c-9620-b4d7c59029ab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9235c685-265e-488d-8a6a-a7a88c5ec0a7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;34166f05-e6b0-4ac0-a5b8-dbc26755aba2&quot;,&quot;title&quot;:&quot;getTitle()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getTitle() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});const result=await device.getTitle();assert.strictEqual(result,\&quot;My Movie\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9fda54de-8844-477e-8ba6-0a8613e802f5&quot;,&quot;parentUUID&quot;:&quot;34166f05-e6b0-4ac0-a5b8-dbc26755aba2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9fda54de-8844-477e-8ba6-0a8613e802f5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;15941d53-4f27-4d39-8530-3ceed9624b72&quot;,&quot;title&quot;:&quot;getArtist()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getArtist() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,artist:\&quot;My Artist\&quot;})})});const result=await device.getArtist();assert.strictEqual(result,\&quot;My Artist\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2de50da7-e9d7-4522-b9a6-5692e4686292&quot;,&quot;parentUUID&quot;:&quot;15941d53-4f27-4d39-8530-3ceed9624b72&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2de50da7-e9d7-4522-b9a6-5692e4686292&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;36046f47-89e7-4d34-bfff-dbf84307a2e9&quot;,&quot;title&quot;:&quot;getAlbum()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getAlbum() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,album:\&quot;My ALbum\&quot;})})});const result=await device.getAlbum();assert.strictEqual(result,\&quot;My ALbum\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d95c8ba5-04ba-4e43-af97-143048f8abbb&quot;,&quot;parentUUID&quot;:&quot;36046f47-89e7-4d34-bfff-dbf84307a2e9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d95c8ba5-04ba-4e43-af97-143048f8abbb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;dd180d10-0cd9-41a0-aa1b-9a873e11e3c3&quot;,&quot;title&quot;:&quot;getGenre()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getGenre() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,genre:\&quot;My Genre\&quot;})})});const result=await device.getGenre();assert.strictEqual(result,\&quot;My Genre\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;83c1ad25-2ede-44e8-b4f7-17919bc8ddaf&quot;,&quot;parentUUID&quot;:&quot;dd180d10-0cd9-41a0-aa1b-9a873e11e3c3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;83c1ad25-2ede-44e8-b4f7-17919bc8ddaf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bcbcbee6-7e91-4fc4-94a2-c7dbcc494bea&quot;,&quot;title&quot;:&quot;getTotalTime()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getTotalTime() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,total_time:45})})});const result=await device.getTotalTime();assert.strictEqual(result,45)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;248f94d0-c0c7-42fe-a52f-fccea4f952fa&quot;,&quot;parentUUID&quot;:&quot;bcbcbee6-7e91-4fc4-94a2-c7dbcc494bea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;248f94d0-c0c7-42fe-a52f-fccea4f952fa&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ee79a7db-4a44-4e05-bcb5-49e1edcfafc9&quot;,&quot;title&quot;:&quot;getPosition()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getPosition() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,position:30})})});const result=await device.getPosition();assert.strictEqual(result,30)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;80d4b0d7-7544-4422-bf09-4738adcf210b&quot;,&quot;parentUUID&quot;:&quot;ee79a7db-4a44-4e05-bcb5-49e1edcfafc9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;80d4b0d7-7544-4422-bf09-4738adcf210b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4220485b-df7c-4a39-a603-abc743007750&quot;,&quot;title&quot;:&quot;getShuffle()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getShuffle() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,shuffle:\&quot;songs\&quot;})})});const result=await device.getShuffle();assert.deepStrictEqual(result,NodePyATVShuffleState.songs);assert.deepStrictEqual(result,\&quot;songs\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3650cd98-507a-4f1e-8926-46faa4b88160&quot;,&quot;parentUUID&quot;:&quot;4220485b-df7c-4a39-a603-abc743007750&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3650cd98-507a-4f1e-8926-46faa4b88160&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;490ec0c6-315d-4955-abc7-76bfbadc2cec&quot;,&quot;title&quot;:&quot;getRepeat()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getRepeat() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,repeat:\&quot;all\&quot;})})});const result=await device.getRepeat();assert.deepStrictEqual(result,NodePyATVRepeatState.all);assert.deepStrictEqual(result,\&quot;all\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;823527cc-9296-4379-81f3-45559b709334&quot;,&quot;parentUUID&quot;:&quot;490ec0c6-315d-4955-abc7-76bfbadc2cec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;823527cc-9296-4379-81f3-45559b709334&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;18a94c42-c921-4504-a198-b604f36ccc11&quot;,&quot;title&quot;:&quot;getApp()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getApp() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,app:\&quot;My App\&quot;})})});const result=await device.getApp();assert.strictEqual(result,\&quot;My App\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ba36c354-b0f7-4c26-9b30-a9ac7ae0eb42&quot;,&quot;parentUUID&quot;:&quot;18a94c42-c921-4504-a198-b604f36ccc11&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ba36c354-b0f7-4c26-9b30-a9ac7ae0eb42&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;89c4f66c-045a-4036-8a5a-56a4fc0e966b&quot;,&quot;title&quot;:&quot;getAppId()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getAppId() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,app_id:\&quot;app.example.com\&quot;})})});const result=await device.getAppId();assert.strictEqual(result,\&quot;app.example.com\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1527f359-ea1e-476b-9e9a-4cbe12c611ce&quot;,&quot;parentUUID&quot;:&quot;89c4f66c-045a-4036-8a5a-56a4fc0e966b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1527f359-ea1e-476b-9e9a-4cbe12c611ce&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5b3e8dd4-8ac9-43c5-bc98-f981674cbcb5&quot;,&quot;title&quot;:&quot;getPowerState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getPowerState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,power_state:\&quot;on\&quot;})})});const result=await device.getPowerState();assert.strictEqual(result,NodePyATVPowerState.on)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;93376827-c4dc-4cab-ac38-467dfc5d4da9&quot;,&quot;parentUUID&quot;:&quot;5b3e8dd4-8ac9-43c5-bc98-f981674cbcb5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;93376827-c4dc-4cab-ac38-467dfc5d4da9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;38c67030-3499-4eba-8b98-a1a5c163d9e2&quot;,&quot;title&quot;:&quot;getVolume()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getVolume() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,volume:50})})});const result=await device.getVolume();assert.strictEqual(result,50)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;05958585-c1ee-4c89-a233-be80302cc549&quot;,&quot;parentUUID&quot;:&quot;38c67030-3499-4eba-8b98-a1a5c163d9e2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;05958585-c1ee-4c89-a233-be80302cc549&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4a5bbae5-f3e1-4537-96c0-166c1c5ea82a&quot;,&quot;title&quot;:&quot;getFocusState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getFocusState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,focus_state:\&quot;focused\&quot;})})});const result=await device.getFocusState();assert.strictEqual(result,NodePyATVFocusState.focused)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ecf42b49-3d0a-402c-9052-e5e8cdf33e6d&quot;,&quot;parentUUID&quot;:&quot;4a5bbae5-f3e1-4537-96c0-166c1c5ea82a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ecf42b49-3d0a-402c-9052-e5e8cdf33e6d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5cd1a2dc-81a2-4432-a6e8-eec03aeb257d&quot;,&quot;title&quot;:&quot;getOutputDevices()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getOutputDevices() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,output_devices:[{identifier:\&quot;foo\&quot;,name:\&quot;Apple TV\&quot;}]})})});const result=await device.getOutputDevices();assert.deepStrictEqual(result,[{identifier:\&quot;foo\&quot;,name:\&quot;Apple TV\&quot;}])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;df422ef9-17cf-4c18-afa1-00bd4402cdda&quot;,&quot;parentUUID&quot;:&quot;5cd1a2dc-81a2-4432-a6e8-eec03aeb257d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;df422ef9-17cf-4c18-afa1-00bd4402cdda&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;80af2bb5-e9ae-4ef2-90b7-d64a1cd961b3&quot;,&quot;title&quot;:&quot;getContentIdentifier()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getContentIdentifier() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,content_identifier:\&quot;1234\&quot;})})});const result=await device.getContentIdentifier();assert.strictEqual(result,\&quot;1234\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;28e6be7e-b847-4083-8e4f-01b319409e1f&quot;,&quot;parentUUID&quot;:&quot;80af2bb5-e9ae-4ef2-90b7-d64a1cd961b3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;28e6be7e-b847-4083-8e4f-01b319409e1f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c95aa858-3297-4092-89b6-b92f23016058&quot;,&quot;title&quot;:&quot;getEpisodeNumber()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getEpisodeNumber() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,episode_number:12})})});const result=await device.getEpisodeNumber();assert.strictEqual(result,12)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ca6c93fb-ac66-400c-8d64-df69c06bea46&quot;,&quot;parentUUID&quot;:&quot;c95aa858-3297-4092-89b6-b92f23016058&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ca6c93fb-ac66-400c-8d64-df69c06bea46&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f159aaee-8a50-4475-8d73-4de74cb0137a&quot;,&quot;title&quot;:&quot;getSeasonNumber()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getSeasonNumber() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,season_number:2})})});const result=await device.getSeasonNumber();assert.strictEqual(result,2)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;53ffd6a9-80e3-4ee6-b2ce-5343d095d84f&quot;,&quot;parentUUID&quot;:&quot;f159aaee-8a50-4475-8d73-4de74cb0137a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;53ffd6a9-80e3-4ee6-b2ce-5343d095d84f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6f458bd2-012b-4f2c-9504-71e8b2c6e3dd&quot;,&quot;title&quot;:&quot;getSeriesName()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getSeriesName() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,series_name:\&quot;The Testing Disaster\&quot;})})});const result=await device.getSeriesName();assert.strictEqual(result,\&quot;The Testing Disaster\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4c21a36a-6d9e-4a66-8198-c80971a90ef9&quot;,&quot;parentUUID&quot;:&quot;6f458bd2-012b-4f2c-9504-71e8b2c6e3dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4c21a36a-6d9e-4a66-8198-c80971a90ef9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c8993900-bcbd-4591-bbe2-f0ba03455dd5&quot;,&quot;title&quot;:&quot;listApps()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice listApps() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(\&quot;App: Fitness (com.apple.Fitness), App: Podcasts (com.apple.podcasts), App: Filme (com.apple.TVMovies), App: Prime Video (com.amazon.aiv.AIVApp), App: TV (com.apple.TVWatchList), App: Fotos (com.apple.TVPhotos), App: App\\xA0Store (com.apple.TVAppStore), App: Arcade (com.apple.Arcade), App: TV-Sendungen (com.apple.TVShows), App: Suchen (com.apple.TVSearch), App: Live TV (de.couchfunk.WM2014), App: RTL+ (com.rtlinteractive.tvnow), App: Computer (com.apple.TVHomeSharing), App: ARTE (tv.arte.plus7), App: YouTube (com.google.ios.youtube), App: ARD Mediathek (de.swr.avp.ard.tablet), App: Disney+ (com.disney.disneyplus), App: Plex (com.plexapp.plex), App: Joyn (de.prosiebensat1digital.seventv), App: Einstellungen (com.apple.TVSettings), App: ZDFmediathek (de.zdf.mediathek.universal), App: Crossy Road (com.hipsterwhale.crossy), App: Netflix (com.netflix.Netflix), App: Infuse (com.firecore.infuse), App: Musik (com.apple.TVMusic)\&quot;)})});const result=await device.listApps();assert.strictEqual(result.length,25);assert.strictEqual(result[0].id,\&quot;com.apple.Fitness\&quot;);assert.strictEqual(result[0].name,\&quot;Fitness\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;af000067-0e23-4129-bbab-4f98550f467f&quot;,&quot;parentUUID&quot;:&quot;c8993900-bcbd-4591-bbe2-f0ba03455dd5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;af000067-0e23-4129-bbab-4f98550f467f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;00d23e48-eb9c-4718-a9f5-6658908065d2&quot;,&quot;title&quot;:&quot;pressKey()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work with valid key&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pressKey() should work with valid key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device.pressKey(NodePyATVKeys.home)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4489dd01-d115-4df2-a022-f04d8d60978e&quot;,&quot;parentUUID&quot;:&quot;00d23e48-eb9c-4718-a9f5-6658908065d2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error with invalid key&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pressKey() should throw error with invalid key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;});await assert.rejects(async()=&gt;{await device.pressKey(\&quot;foo\&quot;)},/Unsupported key value foo/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ddf9aacd-39ce-4104-9ebe-afecec0e9265&quot;,&quot;parentUUID&quot;:&quot;00d23e48-eb9c-4718-a9f5-6658908065d2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if pyatv result is not success&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pressKey() should throw error if pyatv result is not success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;failure\&quot;}&#x27;)})});await assert.rejects(async()=&gt;{await device.pressKey(NodePyATVKeys.home)},/Unable to parse pyatv response/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a900f209-fd24-4b74-9ed5-1cfca119c5df&quot;,&quot;parentUUID&quot;:&quot;00d23e48-eb9c-4718-a9f5-6658908065d2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4489dd01-d115-4df2-a022-f04d8d60978e&quot;,&quot;ddf9aacd-39ce-4104-9ebe-afecec0e9265&quot;,&quot;a900f209-fd24-4b74-9ed5-1cfca119c5df&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e3fae412-86ba-4524-adaa-ea273be0ffde&quot;,&quot;title&quot;:&quot;down()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice down() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7ae2947d-0219-43cb-9e3e-54e303b590f2&quot;,&quot;parentUUID&quot;:&quot;e3fae412-86ba-4524-adaa-ea273be0ffde&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7ae2947d-0219-43cb-9e3e-54e303b590f2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;acac0713-ea60-4fc5-ba9e-e1db1687ea50&quot;,&quot;title&quot;:&quot;home()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice home() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7e1ee0d0-42ae-4cc2-9297-921f6f214965&quot;,&quot;parentUUID&quot;:&quot;acac0713-ea60-4fc5-ba9e-e1db1687ea50&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7e1ee0d0-42ae-4cc2-9297-921f6f214965&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4258b5e5-e2b7-4e79-af22-1aa2521c3527&quot;,&quot;title&quot;:&quot;homeHold()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice homeHold() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8fd624ef-54ad-4ce2-be93-3e3c24337513&quot;,&quot;parentUUID&quot;:&quot;4258b5e5-e2b7-4e79-af22-1aa2521c3527&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8fd624ef-54ad-4ce2-be93-3e3c24337513&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;76805b46-7457-4187-8968-74200a9609b0&quot;,&quot;title&quot;:&quot;left()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice left() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;98539637-feb8-4492-b351-9b1bbddc3813&quot;,&quot;parentUUID&quot;:&quot;76805b46-7457-4187-8968-74200a9609b0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;98539637-feb8-4492-b351-9b1bbddc3813&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;95b06c00-1a82-42e3-8503-c71860b8c2bc&quot;,&quot;title&quot;:&quot;menu()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice menu() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;788e1d08-7c36-4c8a-bff0-b50b02952fb6&quot;,&quot;parentUUID&quot;:&quot;95b06c00-1a82-42e3-8503-c71860b8c2bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;788e1d08-7c36-4c8a-bff0-b50b02952fb6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;012bfadc-5012-4d06-aef7-726bd8d92f2c&quot;,&quot;title&quot;:&quot;next()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice next() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;00ea371a-0be2-41fd-832d-6304e3b250ab&quot;,&quot;parentUUID&quot;:&quot;012bfadc-5012-4d06-aef7-726bd8d92f2c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;00ea371a-0be2-41fd-832d-6304e3b250ab&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f219379c-7452-43a3-953f-7efd4d737275&quot;,&quot;title&quot;:&quot;pause()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pause() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6858318c-00e4-4c98-9eb0-34dd7d2b7c4e&quot;,&quot;parentUUID&quot;:&quot;f219379c-7452-43a3-953f-7efd4d737275&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6858318c-00e4-4c98-9eb0-34dd7d2b7c4e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8cf5b03a-f5f2-4c78-a7eb-1019429b2787&quot;,&quot;title&quot;:&quot;play()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice play() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7ef8351c-c2ac-429d-ac14-3b7b90a37c5c&quot;,&quot;parentUUID&quot;:&quot;8cf5b03a-f5f2-4c78-a7eb-1019429b2787&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7ef8351c-c2ac-429d-ac14-3b7b90a37c5c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e5593630-c8f9-446a-9d24-3d1546bc0e67&quot;,&quot;title&quot;:&quot;playPause()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice playPause() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;80cc147c-1b1d-4311-9d1d-3e33699d474e&quot;,&quot;parentUUID&quot;:&quot;e5593630-c8f9-446a-9d24-3d1546bc0e67&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;80cc147c-1b1d-4311-9d1d-3e33699d474e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;180770c3-e182-4e4c-82a5-db8d35b2852d&quot;,&quot;title&quot;:&quot;previous()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice previous() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e7ccf07-c353-44ca-a30b-8af9999fb201&quot;,&quot;parentUUID&quot;:&quot;180770c3-e182-4e4c-82a5-db8d35b2852d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8e7ccf07-c353-44ca-a30b-8af9999fb201&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;cbd60734-afab-4c55-ad89-c70622aaf2c2&quot;,&quot;title&quot;:&quot;right()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice right() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d8936e6f-4eab-473c-a70d-b2310ef5ee2c&quot;,&quot;parentUUID&quot;:&quot;cbd60734-afab-4c55-ad89-c70622aaf2c2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d8936e6f-4eab-473c-a70d-b2310ef5ee2c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2cff86aa-68a6-4867-a023-d6ea1aee85f8&quot;,&quot;title&quot;:&quot;select()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice select() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f527839b-d769-4eae-b0eb-80f5b728005e&quot;,&quot;parentUUID&quot;:&quot;2cff86aa-68a6-4867-a023-d6ea1aee85f8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f527839b-d769-4eae-b0eb-80f5b728005e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bc97946d-ee71-438e-8127-5d5a5b5a735a&quot;,&quot;title&quot;:&quot;skipBackward()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice skipBackward() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;01b624c0-9e5b-43fe-8c1c-ebdb738b089c&quot;,&quot;parentUUID&quot;:&quot;bc97946d-ee71-438e-8127-5d5a5b5a735a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;01b624c0-9e5b-43fe-8c1c-ebdb738b089c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c11ebca2-1287-4e31-a7ef-99d3bba521b7&quot;,&quot;title&quot;:&quot;skipForward()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice skipForward() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;caf7aad6-588f-4010-877b-8b15654cf1d9&quot;,&quot;parentUUID&quot;:&quot;c11ebca2-1287-4e31-a7ef-99d3bba521b7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;caf7aad6-588f-4010-877b-8b15654cf1d9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;01ad07f8-e8ff-494a-8982-0e94280d434d&quot;,&quot;title&quot;:&quot;stop()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice stop() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ba9ce0c7-5821-49b6-bb9a-9dbf4da6a327&quot;,&quot;parentUUID&quot;:&quot;01ad07f8-e8ff-494a-8982-0e94280d434d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ba9ce0c7-5821-49b6-bb9a-9dbf4da6a327&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a0f3da46-e801-4334-aca4-360df9aebedb&quot;,&quot;title&quot;:&quot;suspend()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice suspend() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;709025f1-6806-4bf3-a592-72d1d9cd993b&quot;,&quot;parentUUID&quot;:&quot;a0f3da46-e801-4334-aca4-360df9aebedb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;709025f1-6806-4bf3-a592-72d1d9cd993b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e83804fb-034a-4435-ae85-3036356c78dc&quot;,&quot;title&quot;:&quot;topMenu()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice topMenu() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0cabf305-c273-40f7-af2e-3255f77a8070&quot;,&quot;parentUUID&quot;:&quot;e83804fb-034a-4435-ae85-3036356c78dc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0cabf305-c273-40f7-af2e-3255f77a8070&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a671c13f-7ed5-4693-9212-72d6df1a5966&quot;,&quot;title&quot;:&quot;up()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice up() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cf030f9b-a570-4e81-9b4a-248503803573&quot;,&quot;parentUUID&quot;:&quot;a671c13f-7ed5-4693-9212-72d6df1a5966&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cf030f9b-a570-4e81-9b4a-248503803573&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;52a1f7f1-3cae-4057-b0c4-8264b6efad3f&quot;,&quot;title&quot;:&quot;volumeDown()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice volumeDown() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;28d96efd-6a43-4c23-a6e0-e7063716cff5&quot;,&quot;parentUUID&quot;:&quot;52a1f7f1-3cae-4057-b0c4-8264b6efad3f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;28d96efd-6a43-4c23-a6e0-e7063716cff5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;72ca56a1-78fa-44d8-ae79-d85fb7bc6707&quot;,&quot;title&quot;:&quot;volumeUp()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice volumeUp() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;88c4ff8a-6412-4ff0-821b-c2d83c2c75b2&quot;,&quot;parentUUID&quot;:&quot;72ca56a1-78fa-44d8-ae79-d85fb7bc6707&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;88c4ff8a-6412-4ff0-821b-c2d83c2c75b2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b91f7fa3-5949-4e9b-8002-fced7bf98aa9&quot;,&quot;title&quot;:&quot;wakeup()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice wakeup() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b4c50dce-8c3f-4dce-bd9b-ce1aba1431f3&quot;,&quot;parentUUID&quot;:&quot;b91f7fa3-5949-4e9b-8002-fced7bf98aa9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b4c50dce-8c3f-4dce-bd9b-ce1aba1431f3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9b016cc1-c76d-44c7-b35e-4b48a37dac6f&quot;,&quot;title&quot;:&quot;turnOff()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice turnOff() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e45a266e-51a2-41b1-a7bd-6f2d29654f51&quot;,&quot;parentUUID&quot;:&quot;9b016cc1-c76d-44c7-b35e-4b48a37dac6f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e45a266e-51a2-41b1-a7bd-6f2d29654f51&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;cce84064-96ea-471a-b971-f2bc6ad4159c&quot;,&quot;title&quot;:&quot;turnOn()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice turnOn() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0d89b18a-6677-4b9f-b0e5-6bae69401d8c&quot;,&quot;parentUUID&quot;:&quot;cce84064-96ea-471a-b971-f2bc6ad4159c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0d89b18a-6677-4b9f-b0e5-6bae69401d8c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c3f51ea3-eec5-4dd4-8b23-9cf25c93c14c&quot;,&quot;title&quot;:&quot;launchApp()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice launchApp() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(\&quot;\&quot;)})});await device.launchApp(\&quot;com.apple.TVShows\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;99059d95-e2fe-4f9d-b7d3-a9deeb41c6bb&quot;,&quot;parentUUID&quot;:&quot;c3f51ea3-eec5-4dd4-8b23-9cf25c93c14c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;99059d95-e2fe-4f9d-b7d3-a9deeb41c6bb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d672603f-2e4b-4630-bc76-c96e7d5bf7cc&quot;,&quot;title&quot;:&quot;NodePyATVInstance&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;dee2ff31-b291-45da-a00c-f5c625bb0f7e&quot;,&quot;title&quot;:&quot;static version()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work with pyatv [L]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should work with pyatv [L]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:418,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(4e3);const result=await NodePyATVInstance.version();if(result.pyatv===null){throw new Error(\&quot;No version found for pyatv. Is it installed in test environment?\&quot;)}assert.equal(typeof result.pyatv,\&quot;string\&quot;,\&quot;result.pyatv is a string\&quot;);assert.ok(result.pyatv.length&gt;=5,\&quot;result.pyatv has content\&quot;);assert.strictEqual(result.module,version)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;02d2b15b-e336-4d83-b6f7-a9a2af3f6ddc&quot;,&quot;parentUUID&quot;:&quot;dee2ff31-b291-45da-a00c-f5c625bb0f7e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the pyatv version&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return the pyatv version&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await NodePyATVInstance.version({spawn:createFakeSpawn(cp=&gt;{cp.code(1);cp.end(\&quot;atvremote 0.7.4\&quot;)})});assert.ok(result.pyatv);assert.strictEqual(result.pyatv,\&quot;0.7.4\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3ea8c1a9-be68-43ed-84c8-ac11d6cde5c2&quot;,&quot;parentUUID&quot;:&quot;dee2ff31-b291-45da-a00c-f5c625bb0f7e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the module version&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return the module version&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await NodePyATVInstance.version({noColors:true,spawn:createFakeSpawn(cp=&gt;cp.code(1).end())});assert.strictEqual(result.module,version)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0fd41008-45a2-4bbf-a308-c440917b6937&quot;,&quot;parentUUID&quot;:&quot;dee2ff31-b291-45da-a00c-f5c625bb0f7e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle option.atvremotePath&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should handle option.atvremotePath&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await NodePyATVInstance.version({atvremotePath:\&quot;/foo/bar\&quot;,spawn:createFakeSpawn(cp=&gt;{assert.strictEqual(cp.cmd(),\&quot;/foo/bar\&quot;);cp.code(1).end()})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;47084870-9294-4d08-897c-fe52f4d329fe&quot;,&quot;parentUUID&quot;:&quot;dee2ff31-b291-45da-a00c-f5c625bb0f7e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with option.debug = true&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should work with option.debug = true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await NodePyATVInstance.version({debug:true,spawn:createFakeSpawn(cp=&gt;cp.code(1).end())})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f906e3f2-33d9-46fe-84b2-528c3ff4af81&quot;,&quot;parentUUID&quot;:&quot;dee2ff31-b291-45da-a00c-f5c625bb0f7e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with option.noColors&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should work with option.noColors&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await NodePyATVInstance.version({debug:__name(()=&gt;{},\&quot;debug\&quot;),noColors:true,spawn:createFakeSpawn(cp=&gt;cp.code(1).end())})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f90f2096-fe80-4c3e-9de3-c4dd7422f179&quot;,&quot;parentUUID&quot;:&quot;dee2ff31-b291-45da-a00c-f5c625bb0f7e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return null on pyatv stderr output&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return null on pyatv stderr output&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await NodePyATVInstance.version({spawn:createFakeSpawn(cp=&gt;cp.stderr(\&quot;Hello World!\&quot;).code(123).end())});assert.strictEqual(result.pyatv,null)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b33ce5f5-df91-46ac-ab11-931670ed277e&quot;,&quot;parentUUID&quot;:&quot;dee2ff31-b291-45da-a00c-f5c625bb0f7e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return null on pyatv error&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return null on pyatv error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await NodePyATVInstance.version({spawn:createFakeSpawn(cp=&gt;{cp.error(new Error(\&quot;Hello world!\&quot;)).end()})});assert.strictEqual(result.pyatv,null)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;140bd413-e66a-4a77-972d-18b77486018b&quot;,&quot;parentUUID&quot;:&quot;dee2ff31-b291-45da-a00c-f5c625bb0f7e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return null on invalid pyatv version&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return null on invalid pyatv version&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await NodePyATVInstance.version({spawn:createFakeSpawn(cp=&gt;{cp.stdout(\&quot;atvremote 42\&quot;).code(1).end()})});assert.strictEqual(result.pyatv,null)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;11f2aead-4454-421a-8ef6-f3d5445eaf77&quot;,&quot;parentUUID&quot;:&quot;dee2ff31-b291-45da-a00c-f5c625bb0f7e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;02d2b15b-e336-4d83-b6f7-a9a2af3f6ddc&quot;,&quot;3ea8c1a9-be68-43ed-84c8-ac11d6cde5c2&quot;,&quot;0fd41008-45a2-4bbf-a308-c440917b6937&quot;,&quot;47084870-9294-4d08-897c-fe52f4d329fe&quot;,&quot;f906e3f2-33d9-46fe-84b2-528c3ff4af81&quot;,&quot;f90f2096-fe80-4c3e-9de3-c4dd7422f179&quot;,&quot;b33ce5f5-df91-46ac-ab11-931670ed277e&quot;,&quot;140bd413-e66a-4a77-972d-18b77486018b&quot;,&quot;11f2aead-4454-421a-8ef6-f3d5445eaf77&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:432,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;edf7d1cd-3a17-4d12-a1e2-4af800d2a3bf&quot;,&quot;title&quot;:&quot;static check()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should resolve in test environment [L]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should resolve in test environment [L]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5791,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(12e3);await NodePyATVInstance.check()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7201b6b5-06e0-4991-8818-7f22a5f90cf2&quot;,&quot;parentUUID&quot;:&quot;edf7d1cd-3a17-4d12-a1e2-4af800d2a3bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return nice error message if pyatv was not found&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should return nice error message if pyatv was not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.check({spawn:createFakeSpawn(cp=&gt;{cp.error(new Error(\&quot;spawn atvremote ENOENT\&quot;)).code(1).end()})})},/Unable to find pyatv. Is it installed?/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;54086002-57c7-40db-99a6-69019f5c3f83&quot;,&quot;parentUUID&quot;:&quot;edf7d1cd-3a17-4d12-a1e2-4af800d2a3bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return nice error message if myatv is too old&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should return nice error message if myatv is too old&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.check({spawn:createFakeSpawn(cp=&gt;{cp.stdout(\&quot;atvremote 0.5.1\&quot;).code(1).end()})})},/Found pyatv, but unforunately it&#x27;s too old. Please update pyatv./)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f5fdfb6e-2aca-4a79-ac68-dcc4e3733eb7&quot;,&quot;parentUUID&quot;:&quot;edf7d1cd-3a17-4d12-a1e2-4af800d2a3bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return nice error message if scan failed&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should return nice error message if scan failed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let i=0;await assert.rejects(async()=&gt;{await NodePyATVInstance.check({spawn:createFakeSpawn(cp=&gt;{if(i===0){cp.stdout(\&quot;atvremote 0.7.0\&quot;).code(1).end();i++}else{cp.error(new Error(\&quot;spawn atvremote ENOENT\&quot;)).code(1).end()}})})},/Unable to scan for devices/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f01f5e76-b947-40a6-a0e5-152050178b64&quot;,&quot;parentUUID&quot;:&quot;edf7d1cd-3a17-4d12-a1e2-4af800d2a3bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7201b6b5-06e0-4991-8818-7f22a5f90cf2&quot;,&quot;54086002-57c7-40db-99a6-69019f5c3f83&quot;,&quot;f5fdfb6e-2aca-4a79-ac68-dcc4e3733eb7&quot;,&quot;f01f5e76-b947-40a6-a0e5-152050178b64&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5797,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3a3e999b-cf85-40b1-a2c1-dd26eb8f2aea&quot;,&quot;title&quot;:&quot;static find()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work [L]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work [L]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5395,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(1e4);const result=await NodePyATVInstance.find();assert.ok(Array.isArray(result))&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ca632517-aa18-4df8-8fad-56ad36fdad06&quot;,&quot;parentUUID&quot;:&quot;3a3e999b-cf85-40b1-a2c1-dd26eb8f2aea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle option.atvscriptPath&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should handle option.atvscriptPath&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await NodePyATVInstance.find({atvscriptPath:\&quot;/foo/bar\&quot;,spawn:createFakeSpawn(cp=&gt;{assert.strictEqual(cp.cmd(),\&quot;/foo/bar\&quot;);cp.stdout({\&quot;result\&quot;:\&quot;success\&quot;,\&quot;datetime\&quot;:\&quot;2020-11-06T20:47:30.840022+01:00\&quot;,\&quot;devices\&quot;:[]}).end()})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;681cf201-29fb-4acc-89bb-db808a506ac1&quot;,&quot;parentUUID&quot;:&quot;3a3e999b-cf85-40b1-a2c1-dd26eb8f2aea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error on stderr output&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error on stderr output&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stderr(\&quot;Hello World!\&quot;).code(1).end()})})},/Unable to execute request/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d93b3ffa-68d4-420a-8a3a-e30110a83510&quot;,&quot;parentUUID&quot;:&quot;3a3e999b-cf85-40b1-a2c1-dd26eb8f2aea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error on error&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.error(new Error(\&quot;Hello world!\&quot;)).code(1).end()})})},/Hello world!/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;88250d41-5dc2-4729-8bf2-ccb4071cd13b&quot;,&quot;parentUUID&quot;:&quot;3a3e999b-cf85-40b1-a2c1-dd26eb8f2aea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error on pyatv failure&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error on pyatv failure&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout({result:\&quot;failure\&quot;,datetime:\&quot;2020-11-06T20:47:30.840022+01:00\&quot;,error:\&quot;Task exception was never retrieved\&quot;,exception:\&quot;[Errno 113] Connect call failed\&quot;}).code(1).end()})})},/Unable to find any devices, but received 1 error: /)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e2d2561e-938a-4c83-8d66-5c2e07564ef4&quot;,&quot;parentUUID&quot;:&quot;3a3e999b-cf85-40b1-a2c1-dd26eb8f2aea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if atvscript result is not valid json&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error if atvscript result is not valid json&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout(JSON.stringify({\&quot;result\&quot;:\&quot;success\&quot;,\&quot;datetime\&quot;:\&quot;2020-11-06T20:47:30.840022+01:00\&quot;,\&quot;devices\&quot;:[]}).substr(1)).end()})})},/Unable to parse result/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;72437333-9356-4c7d-8250-f81aae7cbf87&quot;,&quot;parentUUID&quot;:&quot;3a3e999b-cf85-40b1-a2c1-dd26eb8f2aea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if atvscript result is not successfull&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error if atvscript result is not successfull&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout({result:\&quot;error\&quot;}).code(1).end()})})},/Unable to parse pyatv response: /)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f743e23f-2348-409c-a5d3-54ad63ae69a3&quot;,&quot;parentUUID&quot;:&quot;3a3e999b-cf85-40b1-a2c1-dd26eb8f2aea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if atvscript result is without device array&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error if atvscript result is without device array&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout({result:\&quot;success\&quot;}).code(1).end()})})},/Unable to parse pyatv response: /)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3905faf9-1d6b-45fa-9a4a-6ece746ded1c&quot;,&quot;parentUUID&quot;:&quot;3a3e999b-cf85-40b1-a2c1-dd26eb8f2aea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work if devices are without device_info / services&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work if devices are without device_info / services&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const devices=await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout({result:\&quot;success\&quot;,datetime:\&quot;2020-11-06T20:47:30.840022+01:00\&quot;,devices:[{name:\&quot;Vardagsrum\&quot;,address:\&quot;10.0.10.81\&quot;,identifier:\&quot;xxx\&quot;}]}).code(1).end()})});assert.strictEqual(devices.length,1);assert.strictEqual(devices[0].name,\&quot;Vardagsrum\&quot;);assert.strictEqual(devices[0].host,\&quot;10.0.10.81\&quot;);assert.strictEqual(devices[0].id,\&quot;xxx\&quot;);assert.strictEqual(devices[0].model,void 0);assert.strictEqual(devices[0].modelName,void 0);assert.strictEqual(devices[0].os,void 0);assert.strictEqual(devices[0].version,void 0);assert.deepStrictEqual(devices[0].services,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7d406565-c7d0-4daa-9b63-d79650730095&quot;,&quot;parentUUID&quot;:&quot;3a3e999b-cf85-40b1-a2c1-dd26eb8f2aea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work if devices are with device_info / services&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work if devices are with device_info / services&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const devices=await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout({result:\&quot;success\&quot;,datetime:\&quot;2020-11-06T20:47:30.840022+01:00\&quot;,devices:[{name:\&quot;Vardagsrum\&quot;,address:\&quot;10.0.10.81\&quot;,identifier:\&quot;xxx\&quot;,device_info:{\&quot;model\&quot;:\&quot;Gen4K\&quot;,\&quot;model_str\&quot;:\&quot;Apple TV 4K\&quot;,\&quot;operating_system\&quot;:\&quot;TvOS\&quot;,\&quot;version\&quot;:\&quot;15.5.1\&quot;},services:[{protocol:\&quot;mrp\&quot;,port:49152},{protocol:\&quot;airplay\&quot;,port:7e3}]}]}).code(1).end()})});assert.strictEqual(devices.length,1);assert.strictEqual(devices[0].name,\&quot;Vardagsrum\&quot;);assert.strictEqual(devices[0].host,\&quot;10.0.10.81\&quot;);assert.strictEqual(devices[0].id,\&quot;xxx\&quot;);assert.strictEqual(devices[0].model,\&quot;Gen4K\&quot;);assert.strictEqual(devices[0].modelName,\&quot;Apple TV 4K\&quot;);assert.strictEqual(devices[0].os,\&quot;TvOS\&quot;);assert.strictEqual(devices[0].version,\&quot;15.5.1\&quot;);assert.deepStrictEqual(devices[0].services,[{protocol:NodePyATVProtocol.mrp,port:49152},{protocol:NodePyATVProtocol.airplay,port:7e3}])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;85930393-fd35-4cf8-9630-b55ff2026e3f&quot;,&quot;parentUUID&quot;:&quot;3a3e999b-cf85-40b1-a2c1-dd26eb8f2aea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for unicast scans&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work for unicast scans&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const devices=await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout(`{\&quot;result\&quot;: \&quot;failure\&quot;, \&quot;datetime\&quot;: \&quot;2024-05-18T16:20:18.103087-06:00\&quot;, \&quot;error\&quot;: \&quot;Task exception was never retrieved\&quot;, \&quot;exception\&quot;: \&quot;[Errno 113] Connect call failed (&#x27;10.0.0.232&#x27;, 32498)\&quot;, \&quot;stacktrace\&quot;: \&quot;Traceback (most recent call last):\\\\n  File \\\\\&quot;/var/lib/homebridge/appletv-enhanced/.venv/lib/python3.11/site-packages/pyatv/support/knock.py\\\\\&quot;, line 28, in _async_knock\\\\n    _, writer = await asyncio.wait_for(\\\\n                ^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/tasks.py\\\\\&quot;, line 479, in wait_for\\\\n    return fut.result()\\\\n           ^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/streams.py\\\\\&quot;, line 48, in open_connection\\\\n    transport, _ = await loop.create_connection(\\\\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1085, in create_connection\\\\n    raise exceptions[0]\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1069, in create_connection\\\\n    sock = await self._connect_sock(\\\\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 973, in _connect_sock\\\\n    await self.sock_connect(sock, address)\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 634, in sock_connect\\\\n    return await fut\\\\n           ^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 674, in _sock_connect_cb\\\\n    raise OSError(err, f&#x27;Connect call failed {address}&#x27;)\\\\nOSError: [Errno 113] Connect call failed (&#x27;10.0.0.232&#x27;, 32498)\\\\n\&quot;}\n{\&quot;result\&quot;: \&quot;failure\&quot;, \&quot;datetime\&quot;: \&quot;2024-05-18T16:20:18.114744-06:00\&quot;, \&quot;error\&quot;: \&quot;Task exception was never retrieved\&quot;, \&quot;exception\&quot;: \&quot;[Errno 113] Connect call failed (&#x27;10.0.0.229&#x27;, 32498)\&quot;, \&quot;stacktrace\&quot;: \&quot;Traceback (most recent call last):\\\\n  File \\\\\&quot;/var/lib/homebridge/appletv-enhanced/.venv/lib/python3.11/site-packages/pyatv/support/knock.py\\\\\&quot;, line 28, in _async_knock\\\\n    _, writer = await asyncio.wait_for(\\\\n                ^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/tasks.py\\\\\&quot;, line 479, in wait_for\\\\n    return fut.result()\\\\n           ^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/streams.py\\\\\&quot;, line 48, in open_connection\\\\n    transport, _ = await loop.create_connection(\\\\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1085, in create_connection\\\\n    raise exceptions[0]\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1069, in create_connection\\\\n    sock = await self._connect_sock(\\\\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 973, in _connect_sock\\\\n    await self.sock_connect(sock, address)\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 634, in sock_connect\\\\n    return await fut\\\\n           ^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 674, in _sock_connect_cb\\\\n    raise OSError(err, f&#x27;Connect call failed {address}&#x27;)\\\\nOSError: [Errno 113] Connect call failed (&#x27;10.0.0.229&#x27;, 32498)\\\\n\&quot;}\n{\&quot;result\&quot;: \&quot;success\&quot;, \&quot;datetime\&quot;: \&quot;2024-05-18T16:20:20.042648-06:00\&quot;, \&quot;devices\&quot;: [{\&quot;name\&quot;: \&quot;Living Room\&quot;, \&quot;address\&quot;: \&quot;10.0.0.30\&quot;, \&quot;identifier\&quot;: \&quot;37323C0E-99E6-4CC3-A006-1ED5368FFF8C\&quot;, \&quot;all_identifiers\&quot;: [\&quot;86B730B2-5189-4B6A-BCAA-CDDB18F05FA8\&quot;, \&quot;C8:D0:83:E9:D0:49\&quot;, \&quot;37323C0E-99E6-4CC3-A006-1ED5368FFF8C\&quot;, \&quot;C8D083E9D049\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;C8:D0:83:E9:D0:49\&quot;, \&quot;model\&quot;: \&quot;Gen4K\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4K\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.5\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49154}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}, {\&quot;name\&quot;: \&quot;Kitchen\&quot;, \&quot;address\&quot;: \&quot;10.0.0.79\&quot;, \&quot;identifier\&quot;: \&quot;45B6A67A-9FAD-497D-95EF-7FC5ECB3371C\&quot;, \&quot;all_identifiers\&quot;: [\&quot;B163C908-000F-4983-BDC7-BEFD76887EF5\&quot;, \&quot;C8:69:CD:63:2A:11\&quot;, \&quot;45B6A67A-9FAD-497D-95EF-7FC5ECB3371C\&quot;, \&quot;C869CD632A11\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;C8:69:CD:63:2A:11\&quot;, \&quot;model\&quot;: \&quot;Gen4\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.4\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49157}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}, {\&quot;name\&quot;: \&quot;Bedroom\&quot;, \&quot;address\&quot;: \&quot;10.0.0.20\&quot;, \&quot;identifier\&quot;: \&quot;CA55DA36-ADEF-4DBC-A0B3-BA68B0C53E40\&quot;, \&quot;all_identifiers\&quot;: [\&quot;08:66:98:BC:37:1F\&quot;, \&quot;108F35A0-FF21-4884-96C2-145AAAB1B4C4\&quot;, \&quot;CA55DA36-ADEF-4DBC-A0B3-BA68B0C53E40\&quot;, \&quot;086698BC371F\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;08:66:98:BC:37:1F\&quot;, \&quot;model\&quot;: \&quot;Gen4\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.4\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49154}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}, {\&quot;name\&quot;: \&quot;Basement\&quot;, \&quot;address\&quot;: \&quot;10.0.0.156\&quot;, \&quot;identifier\&quot;: \&quot;C02B27DB-2AF3-43E7-8EF7-885E1E9AB3B4\&quot;, \&quot;all_identifiers\&quot;: [\&quot;8BDB6773-479F-4C01-A185-29FF5516F2C2\&quot;, \&quot;D0:03:4B:4C:2A:2E\&quot;, \&quot;C02B27DB-2AF3-43E7-8EF7-885E1E9AB3B4\&quot;, \&quot;D0034B4C2A2E\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;D0:03:4B:4C:2A:2E\&quot;, \&quot;model\&quot;: \&quot;Gen4\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.4\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49154}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}]}`).code(1).end()})});assert.strictEqual(devices.length,4);assert.strictEqual(devices[0].name,\&quot;Living Room\&quot;);assert.strictEqual(devices[0].host,\&quot;10.0.0.30\&quot;);assert.strictEqual(devices[0].id,\&quot;37323C0E-99E6-4CC3-A006-1ED5368FFF8C\&quot;);assert.strictEqual(devices[1].name,\&quot;Kitchen\&quot;);assert.strictEqual(devices[1].host,\&quot;10.0.0.79\&quot;);assert.strictEqual(devices[1].id,\&quot;45B6A67A-9FAD-497D-95EF-7FC5ECB3371C\&quot;);assert.strictEqual(devices[2].name,\&quot;Bedroom\&quot;);assert.strictEqual(devices[2].host,\&quot;10.0.0.20\&quot;);assert.strictEqual(devices[2].id,\&quot;CA55DA36-ADEF-4DBC-A0B3-BA68B0C53E40\&quot;);assert.strictEqual(devices[3].name,\&quot;Basement\&quot;);assert.strictEqual(devices[3].host,\&quot;10.0.0.156\&quot;);assert.strictEqual(devices[3].id,\&quot;C02B27DB-2AF3-43E7-8EF7-885E1E9AB3B4\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4dc91f9f-6885-4cba-b8fc-b9b5cf4b38e2&quot;,&quot;parentUUID&quot;:&quot;3a3e999b-cf85-40b1-a2c1-dd26eb8f2aea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for unicast scans with returnDevicesAndErrors = true&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work for unicast scans with returnDevicesAndErrors = true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response=await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout(`{\&quot;result\&quot;: \&quot;failure\&quot;, \&quot;datetime\&quot;: \&quot;2024-05-18T16:20:18.103087-06:00\&quot;, \&quot;error\&quot;: \&quot;Task exception was never retrieved\&quot;, \&quot;exception\&quot;: \&quot;[Errno 113] Connect call failed (&#x27;10.0.0.232&#x27;, 32498)\&quot;, \&quot;stacktrace\&quot;: \&quot;Traceback (most recent call last):\\\\n  File \\\\\&quot;/var/lib/homebridge/appletv-enhanced/.venv/lib/python3.11/site-packages/pyatv/support/knock.py\\\\\&quot;, line 28, in _async_knock\\\\n    _, writer = await asyncio.wait_for(\\\\n                ^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/tasks.py\\\\\&quot;, line 479, in wait_for\\\\n    return fut.result()\\\\n           ^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/streams.py\\\\\&quot;, line 48, in open_connection\\\\n    transport, _ = await loop.create_connection(\\\\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1085, in create_connection\\\\n    raise exceptions[0]\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1069, in create_connection\\\\n    sock = await self._connect_sock(\\\\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 973, in _connect_sock\\\\n    await self.sock_connect(sock, address)\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 634, in sock_connect\\\\n    return await fut\\\\n           ^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 674, in _sock_connect_cb\\\\n    raise OSError(err, f&#x27;Connect call failed {address}&#x27;)\\\\nOSError: [Errno 113] Connect call failed (&#x27;10.0.0.232&#x27;, 32498)\\\\n\&quot;}\n{\&quot;result\&quot;: \&quot;failure\&quot;, \&quot;datetime\&quot;: \&quot;2024-05-18T16:20:18.114744-06:00\&quot;, \&quot;error\&quot;: \&quot;Task exception was never retrieved\&quot;, \&quot;exception\&quot;: \&quot;[Errno 113] Connect call failed (&#x27;10.0.0.229&#x27;, 32498)\&quot;, \&quot;stacktrace\&quot;: \&quot;Traceback (most recent call last):\\\\n  File \\\\\&quot;/var/lib/homebridge/appletv-enhanced/.venv/lib/python3.11/site-packages/pyatv/support/knock.py\\\\\&quot;, line 28, in _async_knock\\\\n    _, writer = await asyncio.wait_for(\\\\n                ^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/tasks.py\\\\\&quot;, line 479, in wait_for\\\\n    return fut.result()\\\\n           ^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/streams.py\\\\\&quot;, line 48, in open_connection\\\\n    transport, _ = await loop.create_connection(\\\\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1085, in create_connection\\\\n    raise exceptions[0]\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1069, in create_connection\\\\n    sock = await self._connect_sock(\\\\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 973, in _connect_sock\\\\n    await self.sock_connect(sock, address)\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 634, in sock_connect\\\\n    return await fut\\\\n           ^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 674, in _sock_connect_cb\\\\n    raise OSError(err, f&#x27;Connect call failed {address}&#x27;)\\\\nOSError: [Errno 113] Connect call failed (&#x27;10.0.0.229&#x27;, 32498)\\\\n\&quot;}\n{\&quot;result\&quot;: \&quot;success\&quot;, \&quot;datetime\&quot;: \&quot;2024-05-18T16:20:20.042648-06:00\&quot;, \&quot;devices\&quot;: [{\&quot;name\&quot;: \&quot;Living Room\&quot;, \&quot;address\&quot;: \&quot;10.0.0.30\&quot;, \&quot;identifier\&quot;: \&quot;37323C0E-99E6-4CC3-A006-1ED5368FFF8C\&quot;, \&quot;all_identifiers\&quot;: [\&quot;86B730B2-5189-4B6A-BCAA-CDDB18F05FA8\&quot;, \&quot;C8:D0:83:E9:D0:49\&quot;, \&quot;37323C0E-99E6-4CC3-A006-1ED5368FFF8C\&quot;, \&quot;C8D083E9D049\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;C8:D0:83:E9:D0:49\&quot;, \&quot;model\&quot;: \&quot;Gen4K\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4K\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.5\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49154}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}, {\&quot;name\&quot;: \&quot;Kitchen\&quot;, \&quot;address\&quot;: \&quot;10.0.0.79\&quot;, \&quot;identifier\&quot;: \&quot;45B6A67A-9FAD-497D-95EF-7FC5ECB3371C\&quot;, \&quot;all_identifiers\&quot;: [\&quot;B163C908-000F-4983-BDC7-BEFD76887EF5\&quot;, \&quot;C8:69:CD:63:2A:11\&quot;, \&quot;45B6A67A-9FAD-497D-95EF-7FC5ECB3371C\&quot;, \&quot;C869CD632A11\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;C8:69:CD:63:2A:11\&quot;, \&quot;model\&quot;: \&quot;Gen4\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.4\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49157}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}, {\&quot;name\&quot;: \&quot;Bedroom\&quot;, \&quot;address\&quot;: \&quot;10.0.0.20\&quot;, \&quot;identifier\&quot;: \&quot;CA55DA36-ADEF-4DBC-A0B3-BA68B0C53E40\&quot;, \&quot;all_identifiers\&quot;: [\&quot;08:66:98:BC:37:1F\&quot;, \&quot;108F35A0-FF21-4884-96C2-145AAAB1B4C4\&quot;, \&quot;CA55DA36-ADEF-4DBC-A0B3-BA68B0C53E40\&quot;, \&quot;086698BC371F\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;08:66:98:BC:37:1F\&quot;, \&quot;model\&quot;: \&quot;Gen4\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.4\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49154}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}, {\&quot;name\&quot;: \&quot;Basement\&quot;, \&quot;address\&quot;: \&quot;10.0.0.156\&quot;, \&quot;identifier\&quot;: \&quot;C02B27DB-2AF3-43E7-8EF7-885E1E9AB3B4\&quot;, \&quot;all_identifiers\&quot;: [\&quot;8BDB6773-479F-4C01-A185-29FF5516F2C2\&quot;, \&quot;D0:03:4B:4C:2A:2E\&quot;, \&quot;C02B27DB-2AF3-43E7-8EF7-885E1E9AB3B4\&quot;, \&quot;D0034B4C2A2E\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;D0:03:4B:4C:2A:2E\&quot;, \&quot;model\&quot;: \&quot;Gen4\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.4\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49154}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}]}`).code(1).end()})},true);assert.strictEqual(response.devices.length,4);assert.strictEqual(response.errors.length,2);assert.strictEqual(response.devices[0].name,\&quot;Living Room\&quot;);assert.strictEqual(response.devices[0].host,\&quot;10.0.0.30\&quot;);assert.strictEqual(response.devices[0].id,\&quot;37323C0E-99E6-4CC3-A006-1ED5368FFF8C\&quot;);assert.strictEqual(response.devices[1].name,\&quot;Kitchen\&quot;);assert.strictEqual(response.devices[1].host,\&quot;10.0.0.79\&quot;);assert.strictEqual(response.devices[1].id,\&quot;45B6A67A-9FAD-497D-95EF-7FC5ECB3371C\&quot;);assert.strictEqual(response.devices[2].name,\&quot;Bedroom\&quot;);assert.strictEqual(response.devices[2].host,\&quot;10.0.0.20\&quot;);assert.strictEqual(response.devices[2].id,\&quot;CA55DA36-ADEF-4DBC-A0B3-BA68B0C53E40\&quot;);assert.strictEqual(response.devices[3].name,\&quot;Basement\&quot;);assert.strictEqual(response.devices[3].host,\&quot;10.0.0.156\&quot;);assert.strictEqual(response.devices[3].id,\&quot;C02B27DB-2AF3-43E7-8EF7-885E1E9AB3B4\&quot;);assert.strictEqual(response.errors[0].exception,\&quot;[Errno 113] Connect call failed (&#x27;10.0.0.232&#x27;, 32498)\&quot;);assert.strictEqual(response.errors[1].exception,\&quot;[Errno 113] Connect call failed (&#x27;10.0.0.229&#x27;, 32498)\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ad3d2d52-327a-4f5a-98ab-e2c1c685602e&quot;,&quot;parentUUID&quot;:&quot;3a3e999b-cf85-40b1-a2c1-dd26eb8f2aea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ca632517-aa18-4df8-8fad-56ad36fdad06&quot;,&quot;681cf201-29fb-4acc-89bb-db808a506ac1&quot;,&quot;d93b3ffa-68d4-420a-8a3a-e30110a83510&quot;,&quot;88250d41-5dc2-4729-8bf2-ccb4071cd13b&quot;,&quot;e2d2561e-938a-4c83-8d66-5c2e07564ef4&quot;,&quot;72437333-9356-4c7d-8250-f81aae7cbf87&quot;,&quot;f743e23f-2348-409c-a5d3-54ad63ae69a3&quot;,&quot;3905faf9-1d6b-45fa-9a4a-6ece746ded1c&quot;,&quot;7d406565-c7d0-4daa-9b63-d79650730095&quot;,&quot;85930393-fd35-4cf8-9630-b55ff2026e3f&quot;,&quot;4dc91f9f-6885-4cba-b8fc-b9b5cf4b38e2&quot;,&quot;ad3d2d52-327a-4f5a-98ab-e2c1c685602e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5407,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1da0c328-d450-46ea-8441-0b3ded3a3701&quot;,&quot;title&quot;:&quot;static device()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should pass options to constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static device() should pass options to constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=NodePyATVInstance.device({host:\&quot;192.168.178.6\&quot;,name:\&quot;My Testdevice\&quot;});assert.strictEqual(device.host,\&quot;192.168.178.6\&quot;);assert.strictEqual(device.name,\&quot;My Testdevice\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;84d9f364-2ab9-4712-a22d-4d93724353fc&quot;,&quot;parentUUID&quot;:&quot;1da0c328-d450-46ea-8441-0b3ded3a3701&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;84d9f364-2ab9-4712-a22d-4d93724353fc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f6208586-7d7b-4b87-bcdb-1cb382b0d47a&quot;,&quot;title&quot;:&quot;version()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance version() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const i=new NodePyATVInstance({atvremotePath:\&quot;test\&quot;});await i.version({spawn:createFakeSpawn(cp=&gt;{assert.strictEqual(cp.cmd(),\&quot;test\&quot;);cp.code(1).end()})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;96e2a798-fa7a-43b9-9bbc-948dcd8574f0&quot;,&quot;parentUUID&quot;:&quot;f6208586-7d7b-4b87-bcdb-1cb382b0d47a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;96e2a798-fa7a-43b9-9bbc-948dcd8574f0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;395a0e13-8925-4369-8837-f35d0bd63827&quot;,&quot;title&quot;:&quot;check()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance check() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const i=new NodePyATVInstance({atvremotePath:\&quot;test\&quot;});await assert.rejects(async()=&gt;{await i.check({spawn:createFakeSpawn(cp=&gt;{assert.strictEqual(cp.cmd(),\&quot;test\&quot;);cp.error(new Error(\&quot;spawn atvremote ENOENT\&quot;)).code(1).end()})})},/Unable to find pyatv. Is it installed?/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;729725a4-684e-421a-a7c4-5417781bdc46&quot;,&quot;parentUUID&quot;:&quot;395a0e13-8925-4369-8837-f35d0bd63827&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;729725a4-684e-421a-a7c4-5417781bdc46&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0080cfd6-b929-408c-8c23-fe50e52c5f4e&quot;,&quot;title&quot;:&quot;find()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance find() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const i=new NodePyATVInstance({atvscriptPath:\&quot;test\&quot;});await i.find({spawn:createFakeSpawn(cp=&gt;{assert.strictEqual(cp.cmd(),\&quot;test\&quot;);cp.stdout({\&quot;result\&quot;:\&quot;success\&quot;,\&quot;datetime\&quot;:\&quot;2020-11-06T20:47:30.840022+01:00\&quot;,\&quot;devices\&quot;:[]}).end()})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9900cc2f-2433-450c-be8b-2623fee07617&quot;,&quot;parentUUID&quot;:&quot;0080cfd6-b929-408c-8c23-fe50e52c5f4e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9900cc2f-2433-450c-be8b-2623fee07617&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;72f4a58a-ff0e-44b9-a860-a5d6203bacfe&quot;,&quot;title&quot;:&quot;device()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance device() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const i=new NodePyATVInstance({debug:true});const d=i.device({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;});assert.deepStrictEqual(d.debug,true)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;af61ff17-bc96-40b7-9187-eed0bc52728e&quot;,&quot;parentUUID&quot;:&quot;72f4a58a-ff0e-44b9-a860-a5d6203bacfe&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;af61ff17-bc96-40b7-9187-eed0bc52728e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f03faab6-cd1e-4468-ba85-2f630fe88758&quot;,&quot;title&quot;:&quot;Type Exports&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Type NodePyATVProtocol should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVProtocol should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVProtocol)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fbe736db-6fad-4ef3-a486-bc75828071b0&quot;,&quot;parentUUID&quot;:&quot;f03faab6-cd1e-4468-ba85-2f630fe88758&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVMediaType should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVMediaType should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVMediaType)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a9ae1c7d-c0e8-4d41-8cc1-accf1d34da79&quot;,&quot;parentUUID&quot;:&quot;f03faab6-cd1e-4468-ba85-2f630fe88758&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVDeviceEvent should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVDeviceEvent should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVDeviceEvent)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bbe422ec-c838-4bc0-9596-033d3a8ccc29&quot;,&quot;parentUUID&quot;:&quot;f03faab6-cd1e-4468-ba85-2f630fe88758&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVDeviceState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVDeviceState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVDeviceState)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9e88e069-a38c-4ae0-844b-ee24d8f6b892&quot;,&quot;parentUUID&quot;:&quot;f03faab6-cd1e-4468-ba85-2f630fe88758&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVRepeatState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVRepeatState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVRepeatState)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7b3fdb9e-b2f6-4ac8-b925-c7d7b955d7b1&quot;,&quot;parentUUID&quot;:&quot;f03faab6-cd1e-4468-ba85-2f630fe88758&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVShuffleState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVShuffleState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVShuffleState)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a6ab20da-a11a-4935-8724-ee49176a5040&quot;,&quot;parentUUID&quot;:&quot;f03faab6-cd1e-4468-ba85-2f630fe88758&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVKeys should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVKeys should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVKeys)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5e2b7d17-b7f8-4e13-b537-44a4e624038d&quot;,&quot;parentUUID&quot;:&quot;f03faab6-cd1e-4468-ba85-2f630fe88758&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVInstanceOptions should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVInstanceOptions should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVListenerState)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d3d1a47a-d3c9-45fb-a4f0-5479d5a0b43c&quot;,&quot;parentUUID&quot;:&quot;f03faab6-cd1e-4468-ba85-2f630fe88758&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVPowerState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVPowerState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVPowerState)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;50bf0dac-dc59-46f4-9a9d-b2adc69533ec&quot;,&quot;parentUUID&quot;:&quot;f03faab6-cd1e-4468-ba85-2f630fe88758&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fbe736db-6fad-4ef3-a486-bc75828071b0&quot;,&quot;a9ae1c7d-c0e8-4d41-8cc1-accf1d34da79&quot;,&quot;bbe422ec-c838-4bc0-9596-033d3a8ccc29&quot;,&quot;9e88e069-a38c-4ae0-844b-ee24d8f6b892&quot;,&quot;7b3fdb9e-b2f6-4ac8-b925-c7d7b955d7b1&quot;,&quot;a6ab20da-a11a-4935-8724-ee49176a5040&quot;,&quot;5e2b7d17-b7f8-4e13-b537-44a4e624038d&quot;,&quot;d3d1a47a-d3c9-45fb-a4f0-5479d5a0b43c&quot;,&quot;50bf0dac-dc59-46f4-9a9d-b2adc69533ec&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a7d05f2a-ae1a-44f1-bd3d-a478844ab7eb&quot;,&quot;title&quot;:&quot;Tools&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;269e1c12-b71a-4ae9-9de2-5decda1eefb4&quot;,&quot;title&quot;:&quot;addRequestId() / removeRequestId()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a string&quot;,&quot;fullTitle&quot;:&quot;Tools addRequestId() / removeRequestId() should return a string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id=addRequestId();assert.strictEqual(typeof id,\&quot;string\&quot;);removeRequestId(id)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c9e2f12c-93e4-4bfa-8540-28488542cc62&quot;,&quot;parentUUID&quot;:&quot;269e1c12-b71a-4ae9-9de2-5decda1eefb4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work if given id is not in index&quot;,&quot;fullTitle&quot;:&quot;Tools addRequestId() / removeRequestId() should work if given id is not in index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;removeRequestId(\&quot;FOO\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;45f9d915-72a3-42fc-9fbd-864d0caeaee3&quot;,&quot;parentUUID&quot;:&quot;269e1c12-b71a-4ae9-9de2-5decda1eefb4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c9e2f12c-93e4-4bfa-8540-28488542cc62&quot;,&quot;45f9d915-72a3-42fc-9fbd-864d0caeaee3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;11401f70-e29a-490f-8933-7468d02fd4fc&quot;,&quot;title&quot;:&quot;debug()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work without any options&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work without any options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(\&quot;TEST\&quot;,\&quot;Hello World.\&quot;,{})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6bb0efc2-5f06-454c-87b7-1c10e443ddc0&quot;,&quot;parentUUID&quot;:&quot;11401f70-e29a-490f-8933-7468d02fd4fc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with default logger&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with default logger&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(\&quot;TEST\&quot;,\&quot;Hello World.\&quot;,{debug:true})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d464f515-0ab0-4531-bd85-1ee5dbac4f8a&quot;,&quot;parentUUID&quot;:&quot;11401f70-e29a-490f-8933-7468d02fd4fc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with custom logger&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with custom logger&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(\&quot;TEST\&quot;,\&quot;Hello World.\&quot;,{debug:__name(function(msg){assert.strictEqual(this,null);assert.ok(msg.includes(\&quot;Hello World\&quot;))},\&quot;debug\&quot;)})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;547a7f3f-71e9-4907-a354-ed2f33703afa&quot;,&quot;parentUUID&quot;:&quot;11401f70-e29a-490f-8933-7468d02fd4fc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with colors disabled&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with colors disabled&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(\&quot;TEST\&quot;,\&quot;Hello World.\&quot;,{noColors:true})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b02cd4bb-0106-4b2c-9149-462306182117&quot;,&quot;parentUUID&quot;:&quot;11401f70-e29a-490f-8933-7468d02fd4fc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with custom logger and colors disabled&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with custom logger and colors disabled&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(\&quot;TEST\&quot;,\&quot;Hello World.\&quot;,{noColors:true,debug:__name(function(msg){assert.strictEqual(this,null);assert.strictEqual(msg,\&quot;[node-pyatv][TEST] Hello World.\&quot;)},\&quot;debug\&quot;)})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3ef6cbba-affe-4d32-b2bd-f10b7d3fde04&quot;,&quot;parentUUID&quot;:&quot;11401f70-e29a-490f-8933-7468d02fd4fc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6bb0efc2-5f06-454c-87b7-1c10e443ddc0&quot;,&quot;d464f515-0ab0-4531-bd85-1ee5dbac4f8a&quot;,&quot;547a7f3f-71e9-4907-a354-ed2f33703afa&quot;,&quot;b02cd4bb-0106-4b2c-9149-462306182117&quot;,&quot;3ef6cbba-affe-4d32-b2bd-f10b7d3fde04&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d898eb50-3611-4343-bb0e-29f64f1067ad&quot;,&quot;title&quot;:&quot;getExecutable()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should handle atvremotePath if set&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle atvremotePath if set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=getExecutable(NodePyATVExecutableType.atvremote,{atvremotePath:\&quot;/tmp/1\&quot;,atvscriptPath:\&quot;/tmp/2\&quot;});assert.strictEqual(result,\&quot;/tmp/1\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3066508c-1f76-4ccd-af6e-8eee7d9254f9&quot;,&quot;parentUUID&quot;:&quot;d898eb50-3611-4343-bb0e-29f64f1067ad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle atvscriptPath if set&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle atvscriptPath if set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=getExecutable(NodePyATVExecutableType.atvscript,{atvremotePath:\&quot;/tmp/1\&quot;,atvscriptPath:\&quot;/tmp/2\&quot;});assert.strictEqual(result,\&quot;/tmp/2\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5e7548df-32f9-4925-8b04-cd5abd8ac593&quot;,&quot;parentUUID&quot;:&quot;d898eb50-3611-4343-bb0e-29f64f1067ad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle default for atvremote&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle default for atvremote&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=getExecutable(NodePyATVExecutableType.atvremote,{atvscriptPath:\&quot;/tmp\&quot;});assert.strictEqual(result,\&quot;atvremote\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b5dc9d0e-e373-4d13-bde3-6b3638472e06&quot;,&quot;parentUUID&quot;:&quot;d898eb50-3611-4343-bb0e-29f64f1067ad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle default for atvscript&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle default for atvscript&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=getExecutable(NodePyATVExecutableType.atvscript,{atvremotePath:\&quot;/tmp\&quot;});assert.strictEqual(result,\&quot;atvscript\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a79ebcf9-4143-49e3-9915-2692da01c785&quot;,&quot;parentUUID&quot;:&quot;d898eb50-3611-4343-bb0e-29f64f1067ad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3066508c-1f76-4ccd-af6e-8eee7d9254f9&quot;,&quot;5e7548df-32f9-4925-8b04-cd5abd8ac593&quot;,&quot;b5dc9d0e-e373-4d13-bde3-6b3638472e06&quot;,&quot;a79ebcf9-4143-49e3-9915-2692da01c785&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6671bb6c-d5fb-44a2-898e-364f1d372279&quot;,&quot;title&quot;:&quot;getParameters()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;empty case&quot;,&quot;fullTitle&quot;:&quot;Tools getParameters() empty case&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await getParameters();assert.deepEqual(result,[])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0641e4b4-dcbf-4b5a-9f7f-f94350311631&quot;,&quot;parentUUID&quot;:&quot;6671bb6c-d5fb-44a2-898e-364f1d372279&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;easy case&quot;,&quot;fullTitle&quot;:&quot;Tools getParameters() easy case&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await getParameters({host:\&quot;192.168.178.2\&quot;});assert.deepEqual(result,[\&quot;-s\&quot;,\&quot;192.168.178.2\&quot;])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7f4880fb-34f9-452b-8a70-32f0ff24879d&quot;,&quot;parentUUID&quot;:&quot;6671bb6c-d5fb-44a2-898e-364f1d372279&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;full case&quot;,&quot;fullTitle&quot;:&quot;Tools getParameters() full case&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await getParameters({hosts:[\&quot;192.168.178.2\&quot;,\&quot;192.168.178.3\&quot;],id:\&quot;****\&quot;,protocol:NodePyATVProtocol.mrp,dmapCredentials:\&quot;****\&quot;,mrpCredentials:\&quot;****\&quot;,airplayCredentials:\&quot;****\&quot;,companionCredentials:\&quot;1234\&quot;,raopCredentials:\&quot;::foo:\&quot;});assert.deepEqual(result,[\&quot;-s\&quot;,\&quot;192.168.178.2,192.168.178.3\&quot;,\&quot;-i\&quot;,\&quot;****\&quot;,\&quot;--protocol\&quot;,\&quot;mrp\&quot;,\&quot;--dmap-credentials\&quot;,\&quot;****\&quot;,\&quot;--mrp-credentials\&quot;,\&quot;****\&quot;,\&quot;--airplay-credentials\&quot;,\&quot;****\&quot;,\&quot;--companion-credentials\&quot;,\&quot;1234\&quot;,\&quot;--raop-credentials\&quot;,\&quot;::foo:\&quot;])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dc9b74ba-6e59-484c-98d4-96bda6ee70b4&quot;,&quot;parentUUID&quot;:&quot;6671bb6c-d5fb-44a2-898e-364f1d372279&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0641e4b4-dcbf-4b5a-9f7f-f94350311631&quot;,&quot;7f4880fb-34f9-452b-8a70-32f0ff24879d&quot;,&quot;dc9b74ba-6e59-484c-98d4-96bda6ee70b4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;99481b67-51ab-46f5-b5ec-8ca7cbb34004&quot;,&quot;title&quot;:&quot;parseState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work with empty data&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should work with empty data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input={};const result=parseState(input,\&quot;\&quot;,{});assert.deepStrictEqual(result,{dateTime:null,hash:null,mediaType:null,deviceState:null,title:null,artist:null,album:null,genre:null,totalTime:null,position:null,shuffle:null,repeat:null,app:null,appId:null,powerState:null,focusState:null,volume:null,outputDevices:null,contentIdentifier:null,episodeNumber:null,seasonNumber:null,seriesName:null})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cc490d04-ee6e-4dac-a4f2-07fee5b09483&quot;,&quot;parentUUID&quot;:&quot;99481b67-51ab-46f5-b5ec-8ca7cbb34004&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work without data&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should work without data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=parseState(null,\&quot;\&quot;,{});assert.deepStrictEqual(result,{dateTime:null,hash:null,mediaType:null,deviceState:null,title:null,artist:null,album:null,genre:null,totalTime:null,position:null,shuffle:null,repeat:null,app:null,appId:null,powerState:null,focusState:null,volume:null,outputDevices:null,contentIdentifier:null,episodeNumber:null,seasonNumber:null,seriesName:null})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3b7b4aed-156f-41cf-8e34-d8435ce0679a&quot;,&quot;parentUUID&quot;:&quot;99481b67-51ab-46f5-b5ec-8ca7cbb34004&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with example data&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should work with example data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input={result:\&quot;success\&quot;,datetime:\&quot;2020-11-07T22:38:43.608030+01:00\&quot;,hash:\&quot;100e0ab6-6ff5-4199-9c04-a7107ff78712\&quot;,media_type:\&quot;video\&quot;,device_state:\&quot;playing\&quot;,title:\&quot;Solo: A Star Wars Story\&quot;,artist:null,album:null,genre:null,total_time:8097,position:27,shuffle:\&quot;off\&quot;,repeat:\&quot;off\&quot;,app:\&quot;Disney+\&quot;,app_id:\&quot;com.disney.disneyplus\&quot;,power_state:null,focus_state:null,volume:null,output_devices:null,content_identifier:null,episode_number:null,season_number:null,series_name:null};const result=parseState(input,\&quot;\&quot;,{});assert.deepStrictEqual(result,{dateTime:new Date(\&quot;2020-11-07T22:38:43.608030+01:00\&quot;),hash:\&quot;100e0ab6-6ff5-4199-9c04-a7107ff78712\&quot;,mediaType:NodePyATVMediaType.video,deviceState:NodePyATVDeviceState.playing,title:\&quot;Solo: A Star Wars Story\&quot;,artist:null,album:null,genre:null,totalTime:8097,position:27,shuffle:NodePyATVShuffleState.off,repeat:NodePyATVRepeatState.off,app:\&quot;Disney+\&quot;,appId:\&quot;com.disney.disneyplus\&quot;,powerState:null,focusState:null,volume:null,outputDevices:null,contentIdentifier:null,episodeNumber:null,seasonNumber:null,seriesName:null})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;16655fe2-c1b9-4e5e-85c4-754daeb21f5a&quot;,&quot;parentUUID&quot;:&quot;99481b67-51ab-46f5-b5ec-8ca7cbb34004&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw an error for pyatv exceptions&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should throw an error for pyatv exceptions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input={result:\&quot;failure\&quot;,datetime:\&quot;2021-11-24T21:13:36.424576+03:00\&quot;,exception:\&quot;invalid credentials: 321\&quot;,stacktrace:&#x27;Traceback (most recent call last):\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\&quot;, line 302, in appstart\\n    print(args.output(await _handle_command(args, abort_sem, loop)), flush=True)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\&quot;, line 196, in _handle_command\\n    atv = await connect(config, loop, protocol=Protocol.MRP)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/__init__.py\&quot;, line 96, in connect\\n    for setup_data in proto_methods.setup(\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\&quot;, line 192, in setup\\n    stream = AirPlayStream(config, service)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\&quot;, line 79, in __init__\\n    self._credentials: HapCredentials = parse_credentials(self.service.credentials)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/auth/hap_pairing.py\&quot;, line 139, in parse_credentials\\n    raise exceptions.InvalidCredentialsError(\&quot;invalid credentials: \&quot; + detail_string)\\npyatv.exceptions.InvalidCredentialsError: invalid credentials: 321\\n&#x27;};assert.throws(()=&gt;{parseState(input,\&quot;\&quot;,{})},/Got pyatv Error: invalid credentials: 321/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0f67f107-47c3-49e5-ad90-e9ff47859db3&quot;,&quot;parentUUID&quot;:&quot;99481b67-51ab-46f5-b5ec-8ca7cbb34004&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should ignore date if it&#x27;s an invalid date&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should ignore date if it&#x27;s an invalid date&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input={datetime:\&quot;today\&quot;};const result=parseState(input,\&quot;\&quot;,{});assert.deepStrictEqual(result,{dateTime:null,hash:null,mediaType:null,deviceState:null,title:null,artist:null,album:null,genre:null,totalTime:null,position:null,shuffle:null,repeat:null,app:null,appId:null,powerState:null,focusState:null,volume:null,outputDevices:null,contentIdentifier:null,episodeNumber:null,seasonNumber:null,seriesName:null})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3a77c289-6911-41c7-b448-ebc76607484f&quot;,&quot;parentUUID&quot;:&quot;99481b67-51ab-46f5-b5ec-8ca7cbb34004&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should ignore data if unsupported type&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should ignore data if unsupported type&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input={result:\&quot;success\&quot;,datetime:true,hash:1337,media_type:false,device_state:43,title:void 0,artist:90,album:Infinity,genre:Math.PI,total_time:\&quot;23min\&quot;,position:\&quot;0:30.123\&quot;,shuffle:false,repeat:true,app:0,app_id:891645381647289,power_state:null,focus_state:null,volume:null,output_devices:null,content_identifier:null,episode_number:null,season_number:null,series_name:null};const result=parseState(input,\&quot;\&quot;,{});assert.deepStrictEqual(result,{dateTime:null,hash:null,mediaType:null,deviceState:null,title:null,artist:null,album:null,genre:null,totalTime:null,position:null,shuffle:null,repeat:null,app:null,appId:null,powerState:null,focusState:null,volume:null,outputDevices:null,contentIdentifier:null,episodeNumber:null,seasonNumber:null,seriesName:null})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4fe9d42d-43b0-404c-9ec8-8d9fa578da4b&quot;,&quot;parentUUID&quot;:&quot;99481b67-51ab-46f5-b5ec-8ca7cbb34004&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should ignore enums with unsupported valid&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should ignore enums with unsupported valid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input={media_type:\&quot;3d-experience\&quot;,device_state:\&quot;initiating\&quot;,shuffle:\&quot;everything\&quot;,repeat:\&quot;nothing\&quot;};const result=parseState(input,\&quot;\&quot;,{});assert.deepStrictEqual(result,{dateTime:null,hash:null,mediaType:null,deviceState:null,title:null,artist:null,album:null,genre:null,totalTime:null,position:null,shuffle:null,repeat:null,app:null,appId:null,powerState:null,focusState:null,volume:null,outputDevices:null,contentIdentifier:null,episodeNumber:null,seasonNumber:null,seriesName:null})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ea7fdace-9095-4f75-b326-98042aa69c74&quot;,&quot;parentUUID&quot;:&quot;99481b67-51ab-46f5-b5ec-8ca7cbb34004&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cc490d04-ee6e-4dac-a4f2-07fee5b09483&quot;,&quot;3b7b4aed-156f-41cf-8e34-d8435ce0679a&quot;,&quot;16655fe2-c1b9-4e5e-85c4-754daeb21f5a&quot;,&quot;0f67f107-47c3-49e5-ad90-e9ff47859db3&quot;,&quot;3a77c289-6911-41c7-b448-ebc76607484f&quot;,&quot;4fe9d42d-43b0-404c-9ec8-8d9fa578da4b&quot;,&quot;ea7fdace-9095-4f75-b326-98042aa69c74&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;10.7.3&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;node-pyatv&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report/assets&quot;,&quot;jsonFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/mochawesome-report/mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>