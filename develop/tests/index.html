<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:102,&quot;tests&quot;:174,&quot;passes&quot;:172,&quot;pending&quot;:2,&quot;failures&quot;:0,&quot;start&quot;:&quot;2024-11-14T17:23:40.287Z&quot;,&quot;end&quot;:&quot;2024-11-14T17:23:52.154Z&quot;,&quot;duration&quot;:11867,&quot;testsRegistered&quot;:174,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:1.1494252873563218,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;e584fba5-76e4-4af2-aebd-decedf04350e&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;41e47970-56e0-4c4c-a282-f0daca399c56&quot;,&quot;title&quot;:&quot;NodePyATVDeviceEvent&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;cf73bce9-9312-40e3-8a8a-9549a4bd2dd7&quot;,&quot;title&quot;:&quot;get key()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get key() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event=new NodePyATVDeviceEvent({key:\&quot;genre\&quot;,old:\&quot;Jazz\&quot;,new:\&quot;Rock\&quot;,device:new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testinstance\&quot;})});assert.strictEqual(event.key,\&quot;genre\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;107e086c-635a-4a9b-9d3a-866a1623946a&quot;,&quot;parentUUID&quot;:&quot;cf73bce9-9312-40e3-8a8a-9549a4bd2dd7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;107e086c-635a-4a9b-9d3a-866a1623946a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ed82eef6-3f67-4422-8686-f77673dddb38&quot;,&quot;title&quot;:&quot;get oldValue()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get oldValue() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event=new NodePyATVDeviceEvent({key:\&quot;genre\&quot;,old:\&quot;Jazz\&quot;,new:\&quot;Rock\&quot;,device:new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testinstance\&quot;})});assert.strictEqual(event.oldValue,\&quot;Jazz\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;440535fa-b4cb-4fe2-8b2c-3ea070831d0f&quot;,&quot;parentUUID&quot;:&quot;ed82eef6-3f67-4422-8686-f77673dddb38&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;440535fa-b4cb-4fe2-8b2c-3ea070831d0f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4d5bc8e6-72bc-4c9a-ae4a-ccd7dcbabe20&quot;,&quot;title&quot;:&quot;get newValue()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get newValue() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event=new NodePyATVDeviceEvent({key:\&quot;genre\&quot;,old:\&quot;Jazz\&quot;,new:\&quot;Rock\&quot;,device:new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testinstance\&quot;})});assert.strictEqual(event.newValue,\&quot;Rock\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;66903e41-95ff-4280-97bb-e4cc98601d44&quot;,&quot;parentUUID&quot;:&quot;4d5bc8e6-72bc-4c9a-ae4a-ccd7dcbabe20&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;66903e41-95ff-4280-97bb-e4cc98601d44&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7ca0157f-b41f-4968-855c-6a3d6dd79559&quot;,&quot;title&quot;:&quot;get value()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get value() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event=new NodePyATVDeviceEvent({key:\&quot;genre\&quot;,old:\&quot;Jazz\&quot;,new:\&quot;Rock\&quot;,device:new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testinstance\&quot;})});assert.strictEqual(event.value,\&quot;Rock\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b8123155-cb35-47ae-9c5a-b68cb73335e0&quot;,&quot;parentUUID&quot;:&quot;7ca0157f-b41f-4968-855c-6a3d6dd79559&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b8123155-cb35-47ae-9c5a-b68cb73335e0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;185f53cf-9a6c-45b1-988d-5a052f1816c6&quot;,&quot;title&quot;:&quot;get device()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get device() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testinstance\&quot;});const event=new NodePyATVDeviceEvent({key:\&quot;genre\&quot;,old:\&quot;Jazz\&quot;,new:\&quot;Rock\&quot;,device});assert.deepEqual(event.device,device)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;328464f9-8150-4e94-8515-eed3e41adf13&quot;,&quot;parentUUID&quot;:&quot;185f53cf-9a6c-45b1-988d-5a052f1816c6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;328464f9-8150-4e94-8515-eed3e41adf13&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c9a82468-5556-44be-beea-de3458fe5a50&quot;,&quot;title&quot;:&quot;NodePyATVDeviceEvents&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;17f2e50a-626f-43d7-9b92-0bb05075f43a&quot;,&quot;title&quot;:&quot;applyStateAndEmitEvents()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should emit update:key event&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit update:key event&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});await new Promise(cb=&gt;{device.once(\&quot;update:title\&quot;,event=&gt;{assert.ok(event instanceof NodePyATVDeviceEvent);assert.strictEqual(event.key,\&quot;title\&quot;);assert.strictEqual(event.oldValue,null);assert.strictEqual(event.newValue,\&quot;My Movie\&quot;);assert.strictEqual(event.value,\&quot;My Movie\&quot;);assert.deepStrictEqual(event.device,device);cb(void 0)})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;165f4184-b376-4704-b94d-756fc4f81b53&quot;,&quot;parentUUID&quot;:&quot;17f2e50a-626f-43d7-9b92-0bb05075f43a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit update event&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit update event&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});await new Promise(cb=&gt;{device.once(\&quot;update\&quot;,event=&gt;{assert.ok(event instanceof NodePyATVDeviceEvent);assert.strictEqual(event.key,\&quot;title\&quot;);assert.strictEqual(event.oldValue,null);assert.strictEqual(event.newValue,\&quot;My Movie\&quot;);assert.strictEqual(event.value,\&quot;My Movie\&quot;);assert.deepStrictEqual(event.device,device);cb(void 0)})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;271bb18e-edac-42dd-8fd9-e69e822326d4&quot;,&quot;parentUUID&quot;:&quot;17f2e50a-626f-43d7-9b92-0bb05075f43a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit update:key event before update&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit update:key event before update&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});const sort=[];await Promise.race([new Promise(cb=&gt;{device.once(\&quot;update\&quot;,()=&gt;{sort.push(\&quot;update\&quot;);cb(void 0)})}),new Promise(cb=&gt;{device.once(\&quot;update:title\&quot;,()=&gt;{sort.push(\&quot;update:title\&quot;);cb(void 0)})})]);assert.deepStrictEqual(sort,[\&quot;update:title\&quot;,\&quot;update\&quot;])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7911bbca-db8d-4cca-b686-044f529e61a8&quot;,&quot;parentUUID&quot;:&quot;17f2e50a-626f-43d7-9b92-0bb05075f43a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error events on failures&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit error events on failures&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;failure\&quot;,datetime:\&quot;2021-11-24T21:13:36.424576+03:00\&quot;,exception:\&quot;invalid credentials: 321\&quot;,stacktrace:&#x27;Traceback (most recent call last):\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\&quot;, line 302, in appstart\\n    print(args.output(await _handle_command(args, abort_sem, loop)), flush=True)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\&quot;, line 196, in _handle_command\\n    atv = await connect(config, loop, protocol=Protocol.MRP)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/__init__.py\&quot;, line 96, in connect\\n    for setup_data in proto_methods.setup(\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\&quot;, line 192, in setup\\n    stream = AirPlayStream(config, service)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\&quot;, line 79, in __init__\\n    self._credentials: HapCredentials = parse_credentials(self.service.credentials)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/auth/hap_pairing.py\&quot;, line 139, in parse_credentials\\n    raise exceptions.InvalidCredentialsError(\&quot;invalid credentials: \&quot; + detail_string)\\npyatv.exceptions.InvalidCredentialsError: invalid credentials: 321\\n&#x27;})})});await new Promise(cb=&gt;{device.once(\&quot;error\&quot;,error=&gt;{assert.ok(error instanceof Error);assert.ok(error.toString().includes(\&quot;invalid credentials: 321\&quot;));cb(void 0)})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d56a6826-b3fa-4a9d-aff9-622add6d9651&quot;,&quot;parentUUID&quot;:&quot;17f2e50a-626f-43d7-9b92-0bb05075f43a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not emit an update if new value is same as old one&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should not emit an update if new value is same as old one&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let spawnCounter=0;let eventCounter=0;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{if(spawnCounter===0){cp.onStdIn(()=&gt;cp.end())}cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;});spawnCounter++;if(spawnCounter&gt;=2){cp.end()}})});const listener=__name(()=&gt;{eventCounter++},\&quot;listener\&quot;);device.on(\&quot;update\&quot;,listener);await new Promise(cb=&gt;setTimeout(cb,0));await device.getState();device.off(\&quot;update\&quot;,listener);assert.strictEqual(spawnCounter,2);assert.strictEqual(eventCounter,1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dbda2ffd-015d-4887-a738-ee83d9d1377f&quot;,&quot;parentUUID&quot;:&quot;17f2e50a-626f-43d7-9b92-0bb05075f43a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error event if event listener throws an exception&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit error event if event listener throws an exception&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});let callCounter=0;const error=new Error(\&quot;This is an error. Be nice.\&quot;);device.once(\&quot;error\&quot;,err=&gt;{assert.strictEqual(err,error);callCounter++});const listener=__name(()=&gt;{throw error},\&quot;listener\&quot;);device.on(\&quot;update\&quot;,listener);await new Promise(cb=&gt;setTimeout(cb,0));device.off(\&quot;update\&quot;,listener);assert.strictEqual(callCounter,1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4cedb4f0-74e5-4a4c-af9a-beb4031ee7ae&quot;,&quot;parentUUID&quot;:&quot;17f2e50a-626f-43d7-9b92-0bb05075f43a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should also work with powerState&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should also work with powerState&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,datetime:new Date().toJSON(),power_state:\&quot;off\&quot;})})});await new Promise(cb=&gt;{device.once(\&quot;update:powerState\&quot;,event=&gt;{assert.ok(event instanceof NodePyATVDeviceEvent);assert.strictEqual(event.key,\&quot;powerState\&quot;);assert.strictEqual(event.oldValue,null);assert.strictEqual(event.newValue,\&quot;off\&quot;);assert.strictEqual(event.newValue,NodePyATVPowerState.off);assert.strictEqual(event.value,\&quot;off\&quot;);assert.strictEqual(event.value,NodePyATVPowerState.off);assert.deepStrictEqual(event.device,device);cb(void 0)})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;01e64520-9596-404d-87a1-4dca2d84b5ac&quot;,&quot;parentUUID&quot;:&quot;17f2e50a-626f-43d7-9b92-0bb05075f43a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only one event for powerState changes&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should only one event for powerState changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,datetime:new Date().toJSON(),power_state:\&quot;off\&quot;});cp.end()})});let counter=0;device.on(\&quot;update\&quot;,event=&gt;{assert.ok(event instanceof NodePyATVDeviceEvent);assert.strictEqual(event.key,\&quot;powerState\&quot;);assert.strictEqual(event.oldValue,null);assert.strictEqual(event.newValue,\&quot;off\&quot;);assert.strictEqual(event.newValue,NodePyATVPowerState.off);assert.strictEqual(event.value,\&quot;off\&quot;);assert.strictEqual(event.value,NodePyATVPowerState.off);assert.deepStrictEqual(event.device,device);counter++});await new Promise(cb=&gt;setTimeout(cb,10));assert.strictEqual(counter,1);device.removeAllListeners(\&quot;update\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a004ddfe-d0fb-4e8b-a2ad-26b10f6b7d99&quot;,&quot;parentUUID&quot;:&quot;17f2e50a-626f-43d7-9b92-0bb05075f43a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only one event for focusState changes&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should only one event for focusState changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,datetime:new Date().toJSON(),focus_state:\&quot;unfocused\&quot;});cp.end()})});let counter=0;device.on(\&quot;update\&quot;,event=&gt;{assert.ok(event instanceof NodePyATVDeviceEvent);assert.strictEqual(event.key,\&quot;focusState\&quot;);assert.strictEqual(event.oldValue,null);assert.strictEqual(event.newValue,\&quot;unfocused\&quot;);assert.strictEqual(event.newValue,NodePyATVFocusState.unfocused);assert.strictEqual(event.value,\&quot;unfocused\&quot;);assert.strictEqual(event.value,NodePyATVFocusState.unfocused);assert.deepStrictEqual(event.device,device);counter++});await new Promise(cb=&gt;setTimeout(cb,10));assert.strictEqual(counter,1);device.removeAllListeners(\&quot;update\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ca58519e-114e-4e77-8b7f-461ba9a06aa7&quot;,&quot;parentUUID&quot;:&quot;17f2e50a-626f-43d7-9b92-0bb05075f43a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only one event for outputDevices changes&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should only one event for outputDevices changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,datetime:new Date().toJSON(),output_devices:[{name:\&quot;Living room\&quot;,identifier:\&quot;AAAAAAAA-BBBB-CCCC-DDDD-EEEEEEEEEEEE\&quot;}]});cp.end()})});let counter=0;device.on(\&quot;update\&quot;,event=&gt;{assert.ok(event instanceof NodePyATVDeviceEvent);assert.strictEqual(event.key,\&quot;outputDevices\&quot;);assert.strictEqual(event.oldValue,null);assert.deepStrictEqual(event.newValue,[{name:\&quot;Living room\&quot;,identifier:\&quot;AAAAAAAA-BBBB-CCCC-DDDD-EEEEEEEEEEEE\&quot;}]);assert.deepStrictEqual(event.value,[{name:\&quot;Living room\&quot;,identifier:\&quot;AAAAAAAA-BBBB-CCCC-DDDD-EEEEEEEEEEEE\&quot;}]);assert.deepStrictEqual(event.device,device);counter++});await new Promise(cb=&gt;setTimeout(cb,10));assert.strictEqual(counter,1);device.removeAllListeners(\&quot;update\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2f0ea4ab-976a-481e-81c5-304536876f50&quot;,&quot;parentUUID&quot;:&quot;17f2e50a-626f-43d7-9b92-0bb05075f43a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only one event for volume changes&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should only one event for volume changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,datetime:new Date().toJSON(),volume:20});cp.end()})});let counter=0;device.on(\&quot;update\&quot;,event=&gt;{assert.ok(event instanceof NodePyATVDeviceEvent);assert.strictEqual(event.key,\&quot;volume\&quot;);assert.strictEqual(event.oldValue,null);assert.strictEqual(event.newValue,20);assert.strictEqual(event.value,20);assert.deepStrictEqual(event.device,device);counter++});await new Promise(cb=&gt;setTimeout(cb,10));assert.strictEqual(counter,1);device.removeAllListeners(\&quot;update\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c5bc608b-4824-4a9f-bd93-467db6716705&quot;,&quot;parentUUID&quot;:&quot;17f2e50a-626f-43d7-9b92-0bb05075f43a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not trigger any events for newly added fields&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should not trigger any events for newly added fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,datetime:new Date().toJSON(),foo:\&quot;bar\&quot;});cp.end()})});device.on(\&quot;update\&quot;,event=&gt;{assert.fail(`Got an update event for a new field: ${event}`)});await new Promise(cb=&gt;setTimeout(cb,10));device.removeAllListeners(\&quot;update\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0deac09d-f1e0-4e45-9d1f-8780c61adcf7&quot;,&quot;parentUUID&quot;:&quot;17f2e50a-626f-43d7-9b92-0bb05075f43a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;165f4184-b376-4704-b94d-756fc4f81b53&quot;,&quot;271bb18e-edac-42dd-8fd9-e69e822326d4&quot;,&quot;7911bbca-db8d-4cca-b686-044f529e61a8&quot;,&quot;d56a6826-b3fa-4a9d-aff9-622add6d9651&quot;,&quot;dbda2ffd-015d-4887-a738-ee83d9d1377f&quot;,&quot;4cedb4f0-74e5-4a4c-af9a-beb4031ee7ae&quot;,&quot;01e64520-9596-404d-87a1-4dca2d84b5ac&quot;,&quot;a004ddfe-d0fb-4e8b-a2ad-26b10f6b7d99&quot;,&quot;ca58519e-114e-4e77-8b7f-461ba9a06aa7&quot;,&quot;2f0ea4ab-976a-481e-81c5-304536876f50&quot;,&quot;c5bc608b-4824-4a9f-bd93-467db6716705&quot;,&quot;0deac09d-f1e0-4e45-9d1f-8780c61adcf7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:66,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c847fe38-7d76-4ce9-ad7f-931b9d9d0ed1&quot;,&quot;title&quot;:&quot;start|stopListening()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should emit error if spawn fails&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should emit error if spawn fails&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const error=new Error;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.error(error).end()})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);device.on(\&quot;update\&quot;,listener);await new Promise(cb=&gt;{device.once(\&quot;error\&quot;,err=&gt;{assert.strictEqual(err,error);cb(void 0)})});device.off(\&quot;update\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4a7705e3-e834-48b6-b395-437bb49e8651&quot;,&quot;parentUUID&quot;:&quot;c847fe38-7d76-4ce9-ad7f-931b9d9d0ed1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error on stderr data&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should emit error on stderr data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.stderr(\&quot;Hello World!\&quot;).end()})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);device.on(\&quot;update\&quot;,listener);await new Promise(cb=&gt;{device.once(\&quot;error\&quot;,err=&gt;{assert.ok(err instanceof Error);assert.ok(err.toString().includes(\&quot;Got stderr output from pyatv: Hello World!\&quot;));cb(void 0)})});device.off(\&quot;update\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1efd89fa-551a-47ed-90b1-b56d988d236e&quot;,&quot;parentUUID&quot;:&quot;c847fe38-7d76-4ce9-ad7f-931b9d9d0ed1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error if stdout is not valid json&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should emit error if stdout is not valid json&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.stdout(\&quot;#\&quot;).end()})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);device.on(\&quot;update\&quot;,listener);await new Promise(cb=&gt;{device.once(\&quot;error\&quot;,err=&gt;{assert.ok(err instanceof Error);assert.ok(err.toString().includes(\&quot;Unable to parse stdout json: SyntaxError\&quot;));cb(void 0)})});device.off(\&quot;update\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;96422031-678e-4258-a4b9-5112b639b190&quot;,&quot;parentUUID&quot;:&quot;c847fe38-7d76-4ce9-ad7f-931b9d9d0ed1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should restart the process if it gets killed&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should restart the process if it gets killed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;pending&quot;,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c99a0b9e-a6ad-4a7f-b4bb-b6b32ab0af1a&quot;,&quot;parentUUID&quot;:&quot;c847fe38-7d76-4ce9-ad7f-931b9d9d0ed1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4a7705e3-e834-48b6-b395-437bb49e8651&quot;,&quot;1efd89fa-551a-47ed-90b1-b56d988d236e&quot;,&quot;96422031-678e-4258-a4b9-5112b639b190&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;c99a0b9e-a6ad-4a7f-b4bb-b6b32ab0af1a&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ed41c14e-768a-4937-8c7b-b0b82a960c8d&quot;,&quot;title&quot;:&quot;addListener() / removeAllListeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work without any exceptions&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents addListener() / removeAllListeners() should work without any exceptions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);device.addListener(\&quot;update\&quot;,listener);device.removeAllListeners(\&quot;update\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fc514bdc-d3b5-42f6-9eac-6a518a795340&quot;,&quot;parentUUID&quot;:&quot;ed41c14e-768a-4937-8c7b-b0b82a960c8d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fc514bdc-d3b5-42f6-9eac-6a518a795340&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ff19ef55-1e7d-4b82-9729-4fa45024743a&quot;,&quot;title&quot;:&quot;emit()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents emit() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end())})});const event=new NodePyATVDeviceEvent({key:\&quot;dateTime\&quot;,old:\&quot;foo\&quot;,new:\&quot;bar\&quot;,device});let executions=0;device.once(\&quot;test\&quot;,e=&gt;{executions++;assert.strictEqual(e,event);assert.strictEqual(executions,1);done()});device.emit(\&quot;test\&quot;,event)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f78f2a6f-94c4-4a10-82e4-95a80967b0cc&quot;,&quot;parentUUID&quot;:&quot;ff19ef55-1e7d-4b82-9729-4fa45024743a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f78f2a6f-94c4-4a10-82e4-95a80967b0cc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;86e3da83-7846-447f-bd08-74b9c1163fbc&quot;,&quot;title&quot;:&quot;eventNames()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents eventNames() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end())})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);device.on(\&quot;test\&quot;,listener);assert.deepStrictEqual(device.eventNames(),[\&quot;test\&quot;]);device.off(\&quot;test\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c15b2816-9211-482b-a3be-fc3633fe448f&quot;,&quot;parentUUID&quot;:&quot;86e3da83-7846-447f-bd08-74b9c1163fbc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c15b2816-9211-482b-a3be-fc3633fe448f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;377f4461-866a-4b4e-bd02-8ad63fa435ef&quot;,&quot;title&quot;:&quot;getMaxListeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents getMaxListeners() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end())})});const result=device.getMaxListeners();assert.ok(typeof result,\&quot;number\&quot;);assert.ok(result&gt;=10)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;02f7c08f-4d45-476c-a312-d3d66c4a612b&quot;,&quot;parentUUID&quot;:&quot;377f4461-866a-4b4e-bd02-8ad63fa435ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;02f7c08f-4d45-476c-a312-d3d66c4a612b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5e016a07-4a98-4524-a1ed-c380e028ae4c&quot;,&quot;title&quot;:&quot;listenerCount()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents listenerCount() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end())})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);assert.deepStrictEqual(device.listenerCount(\&quot;test\&quot;),0);device.on(\&quot;test\&quot;,listener);assert.deepStrictEqual(device.listenerCount(\&quot;test\&quot;),1);device.off(\&quot;test\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;848c5a52-3e4a-4e4b-b336-1e9dd9e9b4c6&quot;,&quot;parentUUID&quot;:&quot;5e016a07-4a98-4524-a1ed-c380e028ae4c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;848c5a52-3e4a-4e4b-b336-1e9dd9e9b4c6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c385deb7-55c8-47f9-b862-46cfd3e634eb&quot;,&quot;title&quot;:&quot;listeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents listeners() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end())})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);assert.deepStrictEqual(device.listeners(\&quot;test\&quot;).length,0);device.on(\&quot;test\&quot;,listener);assert.deepStrictEqual(device.listeners(\&quot;test\&quot;).length,1);assert.deepStrictEqual(device.listeners(\&quot;test\&quot;)[0],listener);device.off(\&quot;test\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1e611a95-9924-40fe-8c6d-89e11b8b34cc&quot;,&quot;parentUUID&quot;:&quot;c385deb7-55c8-47f9-b862-46cfd3e634eb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1e611a95-9924-40fe-8c6d-89e11b8b34cc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3d30b92e-9776-4a4f-a1c2-649926a3756c&quot;,&quot;title&quot;:&quot;prependListener()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents prependListener() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});const listener=__name(()=&gt;{device.removeAllListeners(\&quot;update\&quot;);done()},\&quot;listener\&quot;);device.prependListener(\&quot;update\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;efe21d04-e647-4012-a0e8-10698d9a282c&quot;,&quot;parentUUID&quot;:&quot;3d30b92e-9776-4a4f-a1c2-649926a3756c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;efe21d04-e647-4012-a0e8-10698d9a282c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b3dfe134-5b76-4145-ad93-cd4944668cc5&quot;,&quot;title&quot;:&quot;prependOnceListener()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents prependOnceListener() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});device.prependOnceListener(\&quot;update\&quot;,()=&gt;done())&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7cc92719-0449-4fdd-a2d6-cebba55ab786&quot;,&quot;parentUUID&quot;:&quot;b3dfe134-5b76-4145-ad93-cd4944668cc5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7cc92719-0449-4fdd-a2d6-cebba55ab786&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5eb876d9-76e4-4da8-9679-6f440f9a21cf&quot;,&quot;title&quot;:&quot;rawListeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents rawListeners() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end())})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);assert.deepStrictEqual(device.rawListeners(\&quot;test\&quot;).length,0);device.on(\&quot;test\&quot;,listener);assert.deepStrictEqual(device.rawListeners(\&quot;test\&quot;).length,1);assert.deepStrictEqual(device.rawListeners(\&quot;test\&quot;)[0],listener);device.off(\&quot;test\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;25c565f3-eddc-48ae-a689-0349170497a7&quot;,&quot;parentUUID&quot;:&quot;5eb876d9-76e4-4da8-9679-6f440f9a21cf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;25c565f3-eddc-48ae-a689-0349170497a7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9f7ccb05-c652-445e-bddb-b8f27735fe52&quot;,&quot;title&quot;:&quot;removeListener()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work without any exceptions&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents removeListener() should work without any exceptions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);device.addListener(\&quot;update\&quot;,listener);assert.deepStrictEqual(device.listenerCount(\&quot;update\&quot;),1);device.removeListener(\&quot;update\&quot;,listener);assert.deepStrictEqual(device.listenerCount(\&quot;update\&quot;),0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e982e8e4-216c-463c-9c10-887fa68e691c&quot;,&quot;parentUUID&quot;:&quot;9f7ccb05-c652-445e-bddb-b8f27735fe52&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e982e8e4-216c-463c-9c10-887fa68e691c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bbd53115-d19b-4dec-b177-473e786f6b56&quot;,&quot;title&quot;:&quot;NodePyATVDevice&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;48cc3f47-4cf2-4031-836a-0a3e1233afce&quot;,&quot;title&quot;:&quot;get name()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the name&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get name() should return the name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;});assert.strictEqual(device.name,\&quot;My Testdevice\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b02a5f5c-8d15-4b19-a9e4-1e907bf75bba&quot;,&quot;parentUUID&quot;:&quot;48cc3f47-4cf2-4031-836a-0a3e1233afce&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b02a5f5c-8d15-4b19-a9e4-1e907bf75bba&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;349dfc4f-6d6e-4c50-89ff-3bda9a205585&quot;,&quot;title&quot;:&quot;get host()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the host&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get host() should return the host&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;});assert.strictEqual(device.host,\&quot;192.168.178.2\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;81e8b757-31be-4c98-b35a-6f134d15e22d&quot;,&quot;parentUUID&quot;:&quot;349dfc4f-6d6e-4c50-89ff-3bda9a205585&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;81e8b757-31be-4c98-b35a-6f134d15e22d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;59ae3f9d-f0a4-4b8f-b390-bf90e2d07532&quot;,&quot;title&quot;:&quot;get id()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the id&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get id() should return the id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,id:\&quot;*****\&quot;});assert.strictEqual(device.id,\&quot;*****\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3862ba4-6c9c-40f6-a62d-6e42bd5091a2&quot;,&quot;parentUUID&quot;:&quot;59ae3f9d-f0a4-4b8f-b390-bf90e2d07532&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a3862ba4-6c9c-40f6-a62d-6e42bd5091a2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;243b7d79-35f8-4a50-87e6-76cf3ef360e4&quot;,&quot;title&quot;:&quot;get allIDs()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return all the IDs&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get allIDs() should return all the IDs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,id:\&quot;*****\&quot;,allIDs:[\&quot;some_id_1\&quot;,\&quot;some_id_2\&quot;,\&quot;some_id_3\&quot;]});assert.deepStrictEqual(device.allIDs,[\&quot;some_id_1\&quot;,\&quot;some_id_2\&quot;,\&quot;some_id_3\&quot;])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;17d39102-5951-4aa3-a3d0-e9865d2c9b24&quot;,&quot;parentUUID&quot;:&quot;243b7d79-35f8-4a50-87e6-76cf3ef360e4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;17d39102-5951-4aa3-a3d0-e9865d2c9b24&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a823fb86-6b4e-4602-9e9c-89ff5d76c495&quot;,&quot;title&quot;:&quot;get protocol()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the protocol&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get protocol() should return the protocol&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,protocol:NodePyATVProtocol.airplay});assert.strictEqual(device.protocol,NodePyATVProtocol.airplay)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;03b85838-a827-4c25-84b7-19f6bed2e9a8&quot;,&quot;parentUUID&quot;:&quot;a823fb86-6b4e-4602-9e9c-89ff5d76c495&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;03b85838-a827-4c25-84b7-19f6bed2e9a8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7c89b43e-d765-4d6a-978a-882bfd21cd8e&quot;,&quot;title&quot;:&quot;get mac()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the mac&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get mac() should return the mac&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,mac:\&quot;AA:BB:CC:DD:EE:FF\&quot;});assert.strictEqual(device.mac,\&quot;AA:BB:CC:DD:EE:FF\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6e736796-eea5-43b2-a288-9ea6d8941049&quot;,&quot;parentUUID&quot;:&quot;7c89b43e-d765-4d6a-978a-882bfd21cd8e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6e736796-eea5-43b2-a288-9ea6d8941049&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f3f25150-4d37-4305-89b2-dcc1f5c3304b&quot;,&quot;title&quot;:&quot;get model()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the model if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get model() should return the model if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;Vardagsrum\&quot;,host:\&quot;10.0.10.81\&quot;,id:\&quot;xxx\&quot;,model:\&quot;Gen4K\&quot;});assert.strictEqual(device.model,\&quot;Gen4K\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;73ee73fe-5da0-445e-a489-7dfe6f08230e&quot;,&quot;parentUUID&quot;:&quot;f3f25150-4d37-4305-89b2-dcc1f5c3304b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get model() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;Vardagsrum\&quot;,host:\&quot;10.0.10.81\&quot;});assert.strictEqual(device.model,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f446976-b0b0-46d9-b2ee-31c3e6d61546&quot;,&quot;parentUUID&quot;:&quot;f3f25150-4d37-4305-89b2-dcc1f5c3304b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;73ee73fe-5da0-445e-a489-7dfe6f08230e&quot;,&quot;1f446976-b0b0-46d9-b2ee-31c3e6d61546&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e59a630c-6493-4244-b4d1-ca7e121e9c2c&quot;,&quot;title&quot;:&quot;get modelName()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the model name if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get modelName() should return the model name if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;Vardagsrum\&quot;,host:\&quot;10.0.10.81\&quot;,id:\&quot;xxx\&quot;,modelName:\&quot;Apple TV 4K\&quot;});assert.strictEqual(device.modelName,\&quot;Apple TV 4K\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0f7cc882-cb00-4ab1-b7a6-22f2086b674e&quot;,&quot;parentUUID&quot;:&quot;e59a630c-6493-4244-b4d1-ca7e121e9c2c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get modelName() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;Vardagsrum\&quot;,host:\&quot;10.0.10.81\&quot;});assert.strictEqual(device.modelName,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;09d9b0d7-b804-470e-8517-15d058cb0d06&quot;,&quot;parentUUID&quot;:&quot;e59a630c-6493-4244-b4d1-ca7e121e9c2c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0f7cc882-cb00-4ab1-b7a6-22f2086b674e&quot;,&quot;09d9b0d7-b804-470e-8517-15d058cb0d06&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2a3867ba-5e3d-4cd7-8ee5-ef15b777e3d6&quot;,&quot;title&quot;:&quot;get os()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the operating system if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get os() should return the operating system if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;Vardagsrum\&quot;,host:\&quot;10.0.10.81\&quot;,id:\&quot;xxx\&quot;,os:\&quot;TvOS\&quot;});assert.strictEqual(device.os,\&quot;TvOS\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5958c2b1-d4f9-4e0b-be0a-1939fa95f2e5&quot;,&quot;parentUUID&quot;:&quot;2a3867ba-5e3d-4cd7-8ee5-ef15b777e3d6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get os() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;Vardagsrum\&quot;,host:\&quot;10.0.10.81\&quot;});assert.strictEqual(device.os,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f10bdbcc-2ed2-4a07-a32c-6bbed87fe7c8&quot;,&quot;parentUUID&quot;:&quot;2a3867ba-5e3d-4cd7-8ee5-ef15b777e3d6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5958c2b1-d4f9-4e0b-be0a-1939fa95f2e5&quot;,&quot;f10bdbcc-2ed2-4a07-a32c-6bbed87fe7c8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fc66c36a-cd29-4e55-a9d0-94c85f44f6f5&quot;,&quot;title&quot;:&quot;get version()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the version if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get version() should return the version if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;Vardagsrum\&quot;,host:\&quot;10.0.10.81\&quot;,id:\&quot;xxx\&quot;,version:\&quot;15.5.1\&quot;});assert.strictEqual(device.version,\&quot;15.5.1\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ffff0e4-dd7a-4922-82da-f05dacc2da40&quot;,&quot;parentUUID&quot;:&quot;fc66c36a-cd29-4e55-a9d0-94c85f44f6f5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get version() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;Vardagsrum\&quot;,host:\&quot;10.0.10.81\&quot;});assert.strictEqual(device.version,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;83dfde2c-b0d9-48c3-a27b-7e212caf7996&quot;,&quot;parentUUID&quot;:&quot;fc66c36a-cd29-4e55-a9d0-94c85f44f6f5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2ffff0e4-dd7a-4922-82da-f05dacc2da40&quot;,&quot;83dfde2c-b0d9-48c3-a27b-7e212caf7996&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e3adc5cb-ec61-4110-98d7-4b3136dac66b&quot;,&quot;title&quot;:&quot;get services()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the services if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get services() should return the services if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;Vardagsrum\&quot;,host:\&quot;10.0.10.81\&quot;,id:\&quot;xxx\&quot;,services:[{protocol:NodePyATVProtocol.mrp,port:49152},{protocol:NodePyATVProtocol.airplay,port:7e3}]});assert.deepStrictEqual(device.services,[{protocol:\&quot;mrp\&quot;,port:49152},{protocol:\&quot;airplay\&quot;,port:7e3}])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d4990d9d-c442-42c2-8e03-13a54c2651c8&quot;,&quot;parentUUID&quot;:&quot;e3adc5cb-ec61-4110-98d7-4b3136dac66b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get services() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;Vardagsrum\&quot;,host:\&quot;10.0.10.81\&quot;});assert.strictEqual(device.services,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;de685160-d63d-4f23-b503-24ed5dcb4e3e&quot;,&quot;parentUUID&quot;:&quot;e3adc5cb-ec61-4110-98d7-4b3136dac66b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d4990d9d-c442-42c2-8e03-13a54c2651c8&quot;,&quot;de685160-d63d-4f23-b503-24ed5dcb4e3e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b1d3cd7b-a535-4ecf-9690-ddc80844f84e&quot;,&quot;title&quot;:&quot;get debug()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return true if set to true&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get debug() should return true if set to true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,debug:true});assert.strictEqual(device.debug,true)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0729d6ea-88f3-4661-a9ec-e96a08012664&quot;,&quot;parentUUID&quot;:&quot;b1d3cd7b-a535-4ecf-9690-ddc80844f84e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return fn if set to custom function&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get debug() should return fn if set to custom function&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fn=__name(()=&gt;{},\&quot;fn\&quot;);const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,debug:fn});assert.strictEqual(device.debug,fn)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5e73a012-d022-466d-8449-2a86c5b837ad&quot;,&quot;parentUUID&quot;:&quot;b1d3cd7b-a535-4ecf-9690-ddc80844f84e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return false if unset&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get debug() should return false if unset&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;});assert.strictEqual(device.debug,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a1633528-b5d8-424d-9f52-43992be5d855&quot;,&quot;parentUUID&quot;:&quot;b1d3cd7b-a535-4ecf-9690-ddc80844f84e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0729d6ea-88f3-4661-a9ec-e96a08012664&quot;,&quot;5e73a012-d022-466d-8449-2a86c5b837ad&quot;,&quot;a1633528-b5d8-424d-9f52-43992be5d855&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;da198b6a-1708-43e7-b86b-5c985fafc9dc&quot;,&quot;title&quot;:&quot;set debug()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work for debug = true&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;});assert.strictEqual(device.debug,void 0);device.debug=true;assert.strictEqual(device.debug,true)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1757f877-e465-4338-acb3-848f84ad8fac&quot;,&quot;parentUUID&quot;:&quot;da198b6a-1708-43e7-b86b-5c985fafc9dc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for debug = undefined&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = undefined&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,debug:true});assert.strictEqual(device.debug,true);device.debug=void 0;assert.strictEqual(device.debug,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e3fd7298-06d3-4da5-abd6-d6c25e4fa63a&quot;,&quot;parentUUID&quot;:&quot;da198b6a-1708-43e7-b86b-5c985fafc9dc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for debug = undefined&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = undefined&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,debug:true});assert.strictEqual(device.debug,true);device.debug=void 0;assert.strictEqual(device.debug,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2bbcc4b0-9476-41f4-a489-07d970ff1804&quot;,&quot;parentUUID&quot;:&quot;da198b6a-1708-43e7-b86b-5c985fafc9dc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for debug = fn&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = fn&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;});const fn=__name(()=&gt;{},\&quot;fn\&quot;);assert.strictEqual(device.debug,void 0);device.debug=fn;assert.strictEqual(device.debug,fn)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6de65391-79a8-41ed-a5e3-037eb0c16cda&quot;,&quot;parentUUID&quot;:&quot;da198b6a-1708-43e7-b86b-5c985fafc9dc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1757f877-e465-4338-acb3-848f84ad8fac&quot;,&quot;e3fd7298-06d3-4da5-abd6-d6c25e4fa63a&quot;,&quot;2bbcc4b0-9476-41f4-a489-07d970ff1804&quot;,&quot;6de65391-79a8-41ed-a5e3-037eb0c16cda&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;18434938-219f-41e0-8862-03e431575d1e&quot;,&quot;title&quot;:&quot;toJSON()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a object representation&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice toJSON() should return a object representation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,id:\&quot;*****\&quot;,protocol:NodePyATVProtocol.airplay});assert.deepEqual(device.toJSON(),{name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,id:\&quot;*****\&quot;,protocol:NodePyATVProtocol.airplay})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d00f1e2a-3f27-4bb2-baba-4ededa8c3720&quot;,&quot;parentUUID&quot;:&quot;18434938-219f-41e0-8862-03e431575d1e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should be possible to create a new device from this&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice toJSON() should be possible to create a new device from this&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const config={name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,id:\&quot;*****\&quot;,protocol:NodePyATVProtocol.airplay};const deviceA=new NodePyATVDevice(config);const deviceB=new NodePyATVDevice(deviceA.toJSON());assert.deepEqual(deviceB.toJSON(),config)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e5feded2-fd78-4438-b15d-44dd6c31a988&quot;,&quot;parentUUID&quot;:&quot;18434938-219f-41e0-8862-03e431575d1e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d00f1e2a-3f27-4bb2-baba-4ededa8c3720&quot;,&quot;e5feded2-fd78-4438-b15d-44dd6c31a988&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7bf1e9ed-080a-4367-a767-adc94423d6fb&quot;,&quot;title&quot;:&quot;toString()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice toString() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;});assert.strictEqual(device.toString(),\&quot;NodePyATVDevice(My Testdevice, 192.168.178.2)\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f83a5c08-ffe9-4011-8397-86d38fb546d1&quot;,&quot;parentUUID&quot;:&quot;7bf1e9ed-080a-4367-a767-adc94423d6fb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f83a5c08-ffe9-4011-8397-86d38fb546d1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;31a52e0f-8c37-4ff2-9f49-3e8b06bf117b&quot;,&quot;title&quot;:&quot;getState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work [I]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should work [I]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;pending&quot;,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6b02bafc-7502-4e08-bb0f-b39a92d0d19d&quot;,&quot;parentUUID&quot;:&quot;31a52e0f-8c37-4ff2-9f49-3e8b06bf117b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,datetime:\&quot;2020-11-07T22:38:43.608030+01:00\&quot;,hash:\&quot;100e0ab6-6ff5-4199-9c04-a7107ff78712\&quot;,media_type:\&quot;video\&quot;,device_state:\&quot;playing\&quot;,title:\&quot;Solo: A Star Wars Story\&quot;,artist:null,album:null,genre:null,total_time:8097,position:27,shuffle:\&quot;off\&quot;,repeat:\&quot;off\&quot;,app:\&quot;Disney+\&quot;,app_id:\&quot;com.disney.disneyplus\&quot;})})});const result=await device.getState();assert.deepStrictEqual(result,{dateTime:new Date(\&quot;2020-11-07T22:38:43.608030+01:00\&quot;),hash:\&quot;100e0ab6-6ff5-4199-9c04-a7107ff78712\&quot;,mediaType:NodePyATVMediaType.video,deviceState:NodePyATVDeviceState.playing,focusState:null,title:\&quot;Solo: A Star Wars Story\&quot;,artist:null,album:null,genre:null,totalTime:8097,volume:null,position:27,shuffle:NodePyATVShuffleState.off,repeat:NodePyATVRepeatState.off,app:\&quot;Disney+\&quot;,appId:\&quot;com.disney.disneyplus\&quot;,powerState:null,outputDevices:null,contentIdentifier:null,iTunesStoreIdentifier:null,episodeNumber:null,seasonNumber:null,seriesName:null})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e23cd55a-960f-40df-b2ef-3f1e7fce18ae&quot;,&quot;parentUUID&quot;:&quot;31a52e0f-8c37-4ff2-9f49-3e8b06bf117b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should reject with error if pyatv fails&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should reject with error if pyatv fails&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;failure\&quot;,datetime:\&quot;2021-11-24T21:13:36.424576+03:00\&quot;,exception:\&quot;invalid credentials: 321\&quot;,stacktrace:&#x27;Traceback (most recent call last):\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\&quot;, line 302, in appstart\\n    print(args.output(await _handle_command(args, abort_sem, loop)), flush=True)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\&quot;, line 196, in _handle_command\\n    atv = await connect(config, loop, protocol=Protocol.MRP)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/__init__.py\&quot;, line 96, in connect\\n    for setup_data in proto_methods.setup(\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\&quot;, line 192, in setup\\n    stream = AirPlayStream(config, service)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\&quot;, line 79, in __init__\\n    self._credentials: HapCredentials = parse_credentials(self.service.credentials)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/auth/hap_pairing.py\&quot;, line 139, in parse_credentials\\n    raise exceptions.InvalidCredentialsError(\&quot;invalid credentials: \&quot; + detail_string)\\npyatv.exceptions.InvalidCredentialsError: invalid credentials: 321\\n&#x27;})})});assert.rejects(async()=&gt;{await device.getState()},/Got pyatv Error: invalid credentials: 321/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9aca624b-ae17-467b-887a-85f33799b72c&quot;,&quot;parentUUID&quot;:&quot;31a52e0f-8c37-4ff2-9f49-3e8b06bf117b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should cache requests for a bit&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should cache requests for a bit&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let executions=0;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{executions++;cp.end({result:\&quot;success\&quot;,datetime:new Date().toJSON(),hash:\&quot;100e0ab6-6ff5-4199-9c04-a7107ff78712\&quot;,media_type:\&quot;video\&quot;,device_state:\&quot;playing\&quot;,title:\&quot;Solo: A Star Wars Story\&quot;,artist:null,album:null,genre:null,total_time:8097,position:27,shuffle:\&quot;off\&quot;,repeat:\&quot;off\&quot;,app:\&quot;Disney+\&quot;,app_id:\&quot;com.disney.disneyplus\&quot;})})});const firstResult=await device.getState();const secondResult=await device.getState();assert.strictEqual(firstResult.dateTime,secondResult.dateTime);assert.strictEqual(executions,1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;93a2f09f-28c6-4973-987b-7b69b994d131&quot;,&quot;parentUUID&quot;:&quot;31a52e0f-8c37-4ff2-9f49-3e8b06bf117b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update the position if cache was used&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should update the position if cache was used&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,datetime:new Date(new Date().getTime()-1e3).toJSON(),hash:\&quot;100e0ab6-6ff5-4199-9c04-a7107ff78712\&quot;,media_type:\&quot;video\&quot;,device_state:\&quot;playing\&quot;,title:\&quot;Solo: A Star Wars Story\&quot;,artist:null,album:null,genre:null,total_time:8097,position:27,shuffle:\&quot;off\&quot;,repeat:\&quot;off\&quot;,app:\&quot;Disney+\&quot;,app_id:\&quot;com.disney.disneyplus\&quot;})})});const firstResult=await device.getState();assert.strictEqual(firstResult.position,27);const secondResult=await device.getState();assert.ok(secondResult.position);assert.ok(secondResult.position&gt;27,`Position should be &gt; 27, was ${secondResult.position}`);assert.ok(secondResult.position&lt;30,`Position should be &gt; 27, was ${secondResult.position}`)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;00a58f5c-8cb8-4234-aa71-dd6fe2d6b60b&quot;,&quot;parentUUID&quot;:&quot;31a52e0f-8c37-4ff2-9f49-3e8b06bf117b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e23cd55a-960f-40df-b2ef-3f1e7fce18ae&quot;,&quot;9aca624b-ae17-467b-887a-85f33799b72c&quot;,&quot;93a2f09f-28c6-4973-987b-7b69b994d131&quot;,&quot;00a58f5c-8cb8-4234-aa71-dd6fe2d6b60b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;6b02bafc-7502-4e08-bb0f-b39a92d0d19d&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8ed3832e-c9dc-4587-800f-dbc507c61afd&quot;,&quot;title&quot;:&quot;clearState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice clearState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let executions=0;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{executions++;cp.end({result:\&quot;success\&quot;,datetime:\&quot;2020-11-07T22:38:43.608030+01:00\&quot;,title:\&quot;Solo: A Star Wars Story\&quot;})})});assert.deepStrictEqual(await device.getTitle(),\&quot;Solo: A Star Wars Story\&quot;);device.clearState();assert.deepStrictEqual(await device.getTitle(),\&quot;Solo: A Star Wars Story\&quot;);assert.strictEqual(executions,2)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6f90c483-b3fa-4a92-b2bb-269ffa2d92c0&quot;,&quot;parentUUID&quot;:&quot;8ed3832e-c9dc-4587-800f-dbc507c61afd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6f90c483-b3fa-4a92-b2bb-269ffa2d92c0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d1a1e70b-2f5c-4c7a-bdf0-01b23e652749&quot;,&quot;title&quot;:&quot;getDateTime()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getDateTime() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,datetime:new Date().toJSON()})})});const result=await device.getDateTime();assert.ok(result instanceof Date)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e4792979-d620-4867-988c-33ac3b4562a6&quot;,&quot;parentUUID&quot;:&quot;d1a1e70b-2f5c-4c7a-bdf0-01b23e652749&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e4792979-d620-4867-988c-33ac3b4562a6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7d2a2fd3-d55d-4177-b7f7-8499363e32fe&quot;,&quot;title&quot;:&quot;getHash()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getHash() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,hash:\&quot;12345\&quot;})})});const result=await device.getHash();assert.strictEqual(result,\&quot;12345\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4640187f-2ae6-452d-9dc1-24ba6f2d36d7&quot;,&quot;parentUUID&quot;:&quot;7d2a2fd3-d55d-4177-b7f7-8499363e32fe&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4640187f-2ae6-452d-9dc1-24ba6f2d36d7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;71321713-8af6-4568-be6b-204c863e9e43&quot;,&quot;title&quot;:&quot;getMediaType()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getMediaType() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,media_type:\&quot;video\&quot;})})});const result=await device.getMediaType();assert.deepStrictEqual(result,NodePyATVMediaType.video);assert.deepStrictEqual(result,\&quot;video\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;90409b1b-4d92-4c18-8955-46c7c0fe7476&quot;,&quot;parentUUID&quot;:&quot;71321713-8af6-4568-be6b-204c863e9e43&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;90409b1b-4d92-4c18-8955-46c7c0fe7476&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7d35d861-e7dc-4246-b9cf-c2058b064308&quot;,&quot;title&quot;:&quot;getDeviceState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getDeviceState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,device_state:\&quot;seeking\&quot;})})});const result=await device.getDeviceState();assert.deepStrictEqual(result,NodePyATVDeviceState.seeking);assert.deepStrictEqual(result,\&quot;seeking\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0145bac8-7d7b-4b13-a939-4a2212b2e28e&quot;,&quot;parentUUID&quot;:&quot;7d35d861-e7dc-4246-b9cf-c2058b064308&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0145bac8-7d7b-4b13-a939-4a2212b2e28e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;251969a0-d5a9-43c0-ae40-f4c081181f7b&quot;,&quot;title&quot;:&quot;getTitle()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getTitle() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});const result=await device.getTitle();assert.strictEqual(result,\&quot;My Movie\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9fc6ca0c-dfb2-425f-9ffd-d1c596233e4e&quot;,&quot;parentUUID&quot;:&quot;251969a0-d5a9-43c0-ae40-f4c081181f7b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9fc6ca0c-dfb2-425f-9ffd-d1c596233e4e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9eb9fac5-2dd0-4ce3-8f03-6349f3e4f050&quot;,&quot;title&quot;:&quot;getArtist()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getArtist() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,artist:\&quot;My Artist\&quot;})})});const result=await device.getArtist();assert.strictEqual(result,\&quot;My Artist\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;287ef1ef-3e09-4886-8331-6b37c6c292a5&quot;,&quot;parentUUID&quot;:&quot;9eb9fac5-2dd0-4ce3-8f03-6349f3e4f050&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;287ef1ef-3e09-4886-8331-6b37c6c292a5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3e5806ca-4812-4045-9596-bf8f5edf6ae2&quot;,&quot;title&quot;:&quot;getAlbum()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getAlbum() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,album:\&quot;My ALbum\&quot;})})});const result=await device.getAlbum();assert.strictEqual(result,\&quot;My ALbum\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9a2e5c7b-f97a-41c2-acd0-7334804d513b&quot;,&quot;parentUUID&quot;:&quot;3e5806ca-4812-4045-9596-bf8f5edf6ae2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9a2e5c7b-f97a-41c2-acd0-7334804d513b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0f9035d8-be13-44ec-8738-7e145c171c3c&quot;,&quot;title&quot;:&quot;getGenre()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getGenre() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,genre:\&quot;My Genre\&quot;})})});const result=await device.getGenre();assert.strictEqual(result,\&quot;My Genre\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7c98ef49-8a99-48dc-98f7-8b15e741fa6f&quot;,&quot;parentUUID&quot;:&quot;0f9035d8-be13-44ec-8738-7e145c171c3c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7c98ef49-8a99-48dc-98f7-8b15e741fa6f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8dcca6f0-5aba-4d14-a007-40620381d263&quot;,&quot;title&quot;:&quot;getTotalTime()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getTotalTime() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,total_time:45})})});const result=await device.getTotalTime();assert.strictEqual(result,45)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4e6c00d9-c27b-44ef-a7c7-1389e4f180f9&quot;,&quot;parentUUID&quot;:&quot;8dcca6f0-5aba-4d14-a007-40620381d263&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4e6c00d9-c27b-44ef-a7c7-1389e4f180f9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;90459516-46b7-49d3-8904-63329c9e2d4c&quot;,&quot;title&quot;:&quot;getPosition()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getPosition() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,position:30})})});const result=await device.getPosition();assert.strictEqual(result,30)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f7870105-d8d5-41f6-8e18-681de9f08ac3&quot;,&quot;parentUUID&quot;:&quot;90459516-46b7-49d3-8904-63329c9e2d4c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f7870105-d8d5-41f6-8e18-681de9f08ac3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;820fce98-473f-48b0-8831-2d11ae2c3b3d&quot;,&quot;title&quot;:&quot;getShuffle()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getShuffle() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,shuffle:\&quot;songs\&quot;})})});const result=await device.getShuffle();assert.deepStrictEqual(result,NodePyATVShuffleState.songs);assert.deepStrictEqual(result,\&quot;songs\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fa27ab62-11d0-4afa-8576-a862cf055407&quot;,&quot;parentUUID&quot;:&quot;820fce98-473f-48b0-8831-2d11ae2c3b3d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fa27ab62-11d0-4afa-8576-a862cf055407&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;51738cb1-b877-4ca3-8fb0-8abb571044d5&quot;,&quot;title&quot;:&quot;getRepeat()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getRepeat() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,repeat:\&quot;all\&quot;})})});const result=await device.getRepeat();assert.deepStrictEqual(result,NodePyATVRepeatState.all);assert.deepStrictEqual(result,\&quot;all\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;91058a6a-f0f0-471c-ab12-5ecdd3568fa5&quot;,&quot;parentUUID&quot;:&quot;51738cb1-b877-4ca3-8fb0-8abb571044d5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;91058a6a-f0f0-471c-ab12-5ecdd3568fa5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fb7839b5-7361-4cd9-88eb-6f30b764db74&quot;,&quot;title&quot;:&quot;getApp()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getApp() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,app:\&quot;My App\&quot;})})});const result=await device.getApp();assert.strictEqual(result,\&quot;My App\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bece4bc8-0b80-405c-b502-9402023cef94&quot;,&quot;parentUUID&quot;:&quot;fb7839b5-7361-4cd9-88eb-6f30b764db74&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bece4bc8-0b80-405c-b502-9402023cef94&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;893c6b61-3b80-4327-a773-c781ece1826c&quot;,&quot;title&quot;:&quot;getAppId()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getAppId() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,app_id:\&quot;app.example.com\&quot;})})});const result=await device.getAppId();assert.strictEqual(result,\&quot;app.example.com\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b6810133-2bb6-4845-a674-eec92b99a9cd&quot;,&quot;parentUUID&quot;:&quot;893c6b61-3b80-4327-a773-c781ece1826c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b6810133-2bb6-4845-a674-eec92b99a9cd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6606aecd-c9ea-4de1-937c-734d59ab76f9&quot;,&quot;title&quot;:&quot;getPowerState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getPowerState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,power_state:\&quot;on\&quot;})})});const result=await device.getPowerState();assert.strictEqual(result,NodePyATVPowerState.on)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4c660b50-aa87-4a19-b4b4-c5b9d6e78e17&quot;,&quot;parentUUID&quot;:&quot;6606aecd-c9ea-4de1-937c-734d59ab76f9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4c660b50-aa87-4a19-b4b4-c5b9d6e78e17&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1113ffce-8c1c-4982-8bbb-6da73fc56d43&quot;,&quot;title&quot;:&quot;getVolume()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getVolume() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,volume:50})})});const result=await device.getVolume();assert.strictEqual(result,50)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c31c1972-d839-4ee7-ab5d-31c1b172884d&quot;,&quot;parentUUID&quot;:&quot;1113ffce-8c1c-4982-8bbb-6da73fc56d43&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c31c1972-d839-4ee7-ab5d-31c1b172884d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;85411485-6618-401d-9234-eb6fed277899&quot;,&quot;title&quot;:&quot;getFocusState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getFocusState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,focus_state:\&quot;focused\&quot;})})});const result=await device.getFocusState();assert.strictEqual(result,NodePyATVFocusState.focused)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bc47dbfe-da9f-43ee-beca-120267d871b2&quot;,&quot;parentUUID&quot;:&quot;85411485-6618-401d-9234-eb6fed277899&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bc47dbfe-da9f-43ee-beca-120267d871b2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f42676f4-507c-4ff0-90c7-ad2484140b08&quot;,&quot;title&quot;:&quot;getOutputDevices()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getOutputDevices() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,output_devices:[{identifier:\&quot;foo\&quot;,name:\&quot;Apple TV\&quot;}]})})});const result=await device.getOutputDevices();assert.deepStrictEqual(result,[{identifier:\&quot;foo\&quot;,name:\&quot;Apple TV\&quot;}])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;78f56b64-d531-4267-a828-7c2fde472dd6&quot;,&quot;parentUUID&quot;:&quot;f42676f4-507c-4ff0-90c7-ad2484140b08&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;78f56b64-d531-4267-a828-7c2fde472dd6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3b32271d-38d8-446b-8605-d8e0cd04f7cf&quot;,&quot;title&quot;:&quot;getContentIdentifier()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getContentIdentifier() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,content_identifier:\&quot;1234\&quot;})})});const result=await device.getContentIdentifier();assert.strictEqual(result,\&quot;1234\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;03c6837c-32c0-4b6c-8d50-bab779bcb3ae&quot;,&quot;parentUUID&quot;:&quot;3b32271d-38d8-446b-8605-d8e0cd04f7cf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;03c6837c-32c0-4b6c-8d50-bab779bcb3ae&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d75aca30-df29-412a-aa4b-0dc16c8d9293&quot;,&quot;title&quot;:&quot;getiTunesStoreIdentifier()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getiTunesStoreIdentifier() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,itunes_store_identifier:1234})})});const result=await device.getiTunesStoreIdentifier();assert.strictEqual(result,1234)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;71a54344-136e-4eef-b832-32432919825e&quot;,&quot;parentUUID&quot;:&quot;d75aca30-df29-412a-aa4b-0dc16c8d9293&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;71a54344-136e-4eef-b832-32432919825e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1eaaaa7e-ca34-47d6-a20c-b591477b76f4&quot;,&quot;title&quot;:&quot;getEpisodeNumber()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getEpisodeNumber() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,episode_number:12})})});const result=await device.getEpisodeNumber();assert.strictEqual(result,12)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0a1a1101-4ff1-435e-8d07-ee2c5ce1c712&quot;,&quot;parentUUID&quot;:&quot;1eaaaa7e-ca34-47d6-a20c-b591477b76f4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0a1a1101-4ff1-435e-8d07-ee2c5ce1c712&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ff5a768a-b157-4729-a7b7-50d04a0f24d2&quot;,&quot;title&quot;:&quot;getSeasonNumber()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getSeasonNumber() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,season_number:2})})});const result=await device.getSeasonNumber();assert.strictEqual(result,2)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3241123c-3a85-4774-bba1-cda36e0031fb&quot;,&quot;parentUUID&quot;:&quot;ff5a768a-b157-4729-a7b7-50d04a0f24d2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3241123c-3a85-4774-bba1-cda36e0031fb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2df0073b-ed1d-4c8b-808e-4c6cccd987d0&quot;,&quot;title&quot;:&quot;getSeriesName()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getSeriesName() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,series_name:\&quot;The Testing Disaster\&quot;})})});const result=await device.getSeriesName();assert.strictEqual(result,\&quot;The Testing Disaster\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;93ebd896-76f4-4452-bf74-538bdd456a4d&quot;,&quot;parentUUID&quot;:&quot;2df0073b-ed1d-4c8b-808e-4c6cccd987d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;93ebd896-76f4-4452-bf74-538bdd456a4d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7aa023fa-9c44-406f-b9ba-ca777f8690f1&quot;,&quot;title&quot;:&quot;listApps()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice listApps() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(\&quot;App: Fitness (com.apple.Fitness), App: Podcasts (com.apple.podcasts), App: Filme (com.apple.TVMovies), App: Prime Video (com.amazon.aiv.AIVApp), App: TV (com.apple.TVWatchList), App: Fotos (com.apple.TVPhotos), App: App\\xA0Store (com.apple.TVAppStore), App: Arcade (com.apple.Arcade), App: TV-Sendungen (com.apple.TVShows), App: Suchen (com.apple.TVSearch), App: Live TV (de.couchfunk.WM2014), App: RTL+ (com.rtlinteractive.tvnow), App: Computer (com.apple.TVHomeSharing), App: ARTE (tv.arte.plus7), App: YouTube (com.google.ios.youtube), App: ARD Mediathek (de.swr.avp.ard.tablet), App: Disney+ (com.disney.disneyplus), App: Plex (com.plexapp.plex), App: Joyn (de.prosiebensat1digital.seventv), App: Einstellungen (com.apple.TVSettings), App: ZDFmediathek (de.zdf.mediathek.universal), App: Crossy Road (com.hipsterwhale.crossy), App: Netflix (com.netflix.Netflix), App: Infuse (com.firecore.infuse), App: Musik (com.apple.TVMusic)\&quot;)})});const result=await device.listApps();assert.strictEqual(result.length,25);assert.strictEqual(result[0].id,\&quot;com.apple.Fitness\&quot;);assert.strictEqual(result[0].name,\&quot;Fitness\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2e81c0a2-ee1f-4368-a8b2-b835c3e4ee1a&quot;,&quot;parentUUID&quot;:&quot;7aa023fa-9c44-406f-b9ba-ca777f8690f1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2e81c0a2-ee1f-4368-a8b2-b835c3e4ee1a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;64f6703e-e569-42e2-85cc-d3bae85bd31e&quot;,&quot;title&quot;:&quot;pressKey()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work with valid key&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pressKey() should work with valid key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device.pressKey(NodePyATVKeys.home)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d0aa50b7-91c0-4239-9b16-2deee7373882&quot;,&quot;parentUUID&quot;:&quot;64f6703e-e569-42e2-85cc-d3bae85bd31e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error with invalid key&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pressKey() should throw error with invalid key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;});await assert.rejects(async()=&gt;{await device.pressKey(\&quot;foo\&quot;)},/Unsupported key value foo/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;42e3b8b0-1d2c-433b-a35f-6d9ab4da2f32&quot;,&quot;parentUUID&quot;:&quot;64f6703e-e569-42e2-85cc-d3bae85bd31e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if pyatv result is not success&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pressKey() should throw error if pyatv result is not success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;failure\&quot;}&#x27;)})});await assert.rejects(async()=&gt;{await device.pressKey(NodePyATVKeys.home)},/Unable to parse pyatv response/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a4ec9438-d4aa-4d54-b314-f2a265901ed6&quot;,&quot;parentUUID&quot;:&quot;64f6703e-e569-42e2-85cc-d3bae85bd31e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d0aa50b7-91c0-4239-9b16-2deee7373882&quot;,&quot;42e3b8b0-1d2c-433b-a35f-6d9ab4da2f32&quot;,&quot;a4ec9438-d4aa-4d54-b314-f2a265901ed6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ef11876e-7fbc-4c1d-8caa-98a4fb836b58&quot;,&quot;title&quot;:&quot;down()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice down() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bacc24c6-73df-4b40-9581-4ad11a347f66&quot;,&quot;parentUUID&quot;:&quot;ef11876e-7fbc-4c1d-8caa-98a4fb836b58&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bacc24c6-73df-4b40-9581-4ad11a347f66&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d5b75b06-ccda-4e5a-9e02-a870dfe36929&quot;,&quot;title&quot;:&quot;home()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice home() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;17148e8d-a82e-44b1-82a8-5917e8c8d418&quot;,&quot;parentUUID&quot;:&quot;d5b75b06-ccda-4e5a-9e02-a870dfe36929&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;17148e8d-a82e-44b1-82a8-5917e8c8d418&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;82397313-b2bd-4451-afaa-72b210bc34a2&quot;,&quot;title&quot;:&quot;homeHold()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice homeHold() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;512a0857-d3eb-43bb-a984-b5339476f0f1&quot;,&quot;parentUUID&quot;:&quot;82397313-b2bd-4451-afaa-72b210bc34a2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;512a0857-d3eb-43bb-a984-b5339476f0f1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9800c201-6005-420b-b46a-e513f148c636&quot;,&quot;title&quot;:&quot;left()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice left() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1ac22967-a5d8-4e9e-93b8-dbc2cd0db783&quot;,&quot;parentUUID&quot;:&quot;9800c201-6005-420b-b46a-e513f148c636&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1ac22967-a5d8-4e9e-93b8-dbc2cd0db783&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3d0411b0-eef0-4004-b38f-5b0f3054ca28&quot;,&quot;title&quot;:&quot;menu()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice menu() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b778dc8f-8f4c-4a18-8787-4503384be02e&quot;,&quot;parentUUID&quot;:&quot;3d0411b0-eef0-4004-b38f-5b0f3054ca28&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b778dc8f-8f4c-4a18-8787-4503384be02e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4d80628c-d237-45f6-9b49-c258853ad9ad&quot;,&quot;title&quot;:&quot;next()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice next() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;61987108-b876-468b-aa61-5851c73a0924&quot;,&quot;parentUUID&quot;:&quot;4d80628c-d237-45f6-9b49-c258853ad9ad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;61987108-b876-468b-aa61-5851c73a0924&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a127d77a-6f3c-477f-852b-58c85f691b0b&quot;,&quot;title&quot;:&quot;pause()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pause() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41e99d12-1d82-424c-9c54-ce11a770ae5d&quot;,&quot;parentUUID&quot;:&quot;a127d77a-6f3c-477f-852b-58c85f691b0b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;41e99d12-1d82-424c-9c54-ce11a770ae5d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6da69283-8fc4-4e72-b312-be67d7265976&quot;,&quot;title&quot;:&quot;play()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice play() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;429386c8-a8c4-4d8c-93bc-6dde66808f3a&quot;,&quot;parentUUID&quot;:&quot;6da69283-8fc4-4e72-b312-be67d7265976&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;429386c8-a8c4-4d8c-93bc-6dde66808f3a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fe04a7ad-cde9-438e-832e-8056d415fe57&quot;,&quot;title&quot;:&quot;playPause()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice playPause() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5f5f188b-c1d7-4e80-8ed8-838001db2b26&quot;,&quot;parentUUID&quot;:&quot;fe04a7ad-cde9-438e-832e-8056d415fe57&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5f5f188b-c1d7-4e80-8ed8-838001db2b26&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ec432ebc-b61e-4e6d-bbd1-9c9673bfe612&quot;,&quot;title&quot;:&quot;previous()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice previous() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;040719b6-fd27-4e94-a871-347058428c47&quot;,&quot;parentUUID&quot;:&quot;ec432ebc-b61e-4e6d-bbd1-9c9673bfe612&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;040719b6-fd27-4e94-a871-347058428c47&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5be2a7e8-e225-4345-982c-13a0567fc3c4&quot;,&quot;title&quot;:&quot;right()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice right() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7757beba-5787-4069-bf2c-8b1b179c186c&quot;,&quot;parentUUID&quot;:&quot;5be2a7e8-e225-4345-982c-13a0567fc3c4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7757beba-5787-4069-bf2c-8b1b179c186c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;33502c4d-08f9-4125-a7e1-383e59a8babd&quot;,&quot;title&quot;:&quot;select()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice select() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b967501b-25ea-42fe-a98e-199e68273208&quot;,&quot;parentUUID&quot;:&quot;33502c4d-08f9-4125-a7e1-383e59a8babd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b967501b-25ea-42fe-a98e-199e68273208&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2a6eb268-1283-4d4f-907c-681855536638&quot;,&quot;title&quot;:&quot;skipBackward()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice skipBackward() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fde406b5-4c9b-4b4f-a4e5-0c07773f42cf&quot;,&quot;parentUUID&quot;:&quot;2a6eb268-1283-4d4f-907c-681855536638&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fde406b5-4c9b-4b4f-a4e5-0c07773f42cf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0f96f2b1-7196-455d-b612-5438f392a5c2&quot;,&quot;title&quot;:&quot;skipForward()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice skipForward() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ba9197e0-b3cd-4562-a079-c9aed3924b5e&quot;,&quot;parentUUID&quot;:&quot;0f96f2b1-7196-455d-b612-5438f392a5c2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ba9197e0-b3cd-4562-a079-c9aed3924b5e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bc5f35eb-9acd-419e-b9cd-d9575f152ae1&quot;,&quot;title&quot;:&quot;stop()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice stop() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;19fc4544-dd8e-44a9-98ce-13114dec68bf&quot;,&quot;parentUUID&quot;:&quot;bc5f35eb-9acd-419e-b9cd-d9575f152ae1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;19fc4544-dd8e-44a9-98ce-13114dec68bf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;76fd5297-26df-4623-b191-c595330bf763&quot;,&quot;title&quot;:&quot;suspend()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice suspend() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0de957ac-5100-4a5f-95fe-81a14b3b5eab&quot;,&quot;parentUUID&quot;:&quot;76fd5297-26df-4623-b191-c595330bf763&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0de957ac-5100-4a5f-95fe-81a14b3b5eab&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2575b676-0d95-40bf-8998-3f4c0c0212d3&quot;,&quot;title&quot;:&quot;topMenu()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice topMenu() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5fb8dc26-45d6-4700-8c5e-67a4003514df&quot;,&quot;parentUUID&quot;:&quot;2575b676-0d95-40bf-8998-3f4c0c0212d3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5fb8dc26-45d6-4700-8c5e-67a4003514df&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;44302e9b-6bbf-4ceb-9334-f61ec96bd277&quot;,&quot;title&quot;:&quot;up()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice up() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c0ff60db-6a7a-4474-af4c-53f9bb7f99b7&quot;,&quot;parentUUID&quot;:&quot;44302e9b-6bbf-4ceb-9334-f61ec96bd277&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c0ff60db-6a7a-4474-af4c-53f9bb7f99b7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a8962275-ff80-4bc7-bc22-704cf0001c6d&quot;,&quot;title&quot;:&quot;volumeDown()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice volumeDown() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d0e524d8-0ae3-448b-80b3-a03324130c62&quot;,&quot;parentUUID&quot;:&quot;a8962275-ff80-4bc7-bc22-704cf0001c6d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d0e524d8-0ae3-448b-80b3-a03324130c62&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e1f0a3ae-5fc1-485d-9622-c052547d8f0f&quot;,&quot;title&quot;:&quot;volumeUp()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice volumeUp() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ccbb16b9-1870-41f1-ad94-a58ab9f1e4ae&quot;,&quot;parentUUID&quot;:&quot;e1f0a3ae-5fc1-485d-9622-c052547d8f0f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ccbb16b9-1870-41f1-ad94-a58ab9f1e4ae&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6b39cada-20de-4fdb-8e5d-e75a2c4de152&quot;,&quot;title&quot;:&quot;wakeup()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice wakeup() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;555291ce-1e97-4cd5-8d9b-f9131b77d9bf&quot;,&quot;parentUUID&quot;:&quot;6b39cada-20de-4fdb-8e5d-e75a2c4de152&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;555291ce-1e97-4cd5-8d9b-f9131b77d9bf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e69bc853-1ab8-44a0-9a1b-6fec3a854de3&quot;,&quot;title&quot;:&quot;turnOff()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice turnOff() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cf108aaf-d5a2-463b-8b43-2c28721e24bb&quot;,&quot;parentUUID&quot;:&quot;e69bc853-1ab8-44a0-9a1b-6fec3a854de3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cf108aaf-d5a2-463b-8b43-2c28721e24bb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;be728e44-e3df-486d-9338-4eb9d2b608fe&quot;,&quot;title&quot;:&quot;turnOn()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice turnOn() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bb9bf810-b205-4ff4-aa0a-88c5b4ec84c9&quot;,&quot;parentUUID&quot;:&quot;be728e44-e3df-486d-9338-4eb9d2b608fe&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bb9bf810-b205-4ff4-aa0a-88c5b4ec84c9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7d1331c8-d9eb-4613-9a29-38e1a18e127c&quot;,&quot;title&quot;:&quot;launchApp()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice launchApp() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(\&quot;\&quot;)})});await device.launchApp(\&quot;com.apple.TVShows\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6292ac88-3791-40db-9453-24678decc890&quot;,&quot;parentUUID&quot;:&quot;7d1331c8-d9eb-4613-9a29-38e1a18e127c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6292ac88-3791-40db-9453-24678decc890&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c84ce1c4-a839-414f-850e-24234c8c370c&quot;,&quot;title&quot;:&quot;NodePyATVInstance&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;4af74c9a-61c1-4ff2-bf7f-125071be24ad&quot;,&quot;title&quot;:&quot;static version()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work with pyatv [L]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should work with pyatv [L]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:454,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(4e3);const result=await NodePyATVInstance.version();if(result.pyatv===null){throw new Error(\&quot;No version found for pyatv. Is it installed in test environment?\&quot;)}assert.equal(typeof result.pyatv,\&quot;string\&quot;,\&quot;result.pyatv is a string\&quot;);assert.ok(result.pyatv.length&gt;=5,\&quot;result.pyatv has content\&quot;);assert.strictEqual(result.module,version)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ba511185-d4b3-4259-b43f-bc7c0caf78b8&quot;,&quot;parentUUID&quot;:&quot;4af74c9a-61c1-4ff2-bf7f-125071be24ad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the pyatv version&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return the pyatv version&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await NodePyATVInstance.version({spawn:createFakeSpawn(cp=&gt;{cp.code(1);cp.end(\&quot;atvremote 0.7.4\&quot;)})});assert.ok(result.pyatv);assert.strictEqual(result.pyatv,\&quot;0.7.4\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9b9d2b13-8588-4a21-9d1f-6d0ca22d41fb&quot;,&quot;parentUUID&quot;:&quot;4af74c9a-61c1-4ff2-bf7f-125071be24ad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the module version&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return the module version&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await NodePyATVInstance.version({noColors:true,spawn:createFakeSpawn(cp=&gt;cp.code(1).end())});assert.strictEqual(result.module,version)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;590f972f-1ff7-4b06-9a3a-cba5ff09aa29&quot;,&quot;parentUUID&quot;:&quot;4af74c9a-61c1-4ff2-bf7f-125071be24ad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle option.atvremotePath&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should handle option.atvremotePath&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await NodePyATVInstance.version({atvremotePath:\&quot;/foo/bar\&quot;,spawn:createFakeSpawn(cp=&gt;{assert.strictEqual(cp.cmd(),\&quot;/foo/bar\&quot;);cp.code(1).end()})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;68f3ec75-d493-46cd-a4c9-b293d6d83745&quot;,&quot;parentUUID&quot;:&quot;4af74c9a-61c1-4ff2-bf7f-125071be24ad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with option.debug = true&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should work with option.debug = true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await NodePyATVInstance.version({debug:true,spawn:createFakeSpawn(cp=&gt;cp.code(1).end())})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9dd5e735-2f81-4100-ad65-210090fc27d3&quot;,&quot;parentUUID&quot;:&quot;4af74c9a-61c1-4ff2-bf7f-125071be24ad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with option.noColors&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should work with option.noColors&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await NodePyATVInstance.version({debug:__name(()=&gt;{},\&quot;debug\&quot;),noColors:true,spawn:createFakeSpawn(cp=&gt;cp.code(1).end())})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0649109a-dc54-490b-b52f-d23045324cde&quot;,&quot;parentUUID&quot;:&quot;4af74c9a-61c1-4ff2-bf7f-125071be24ad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return null on pyatv stderr output&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return null on pyatv stderr output&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await NodePyATVInstance.version({spawn:createFakeSpawn(cp=&gt;cp.stderr(\&quot;Hello World!\&quot;).code(123).end())});assert.strictEqual(result.pyatv,null)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;522e8ce4-3611-4e72-b3ff-6a9ac1b556e9&quot;,&quot;parentUUID&quot;:&quot;4af74c9a-61c1-4ff2-bf7f-125071be24ad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return null on pyatv error&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return null on pyatv error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await NodePyATVInstance.version({spawn:createFakeSpawn(cp=&gt;{cp.error(new Error(\&quot;Hello world!\&quot;)).end()})});assert.strictEqual(result.pyatv,null)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;27b4a40a-d0a8-4ed9-a7fc-1ce5abb2687e&quot;,&quot;parentUUID&quot;:&quot;4af74c9a-61c1-4ff2-bf7f-125071be24ad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return null on invalid pyatv version&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return null on invalid pyatv version&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await NodePyATVInstance.version({spawn:createFakeSpawn(cp=&gt;{cp.stdout(\&quot;atvremote 42\&quot;).code(1).end()})});assert.strictEqual(result.pyatv,null)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c1742615-bc2b-4040-ad0e-ab0cea05681a&quot;,&quot;parentUUID&quot;:&quot;4af74c9a-61c1-4ff2-bf7f-125071be24ad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ba511185-d4b3-4259-b43f-bc7c0caf78b8&quot;,&quot;9b9d2b13-8588-4a21-9d1f-6d0ca22d41fb&quot;,&quot;590f972f-1ff7-4b06-9a3a-cba5ff09aa29&quot;,&quot;68f3ec75-d493-46cd-a4c9-b293d6d83745&quot;,&quot;9dd5e735-2f81-4100-ad65-210090fc27d3&quot;,&quot;0649109a-dc54-490b-b52f-d23045324cde&quot;,&quot;522e8ce4-3611-4e72-b3ff-6a9ac1b556e9&quot;,&quot;27b4a40a-d0a8-4ed9-a7fc-1ce5abb2687e&quot;,&quot;c1742615-bc2b-4040-ad0e-ab0cea05681a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:465,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4ef8258c-3ad4-48e9-9829-26102f6bbba5&quot;,&quot;title&quot;:&quot;static check()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should resolve in test environment [L]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should resolve in test environment [L]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5785,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(12e3);await NodePyATVInstance.check()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c58abf80-fd68-445c-b390-3322fc3cbb46&quot;,&quot;parentUUID&quot;:&quot;4ef8258c-3ad4-48e9-9829-26102f6bbba5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return nice error message if pyatv was not found&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should return nice error message if pyatv was not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.check({spawn:createFakeSpawn(cp=&gt;{cp.error(new Error(\&quot;spawn atvremote ENOENT\&quot;)).code(1).end()})})},/Unable to find pyatv. Is it installed?/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f0fe3b08-a6ef-4ee0-a913-bdcb19b92ca5&quot;,&quot;parentUUID&quot;:&quot;4ef8258c-3ad4-48e9-9829-26102f6bbba5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return nice error message if myatv is too old&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should return nice error message if myatv is too old&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.check({spawn:createFakeSpawn(cp=&gt;{cp.stdout(\&quot;atvremote 0.5.1\&quot;).code(1).end()})})},/Found pyatv, but unforunately it&#x27;s too old. Please update pyatv./)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0335f118-103c-4f8c-ac5f-294fef74657b&quot;,&quot;parentUUID&quot;:&quot;4ef8258c-3ad4-48e9-9829-26102f6bbba5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return nice error message if scan failed&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should return nice error message if scan failed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let i=0;await assert.rejects(async()=&gt;{await NodePyATVInstance.check({spawn:createFakeSpawn(cp=&gt;{if(i===0){cp.stdout(\&quot;atvremote 0.7.0\&quot;).code(1).end();i++}else{cp.error(new Error(\&quot;spawn atvremote ENOENT\&quot;)).code(1).end()}})})},/Unable to scan for devices/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3b08fab-9b95-4b45-9000-cbd660329485&quot;,&quot;parentUUID&quot;:&quot;4ef8258c-3ad4-48e9-9829-26102f6bbba5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c58abf80-fd68-445c-b390-3322fc3cbb46&quot;,&quot;f0fe3b08-a6ef-4ee0-a913-bdcb19b92ca5&quot;,&quot;0335f118-103c-4f8c-ac5f-294fef74657b&quot;,&quot;a3b08fab-9b95-4b45-9000-cbd660329485&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5791,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c4bba77a-4e35-4c6a-aa6f-88bff6082460&quot;,&quot;title&quot;:&quot;static find()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work [L]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work [L]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5397,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(1e4);const result=await NodePyATVInstance.find();assert.ok(Array.isArray(result))&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;be92477e-d437-4da6-911e-7368e74b6869&quot;,&quot;parentUUID&quot;:&quot;c4bba77a-4e35-4c6a-aa6f-88bff6082460&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle option.atvscriptPath&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should handle option.atvscriptPath&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await NodePyATVInstance.find({atvscriptPath:\&quot;/foo/bar\&quot;,spawn:createFakeSpawn(cp=&gt;{assert.strictEqual(cp.cmd(),\&quot;/foo/bar\&quot;);cp.stdout({\&quot;result\&quot;:\&quot;success\&quot;,\&quot;datetime\&quot;:\&quot;2020-11-06T20:47:30.840022+01:00\&quot;,\&quot;devices\&quot;:[]}).end()})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e7bf5811-3507-4998-a063-41a4de878192&quot;,&quot;parentUUID&quot;:&quot;c4bba77a-4e35-4c6a-aa6f-88bff6082460&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error on stderr output&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error on stderr output&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stderr(\&quot;Hello World!\&quot;).code(1).end()})})},/Unable to execute request/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b455aecb-e1bc-4a44-ba41-ac686cbe2a3e&quot;,&quot;parentUUID&quot;:&quot;c4bba77a-4e35-4c6a-aa6f-88bff6082460&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error on error&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.error(new Error(\&quot;Hello world!\&quot;)).code(1).end()})})},/Hello world!/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3add0644-dd1f-4bc6-88b8-fff7ce5aa95a&quot;,&quot;parentUUID&quot;:&quot;c4bba77a-4e35-4c6a-aa6f-88bff6082460&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error on pyatv failure&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error on pyatv failure&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout({result:\&quot;failure\&quot;,datetime:\&quot;2020-11-06T20:47:30.840022+01:00\&quot;,error:\&quot;Task exception was never retrieved\&quot;,exception:\&quot;[Errno 113] Connect call failed\&quot;}).code(1).end()})})},/Unable to find any devices, but received 1 error: /)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ce5f733e-af1d-48b4-bc55-941b556f0307&quot;,&quot;parentUUID&quot;:&quot;c4bba77a-4e35-4c6a-aa6f-88bff6082460&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if atvscript result is not valid json&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error if atvscript result is not valid json&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout(JSON.stringify({\&quot;result\&quot;:\&quot;success\&quot;,\&quot;datetime\&quot;:\&quot;2020-11-06T20:47:30.840022+01:00\&quot;,\&quot;devices\&quot;:[]}).substr(1)).end()})})},/Unable to parse result/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3f6401a2-81cb-4eab-a885-885d56c91de4&quot;,&quot;parentUUID&quot;:&quot;c4bba77a-4e35-4c6a-aa6f-88bff6082460&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if atvscript result is not successfull&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error if atvscript result is not successfull&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout({result:\&quot;error\&quot;}).code(1).end()})})},/Unable to parse pyatv response: /)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bb3d4d6f-e483-44d2-9258-0ea478467536&quot;,&quot;parentUUID&quot;:&quot;c4bba77a-4e35-4c6a-aa6f-88bff6082460&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if atvscript result is without device array&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error if atvscript result is without device array&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout({result:\&quot;success\&quot;}).code(1).end()})})},/Unable to parse pyatv response: /)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c1561848-e2ae-4f50-b6d3-0721d9fb94c8&quot;,&quot;parentUUID&quot;:&quot;c4bba77a-4e35-4c6a-aa6f-88bff6082460&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work if devices are without device_info / services&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work if devices are without device_info / services&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const devices=await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout({result:\&quot;success\&quot;,datetime:\&quot;2020-11-06T20:47:30.840022+01:00\&quot;,devices:[{name:\&quot;Vardagsrum\&quot;,address:\&quot;10.0.10.81\&quot;,identifier:\&quot;xxx\&quot;}]}).code(1).end()})});assert.strictEqual(devices.length,1);assert.strictEqual(devices[0].name,\&quot;Vardagsrum\&quot;);assert.strictEqual(devices[0].host,\&quot;10.0.10.81\&quot;);assert.strictEqual(devices[0].id,\&quot;xxx\&quot;);assert.strictEqual(devices[0].model,void 0);assert.strictEqual(devices[0].modelName,void 0);assert.strictEqual(devices[0].os,void 0);assert.strictEqual(devices[0].version,void 0);assert.deepStrictEqual(devices[0].services,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e33d47dd-8e3d-4119-a470-c0ea5bea4799&quot;,&quot;parentUUID&quot;:&quot;c4bba77a-4e35-4c6a-aa6f-88bff6082460&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work if devices are with device_info / services&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work if devices are with device_info / services&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const devices=await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout({result:\&quot;success\&quot;,datetime:\&quot;2020-11-06T20:47:30.840022+01:00\&quot;,devices:[{name:\&quot;Vardagsrum\&quot;,address:\&quot;10.0.10.81\&quot;,identifier:\&quot;xxx\&quot;,device_info:{\&quot;model\&quot;:\&quot;Gen4K\&quot;,\&quot;model_str\&quot;:\&quot;Apple TV 4K\&quot;,\&quot;operating_system\&quot;:\&quot;TvOS\&quot;,\&quot;version\&quot;:\&quot;15.5.1\&quot;},services:[{protocol:\&quot;mrp\&quot;,port:49152},{protocol:\&quot;airplay\&quot;,port:7e3}]}]}).code(1).end()})});assert.strictEqual(devices.length,1);assert.strictEqual(devices[0].name,\&quot;Vardagsrum\&quot;);assert.strictEqual(devices[0].host,\&quot;10.0.10.81\&quot;);assert.strictEqual(devices[0].id,\&quot;xxx\&quot;);assert.strictEqual(devices[0].model,\&quot;Gen4K\&quot;);assert.strictEqual(devices[0].modelName,\&quot;Apple TV 4K\&quot;);assert.strictEqual(devices[0].os,\&quot;TvOS\&quot;);assert.strictEqual(devices[0].version,\&quot;15.5.1\&quot;);assert.deepStrictEqual(devices[0].services,[{protocol:NodePyATVProtocol.mrp,port:49152},{protocol:NodePyATVProtocol.airplay,port:7e3}])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1826388a-96fd-4e10-8ce6-876950c1b5e9&quot;,&quot;parentUUID&quot;:&quot;c4bba77a-4e35-4c6a-aa6f-88bff6082460&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for unicast scans&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work for unicast scans&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const devices=await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout(`{\&quot;result\&quot;: \&quot;failure\&quot;, \&quot;datetime\&quot;: \&quot;2024-05-18T16:20:18.103087-06:00\&quot;, \&quot;error\&quot;: \&quot;Task exception was never retrieved\&quot;, \&quot;exception\&quot;: \&quot;[Errno 113] Connect call failed (&#x27;10.0.0.232&#x27;, 32498)\&quot;, \&quot;stacktrace\&quot;: \&quot;Traceback (most recent call last):\\\\n  File \\\\\&quot;/var/lib/homebridge/appletv-enhanced/.venv/lib/python3.11/site-packages/pyatv/support/knock.py\\\\\&quot;, line 28, in _async_knock\\\\n    _, writer = await asyncio.wait_for(\\\\n                ^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/tasks.py\\\\\&quot;, line 479, in wait_for\\\\n    return fut.result()\\\\n           ^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/streams.py\\\\\&quot;, line 48, in open_connection\\\\n    transport, _ = await loop.create_connection(\\\\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1085, in create_connection\\\\n    raise exceptions[0]\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1069, in create_connection\\\\n    sock = await self._connect_sock(\\\\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 973, in _connect_sock\\\\n    await self.sock_connect(sock, address)\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 634, in sock_connect\\\\n    return await fut\\\\n           ^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 674, in _sock_connect_cb\\\\n    raise OSError(err, f&#x27;Connect call failed {address}&#x27;)\\\\nOSError: [Errno 113] Connect call failed (&#x27;10.0.0.232&#x27;, 32498)\\\\n\&quot;}\n{\&quot;result\&quot;: \&quot;failure\&quot;, \&quot;datetime\&quot;: \&quot;2024-05-18T16:20:18.114744-06:00\&quot;, \&quot;error\&quot;: \&quot;Task exception was never retrieved\&quot;, \&quot;exception\&quot;: \&quot;[Errno 113] Connect call failed (&#x27;10.0.0.229&#x27;, 32498)\&quot;, \&quot;stacktrace\&quot;: \&quot;Traceback (most recent call last):\\\\n  File \\\\\&quot;/var/lib/homebridge/appletv-enhanced/.venv/lib/python3.11/site-packages/pyatv/support/knock.py\\\\\&quot;, line 28, in _async_knock\\\\n    _, writer = await asyncio.wait_for(\\\\n                ^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/tasks.py\\\\\&quot;, line 479, in wait_for\\\\n    return fut.result()\\\\n           ^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/streams.py\\\\\&quot;, line 48, in open_connection\\\\n    transport, _ = await loop.create_connection(\\\\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1085, in create_connection\\\\n    raise exceptions[0]\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1069, in create_connection\\\\n    sock = await self._connect_sock(\\\\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 973, in _connect_sock\\\\n    await self.sock_connect(sock, address)\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 634, in sock_connect\\\\n    return await fut\\\\n           ^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 674, in _sock_connect_cb\\\\n    raise OSError(err, f&#x27;Connect call failed {address}&#x27;)\\\\nOSError: [Errno 113] Connect call failed (&#x27;10.0.0.229&#x27;, 32498)\\\\n\&quot;}\n{\&quot;result\&quot;: \&quot;success\&quot;, \&quot;datetime\&quot;: \&quot;2024-05-18T16:20:20.042648-06:00\&quot;, \&quot;devices\&quot;: [{\&quot;name\&quot;: \&quot;Living Room\&quot;, \&quot;address\&quot;: \&quot;10.0.0.30\&quot;, \&quot;identifier\&quot;: \&quot;37323C0E-99E6-4CC3-A006-1ED5368FFF8C\&quot;, \&quot;all_identifiers\&quot;: [\&quot;86B730B2-5189-4B6A-BCAA-CDDB18F05FA8\&quot;, \&quot;C8:D0:83:E9:D0:49\&quot;, \&quot;37323C0E-99E6-4CC3-A006-1ED5368FFF8C\&quot;, \&quot;C8D083E9D049\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;C8:D0:83:E9:D0:49\&quot;, \&quot;model\&quot;: \&quot;Gen4K\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4K\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.5\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49154}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}, {\&quot;name\&quot;: \&quot;Kitchen\&quot;, \&quot;address\&quot;: \&quot;10.0.0.79\&quot;, \&quot;identifier\&quot;: \&quot;45B6A67A-9FAD-497D-95EF-7FC5ECB3371C\&quot;, \&quot;all_identifiers\&quot;: [\&quot;B163C908-000F-4983-BDC7-BEFD76887EF5\&quot;, \&quot;C8:69:CD:63:2A:11\&quot;, \&quot;45B6A67A-9FAD-497D-95EF-7FC5ECB3371C\&quot;, \&quot;C869CD632A11\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;C8:69:CD:63:2A:11\&quot;, \&quot;model\&quot;: \&quot;Gen4\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.4\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49157}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}, {\&quot;name\&quot;: \&quot;Bedroom\&quot;, \&quot;address\&quot;: \&quot;10.0.0.20\&quot;, \&quot;identifier\&quot;: \&quot;CA55DA36-ADEF-4DBC-A0B3-BA68B0C53E40\&quot;, \&quot;all_identifiers\&quot;: [\&quot;08:66:98:BC:37:1F\&quot;, \&quot;108F35A0-FF21-4884-96C2-145AAAB1B4C4\&quot;, \&quot;CA55DA36-ADEF-4DBC-A0B3-BA68B0C53E40\&quot;, \&quot;086698BC371F\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;08:66:98:BC:37:1F\&quot;, \&quot;model\&quot;: \&quot;Gen4\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.4\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49154}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}, {\&quot;name\&quot;: \&quot;Basement\&quot;, \&quot;address\&quot;: \&quot;10.0.0.156\&quot;, \&quot;identifier\&quot;: \&quot;C02B27DB-2AF3-43E7-8EF7-885E1E9AB3B4\&quot;, \&quot;all_identifiers\&quot;: [\&quot;8BDB6773-479F-4C01-A185-29FF5516F2C2\&quot;, \&quot;D0:03:4B:4C:2A:2E\&quot;, \&quot;C02B27DB-2AF3-43E7-8EF7-885E1E9AB3B4\&quot;, \&quot;D0034B4C2A2E\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;D0:03:4B:4C:2A:2E\&quot;, \&quot;model\&quot;: \&quot;Gen4\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.4\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49154}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}]}`).code(1).end()})});assert.strictEqual(devices.length,4);assert.strictEqual(devices[0].name,\&quot;Living Room\&quot;);assert.strictEqual(devices[0].host,\&quot;10.0.0.30\&quot;);assert.strictEqual(devices[0].id,\&quot;37323C0E-99E6-4CC3-A006-1ED5368FFF8C\&quot;);assert.strictEqual(devices[1].name,\&quot;Kitchen\&quot;);assert.strictEqual(devices[1].host,\&quot;10.0.0.79\&quot;);assert.strictEqual(devices[1].id,\&quot;45B6A67A-9FAD-497D-95EF-7FC5ECB3371C\&quot;);assert.strictEqual(devices[2].name,\&quot;Bedroom\&quot;);assert.strictEqual(devices[2].host,\&quot;10.0.0.20\&quot;);assert.strictEqual(devices[2].id,\&quot;CA55DA36-ADEF-4DBC-A0B3-BA68B0C53E40\&quot;);assert.strictEqual(devices[3].name,\&quot;Basement\&quot;);assert.strictEqual(devices[3].host,\&quot;10.0.0.156\&quot;);assert.strictEqual(devices[3].id,\&quot;C02B27DB-2AF3-43E7-8EF7-885E1E9AB3B4\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7f6e41aa-ea2f-45cf-b3bf-19449f1eb17a&quot;,&quot;parentUUID&quot;:&quot;c4bba77a-4e35-4c6a-aa6f-88bff6082460&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for unicast scans with returnDevicesAndErrors = true&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work for unicast scans with returnDevicesAndErrors = true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response=await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout(`{\&quot;result\&quot;: \&quot;failure\&quot;, \&quot;datetime\&quot;: \&quot;2024-05-18T16:20:18.103087-06:00\&quot;, \&quot;error\&quot;: \&quot;Task exception was never retrieved\&quot;, \&quot;exception\&quot;: \&quot;[Errno 113] Connect call failed (&#x27;10.0.0.232&#x27;, 32498)\&quot;, \&quot;stacktrace\&quot;: \&quot;Traceback (most recent call last):\\\\n  File \\\\\&quot;/var/lib/homebridge/appletv-enhanced/.venv/lib/python3.11/site-packages/pyatv/support/knock.py\\\\\&quot;, line 28, in _async_knock\\\\n    _, writer = await asyncio.wait_for(\\\\n                ^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/tasks.py\\\\\&quot;, line 479, in wait_for\\\\n    return fut.result()\\\\n           ^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/streams.py\\\\\&quot;, line 48, in open_connection\\\\n    transport, _ = await loop.create_connection(\\\\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1085, in create_connection\\\\n    raise exceptions[0]\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1069, in create_connection\\\\n    sock = await self._connect_sock(\\\\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 973, in _connect_sock\\\\n    await self.sock_connect(sock, address)\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 634, in sock_connect\\\\n    return await fut\\\\n           ^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 674, in _sock_connect_cb\\\\n    raise OSError(err, f&#x27;Connect call failed {address}&#x27;)\\\\nOSError: [Errno 113] Connect call failed (&#x27;10.0.0.232&#x27;, 32498)\\\\n\&quot;}\n{\&quot;result\&quot;: \&quot;failure\&quot;, \&quot;datetime\&quot;: \&quot;2024-05-18T16:20:18.114744-06:00\&quot;, \&quot;error\&quot;: \&quot;Task exception was never retrieved\&quot;, \&quot;exception\&quot;: \&quot;[Errno 113] Connect call failed (&#x27;10.0.0.229&#x27;, 32498)\&quot;, \&quot;stacktrace\&quot;: \&quot;Traceback (most recent call last):\\\\n  File \\\\\&quot;/var/lib/homebridge/appletv-enhanced/.venv/lib/python3.11/site-packages/pyatv/support/knock.py\\\\\&quot;, line 28, in _async_knock\\\\n    _, writer = await asyncio.wait_for(\\\\n                ^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/tasks.py\\\\\&quot;, line 479, in wait_for\\\\n    return fut.result()\\\\n           ^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/streams.py\\\\\&quot;, line 48, in open_connection\\\\n    transport, _ = await loop.create_connection(\\\\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1085, in create_connection\\\\n    raise exceptions[0]\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1069, in create_connection\\\\n    sock = await self._connect_sock(\\\\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 973, in _connect_sock\\\\n    await self.sock_connect(sock, address)\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 634, in sock_connect\\\\n    return await fut\\\\n           ^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 674, in _sock_connect_cb\\\\n    raise OSError(err, f&#x27;Connect call failed {address}&#x27;)\\\\nOSError: [Errno 113] Connect call failed (&#x27;10.0.0.229&#x27;, 32498)\\\\n\&quot;}\n{\&quot;result\&quot;: \&quot;success\&quot;, \&quot;datetime\&quot;: \&quot;2024-05-18T16:20:20.042648-06:00\&quot;, \&quot;devices\&quot;: [{\&quot;name\&quot;: \&quot;Living Room\&quot;, \&quot;address\&quot;: \&quot;10.0.0.30\&quot;, \&quot;identifier\&quot;: \&quot;37323C0E-99E6-4CC3-A006-1ED5368FFF8C\&quot;, \&quot;all_identifiers\&quot;: [\&quot;86B730B2-5189-4B6A-BCAA-CDDB18F05FA8\&quot;, \&quot;C8:D0:83:E9:D0:49\&quot;, \&quot;37323C0E-99E6-4CC3-A006-1ED5368FFF8C\&quot;, \&quot;C8D083E9D049\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;C8:D0:83:E9:D0:49\&quot;, \&quot;model\&quot;: \&quot;Gen4K\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4K\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.5\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49154}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}, {\&quot;name\&quot;: \&quot;Kitchen\&quot;, \&quot;address\&quot;: \&quot;10.0.0.79\&quot;, \&quot;identifier\&quot;: \&quot;45B6A67A-9FAD-497D-95EF-7FC5ECB3371C\&quot;, \&quot;all_identifiers\&quot;: [\&quot;B163C908-000F-4983-BDC7-BEFD76887EF5\&quot;, \&quot;C8:69:CD:63:2A:11\&quot;, \&quot;45B6A67A-9FAD-497D-95EF-7FC5ECB3371C\&quot;, \&quot;C869CD632A11\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;C8:69:CD:63:2A:11\&quot;, \&quot;model\&quot;: \&quot;Gen4\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.4\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49157}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}, {\&quot;name\&quot;: \&quot;Bedroom\&quot;, \&quot;address\&quot;: \&quot;10.0.0.20\&quot;, \&quot;identifier\&quot;: \&quot;CA55DA36-ADEF-4DBC-A0B3-BA68B0C53E40\&quot;, \&quot;all_identifiers\&quot;: [\&quot;08:66:98:BC:37:1F\&quot;, \&quot;108F35A0-FF21-4884-96C2-145AAAB1B4C4\&quot;, \&quot;CA55DA36-ADEF-4DBC-A0B3-BA68B0C53E40\&quot;, \&quot;086698BC371F\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;08:66:98:BC:37:1F\&quot;, \&quot;model\&quot;: \&quot;Gen4\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.4\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49154}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}, {\&quot;name\&quot;: \&quot;Basement\&quot;, \&quot;address\&quot;: \&quot;10.0.0.156\&quot;, \&quot;identifier\&quot;: \&quot;C02B27DB-2AF3-43E7-8EF7-885E1E9AB3B4\&quot;, \&quot;all_identifiers\&quot;: [\&quot;8BDB6773-479F-4C01-A185-29FF5516F2C2\&quot;, \&quot;D0:03:4B:4C:2A:2E\&quot;, \&quot;C02B27DB-2AF3-43E7-8EF7-885E1E9AB3B4\&quot;, \&quot;D0034B4C2A2E\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;D0:03:4B:4C:2A:2E\&quot;, \&quot;model\&quot;: \&quot;Gen4\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.4\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49154}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}]}`).code(1).end()})},true);assert.strictEqual(response.devices.length,4);assert.strictEqual(response.errors.length,2);assert.strictEqual(response.devices[0].name,\&quot;Living Room\&quot;);assert.strictEqual(response.devices[0].host,\&quot;10.0.0.30\&quot;);assert.strictEqual(response.devices[0].id,\&quot;37323C0E-99E6-4CC3-A006-1ED5368FFF8C\&quot;);assert.strictEqual(response.devices[1].name,\&quot;Kitchen\&quot;);assert.strictEqual(response.devices[1].host,\&quot;10.0.0.79\&quot;);assert.strictEqual(response.devices[1].id,\&quot;45B6A67A-9FAD-497D-95EF-7FC5ECB3371C\&quot;);assert.strictEqual(response.devices[2].name,\&quot;Bedroom\&quot;);assert.strictEqual(response.devices[2].host,\&quot;10.0.0.20\&quot;);assert.strictEqual(response.devices[2].id,\&quot;CA55DA36-ADEF-4DBC-A0B3-BA68B0C53E40\&quot;);assert.strictEqual(response.devices[3].name,\&quot;Basement\&quot;);assert.strictEqual(response.devices[3].host,\&quot;10.0.0.156\&quot;);assert.strictEqual(response.devices[3].id,\&quot;C02B27DB-2AF3-43E7-8EF7-885E1E9AB3B4\&quot;);assert.strictEqual(response.errors[0].exception,\&quot;[Errno 113] Connect call failed (&#x27;10.0.0.232&#x27;, 32498)\&quot;);assert.strictEqual(response.errors[1].exception,\&quot;[Errno 113] Connect call failed (&#x27;10.0.0.229&#x27;, 32498)\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;332656fd-eee1-4c9d-be9b-4c35933e61ea&quot;,&quot;parentUUID&quot;:&quot;c4bba77a-4e35-4c6a-aa6f-88bff6082460&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;be92477e-d437-4da6-911e-7368e74b6869&quot;,&quot;e7bf5811-3507-4998-a063-41a4de878192&quot;,&quot;b455aecb-e1bc-4a44-ba41-ac686cbe2a3e&quot;,&quot;3add0644-dd1f-4bc6-88b8-fff7ce5aa95a&quot;,&quot;ce5f733e-af1d-48b4-bc55-941b556f0307&quot;,&quot;3f6401a2-81cb-4eab-a885-885d56c91de4&quot;,&quot;bb3d4d6f-e483-44d2-9258-0ea478467536&quot;,&quot;c1561848-e2ae-4f50-b6d3-0721d9fb94c8&quot;,&quot;e33d47dd-8e3d-4119-a470-c0ea5bea4799&quot;,&quot;1826388a-96fd-4e10-8ce6-876950c1b5e9&quot;,&quot;7f6e41aa-ea2f-45cf-b3bf-19449f1eb17a&quot;,&quot;332656fd-eee1-4c9d-be9b-4c35933e61ea&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5410,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e7a92588-cadc-47fe-a367-c7f5346c2547&quot;,&quot;title&quot;:&quot;static device()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should pass options to constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static device() should pass options to constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=NodePyATVInstance.device({host:\&quot;192.168.178.6\&quot;,name:\&quot;My Testdevice\&quot;});assert.strictEqual(device.host,\&quot;192.168.178.6\&quot;);assert.strictEqual(device.name,\&quot;My Testdevice\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;72a8b288-641d-4820-8527-4ae2f4f09cb0&quot;,&quot;parentUUID&quot;:&quot;e7a92588-cadc-47fe-a367-c7f5346c2547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;72a8b288-641d-4820-8527-4ae2f4f09cb0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7b103bdd-3f91-4ea5-a439-0edf18808e07&quot;,&quot;title&quot;:&quot;version()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance version() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const i=new NodePyATVInstance({atvremotePath:\&quot;test\&quot;});await i.version({spawn:createFakeSpawn(cp=&gt;{assert.strictEqual(cp.cmd(),\&quot;test\&quot;);cp.code(1).end()})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9af3b2d8-93c0-4de0-8c81-2864cc76ea69&quot;,&quot;parentUUID&quot;:&quot;7b103bdd-3f91-4ea5-a439-0edf18808e07&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9af3b2d8-93c0-4de0-8c81-2864cc76ea69&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fd4ae50d-641d-403d-90c0-e189f70d998a&quot;,&quot;title&quot;:&quot;check()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance check() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const i=new NodePyATVInstance({atvremotePath:\&quot;test\&quot;});await assert.rejects(async()=&gt;{await i.check({spawn:createFakeSpawn(cp=&gt;{assert.strictEqual(cp.cmd(),\&quot;test\&quot;);cp.error(new Error(\&quot;spawn atvremote ENOENT\&quot;)).code(1).end()})})},/Unable to find pyatv. Is it installed?/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;78ad8ce3-b902-4633-a91f-f147312780a9&quot;,&quot;parentUUID&quot;:&quot;fd4ae50d-641d-403d-90c0-e189f70d998a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;78ad8ce3-b902-4633-a91f-f147312780a9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b27e12a9-ede7-4b6f-99d1-609216a5df2a&quot;,&quot;title&quot;:&quot;find()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance find() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const i=new NodePyATVInstance({atvscriptPath:\&quot;test\&quot;});await i.find({spawn:createFakeSpawn(cp=&gt;{assert.strictEqual(cp.cmd(),\&quot;test\&quot;);cp.stdout({\&quot;result\&quot;:\&quot;success\&quot;,\&quot;datetime\&quot;:\&quot;2020-11-06T20:47:30.840022+01:00\&quot;,\&quot;devices\&quot;:[]}).end()})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b129f8ec-1eef-456e-b027-aa699baa9d8b&quot;,&quot;parentUUID&quot;:&quot;b27e12a9-ede7-4b6f-99d1-609216a5df2a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b129f8ec-1eef-456e-b027-aa699baa9d8b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e065e138-9d39-4597-8244-3cdba14ec019&quot;,&quot;title&quot;:&quot;device()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance device() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const i=new NodePyATVInstance({debug:true});const d=i.device({name:\&quot;My Testdevice\&quot;,host:\&quot;192.168.178.2\&quot;});assert.deepStrictEqual(d.debug,true)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bcedc0e5-5686-4d17-9fc4-1ef6c44d0bb9&quot;,&quot;parentUUID&quot;:&quot;e065e138-9d39-4597-8244-3cdba14ec019&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bcedc0e5-5686-4d17-9fc4-1ef6c44d0bb9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;de05fba7-2983-4c35-ace3-f8185a3b060f&quot;,&quot;title&quot;:&quot;Type Exports&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Type NodePyATVProtocol should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVProtocol should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVProtocol)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a73881e2-5c75-49bb-bbd9-385c0ba7618f&quot;,&quot;parentUUID&quot;:&quot;de05fba7-2983-4c35-ace3-f8185a3b060f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVMediaType should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVMediaType should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVMediaType)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ae8f5987-4e3b-4b47-af52-335c4338cf7c&quot;,&quot;parentUUID&quot;:&quot;de05fba7-2983-4c35-ace3-f8185a3b060f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVDeviceEvent should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVDeviceEvent should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVDeviceEvent)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;89bd00aa-6f33-4bee-a8ab-cf1df57d7bc1&quot;,&quot;parentUUID&quot;:&quot;de05fba7-2983-4c35-ace3-f8185a3b060f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVDeviceState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVDeviceState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVDeviceState)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d1b09443-945f-4652-a56a-cbb2fb974960&quot;,&quot;parentUUID&quot;:&quot;de05fba7-2983-4c35-ace3-f8185a3b060f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVRepeatState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVRepeatState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVRepeatState)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d0a9c0b3-427c-4105-8b91-4c3df750e77b&quot;,&quot;parentUUID&quot;:&quot;de05fba7-2983-4c35-ace3-f8185a3b060f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVShuffleState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVShuffleState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVShuffleState)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3fc16fa2-e8f7-4a02-908f-4b4d1aced865&quot;,&quot;parentUUID&quot;:&quot;de05fba7-2983-4c35-ace3-f8185a3b060f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVKeys should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVKeys should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVKeys)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2eab6007-8b5c-4837-8f4c-f3dd1bb83f5e&quot;,&quot;parentUUID&quot;:&quot;de05fba7-2983-4c35-ace3-f8185a3b060f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVInstanceOptions should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVInstanceOptions should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVListenerState)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;111f1767-bbd0-46da-806a-57f4d26bc4a8&quot;,&quot;parentUUID&quot;:&quot;de05fba7-2983-4c35-ace3-f8185a3b060f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVPowerState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVPowerState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVPowerState)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;671ed786-dc2c-4ec5-baf7-aa5473b5fc6f&quot;,&quot;parentUUID&quot;:&quot;de05fba7-2983-4c35-ace3-f8185a3b060f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a73881e2-5c75-49bb-bbd9-385c0ba7618f&quot;,&quot;ae8f5987-4e3b-4b47-af52-335c4338cf7c&quot;,&quot;89bd00aa-6f33-4bee-a8ab-cf1df57d7bc1&quot;,&quot;d1b09443-945f-4652-a56a-cbb2fb974960&quot;,&quot;d0a9c0b3-427c-4105-8b91-4c3df750e77b&quot;,&quot;3fc16fa2-e8f7-4a02-908f-4b4d1aced865&quot;,&quot;2eab6007-8b5c-4837-8f4c-f3dd1bb83f5e&quot;,&quot;111f1767-bbd0-46da-806a-57f4d26bc4a8&quot;,&quot;671ed786-dc2c-4ec5-baf7-aa5473b5fc6f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3f929134-29d5-4d44-98c0-ab5aefa6a54a&quot;,&quot;title&quot;:&quot;Tools&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;95f5a541-edea-4289-9fe5-8dd4b30ca28f&quot;,&quot;title&quot;:&quot;addRequestId() / removeRequestId()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a string&quot;,&quot;fullTitle&quot;:&quot;Tools addRequestId() / removeRequestId() should return a string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id=addRequestId();assert.strictEqual(typeof id,\&quot;string\&quot;);removeRequestId(id)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5d6cb75f-28f5-4ac3-95f4-1dc44384be0d&quot;,&quot;parentUUID&quot;:&quot;95f5a541-edea-4289-9fe5-8dd4b30ca28f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work if given id is not in index&quot;,&quot;fullTitle&quot;:&quot;Tools addRequestId() / removeRequestId() should work if given id is not in index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;removeRequestId(\&quot;FOO\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d8667a98-0592-42cf-8410-d18f8ceb2ba3&quot;,&quot;parentUUID&quot;:&quot;95f5a541-edea-4289-9fe5-8dd4b30ca28f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5d6cb75f-28f5-4ac3-95f4-1dc44384be0d&quot;,&quot;d8667a98-0592-42cf-8410-d18f8ceb2ba3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;210af6fb-d1a5-450c-9238-e96f1f28c514&quot;,&quot;title&quot;:&quot;debug()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work without any options&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work without any options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(\&quot;TEST\&quot;,\&quot;Hello World.\&quot;,{})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e9d9faad-826a-4654-9164-62e4f9edeee0&quot;,&quot;parentUUID&quot;:&quot;210af6fb-d1a5-450c-9238-e96f1f28c514&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with default logger&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with default logger&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(\&quot;TEST\&quot;,\&quot;Hello World.\&quot;,{debug:true})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8a2721b5-3f95-4219-8215-32251e182eb7&quot;,&quot;parentUUID&quot;:&quot;210af6fb-d1a5-450c-9238-e96f1f28c514&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with custom logger&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with custom logger&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(\&quot;TEST\&quot;,\&quot;Hello World.\&quot;,{debug:__name(function(msg){assert.strictEqual(this,null);assert.ok(msg.includes(\&quot;Hello World\&quot;))},\&quot;debug\&quot;)})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ca8e4cea-28d6-449a-8b00-7b6afafdd9bc&quot;,&quot;parentUUID&quot;:&quot;210af6fb-d1a5-450c-9238-e96f1f28c514&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with colors disabled&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with colors disabled&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(\&quot;TEST\&quot;,\&quot;Hello World.\&quot;,{noColors:true})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fb6488c9-37ad-439e-81ea-e3c75a8856e2&quot;,&quot;parentUUID&quot;:&quot;210af6fb-d1a5-450c-9238-e96f1f28c514&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with custom logger and colors disabled&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with custom logger and colors disabled&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(\&quot;TEST\&quot;,\&quot;Hello World.\&quot;,{noColors:true,debug:__name(function(msg){assert.strictEqual(this,null);assert.strictEqual(msg,\&quot;[node-pyatv][TEST] Hello World.\&quot;)},\&quot;debug\&quot;)})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4aa46584-b3a4-4b93-aca9-e48f996d0ae7&quot;,&quot;parentUUID&quot;:&quot;210af6fb-d1a5-450c-9238-e96f1f28c514&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e9d9faad-826a-4654-9164-62e4f9edeee0&quot;,&quot;8a2721b5-3f95-4219-8215-32251e182eb7&quot;,&quot;ca8e4cea-28d6-449a-8b00-7b6afafdd9bc&quot;,&quot;fb6488c9-37ad-439e-81ea-e3c75a8856e2&quot;,&quot;4aa46584-b3a4-4b93-aca9-e48f996d0ae7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ef84628c-df92-4162-b1f4-d58d41f758da&quot;,&quot;title&quot;:&quot;getExecutable()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should handle atvremotePath if set&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle atvremotePath if set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=getExecutable(NodePyATVExecutableType.atvremote,{atvremotePath:\&quot;/tmp/1\&quot;,atvscriptPath:\&quot;/tmp/2\&quot;});assert.strictEqual(result,\&quot;/tmp/1\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3fc41ddf-7690-4209-a967-51b3fe3832ee&quot;,&quot;parentUUID&quot;:&quot;ef84628c-df92-4162-b1f4-d58d41f758da&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle atvscriptPath if set&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle atvscriptPath if set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=getExecutable(NodePyATVExecutableType.atvscript,{atvremotePath:\&quot;/tmp/1\&quot;,atvscriptPath:\&quot;/tmp/2\&quot;});assert.strictEqual(result,\&quot;/tmp/2\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c4112fe9-1b34-43a0-84f7-84f70381a9b8&quot;,&quot;parentUUID&quot;:&quot;ef84628c-df92-4162-b1f4-d58d41f758da&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle default for atvremote&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle default for atvremote&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=getExecutable(NodePyATVExecutableType.atvremote,{atvscriptPath:\&quot;/tmp\&quot;});assert.strictEqual(result,\&quot;atvremote\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;342fef93-ccb6-414c-9d45-63b54a061c59&quot;,&quot;parentUUID&quot;:&quot;ef84628c-df92-4162-b1f4-d58d41f758da&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle default for atvscript&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle default for atvscript&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=getExecutable(NodePyATVExecutableType.atvscript,{atvremotePath:\&quot;/tmp\&quot;});assert.strictEqual(result,\&quot;atvscript\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eed3e983-face-4843-97ff-93c1d0df91c6&quot;,&quot;parentUUID&quot;:&quot;ef84628c-df92-4162-b1f4-d58d41f758da&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3fc41ddf-7690-4209-a967-51b3fe3832ee&quot;,&quot;c4112fe9-1b34-43a0-84f7-84f70381a9b8&quot;,&quot;342fef93-ccb6-414c-9d45-63b54a061c59&quot;,&quot;eed3e983-face-4843-97ff-93c1d0df91c6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8bd7a9a0-1929-4dc7-892a-2a5854bcab58&quot;,&quot;title&quot;:&quot;getParameters()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;empty case&quot;,&quot;fullTitle&quot;:&quot;Tools getParameters() empty case&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await getParameters();assert.deepEqual(result,[])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;751aec47-2298-46b3-8768-59674322dccc&quot;,&quot;parentUUID&quot;:&quot;8bd7a9a0-1929-4dc7-892a-2a5854bcab58&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;easy case&quot;,&quot;fullTitle&quot;:&quot;Tools getParameters() easy case&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await getParameters({host:\&quot;192.168.178.2\&quot;});assert.deepEqual(result,[\&quot;-s\&quot;,\&quot;192.168.178.2\&quot;])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;335862a2-654b-46f2-9963-3dde71d3bb84&quot;,&quot;parentUUID&quot;:&quot;8bd7a9a0-1929-4dc7-892a-2a5854bcab58&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;full case&quot;,&quot;fullTitle&quot;:&quot;Tools getParameters() full case&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await getParameters({hosts:[\&quot;192.168.178.2\&quot;,\&quot;192.168.178.3\&quot;],id:\&quot;****\&quot;,protocol:NodePyATVProtocol.mrp,dmapCredentials:\&quot;****\&quot;,mrpCredentials:\&quot;****\&quot;,airplayCredentials:\&quot;****\&quot;,companionCredentials:\&quot;1234\&quot;,raopCredentials:\&quot;::foo:\&quot;});assert.deepEqual(result,[\&quot;-s\&quot;,\&quot;192.168.178.2,192.168.178.3\&quot;,\&quot;-i\&quot;,\&quot;****\&quot;,\&quot;--protocol\&quot;,\&quot;mrp\&quot;,\&quot;--dmap-credentials\&quot;,\&quot;****\&quot;,\&quot;--mrp-credentials\&quot;,\&quot;****\&quot;,\&quot;--airplay-credentials\&quot;,\&quot;****\&quot;,\&quot;--companion-credentials\&quot;,\&quot;1234\&quot;,\&quot;--raop-credentials\&quot;,\&quot;::foo:\&quot;])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eaf3b6c5-7d0e-49b4-bc46-1cbf4329c2a6&quot;,&quot;parentUUID&quot;:&quot;8bd7a9a0-1929-4dc7-892a-2a5854bcab58&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;751aec47-2298-46b3-8768-59674322dccc&quot;,&quot;335862a2-654b-46f2-9963-3dde71d3bb84&quot;,&quot;eaf3b6c5-7d0e-49b4-bc46-1cbf4329c2a6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d10a69c5-fc77-4447-b552-0f0a9f5c83fa&quot;,&quot;title&quot;:&quot;parseState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work with empty data&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should work with empty data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input={};const result=parseState(input,\&quot;\&quot;,{});assert.deepStrictEqual(result,{dateTime:null,hash:null,mediaType:null,deviceState:null,title:null,artist:null,album:null,genre:null,totalTime:null,position:null,shuffle:null,repeat:null,app:null,appId:null,powerState:null,focusState:null,volume:null,outputDevices:null,contentIdentifier:null,iTunesStoreIdentifier:null,episodeNumber:null,seasonNumber:null,seriesName:null})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3354a727-d978-4dd2-987e-fbf8d8d5c845&quot;,&quot;parentUUID&quot;:&quot;d10a69c5-fc77-4447-b552-0f0a9f5c83fa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work without data&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should work without data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=parseState(null,\&quot;\&quot;,{});assert.deepStrictEqual(result,{dateTime:null,hash:null,mediaType:null,deviceState:null,title:null,artist:null,album:null,genre:null,totalTime:null,position:null,shuffle:null,repeat:null,app:null,appId:null,powerState:null,focusState:null,volume:null,outputDevices:null,contentIdentifier:null,iTunesStoreIdentifier:null,episodeNumber:null,seasonNumber:null,seriesName:null})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;45817cbf-25be-49cd-bb9d-eeaf4b21039b&quot;,&quot;parentUUID&quot;:&quot;d10a69c5-fc77-4447-b552-0f0a9f5c83fa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with example data&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should work with example data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input={result:\&quot;success\&quot;,datetime:\&quot;2020-11-07T22:38:43.608030+01:00\&quot;,hash:\&quot;100e0ab6-6ff5-4199-9c04-a7107ff78712\&quot;,media_type:\&quot;video\&quot;,device_state:\&quot;playing\&quot;,title:\&quot;Solo: A Star Wars Story\&quot;,artist:null,album:null,genre:null,total_time:8097,position:27,shuffle:\&quot;off\&quot;,repeat:\&quot;off\&quot;,app:\&quot;Disney+\&quot;,app_id:\&quot;com.disney.disneyplus\&quot;,power_state:null,focus_state:null,volume:null,output_devices:null,content_identifier:null,itunes_store_identifier:null,episode_number:null,season_number:null,series_name:null};const result=parseState(input,\&quot;\&quot;,{});assert.deepStrictEqual(result,{dateTime:new Date(\&quot;2020-11-07T22:38:43.608030+01:00\&quot;),hash:\&quot;100e0ab6-6ff5-4199-9c04-a7107ff78712\&quot;,mediaType:NodePyATVMediaType.video,deviceState:NodePyATVDeviceState.playing,title:\&quot;Solo: A Star Wars Story\&quot;,artist:null,album:null,genre:null,totalTime:8097,position:27,shuffle:NodePyATVShuffleState.off,repeat:NodePyATVRepeatState.off,app:\&quot;Disney+\&quot;,appId:\&quot;com.disney.disneyplus\&quot;,powerState:null,focusState:null,volume:null,outputDevices:null,contentIdentifier:null,iTunesStoreIdentifier:null,episodeNumber:null,seasonNumber:null,seriesName:null})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0cf1a301-42cd-40c2-a132-d32e4fbfefe4&quot;,&quot;parentUUID&quot;:&quot;d10a69c5-fc77-4447-b552-0f0a9f5c83fa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw an error for pyatv exceptions&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should throw an error for pyatv exceptions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input={result:\&quot;failure\&quot;,datetime:\&quot;2021-11-24T21:13:36.424576+03:00\&quot;,exception:\&quot;invalid credentials: 321\&quot;,stacktrace:&#x27;Traceback (most recent call last):\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\&quot;, line 302, in appstart\\n    print(args.output(await _handle_command(args, abort_sem, loop)), flush=True)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\&quot;, line 196, in _handle_command\\n    atv = await connect(config, loop, protocol=Protocol.MRP)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/__init__.py\&quot;, line 96, in connect\\n    for setup_data in proto_methods.setup(\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\&quot;, line 192, in setup\\n    stream = AirPlayStream(config, service)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\&quot;, line 79, in __init__\\n    self._credentials: HapCredentials = parse_credentials(self.service.credentials)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/auth/hap_pairing.py\&quot;, line 139, in parse_credentials\\n    raise exceptions.InvalidCredentialsError(\&quot;invalid credentials: \&quot; + detail_string)\\npyatv.exceptions.InvalidCredentialsError: invalid credentials: 321\\n&#x27;};assert.throws(()=&gt;{parseState(input,\&quot;\&quot;,{})},/Got pyatv Error: invalid credentials: 321/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;24a2e4b7-9556-435c-a42d-b5bbfe7e154f&quot;,&quot;parentUUID&quot;:&quot;d10a69c5-fc77-4447-b552-0f0a9f5c83fa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should ignore date if it&#x27;s an invalid date&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should ignore date if it&#x27;s an invalid date&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input={datetime:\&quot;today\&quot;};const result=parseState(input,\&quot;\&quot;,{});assert.deepStrictEqual(result,{dateTime:null,hash:null,mediaType:null,deviceState:null,title:null,artist:null,album:null,genre:null,totalTime:null,position:null,shuffle:null,repeat:null,app:null,appId:null,powerState:null,focusState:null,volume:null,outputDevices:null,contentIdentifier:null,iTunesStoreIdentifier:null,episodeNumber:null,seasonNumber:null,seriesName:null})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;de74af01-3ef5-48f4-a28b-91f699568dba&quot;,&quot;parentUUID&quot;:&quot;d10a69c5-fc77-4447-b552-0f0a9f5c83fa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should ignore data if unsupported type&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should ignore data if unsupported type&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input={result:\&quot;success\&quot;,datetime:true,hash:1337,media_type:false,device_state:43,title:void 0,artist:90,album:Infinity,genre:Math.PI,total_time:\&quot;23min\&quot;,position:\&quot;0:30.123\&quot;,shuffle:false,repeat:true,app:0,app_id:891645381647289,power_state:null,focus_state:null,volume:null,output_devices:null,content_identifier:null,itunes_store_identifier:null,episode_number:null,season_number:null,series_name:null};const result=parseState(input,\&quot;\&quot;,{});assert.deepStrictEqual(result,{dateTime:null,hash:null,mediaType:null,deviceState:null,title:null,artist:null,album:null,genre:null,totalTime:null,position:null,shuffle:null,repeat:null,app:null,appId:null,powerState:null,focusState:null,volume:null,outputDevices:null,contentIdentifier:null,iTunesStoreIdentifier:null,episodeNumber:null,seasonNumber:null,seriesName:null})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e4852db-5a9c-4c2f-9930-0c67554206b7&quot;,&quot;parentUUID&quot;:&quot;d10a69c5-fc77-4447-b552-0f0a9f5c83fa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should ignore enums with unsupported valid&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should ignore enums with unsupported valid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input={media_type:\&quot;3d-experience\&quot;,device_state:\&quot;initiating\&quot;,shuffle:\&quot;everything\&quot;,repeat:\&quot;nothing\&quot;};const result=parseState(input,\&quot;\&quot;,{});assert.deepStrictEqual(result,{dateTime:null,hash:null,mediaType:null,deviceState:null,title:null,artist:null,album:null,genre:null,totalTime:null,position:null,shuffle:null,repeat:null,app:null,appId:null,powerState:null,focusState:null,volume:null,outputDevices:null,contentIdentifier:null,iTunesStoreIdentifier:null,episodeNumber:null,seasonNumber:null,seriesName:null})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ec18bd84-b133-43be-a142-8c057d7d9bdd&quot;,&quot;parentUUID&quot;:&quot;d10a69c5-fc77-4447-b552-0f0a9f5c83fa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3354a727-d978-4dd2-987e-fbf8d8d5c845&quot;,&quot;45817cbf-25be-49cd-bb9d-eeaf4b21039b&quot;,&quot;0cf1a301-42cd-40c2-a132-d32e4fbfefe4&quot;,&quot;24a2e4b7-9556-435c-a42d-b5bbfe7e154f&quot;,&quot;de74af01-3ef5-48f4-a28b-91f699568dba&quot;,&quot;8e4852db-5a9c-4c2f-9930-0c67554206b7&quot;,&quot;ec18bd84-b133-43be-a142-8c057d7d9bdd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;10.8.2&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;node-pyatv&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report/assets&quot;,&quot;jsonFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/mochawesome-report/mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>