<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:102,&quot;tests&quot;:174,&quot;passes&quot;:172,&quot;pending&quot;:2,&quot;failures&quot;:0,&quot;start&quot;:&quot;2025-05-12T16:26:34.438Z&quot;,&quot;end&quot;:&quot;2025-05-12T16:26:46.930Z&quot;,&quot;duration&quot;:12492,&quot;testsRegistered&quot;:174,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:1.1494252873563218,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;a306b358-bc7a-4d84-a4c9-d98128977572&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;cb779f8c-e767-4718-815c-8fc845a9a723&quot;,&quot;title&quot;:&quot;NodePyATVDeviceEvent&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;aab941a4-7416-45a4-ac29-48421a67b0d3&quot;,&quot;title&quot;:&quot;get key()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get key() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event=new NodePyATVDeviceEvent({device:new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testinstance\&quot;}),key:\&quot;genre\&quot;,new:\&quot;Rock\&quot;,old:\&quot;Jazz\&quot;});assert.strictEqual(event.key,\&quot;genre\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e8e1c047-6b1a-4de5-adda-d62e2fc6982a&quot;,&quot;parentUUID&quot;:&quot;aab941a4-7416-45a4-ac29-48421a67b0d3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e8e1c047-6b1a-4de5-adda-d62e2fc6982a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;79cdeeba-62b3-4681-a8cf-0df88220f58b&quot;,&quot;title&quot;:&quot;get oldValue()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get oldValue() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event=new NodePyATVDeviceEvent({device:new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testinstance\&quot;}),key:\&quot;genre\&quot;,new:\&quot;Rock\&quot;,old:\&quot;Jazz\&quot;});assert.strictEqual(event.oldValue,\&quot;Jazz\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;754827bc-8eca-464a-a14d-4ef74bb6044c&quot;,&quot;parentUUID&quot;:&quot;79cdeeba-62b3-4681-a8cf-0df88220f58b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;754827bc-8eca-464a-a14d-4ef74bb6044c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;298f4850-948c-45c1-9520-7997b49fe16b&quot;,&quot;title&quot;:&quot;get newValue()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get newValue() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event=new NodePyATVDeviceEvent({device:new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testinstance\&quot;}),key:\&quot;genre\&quot;,new:\&quot;Rock\&quot;,old:\&quot;Jazz\&quot;});assert.strictEqual(event.newValue,\&quot;Rock\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6a069354-5641-4ba7-970d-604e5f8f9189&quot;,&quot;parentUUID&quot;:&quot;298f4850-948c-45c1-9520-7997b49fe16b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6a069354-5641-4ba7-970d-604e5f8f9189&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;804a09ed-dcbf-4b3f-85c2-4e5531fea5db&quot;,&quot;title&quot;:&quot;get value()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get value() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event=new NodePyATVDeviceEvent({device:new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testinstance\&quot;}),key:\&quot;genre\&quot;,new:\&quot;Rock\&quot;,old:\&quot;Jazz\&quot;});assert.strictEqual(event.value,\&quot;Rock\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f33cc637-40f7-4eb2-a3ad-03d0a41e6c14&quot;,&quot;parentUUID&quot;:&quot;804a09ed-dcbf-4b3f-85c2-4e5531fea5db&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f33cc637-40f7-4eb2-a3ad-03d0a41e6c14&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8e1b3fab-e7b5-416c-b768-521f455e55ff&quot;,&quot;title&quot;:&quot;get device()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get device() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testinstance\&quot;});const event=new NodePyATVDeviceEvent({device,key:\&quot;genre\&quot;,new:\&quot;Rock\&quot;,old:\&quot;Jazz\&quot;});assert.deepEqual(event.device,device)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3c08d082-e004-4e17-85c9-5c7857037e30&quot;,&quot;parentUUID&quot;:&quot;8e1b3fab-e7b5-416c-b768-521f455e55ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3c08d082-e004-4e17-85c9-5c7857037e30&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d76d8275-d982-4094-b26e-9a8cd400ab9b&quot;,&quot;title&quot;:&quot;NodePyATVDeviceEvents&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f6c75555-cfaf-4c16-8d69-c7006f07bf1d&quot;,&quot;title&quot;:&quot;applyStateAndEmitEvents()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should emit update:key event&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit update:key event&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});await new Promise(cb=&gt;{device.once(\&quot;update:title\&quot;,event=&gt;{assert.ok(event instanceof NodePyATVDeviceEvent);assert.strictEqual(event.key,\&quot;title\&quot;);assert.strictEqual(event.oldValue,null);assert.strictEqual(event.newValue,\&quot;My Movie\&quot;);assert.strictEqual(event.value,\&quot;My Movie\&quot;);assert.deepStrictEqual(event.device,device);cb(void 0)})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bce5fc61-ef6a-4238-b8fa-90f3e9e4e2d2&quot;,&quot;parentUUID&quot;:&quot;f6c75555-cfaf-4c16-8d69-c7006f07bf1d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit update event&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit update event&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});await new Promise(cb=&gt;{device.once(\&quot;update\&quot;,event=&gt;{assert.ok(event instanceof NodePyATVDeviceEvent);assert.strictEqual(event.key,\&quot;title\&quot;);assert.strictEqual(event.oldValue,null);assert.strictEqual(event.newValue,\&quot;My Movie\&quot;);assert.strictEqual(event.value,\&quot;My Movie\&quot;);assert.deepStrictEqual(event.device,device);cb(void 0)})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ea259aac-ef3d-4412-8244-e108c6f64d92&quot;,&quot;parentUUID&quot;:&quot;f6c75555-cfaf-4c16-8d69-c7006f07bf1d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit update:key event before update&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit update:key event before update&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});const sort=[];await Promise.race([new Promise(cb=&gt;{device.once(\&quot;update\&quot;,()=&gt;{sort.push(\&quot;update\&quot;);cb(void 0)})}),new Promise(cb=&gt;{device.once(\&quot;update:title\&quot;,()=&gt;{sort.push(\&quot;update:title\&quot;);cb(void 0)})})]);assert.deepStrictEqual(sort,[\&quot;update:title\&quot;,\&quot;update\&quot;])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;579be375-d018-4e79-a5c1-1a00a7cef527&quot;,&quot;parentUUID&quot;:&quot;f6c75555-cfaf-4c16-8d69-c7006f07bf1d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error events on failures&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit error events on failures&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({datetime:\&quot;2021-11-24T21:13:36.424576+03:00\&quot;,exception:\&quot;invalid credentials: 321\&quot;,result:\&quot;failure\&quot;,stacktrace:&#x27;Traceback (most recent call last):\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\&quot;, line 302, in appstart\\n    print(args.output(await _handle_command(args, abort_sem, loop)), flush=True)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\&quot;, line 196, in _handle_command\\n    atv = await connect(config, loop, protocol=Protocol.MRP)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/__init__.py\&quot;, line 96, in connect\\n    for setup_data in proto_methods.setup(\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\&quot;, line 192, in setup\\n    stream = AirPlayStream(config, service)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\&quot;, line 79, in __init__\\n    self._credentials: HapCredentials = parse_credentials(self.service.credentials)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/auth/hap_pairing.py\&quot;, line 139, in parse_credentials\\n    raise exceptions.InvalidCredentialsError(\&quot;invalid credentials: \&quot; + detail_string)\\npyatv.exceptions.InvalidCredentialsError: invalid credentials: 321\\n&#x27;})})});await new Promise(cb=&gt;{device.once(\&quot;error\&quot;,error=&gt;{assert.ok(error instanceof Error);assert.ok(error.toString().includes(\&quot;invalid credentials: 321\&quot;));cb(void 0)})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0b3a3ef2-c500-43fc-a80f-3e1e96cb7fec&quot;,&quot;parentUUID&quot;:&quot;f6c75555-cfaf-4c16-8d69-c7006f07bf1d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not emit an update if new value is same as old one&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should not emit an update if new value is same as old one&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let spawnCounter=0;let eventCounter=0;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{if(spawnCounter===0){cp.onStdIn(()=&gt;cp.end())}cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;});spawnCounter++;if(spawnCounter&gt;=2){cp.end()}})});const listener=__name(()=&gt;{eventCounter++},\&quot;listener\&quot;);device.on(\&quot;update\&quot;,listener);await new Promise(cb=&gt;setTimeout(cb,0));await device.getState();device.off(\&quot;update\&quot;,listener);assert.strictEqual(spawnCounter,2);assert.strictEqual(eventCounter,1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;151fd0ef-1b02-47b6-ac4c-7160d37e4092&quot;,&quot;parentUUID&quot;:&quot;f6c75555-cfaf-4c16-8d69-c7006f07bf1d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error event if event listener throws an exception&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit error event if event listener throws an exception&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});let callCounter=0;const error=new Error(\&quot;This is an error. Be nice.\&quot;);device.once(\&quot;error\&quot;,err=&gt;{assert.strictEqual(err,error);callCounter++});const listener=__name(()=&gt;{throw error},\&quot;listener\&quot;);device.on(\&quot;update\&quot;,listener);await new Promise(cb=&gt;setTimeout(cb,0));device.off(\&quot;update\&quot;,listener);assert.strictEqual(callCounter,1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a95b1ada-8cb4-4ebb-9ed5-12ab21ecd7a4&quot;,&quot;parentUUID&quot;:&quot;f6c75555-cfaf-4c16-8d69-c7006f07bf1d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should also work with powerState&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should also work with powerState&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({datetime:new Date().toJSON(),power_state:\&quot;off\&quot;,result:\&quot;success\&quot;})})});await new Promise(cb=&gt;{device.once(\&quot;update:powerState\&quot;,event=&gt;{assert.ok(event instanceof NodePyATVDeviceEvent);assert.strictEqual(event.key,\&quot;powerState\&quot;);assert.strictEqual(event.oldValue,null);assert.strictEqual(event.newValue,\&quot;off\&quot;);assert.strictEqual(event.newValue,NodePyATVPowerState.off);assert.strictEqual(event.value,\&quot;off\&quot;);assert.strictEqual(event.value,NodePyATVPowerState.off);assert.deepStrictEqual(event.device,device);cb(void 0)})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;775522d9-0a84-4dc1-9d11-016b137d724e&quot;,&quot;parentUUID&quot;:&quot;f6c75555-cfaf-4c16-8d69-c7006f07bf1d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only one event for powerState changes&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should only one event for powerState changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({datetime:new Date().toJSON(),power_state:\&quot;off\&quot;,result:\&quot;success\&quot;});cp.end()})});let counter=0;device.on(\&quot;update\&quot;,event=&gt;{assert.ok(event instanceof NodePyATVDeviceEvent);assert.strictEqual(event.key,\&quot;powerState\&quot;);assert.strictEqual(event.oldValue,null);assert.strictEqual(event.newValue,\&quot;off\&quot;);assert.strictEqual(event.newValue,NodePyATVPowerState.off);assert.strictEqual(event.value,\&quot;off\&quot;);assert.strictEqual(event.value,NodePyATVPowerState.off);assert.deepStrictEqual(event.device,device);counter++});await new Promise(cb=&gt;setTimeout(cb,10));assert.strictEqual(counter,1);device.removeAllListeners(\&quot;update\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;192566f3-8598-4b63-8572-1d0164f53fe2&quot;,&quot;parentUUID&quot;:&quot;f6c75555-cfaf-4c16-8d69-c7006f07bf1d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only one event for focusState changes&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should only one event for focusState changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({datetime:new Date().toJSON(),focus_state:\&quot;unfocused\&quot;,result:\&quot;success\&quot;});cp.end()})});let counter=0;device.on(\&quot;update\&quot;,event=&gt;{assert.ok(event instanceof NodePyATVDeviceEvent);assert.strictEqual(event.key,\&quot;focusState\&quot;);assert.strictEqual(event.oldValue,null);assert.strictEqual(event.newValue,\&quot;unfocused\&quot;);assert.strictEqual(event.newValue,NodePyATVFocusState.unfocused);assert.strictEqual(event.value,\&quot;unfocused\&quot;);assert.strictEqual(event.value,NodePyATVFocusState.unfocused);assert.deepStrictEqual(event.device,device);counter++});await new Promise(cb=&gt;setTimeout(cb,10));assert.strictEqual(counter,1);device.removeAllListeners(\&quot;update\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;93319b27-2402-4159-a6b8-528ff06589f8&quot;,&quot;parentUUID&quot;:&quot;f6c75555-cfaf-4c16-8d69-c7006f07bf1d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only one event for outputDevices changes&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should only one event for outputDevices changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({datetime:new Date().toJSON(),output_devices:[{identifier:\&quot;AAAAAAAA-BBBB-CCCC-DDDD-EEEEEEEEEEEE\&quot;,name:\&quot;Living room\&quot;}],result:\&quot;success\&quot;});cp.end()})});let counter=0;device.on(\&quot;update\&quot;,event=&gt;{assert.ok(event instanceof NodePyATVDeviceEvent);assert.strictEqual(event.key,\&quot;outputDevices\&quot;);assert.strictEqual(event.oldValue,null);assert.deepStrictEqual(event.newValue,[{identifier:\&quot;AAAAAAAA-BBBB-CCCC-DDDD-EEEEEEEEEEEE\&quot;,name:\&quot;Living room\&quot;}]);assert.deepStrictEqual(event.value,[{identifier:\&quot;AAAAAAAA-BBBB-CCCC-DDDD-EEEEEEEEEEEE\&quot;,name:\&quot;Living room\&quot;}]);assert.deepStrictEqual(event.device,device);counter++});await new Promise(cb=&gt;setTimeout(cb,10));assert.strictEqual(counter,1);device.removeAllListeners(\&quot;update\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5f495f07-3fc9-4380-8ce9-a56eb583f41e&quot;,&quot;parentUUID&quot;:&quot;f6c75555-cfaf-4c16-8d69-c7006f07bf1d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only one event for volume changes&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should only one event for volume changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({datetime:new Date().toJSON(),result:\&quot;success\&quot;,volume:20});cp.end()})});let counter=0;device.on(\&quot;update\&quot;,event=&gt;{assert.ok(event instanceof NodePyATVDeviceEvent);assert.strictEqual(event.key,\&quot;volume\&quot;);assert.strictEqual(event.oldValue,null);assert.strictEqual(event.newValue,20);assert.strictEqual(event.value,20);assert.deepStrictEqual(event.device,device);counter++});await new Promise(cb=&gt;setTimeout(cb,10));assert.strictEqual(counter,1);device.removeAllListeners(\&quot;update\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4e3ee59c-ba04-42bb-a684-d77bff227b09&quot;,&quot;parentUUID&quot;:&quot;f6c75555-cfaf-4c16-8d69-c7006f07bf1d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not trigger any events for newly added fields&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should not trigger any events for newly added fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({datetime:new Date().toJSON(),foo:\&quot;bar\&quot;,result:\&quot;success\&quot;});cp.end()})});device.on(\&quot;update\&quot;,event=&gt;{assert.fail(`Got an update event for a new field: ${event}`)});await new Promise(cb=&gt;setTimeout(cb,10));device.removeAllListeners(\&quot;update\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6f2ce3c7-a50a-444c-a801-14f7ee64d2c6&quot;,&quot;parentUUID&quot;:&quot;f6c75555-cfaf-4c16-8d69-c7006f07bf1d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bce5fc61-ef6a-4238-b8fa-90f3e9e4e2d2&quot;,&quot;ea259aac-ef3d-4412-8244-e108c6f64d92&quot;,&quot;579be375-d018-4e79-a5c1-1a00a7cef527&quot;,&quot;0b3a3ef2-c500-43fc-a80f-3e1e96cb7fec&quot;,&quot;151fd0ef-1b02-47b6-ac4c-7160d37e4092&quot;,&quot;a95b1ada-8cb4-4ebb-9ed5-12ab21ecd7a4&quot;,&quot;775522d9-0a84-4dc1-9d11-016b137d724e&quot;,&quot;192566f3-8598-4b63-8572-1d0164f53fe2&quot;,&quot;93319b27-2402-4159-a6b8-528ff06589f8&quot;,&quot;5f495f07-3fc9-4380-8ce9-a56eb583f41e&quot;,&quot;4e3ee59c-ba04-42bb-a684-d77bff227b09&quot;,&quot;6f2ce3c7-a50a-444c-a801-14f7ee64d2c6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:61,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;071825ca-3dc3-4ddf-8af8-12d0a0fd7ec0&quot;,&quot;title&quot;:&quot;start|stopListening()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should emit error if spawn fails&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should emit error if spawn fails&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const error=new Error;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.error(error).end()})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);device.on(\&quot;update\&quot;,listener);await new Promise(cb=&gt;{device.once(\&quot;error\&quot;,err=&gt;{assert.strictEqual(err,error);cb(void 0)})});device.off(\&quot;update\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c7bd7c19-a570-4cb2-af31-0c45f56ab818&quot;,&quot;parentUUID&quot;:&quot;071825ca-3dc3-4ddf-8af8-12d0a0fd7ec0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error on stderr data&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should emit error on stderr data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.stderr(\&quot;Hello World!\&quot;).end()})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);device.on(\&quot;update\&quot;,listener);await new Promise(cb=&gt;{device.once(\&quot;error\&quot;,err=&gt;{assert.ok(err instanceof Error);assert.ok(err.toString().includes(\&quot;Got stderr output from pyatv: Hello World!\&quot;));cb(void 0)})});device.off(\&quot;update\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;53e764f3-e7c5-4211-b64d-916418d6ad51&quot;,&quot;parentUUID&quot;:&quot;071825ca-3dc3-4ddf-8af8-12d0a0fd7ec0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error if stdout is not valid json&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should emit error if stdout is not valid json&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.stdout(\&quot;#\&quot;).end()})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);device.on(\&quot;update\&quot;,listener);await new Promise(cb=&gt;{device.once(\&quot;error\&quot;,err=&gt;{assert.ok(err instanceof Error);assert.ok(err.toString().includes(\&quot;Unable to parse stdout json: SyntaxError\&quot;));cb(void 0)})});device.off(\&quot;update\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3aa8d8d1-78e3-4bd8-97d2-d0b5a65df3c8&quot;,&quot;parentUUID&quot;:&quot;071825ca-3dc3-4ddf-8af8-12d0a0fd7ec0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should restart the process if it gets killed&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should restart the process if it gets killed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;pending&quot;,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;81aa1dd1-817e-44ef-972a-7acbba6eb855&quot;,&quot;parentUUID&quot;:&quot;071825ca-3dc3-4ddf-8af8-12d0a0fd7ec0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c7bd7c19-a570-4cb2-af31-0c45f56ab818&quot;,&quot;53e764f3-e7c5-4211-b64d-916418d6ad51&quot;,&quot;3aa8d8d1-78e3-4bd8-97d2-d0b5a65df3c8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;81aa1dd1-817e-44ef-972a-7acbba6eb855&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b714773f-65f7-4dd7-b38b-93c216058a71&quot;,&quot;title&quot;:&quot;addListener() / removeAllListeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work without any exceptions&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents addListener() / removeAllListeners() should work without any exceptions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);device.addListener(\&quot;update\&quot;,listener);device.removeAllListeners(\&quot;update\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;266e7ccd-1611-4c97-b014-2221b1cc5bf1&quot;,&quot;parentUUID&quot;:&quot;b714773f-65f7-4dd7-b38b-93c216058a71&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;266e7ccd-1611-4c97-b014-2221b1cc5bf1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0d77fd26-c3af-4b65-93fe-65acd2628d24&quot;,&quot;title&quot;:&quot;emit()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents emit() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end())})});const event=new NodePyATVDeviceEvent({device,key:\&quot;dateTime\&quot;,new:\&quot;bar\&quot;,old:\&quot;foo\&quot;});let executions=0;device.once(\&quot;test\&quot;,e=&gt;{executions++;assert.strictEqual(e,event);assert.strictEqual(executions,1);done()});device.emit(\&quot;test\&quot;,event)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;febecb49-65f1-41bb-8145-4e5f79f7c70d&quot;,&quot;parentUUID&quot;:&quot;0d77fd26-c3af-4b65-93fe-65acd2628d24&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;febecb49-65f1-41bb-8145-4e5f79f7c70d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9ba18f42-264e-4d2c-bd63-15502d37f72f&quot;,&quot;title&quot;:&quot;eventNames()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents eventNames() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end())})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);device.on(\&quot;test\&quot;,listener);assert.deepStrictEqual(device.eventNames(),[\&quot;test\&quot;]);device.off(\&quot;test\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;25ff0e8e-f625-4ff0-9615-0aeffcae7aff&quot;,&quot;parentUUID&quot;:&quot;9ba18f42-264e-4d2c-bd63-15502d37f72f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;25ff0e8e-f625-4ff0-9615-0aeffcae7aff&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2a63b303-8025-4519-9a21-2d312d5be15c&quot;,&quot;title&quot;:&quot;getMaxListeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents getMaxListeners() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end())})});const result=device.getMaxListeners();assert.ok(typeof result,\&quot;number\&quot;);assert.ok(result&gt;=10)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;18b6962b-cad5-41ca-8554-4232d607227c&quot;,&quot;parentUUID&quot;:&quot;2a63b303-8025-4519-9a21-2d312d5be15c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;18b6962b-cad5-41ca-8554-4232d607227c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b50fbc76-0bdc-4900-805b-9afdbce09d46&quot;,&quot;title&quot;:&quot;listenerCount()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents listenerCount() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end())})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);assert.deepStrictEqual(device.listenerCount(\&quot;test\&quot;),0);device.on(\&quot;test\&quot;,listener);assert.deepStrictEqual(device.listenerCount(\&quot;test\&quot;),1);device.off(\&quot;test\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d07bccd5-3870-47d0-b425-a9a8f158980a&quot;,&quot;parentUUID&quot;:&quot;b50fbc76-0bdc-4900-805b-9afdbce09d46&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d07bccd5-3870-47d0-b425-a9a8f158980a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;34385564-486e-4bbb-a16a-33761dcb98e0&quot;,&quot;title&quot;:&quot;listeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents listeners() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end())})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);assert.deepStrictEqual(device.listeners(\&quot;test\&quot;).length,0);device.on(\&quot;test\&quot;,listener);assert.deepStrictEqual(device.listeners(\&quot;test\&quot;).length,1);assert.deepStrictEqual(device.listeners(\&quot;test\&quot;)[0],listener);device.off(\&quot;test\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ccc346cd-c2a4-46b1-9f93-189f524e1bf4&quot;,&quot;parentUUID&quot;:&quot;34385564-486e-4bbb-a16a-33761dcb98e0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ccc346cd-c2a4-46b1-9f93-189f524e1bf4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;83899941-1324-4927-9538-c22e0f63c11b&quot;,&quot;title&quot;:&quot;prependListener()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents prependListener() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});const listener=__name(()=&gt;{device.removeAllListeners(\&quot;update\&quot;);done()},\&quot;listener\&quot;);device.prependListener(\&quot;update\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;14cb1817-035d-49e6-978f-b95193271e50&quot;,&quot;parentUUID&quot;:&quot;83899941-1324-4927-9538-c22e0f63c11b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;14cb1817-035d-49e6-978f-b95193271e50&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0a279a02-17c7-417a-ae4f-72710341e4d8&quot;,&quot;title&quot;:&quot;prependOnceListener()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents prependOnceListener() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});device.prependOnceListener(\&quot;update\&quot;,()=&gt;done())&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bc9fc8e8-9676-4f57-9d51-fb614ef76e9e&quot;,&quot;parentUUID&quot;:&quot;0a279a02-17c7-417a-ae4f-72710341e4d8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bc9fc8e8-9676-4f57-9d51-fb614ef76e9e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f7937cdb-e032-4abc-b5f1-0e1d3b601b80&quot;,&quot;title&quot;:&quot;rawListeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents rawListeners() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end())})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);assert.deepStrictEqual(device.rawListeners(\&quot;test\&quot;).length,0);device.on(\&quot;test\&quot;,listener);assert.deepStrictEqual(device.rawListeners(\&quot;test\&quot;).length,1);assert.deepStrictEqual(device.rawListeners(\&quot;test\&quot;)[0],listener);device.off(\&quot;test\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39ed443c-52f0-4cca-aaa3-3425409c2ffc&quot;,&quot;parentUUID&quot;:&quot;f7937cdb-e032-4abc-b5f1-0e1d3b601b80&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;39ed443c-52f0-4cca-aaa3-3425409c2ffc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d299fc0a-a8a2-4f44-bf46-8e8ab3d4ab2c&quot;,&quot;title&quot;:&quot;removeListener()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work without any exceptions&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents removeListener() should work without any exceptions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);device.addListener(\&quot;update\&quot;,listener);assert.deepStrictEqual(device.listenerCount(\&quot;update\&quot;),1);device.removeListener(\&quot;update\&quot;,listener);assert.deepStrictEqual(device.listenerCount(\&quot;update\&quot;),0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c430fb44-96ed-4d12-89d5-411df740ad53&quot;,&quot;parentUUID&quot;:&quot;d299fc0a-a8a2-4f44-bf46-8e8ab3d4ab2c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c430fb44-96ed-4d12-89d5-411df740ad53&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;60dd390c-ad7f-4332-9668-74acfda6873a&quot;,&quot;title&quot;:&quot;NodePyATVDevice&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ad39cead-8294-4ecf-aed2-1a000bbd3a85&quot;,&quot;title&quot;:&quot;get name()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the name&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get name() should return the name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;});assert.strictEqual(device.name,\&quot;My Testdevice\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e0df7358-b7cf-40b5-9efb-5a7f8ca013d6&quot;,&quot;parentUUID&quot;:&quot;ad39cead-8294-4ecf-aed2-1a000bbd3a85&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e0df7358-b7cf-40b5-9efb-5a7f8ca013d6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4d24c090-6259-4047-9ccb-70d7ad6af5c2&quot;,&quot;title&quot;:&quot;get host()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the host&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get host() should return the host&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;});assert.strictEqual(device.host,\&quot;192.168.178.2\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;88d876ca-8e23-4e0e-8df5-332d65375f8c&quot;,&quot;parentUUID&quot;:&quot;4d24c090-6259-4047-9ccb-70d7ad6af5c2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;88d876ca-8e23-4e0e-8df5-332d65375f8c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4bd4d36e-8161-4a54-8187-2e7ca2eb10e3&quot;,&quot;title&quot;:&quot;get id()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the id&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get id() should return the id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,id:\&quot;*****\&quot;,name:\&quot;My Testdevice\&quot;});assert.strictEqual(device.id,\&quot;*****\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7cae8950-9696-425b-95db-e530867d9454&quot;,&quot;parentUUID&quot;:&quot;4bd4d36e-8161-4a54-8187-2e7ca2eb10e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7cae8950-9696-425b-95db-e530867d9454&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;04b67489-8df9-4ab3-9d85-8628c8d5b4f0&quot;,&quot;title&quot;:&quot;get allIDs()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return all the IDs&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get allIDs() should return all the IDs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({allIDs:[\&quot;some_id_1\&quot;,\&quot;some_id_2\&quot;,\&quot;some_id_3\&quot;],host:\&quot;192.168.178.2\&quot;,id:\&quot;*****\&quot;,name:\&quot;My Testdevice\&quot;});assert.deepStrictEqual(device.allIDs,[\&quot;some_id_1\&quot;,\&quot;some_id_2\&quot;,\&quot;some_id_3\&quot;])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5785ccf7-cb5c-4abe-b9a6-f1ca30a3887f&quot;,&quot;parentUUID&quot;:&quot;04b67489-8df9-4ab3-9d85-8628c8d5b4f0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5785ccf7-cb5c-4abe-b9a6-f1ca30a3887f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;567363da-4222-4f38-940a-8cb68d88f14a&quot;,&quot;title&quot;:&quot;get protocol()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the protocol&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get protocol() should return the protocol&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,protocol:NodePyATVProtocol.airplay});assert.strictEqual(device.protocol,NodePyATVProtocol.airplay)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0073d294-1455-44f3-88bf-51ec6c2ba728&quot;,&quot;parentUUID&quot;:&quot;567363da-4222-4f38-940a-8cb68d88f14a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0073d294-1455-44f3-88bf-51ec6c2ba728&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;aec3d5f9-769f-4abc-bb13-4c4c122b9f34&quot;,&quot;title&quot;:&quot;get mac()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the mac&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get mac() should return the mac&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,mac:\&quot;AA:BB:CC:DD:EE:FF\&quot;,name:\&quot;My Testdevice\&quot;});assert.strictEqual(device.mac,\&quot;AA:BB:CC:DD:EE:FF\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4ff3e3ad-4482-4492-9665-97e823a3e644&quot;,&quot;parentUUID&quot;:&quot;aec3d5f9-769f-4abc-bb13-4c4c122b9f34&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4ff3e3ad-4482-4492-9665-97e823a3e644&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9044d05e-b3ba-4246-847b-8ca97a0be5f4&quot;,&quot;title&quot;:&quot;get model()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the model if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get model() should return the model if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;10.0.10.81\&quot;,id:\&quot;xxx\&quot;,model:\&quot;Gen4K\&quot;,name:\&quot;Vardagsrum\&quot;});assert.strictEqual(device.model,\&quot;Gen4K\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c2e694ab-6e1c-4ced-bdb7-d5c5196152b2&quot;,&quot;parentUUID&quot;:&quot;9044d05e-b3ba-4246-847b-8ca97a0be5f4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get model() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;10.0.10.81\&quot;,name:\&quot;Vardagsrum\&quot;});assert.strictEqual(device.model,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5b829c72-72a5-49fe-a6ee-d4b14d80a31b&quot;,&quot;parentUUID&quot;:&quot;9044d05e-b3ba-4246-847b-8ca97a0be5f4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c2e694ab-6e1c-4ced-bdb7-d5c5196152b2&quot;,&quot;5b829c72-72a5-49fe-a6ee-d4b14d80a31b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a8f4f21f-05b1-4dbe-becc-bd5ef24fefc0&quot;,&quot;title&quot;:&quot;get modelName()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the model name if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get modelName() should return the model name if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;10.0.10.81\&quot;,id:\&quot;xxx\&quot;,modelName:\&quot;Apple TV 4K\&quot;,name:\&quot;Vardagsrum\&quot;});assert.strictEqual(device.modelName,\&quot;Apple TV 4K\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;34a38b7a-c488-44db-b1a7-e961c95eb146&quot;,&quot;parentUUID&quot;:&quot;a8f4f21f-05b1-4dbe-becc-bd5ef24fefc0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get modelName() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;10.0.10.81\&quot;,name:\&quot;Vardagsrum\&quot;});assert.strictEqual(device.modelName,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a7541f4c-68fd-46a0-b557-f1f3e75a56a2&quot;,&quot;parentUUID&quot;:&quot;a8f4f21f-05b1-4dbe-becc-bd5ef24fefc0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;34a38b7a-c488-44db-b1a7-e961c95eb146&quot;,&quot;a7541f4c-68fd-46a0-b557-f1f3e75a56a2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9f8ad9ff-fa0b-48ba-ae9c-c3654ee3d00a&quot;,&quot;title&quot;:&quot;get os()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the operating system if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get os() should return the operating system if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;10.0.10.81\&quot;,id:\&quot;xxx\&quot;,name:\&quot;Vardagsrum\&quot;,os:\&quot;TvOS\&quot;});assert.strictEqual(device.os,\&quot;TvOS\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4e63c50c-fd1d-41b4-9db8-7da166f674d8&quot;,&quot;parentUUID&quot;:&quot;9f8ad9ff-fa0b-48ba-ae9c-c3654ee3d00a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get os() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;10.0.10.81\&quot;,name:\&quot;Vardagsrum\&quot;});assert.strictEqual(device.os,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f0294a91-a905-456a-9442-8d9aa3b2089b&quot;,&quot;parentUUID&quot;:&quot;9f8ad9ff-fa0b-48ba-ae9c-c3654ee3d00a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4e63c50c-fd1d-41b4-9db8-7da166f674d8&quot;,&quot;f0294a91-a905-456a-9442-8d9aa3b2089b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;643b7cfa-3ce3-461b-88ac-f12de525ddb7&quot;,&quot;title&quot;:&quot;get version()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the version if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get version() should return the version if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;10.0.10.81\&quot;,id:\&quot;xxx\&quot;,name:\&quot;Vardagsrum\&quot;,version:\&quot;15.5.1\&quot;});assert.strictEqual(device.version,\&quot;15.5.1\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;da12f5a6-45e6-4bb3-b34b-417d736b3161&quot;,&quot;parentUUID&quot;:&quot;643b7cfa-3ce3-461b-88ac-f12de525ddb7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get version() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;10.0.10.81\&quot;,name:\&quot;Vardagsrum\&quot;});assert.strictEqual(device.version,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c5e7158c-c35c-4856-a8f4-60ba4910ebad&quot;,&quot;parentUUID&quot;:&quot;643b7cfa-3ce3-461b-88ac-f12de525ddb7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;da12f5a6-45e6-4bb3-b34b-417d736b3161&quot;,&quot;c5e7158c-c35c-4856-a8f4-60ba4910ebad&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9cb8cdb6-4f9f-4020-bc69-330776935ac2&quot;,&quot;title&quot;:&quot;get services()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the services if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get services() should return the services if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;10.0.10.81\&quot;,id:\&quot;xxx\&quot;,name:\&quot;Vardagsrum\&quot;,services:[{port:49152,protocol:NodePyATVProtocol.mrp},{port:7e3,protocol:NodePyATVProtocol.airplay}]});assert.deepStrictEqual(device.services,[{port:49152,protocol:\&quot;mrp\&quot;},{port:7e3,protocol:\&quot;airplay\&quot;}])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4e68abc3-f9ab-4dd4-be87-82a8212dc65f&quot;,&quot;parentUUID&quot;:&quot;9cb8cdb6-4f9f-4020-bc69-330776935ac2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get services() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;10.0.10.81\&quot;,name:\&quot;Vardagsrum\&quot;});assert.strictEqual(device.services,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a0c3ea4c-7023-49e5-9c25-7eeccea68763&quot;,&quot;parentUUID&quot;:&quot;9cb8cdb6-4f9f-4020-bc69-330776935ac2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4e68abc3-f9ab-4dd4-be87-82a8212dc65f&quot;,&quot;a0c3ea4c-7023-49e5-9c25-7eeccea68763&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;227b686a-5fee-43d5-83fd-386f2d92acf8&quot;,&quot;title&quot;:&quot;get debug()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return true if set to true&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get debug() should return true if set to true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({debug:true,host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;});assert.strictEqual(device.debug,true)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;afca54c6-bf6c-4f8b-9960-157ef21a717a&quot;,&quot;parentUUID&quot;:&quot;227b686a-5fee-43d5-83fd-386f2d92acf8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return fn if set to custom function&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get debug() should return fn if set to custom function&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fn=__name(()=&gt;{},\&quot;fn\&quot;);const device=new NodePyATVDevice({debug:fn,host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;});assert.strictEqual(device.debug,fn)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;31e8936d-74b0-4d15-b4af-11864009272b&quot;,&quot;parentUUID&quot;:&quot;227b686a-5fee-43d5-83fd-386f2d92acf8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return false if unset&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get debug() should return false if unset&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;});assert.strictEqual(device.debug,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ea4fc7ee-14ab-4b60-93ce-18f46c90a40c&quot;,&quot;parentUUID&quot;:&quot;227b686a-5fee-43d5-83fd-386f2d92acf8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;afca54c6-bf6c-4f8b-9960-157ef21a717a&quot;,&quot;31e8936d-74b0-4d15-b4af-11864009272b&quot;,&quot;ea4fc7ee-14ab-4b60-93ce-18f46c90a40c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6f42fcae-dc3e-4755-9ad3-817c3e2c11bf&quot;,&quot;title&quot;:&quot;set debug()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work for debug = true&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;});assert.strictEqual(device.debug,void 0);device.debug=true;assert.strictEqual(device.debug,true)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dcbad774-1855-4cce-938c-22e44471d853&quot;,&quot;parentUUID&quot;:&quot;6f42fcae-dc3e-4755-9ad3-817c3e2c11bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for debug = undefined&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = undefined&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({debug:true,host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;});assert.strictEqual(device.debug,true);device.debug=void 0;assert.strictEqual(device.debug,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a360a519-d4a6-4082-9b5e-b4476b1b5f1f&quot;,&quot;parentUUID&quot;:&quot;6f42fcae-dc3e-4755-9ad3-817c3e2c11bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for debug = undefined&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = undefined&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({debug:true,host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;});assert.strictEqual(device.debug,true);device.debug=void 0;assert.strictEqual(device.debug,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e491f275-4130-466e-b11a-470ed53f9728&quot;,&quot;parentUUID&quot;:&quot;6f42fcae-dc3e-4755-9ad3-817c3e2c11bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for debug = fn&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = fn&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;});const fn=__name(()=&gt;{},\&quot;fn\&quot;);assert.strictEqual(device.debug,void 0);device.debug=fn;assert.strictEqual(device.debug,fn)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;600c0c12-f51c-4f51-be8c-e4d837bbde26&quot;,&quot;parentUUID&quot;:&quot;6f42fcae-dc3e-4755-9ad3-817c3e2c11bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dcbad774-1855-4cce-938c-22e44471d853&quot;,&quot;a360a519-d4a6-4082-9b5e-b4476b1b5f1f&quot;,&quot;e491f275-4130-466e-b11a-470ed53f9728&quot;,&quot;600c0c12-f51c-4f51-be8c-e4d837bbde26&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9c727363-72f0-4409-b80c-1f38660e181d&quot;,&quot;title&quot;:&quot;toJSON()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a object representation&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice toJSON() should return a object representation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,id:\&quot;*****\&quot;,name:\&quot;My Testdevice\&quot;,protocol:NodePyATVProtocol.airplay});assert.deepEqual(device.toJSON(),{host:\&quot;192.168.178.2\&quot;,id:\&quot;*****\&quot;,mac:void 0,name:\&quot;My Testdevice\&quot;,protocol:NodePyATVProtocol.airplay})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;029dd5e2-f70f-4ba0-b059-d627aa54e9d7&quot;,&quot;parentUUID&quot;:&quot;9c727363-72f0-4409-b80c-1f38660e181d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should be possible to create a new device from this&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice toJSON() should be possible to create a new device from this&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const config={host:\&quot;192.168.178.2\&quot;,id:\&quot;*****\&quot;,mac:\&quot;469943881251875\&quot;,name:\&quot;My Testdevice\&quot;,protocol:NodePyATVProtocol.airplay};const deviceA=new NodePyATVDevice(config);const deviceB=new NodePyATVDevice(deviceA.toJSON());assert.deepEqual(deviceB.toJSON(),config)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;597a818b-a80d-4f90-9b70-fd619841176d&quot;,&quot;parentUUID&quot;:&quot;9c727363-72f0-4409-b80c-1f38660e181d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;029dd5e2-f70f-4ba0-b059-d627aa54e9d7&quot;,&quot;597a818b-a80d-4f90-9b70-fd619841176d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;19874c9b-cd5a-4760-b5f3-dc2087cae07d&quot;,&quot;title&quot;:&quot;toString()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice toString() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;});assert.strictEqual(device.toString(),\&quot;NodePyATVDevice(My Testdevice, 192.168.178.2)\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cd95a04b-2844-464c-a841-7c8b08d299ce&quot;,&quot;parentUUID&quot;:&quot;19874c9b-cd5a-4760-b5f3-dc2087cae07d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cd95a04b-2844-464c-a841-7c8b08d299ce&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3a0ed7c7-095e-4bad-8731-377b7cbbd81e&quot;,&quot;title&quot;:&quot;getState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work [I]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should work [I]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;pending&quot;,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d5064f55-0686-44d6-b89f-5a59e14c40db&quot;,&quot;parentUUID&quot;:&quot;3a0ed7c7-095e-4bad-8731-377b7cbbd81e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({album:null,app:\&quot;Disney+\&quot;,app_id:\&quot;com.disney.disneyplus\&quot;,artist:null,datetime:\&quot;2020-11-07T22:38:43.608030+01:00\&quot;,device_state:\&quot;playing\&quot;,genre:null,hash:\&quot;100e0ab6-6ff5-4199-9c04-a7107ff78712\&quot;,media_type:\&quot;video\&quot;,position:27,repeat:\&quot;off\&quot;,result:\&quot;success\&quot;,shuffle:\&quot;off\&quot;,title:\&quot;Solo: A Star Wars Story\&quot;,total_time:8097})})});const result=await device.getState();assert.deepStrictEqual(result,{album:null,app:\&quot;Disney+\&quot;,appId:\&quot;com.disney.disneyplus\&quot;,artist:null,contentIdentifier:null,dateTime:new Date(\&quot;2020-11-07T22:38:43.608030+01:00\&quot;),deviceState:NodePyATVDeviceState.playing,episodeNumber:null,focusState:null,genre:null,hash:\&quot;100e0ab6-6ff5-4199-9c04-a7107ff78712\&quot;,iTunesStoreIdentifier:null,mediaType:NodePyATVMediaType.video,outputDevices:null,position:27,powerState:null,repeat:NodePyATVRepeatState.off,seasonNumber:null,seriesName:null,shuffle:NodePyATVShuffleState.off,title:\&quot;Solo: A Star Wars Story\&quot;,totalTime:8097,volume:null})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;be2d2aaf-524f-4d21-bcb8-61e315578409&quot;,&quot;parentUUID&quot;:&quot;3a0ed7c7-095e-4bad-8731-377b7cbbd81e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should reject with error if pyatv fails&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should reject with error if pyatv fails&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({datetime:\&quot;2021-11-24T21:13:36.424576+03:00\&quot;,exception:\&quot;invalid credentials: 321\&quot;,result:\&quot;failure\&quot;,stacktrace:&#x27;Traceback (most recent call last):\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\&quot;, line 302, in appstart\\n    print(args.output(await _handle_command(args, abort_sem, loop)), flush=True)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\&quot;, line 196, in _handle_command\\n    atv = await connect(config, loop, protocol=Protocol.MRP)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/__init__.py\&quot;, line 96, in connect\\n    for setup_data in proto_methods.setup(\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\&quot;, line 192, in setup\\n    stream = AirPlayStream(config, service)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\&quot;, line 79, in __init__\\n    self._credentials: HapCredentials = parse_credentials(self.service.credentials)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/auth/hap_pairing.py\&quot;, line 139, in parse_credentials\\n    raise exceptions.InvalidCredentialsError(\&quot;invalid credentials: \&quot; + detail_string)\\npyatv.exceptions.InvalidCredentialsError: invalid credentials: 321\\n&#x27;})})});assert.rejects(async()=&gt;{await device.getState()},/Got pyatv Error: invalid credentials: 321/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;69f97770-b466-4b74-9304-c7e9430088a1&quot;,&quot;parentUUID&quot;:&quot;3a0ed7c7-095e-4bad-8731-377b7cbbd81e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should cache requests for a bit&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should cache requests for a bit&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let executions=0;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{executions++;cp.end({album:null,app:\&quot;Disney+\&quot;,app_id:\&quot;com.disney.disneyplus\&quot;,artist:null,datetime:new Date().toJSON(),device_state:\&quot;playing\&quot;,genre:null,hash:\&quot;100e0ab6-6ff5-4199-9c04-a7107ff78712\&quot;,media_type:\&quot;video\&quot;,position:27,repeat:\&quot;off\&quot;,result:\&quot;success\&quot;,shuffle:\&quot;off\&quot;,title:\&quot;Solo: A Star Wars Story\&quot;,total_time:8097})})});const firstResult=await device.getState();const secondResult=await device.getState();assert.strictEqual(firstResult.dateTime,secondResult.dateTime);assert.strictEqual(executions,1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;28519af4-2640-4de8-9281-65edbef80aac&quot;,&quot;parentUUID&quot;:&quot;3a0ed7c7-095e-4bad-8731-377b7cbbd81e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update the position if cache was used&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should update the position if cache was used&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({album:null,app:\&quot;Disney+\&quot;,app_id:\&quot;com.disney.disneyplus\&quot;,artist:null,datetime:new Date(new Date().getTime()-1e3).toJSON(),device_state:\&quot;playing\&quot;,genre:null,hash:\&quot;100e0ab6-6ff5-4199-9c04-a7107ff78712\&quot;,media_type:\&quot;video\&quot;,position:27,repeat:\&quot;off\&quot;,result:\&quot;success\&quot;,shuffle:\&quot;off\&quot;,title:\&quot;Solo: A Star Wars Story\&quot;,total_time:8097})})});const firstResult=await device.getState();assert.strictEqual(firstResult.position,27);const secondResult=await device.getState();assert.ok(secondResult.position);assert.ok(secondResult.position&gt;27,`Position should be &gt; 27, was ${secondResult.position}`);assert.ok(secondResult.position&lt;30,`Position should be &gt; 27, was ${secondResult.position}`)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;46158ce8-c080-458c-a693-1dc72644642a&quot;,&quot;parentUUID&quot;:&quot;3a0ed7c7-095e-4bad-8731-377b7cbbd81e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;be2d2aaf-524f-4d21-bcb8-61e315578409&quot;,&quot;69f97770-b466-4b74-9304-c7e9430088a1&quot;,&quot;28519af4-2640-4de8-9281-65edbef80aac&quot;,&quot;46158ce8-c080-458c-a693-1dc72644642a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;d5064f55-0686-44d6-b89f-5a59e14c40db&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8d5d7c6c-b234-4adc-a723-62b2b23c604b&quot;,&quot;title&quot;:&quot;clearState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice clearState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let executions=0;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{executions++;cp.end({datetime:\&quot;2020-11-07T22:38:43.608030+01:00\&quot;,result:\&quot;success\&quot;,title:\&quot;Solo: A Star Wars Story\&quot;})})});assert.deepStrictEqual(await device.getTitle(),\&quot;Solo: A Star Wars Story\&quot;);device.clearState();assert.deepStrictEqual(await device.getTitle(),\&quot;Solo: A Star Wars Story\&quot;);assert.strictEqual(executions,2)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41df83a2-09c8-41bf-a19b-fbb99b966496&quot;,&quot;parentUUID&quot;:&quot;8d5d7c6c-b234-4adc-a723-62b2b23c604b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;41df83a2-09c8-41bf-a19b-fbb99b966496&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;82748b8b-1cda-4e04-8cca-d395704efe9f&quot;,&quot;title&quot;:&quot;getDateTime()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getDateTime() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({datetime:new Date().toJSON(),result:\&quot;success\&quot;})})});const result=await device.getDateTime();assert.ok(result instanceof Date)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8da66713-4054-4f24-b201-1983d41bee26&quot;,&quot;parentUUID&quot;:&quot;82748b8b-1cda-4e04-8cca-d395704efe9f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8da66713-4054-4f24-b201-1983d41bee26&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;66710ba9-2fe4-4be3-8aa6-78d53c6d7f31&quot;,&quot;title&quot;:&quot;getHash()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getHash() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({hash:\&quot;12345\&quot;,result:\&quot;success\&quot;})})});const result=await device.getHash();assert.strictEqual(result,\&quot;12345\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f5eb709e-1e66-4bdf-a277-72969b86d0aa&quot;,&quot;parentUUID&quot;:&quot;66710ba9-2fe4-4be3-8aa6-78d53c6d7f31&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f5eb709e-1e66-4bdf-a277-72969b86d0aa&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;97108a6c-8234-4b15-96d3-6d15bb6ec9f3&quot;,&quot;title&quot;:&quot;getMediaType()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getMediaType() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({media_type:\&quot;video\&quot;,result:\&quot;success\&quot;})})});const result=await device.getMediaType();assert.deepStrictEqual(result,NodePyATVMediaType.video);assert.deepStrictEqual(result,\&quot;video\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;be0eaa9d-d843-46ba-b60d-be5f228fd2d4&quot;,&quot;parentUUID&quot;:&quot;97108a6c-8234-4b15-96d3-6d15bb6ec9f3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;be0eaa9d-d843-46ba-b60d-be5f228fd2d4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b55a2aa2-40d6-4c1f-9315-388df47318de&quot;,&quot;title&quot;:&quot;getDeviceState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getDeviceState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({device_state:\&quot;seeking\&quot;,result:\&quot;success\&quot;})})});const result=await device.getDeviceState();assert.deepStrictEqual(result,NodePyATVDeviceState.seeking);assert.deepStrictEqual(result,\&quot;seeking\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e81a4694-8b92-44b3-8ff3-42457ea2ac42&quot;,&quot;parentUUID&quot;:&quot;b55a2aa2-40d6-4c1f-9315-388df47318de&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e81a4694-8b92-44b3-8ff3-42457ea2ac42&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4c722e9f-da3c-4717-a6c7-6254ed0cc3a4&quot;,&quot;title&quot;:&quot;getTitle()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getTitle() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});const result=await device.getTitle();assert.strictEqual(result,\&quot;My Movie\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ce0b1956-c0de-42e9-a1ba-160f2cffafe6&quot;,&quot;parentUUID&quot;:&quot;4c722e9f-da3c-4717-a6c7-6254ed0cc3a4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ce0b1956-c0de-42e9-a1ba-160f2cffafe6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;68649626-4821-4fb0-bf99-e1d2fc98253a&quot;,&quot;title&quot;:&quot;getArtist()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getArtist() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({artist:\&quot;My Artist\&quot;,result:\&quot;success\&quot;})})});const result=await device.getArtist();assert.strictEqual(result,\&quot;My Artist\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c1af2dd8-af36-4da1-a6d5-d38ef3bb6215&quot;,&quot;parentUUID&quot;:&quot;68649626-4821-4fb0-bf99-e1d2fc98253a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c1af2dd8-af36-4da1-a6d5-d38ef3bb6215&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;87b2b0ab-693d-4d7e-b89b-14fbfcef3ae5&quot;,&quot;title&quot;:&quot;getAlbum()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getAlbum() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({album:\&quot;My ALbum\&quot;,result:\&quot;success\&quot;})})});const result=await device.getAlbum();assert.strictEqual(result,\&quot;My ALbum\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8bbe6fdc-7f1c-4f94-9c47-4080229355a9&quot;,&quot;parentUUID&quot;:&quot;87b2b0ab-693d-4d7e-b89b-14fbfcef3ae5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8bbe6fdc-7f1c-4f94-9c47-4080229355a9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f139c6ba-3f2a-429a-aa6c-ff4d9977f6a6&quot;,&quot;title&quot;:&quot;getGenre()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getGenre() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({genre:\&quot;My Genre\&quot;,result:\&quot;success\&quot;})})});const result=await device.getGenre();assert.strictEqual(result,\&quot;My Genre\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8ac89c32-24eb-4e09-81c1-0530a88d470c&quot;,&quot;parentUUID&quot;:&quot;f139c6ba-3f2a-429a-aa6c-ff4d9977f6a6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8ac89c32-24eb-4e09-81c1-0530a88d470c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;670d432c-fe91-43af-a6bb-9d8a52749c26&quot;,&quot;title&quot;:&quot;getTotalTime()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getTotalTime() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,total_time:45})})});const result=await device.getTotalTime();assert.strictEqual(result,45)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;858d6e46-f5f2-4ed2-9f8a-7141216177db&quot;,&quot;parentUUID&quot;:&quot;670d432c-fe91-43af-a6bb-9d8a52749c26&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;858d6e46-f5f2-4ed2-9f8a-7141216177db&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1326e911-d6d9-40f9-8ec2-66c4108129fc&quot;,&quot;title&quot;:&quot;getPosition()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getPosition() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({position:30,result:\&quot;success\&quot;})})});const result=await device.getPosition();assert.strictEqual(result,30)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;314a6df6-b1ff-4bd7-a2a5-9eb41ff4344a&quot;,&quot;parentUUID&quot;:&quot;1326e911-d6d9-40f9-8ec2-66c4108129fc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;314a6df6-b1ff-4bd7-a2a5-9eb41ff4344a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ef784f28-90ff-4183-b6b3-19167524e517&quot;,&quot;title&quot;:&quot;getShuffle()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getShuffle() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,shuffle:\&quot;songs\&quot;})})});const result=await device.getShuffle();assert.deepStrictEqual(result,NodePyATVShuffleState.songs);assert.deepStrictEqual(result,\&quot;songs\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;58b09571-ad2b-4437-b92b-7a418f72f038&quot;,&quot;parentUUID&quot;:&quot;ef784f28-90ff-4183-b6b3-19167524e517&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;58b09571-ad2b-4437-b92b-7a418f72f038&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7b9fdf06-3f36-4fbb-ace8-00cdaf518e29&quot;,&quot;title&quot;:&quot;getRepeat()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getRepeat() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({repeat:\&quot;all\&quot;,result:\&quot;success\&quot;})})});const result=await device.getRepeat();assert.deepStrictEqual(result,NodePyATVRepeatState.all);assert.deepStrictEqual(result,\&quot;all\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f313b7a7-0044-43cf-92e6-5b4a09730882&quot;,&quot;parentUUID&quot;:&quot;7b9fdf06-3f36-4fbb-ace8-00cdaf518e29&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f313b7a7-0044-43cf-92e6-5b4a09730882&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;63219d47-ea0b-4346-a8bb-8f8feff197c7&quot;,&quot;title&quot;:&quot;getApp()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getApp() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({app:\&quot;My App\&quot;,result:\&quot;success\&quot;})})});const result=await device.getApp();assert.strictEqual(result,\&quot;My App\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2fd79578-f2fe-4fdd-8321-88293583ada9&quot;,&quot;parentUUID&quot;:&quot;63219d47-ea0b-4346-a8bb-8f8feff197c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2fd79578-f2fe-4fdd-8321-88293583ada9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;eb0bee49-05b9-479c-908d-f7b50bcd7120&quot;,&quot;title&quot;:&quot;getAppId()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getAppId() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({app_id:\&quot;app.example.com\&quot;,result:\&quot;success\&quot;})})});const result=await device.getAppId();assert.strictEqual(result,\&quot;app.example.com\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;682ec32c-76ff-45ca-9970-68761cb1afc8&quot;,&quot;parentUUID&quot;:&quot;eb0bee49-05b9-479c-908d-f7b50bcd7120&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;682ec32c-76ff-45ca-9970-68761cb1afc8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7b675134-0115-4aff-8706-ac2420b097cd&quot;,&quot;title&quot;:&quot;getPowerState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getPowerState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({power_state:\&quot;on\&quot;,result:\&quot;success\&quot;})})});const result=await device.getPowerState();assert.strictEqual(result,NodePyATVPowerState.on)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;863a0299-e8ec-47fa-bff8-7606dfdc67f0&quot;,&quot;parentUUID&quot;:&quot;7b675134-0115-4aff-8706-ac2420b097cd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;863a0299-e8ec-47fa-bff8-7606dfdc67f0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a9459508-c231-4346-9c3b-bd0fc65353fa&quot;,&quot;title&quot;:&quot;getVolume()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getVolume() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,volume:50})})});const result=await device.getVolume();assert.strictEqual(result,50)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c0695459-531c-422d-bea5-490693e59509&quot;,&quot;parentUUID&quot;:&quot;a9459508-c231-4346-9c3b-bd0fc65353fa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c0695459-531c-422d-bea5-490693e59509&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;028975f8-b5df-4039-9c45-c5b9c817ea6e&quot;,&quot;title&quot;:&quot;getFocusState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getFocusState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({focus_state:\&quot;focused\&quot;,result:\&quot;success\&quot;})})});const result=await device.getFocusState();assert.strictEqual(result,NodePyATVFocusState.focused)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8850e8d4-f4d2-483b-bff7-ab5b45a5d3cf&quot;,&quot;parentUUID&quot;:&quot;028975f8-b5df-4039-9c45-c5b9c817ea6e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8850e8d4-f4d2-483b-bff7-ab5b45a5d3cf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2fbef482-9194-40db-87ec-be5f507e834f&quot;,&quot;title&quot;:&quot;getOutputDevices()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getOutputDevices() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({output_devices:[{identifier:\&quot;foo\&quot;,name:\&quot;Apple TV\&quot;}],result:\&quot;success\&quot;})})});const result=await device.getOutputDevices();assert.deepStrictEqual(result,[{identifier:\&quot;foo\&quot;,name:\&quot;Apple TV\&quot;}])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7e285b93-5812-4100-a47d-1c69364abfa1&quot;,&quot;parentUUID&quot;:&quot;2fbef482-9194-40db-87ec-be5f507e834f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7e285b93-5812-4100-a47d-1c69364abfa1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7bd856af-7f67-4aa0-8d61-3a5f11490e7e&quot;,&quot;title&quot;:&quot;getContentIdentifier()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getContentIdentifier() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({content_identifier:\&quot;1234\&quot;,result:\&quot;success\&quot;})})});const result=await device.getContentIdentifier();assert.strictEqual(result,\&quot;1234\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dc6c5142-1220-48e2-90d3-4e94e77ccecf&quot;,&quot;parentUUID&quot;:&quot;7bd856af-7f67-4aa0-8d61-3a5f11490e7e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dc6c5142-1220-48e2-90d3-4e94e77ccecf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f9dc4ad1-4582-4546-bda4-cc1554512e31&quot;,&quot;title&quot;:&quot;getiTunesStoreIdentifier()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getiTunesStoreIdentifier() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({itunes_store_identifier:1234,result:\&quot;success\&quot;})})});const result=await device.getiTunesStoreIdentifier();assert.strictEqual(result,1234)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bc96b655-6d99-4a85-9b97-189b1511c8ea&quot;,&quot;parentUUID&quot;:&quot;f9dc4ad1-4582-4546-bda4-cc1554512e31&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bc96b655-6d99-4a85-9b97-189b1511c8ea&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;513f8aa2-f442-440d-8f57-434eca202937&quot;,&quot;title&quot;:&quot;getEpisodeNumber()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getEpisodeNumber() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({episode_number:12,result:\&quot;success\&quot;})})});const result=await device.getEpisodeNumber();assert.strictEqual(result,12)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;88700ec0-230e-4c9f-aca9-99a33145f32a&quot;,&quot;parentUUID&quot;:&quot;513f8aa2-f442-440d-8f57-434eca202937&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;88700ec0-230e-4c9f-aca9-99a33145f32a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;68f9a24a-f324-450d-aadd-e51f0881b40d&quot;,&quot;title&quot;:&quot;getSeasonNumber()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getSeasonNumber() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,season_number:2})})});const result=await device.getSeasonNumber();assert.strictEqual(result,2)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4f6fd508-a88f-4626-b119-6f23c4dca5e5&quot;,&quot;parentUUID&quot;:&quot;68f9a24a-f324-450d-aadd-e51f0881b40d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4f6fd508-a88f-4626-b119-6f23c4dca5e5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;573fb0e6-df81-4603-8841-14573389ec07&quot;,&quot;title&quot;:&quot;getSeriesName()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getSeriesName() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,series_name:\&quot;The Testing Disaster\&quot;})})});const result=await device.getSeriesName();assert.strictEqual(result,\&quot;The Testing Disaster\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41a64aaa-231f-4cde-bb92-86305a822df5&quot;,&quot;parentUUID&quot;:&quot;573fb0e6-df81-4603-8841-14573389ec07&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;41a64aaa-231f-4cde-bb92-86305a822df5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f052d181-0dc1-4ef4-a90b-960b6d8531d9&quot;,&quot;title&quot;:&quot;listApps()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice listApps() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(\&quot;App: Fitness (com.apple.Fitness), App: Podcasts (com.apple.podcasts), App: Filme (com.apple.TVMovies), App: Prime Video (com.amazon.aiv.AIVApp), App: TV (com.apple.TVWatchList), App: Fotos (com.apple.TVPhotos), App: App\\xA0Store (com.apple.TVAppStore), App: Arcade (com.apple.Arcade), App: TV-Sendungen (com.apple.TVShows), App: Suchen (com.apple.TVSearch), App: Live TV (de.couchfunk.WM2014), App: RTL+ (com.rtlinteractive.tvnow), App: Computer (com.apple.TVHomeSharing), App: ARTE (tv.arte.plus7), App: YouTube (com.google.ios.youtube), App: ARD Mediathek (de.swr.avp.ard.tablet), App: Disney+ (com.disney.disneyplus), App: Plex (com.plexapp.plex), App: Joyn (de.prosiebensat1digital.seventv), App: Einstellungen (com.apple.TVSettings), App: ZDFmediathek (de.zdf.mediathek.universal), App: Crossy Road (com.hipsterwhale.crossy), App: Netflix (com.netflix.Netflix), App: Infuse (com.firecore.infuse), App: Musik (com.apple.TVMusic)\&quot;)})});const result=await device.listApps();assert.strictEqual(result.length,25);assert.strictEqual(result[0].id,\&quot;com.apple.Fitness\&quot;);assert.strictEqual(result[0].name,\&quot;Fitness\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;01168e46-88da-4cf5-81a5-9ecbe1a4cf80&quot;,&quot;parentUUID&quot;:&quot;f052d181-0dc1-4ef4-a90b-960b6d8531d9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;01168e46-88da-4cf5-81a5-9ecbe1a4cf80&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;14c39ee2-75f7-4a52-8009-0e41515dbc69&quot;,&quot;title&quot;:&quot;pressKey()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work with valid key&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pressKey() should work with valid key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device.pressKey(NodePyATVKeys.home)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dc594332-8b25-4775-a275-a4df74fa5708&quot;,&quot;parentUUID&quot;:&quot;14c39ee2-75f7-4a52-8009-0e41515dbc69&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error with invalid key&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pressKey() should throw error with invalid key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;});await assert.rejects(async()=&gt;{await device.pressKey(\&quot;foo\&quot;)},/Unsupported key value foo/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;597f77f1-0d71-4c8f-989d-30edfde99a42&quot;,&quot;parentUUID&quot;:&quot;14c39ee2-75f7-4a52-8009-0e41515dbc69&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if pyatv result is not success&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pressKey() should throw error if pyatv result is not success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;failure\&quot;}&#x27;)})});await assert.rejects(async()=&gt;{await device.pressKey(NodePyATVKeys.home)},/Unable to parse pyatv response/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;96f2783f-db23-4c82-bb86-ee9d749bb8ce&quot;,&quot;parentUUID&quot;:&quot;14c39ee2-75f7-4a52-8009-0e41515dbc69&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dc594332-8b25-4775-a275-a4df74fa5708&quot;,&quot;597f77f1-0d71-4c8f-989d-30edfde99a42&quot;,&quot;96f2783f-db23-4c82-bb86-ee9d749bb8ce&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;63ba9882-10fa-4e13-8daa-0ba98581e7eb&quot;,&quot;title&quot;:&quot;down()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice down() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7850e573-1785-4a74-83c6-5ec869c2d519&quot;,&quot;parentUUID&quot;:&quot;63ba9882-10fa-4e13-8daa-0ba98581e7eb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7850e573-1785-4a74-83c6-5ec869c2d519&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e2c7776c-7453-408a-bb05-92030c3b410d&quot;,&quot;title&quot;:&quot;home()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice home() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d83dc08b-3e30-4825-a591-92484afe4262&quot;,&quot;parentUUID&quot;:&quot;e2c7776c-7453-408a-bb05-92030c3b410d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d83dc08b-3e30-4825-a591-92484afe4262&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a54befbe-2630-4298-8969-5a22917c03e9&quot;,&quot;title&quot;:&quot;homeHold()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice homeHold() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;64647249-c9e7-4c03-b874-c462d9247f20&quot;,&quot;parentUUID&quot;:&quot;a54befbe-2630-4298-8969-5a22917c03e9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;64647249-c9e7-4c03-b874-c462d9247f20&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;559b362f-d9a5-4f47-a49e-facb0ca54c45&quot;,&quot;title&quot;:&quot;left()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice left() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c08a6613-0044-46c2-a206-ef27fe43ffbf&quot;,&quot;parentUUID&quot;:&quot;559b362f-d9a5-4f47-a49e-facb0ca54c45&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c08a6613-0044-46c2-a206-ef27fe43ffbf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d759310b-7dda-4c17-9258-78a92f366f69&quot;,&quot;title&quot;:&quot;menu()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice menu() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7f584803-b3e8-481d-a874-6c7b0a4e99c4&quot;,&quot;parentUUID&quot;:&quot;d759310b-7dda-4c17-9258-78a92f366f69&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7f584803-b3e8-481d-a874-6c7b0a4e99c4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f4d9daf1-9b66-4368-aa7c-efac5e310bd9&quot;,&quot;title&quot;:&quot;next()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice next() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bfeff71b-3d37-4ec5-b77a-533bafa6da15&quot;,&quot;parentUUID&quot;:&quot;f4d9daf1-9b66-4368-aa7c-efac5e310bd9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bfeff71b-3d37-4ec5-b77a-533bafa6da15&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;16c291d9-af71-4781-b860-5bc745a491c9&quot;,&quot;title&quot;:&quot;pause()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pause() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;616aa6b9-a332-466f-b1e1-3251e6aeb80c&quot;,&quot;parentUUID&quot;:&quot;16c291d9-af71-4781-b860-5bc745a491c9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;616aa6b9-a332-466f-b1e1-3251e6aeb80c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;368a4a03-c0a3-472d-a288-13f4b760adb9&quot;,&quot;title&quot;:&quot;play()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice play() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cc428658-7998-4cbd-b392-38993ed0f679&quot;,&quot;parentUUID&quot;:&quot;368a4a03-c0a3-472d-a288-13f4b760adb9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cc428658-7998-4cbd-b392-38993ed0f679&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b8b27f82-6dd7-4b15-92c9-bb8ae71c6861&quot;,&quot;title&quot;:&quot;playPause()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice playPause() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;05dc05db-b52b-408f-a358-a1364046fdd8&quot;,&quot;parentUUID&quot;:&quot;b8b27f82-6dd7-4b15-92c9-bb8ae71c6861&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;05dc05db-b52b-408f-a358-a1364046fdd8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9db97268-329f-48f7-9e83-d2d832d44ee2&quot;,&quot;title&quot;:&quot;previous()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice previous() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1e8f7ee1-be43-4cdb-885a-a49c158ecc67&quot;,&quot;parentUUID&quot;:&quot;9db97268-329f-48f7-9e83-d2d832d44ee2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1e8f7ee1-be43-4cdb-885a-a49c158ecc67&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3910450f-05c6-4e97-9e10-0ce11874d8c5&quot;,&quot;title&quot;:&quot;right()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice right() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6a4aacc6-fba3-45dd-9029-89c4f0eed437&quot;,&quot;parentUUID&quot;:&quot;3910450f-05c6-4e97-9e10-0ce11874d8c5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6a4aacc6-fba3-45dd-9029-89c4f0eed437&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;24027016-e288-4c50-8593-02de1ff262a6&quot;,&quot;title&quot;:&quot;select()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice select() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;73c6b70a-bfbb-4ef8-a078-5aa4eb99a5cd&quot;,&quot;parentUUID&quot;:&quot;24027016-e288-4c50-8593-02de1ff262a6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;73c6b70a-bfbb-4ef8-a078-5aa4eb99a5cd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;768812a0-2325-49ea-8e4f-5cc5cbf1a5dc&quot;,&quot;title&quot;:&quot;skipBackward()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice skipBackward() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;76d62ec7-07c0-4fd9-88a5-db8ef886d1cb&quot;,&quot;parentUUID&quot;:&quot;768812a0-2325-49ea-8e4f-5cc5cbf1a5dc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;76d62ec7-07c0-4fd9-88a5-db8ef886d1cb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bb1a8d88-bb4b-4f56-a294-3c547e50298a&quot;,&quot;title&quot;:&quot;skipForward()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice skipForward() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;abb4b01d-46a8-44f9-8078-c52c43ca8ba1&quot;,&quot;parentUUID&quot;:&quot;bb1a8d88-bb4b-4f56-a294-3c547e50298a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;abb4b01d-46a8-44f9-8078-c52c43ca8ba1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e4096463-7bdd-419d-b401-582585147796&quot;,&quot;title&quot;:&quot;stop()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice stop() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8f1fce4f-d5d5-4224-ac77-d77f113a24f6&quot;,&quot;parentUUID&quot;:&quot;e4096463-7bdd-419d-b401-582585147796&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8f1fce4f-d5d5-4224-ac77-d77f113a24f6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8956ebb3-022c-4d28-b7a7-be578e5b66ac&quot;,&quot;title&quot;:&quot;suspend()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice suspend() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7725017d-c731-4c33-853f-bb5c7e2ab140&quot;,&quot;parentUUID&quot;:&quot;8956ebb3-022c-4d28-b7a7-be578e5b66ac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7725017d-c731-4c33-853f-bb5c7e2ab140&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;62626e25-6d9a-4bc5-9c21-bc2496205ff3&quot;,&quot;title&quot;:&quot;topMenu()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice topMenu() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;da7c1d95-1217-489e-99f5-de71c42ba952&quot;,&quot;parentUUID&quot;:&quot;62626e25-6d9a-4bc5-9c21-bc2496205ff3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;da7c1d95-1217-489e-99f5-de71c42ba952&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f8ece694-3e5d-469c-ae85-c3d9cb2a11cf&quot;,&quot;title&quot;:&quot;turnOff()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice turnOff() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;10c1ddcf-e7d0-424d-843e-52f981cb4e19&quot;,&quot;parentUUID&quot;:&quot;f8ece694-3e5d-469c-ae85-c3d9cb2a11cf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;10c1ddcf-e7d0-424d-843e-52f981cb4e19&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d33ef889-f5c4-4628-8681-104c2443d788&quot;,&quot;title&quot;:&quot;turnOn()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice turnOn() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b384c583-66a7-4df7-be46-91a1acc28884&quot;,&quot;parentUUID&quot;:&quot;d33ef889-f5c4-4628-8681-104c2443d788&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b384c583-66a7-4df7-be46-91a1acc28884&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d2a7c5ef-43dd-4d3d-8386-b59c98c58137&quot;,&quot;title&quot;:&quot;up()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice up() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2d73c36f-aa9a-42ad-a83d-fdfe4c664d66&quot;,&quot;parentUUID&quot;:&quot;d2a7c5ef-43dd-4d3d-8386-b59c98c58137&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2d73c36f-aa9a-42ad-a83d-fdfe4c664d66&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;248f07d6-3aec-4f7b-8cb2-f2eee32d0a75&quot;,&quot;title&quot;:&quot;volumeDown()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice volumeDown() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6b33ceaa-a8a1-42ae-bb24-69c6d21122ae&quot;,&quot;parentUUID&quot;:&quot;248f07d6-3aec-4f7b-8cb2-f2eee32d0a75&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6b33ceaa-a8a1-42ae-bb24-69c6d21122ae&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1e21a2f8-3cad-4726-b4ed-da21a157466d&quot;,&quot;title&quot;:&quot;volumeUp()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice volumeUp() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3dfdbe55-51f6-430e-8eb3-0948c70eae8a&quot;,&quot;parentUUID&quot;:&quot;1e21a2f8-3cad-4726-b4ed-da21a157466d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3dfdbe55-51f6-430e-8eb3-0948c70eae8a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9158b43b-5d64-4b25-a191-17e9b0d85883&quot;,&quot;title&quot;:&quot;wakeup()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice wakeup() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;97ab8b4d-7e1b-4504-bf06-705a7cf30b76&quot;,&quot;parentUUID&quot;:&quot;9158b43b-5d64-4b25-a191-17e9b0d85883&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;97ab8b4d-7e1b-4504-bf06-705a7cf30b76&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;db5dee22-dfad-46f7-a62c-97f3b2cae7e1&quot;,&quot;title&quot;:&quot;launchApp()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice launchApp() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(\&quot;\&quot;)})});await device.launchApp(\&quot;com.apple.TVShows\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;84f03d14-6e80-48ba-ac83-c3b83eade615&quot;,&quot;parentUUID&quot;:&quot;db5dee22-dfad-46f7-a62c-97f3b2cae7e1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;84f03d14-6e80-48ba-ac83-c3b83eade615&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9d7337cd-34f8-42dc-8873-34fa2c62754c&quot;,&quot;title&quot;:&quot;NodePyATVInstance&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;a84e6887-03b5-4b27-a366-a6c8812b53c0&quot;,&quot;title&quot;:&quot;static version()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work with pyatv [L]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should work with pyatv [L]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:873,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(4e3);const result=await NodePyATVInstance.version();if(result.pyatv===null){throw new Error(\&quot;No version found for pyatv. Is it installed in test environment?\&quot;)}assert.equal(typeof result.pyatv,\&quot;string\&quot;,\&quot;result.pyatv is a string\&quot;);assert.ok(result.pyatv.length&gt;=5,\&quot;result.pyatv has content\&quot;);assert.strictEqual(result.module,version)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1e1643eb-c2b6-462d-a1ba-2dbd56f59d08&quot;,&quot;parentUUID&quot;:&quot;a84e6887-03b5-4b27-a366-a6c8812b53c0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the pyatv version&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return the pyatv version&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await NodePyATVInstance.version({spawn:createFakeSpawn(cp=&gt;{cp.code(1);cp.end(\&quot;atvremote 0.7.4\&quot;)})});assert.ok(result.pyatv);assert.strictEqual(result.pyatv,\&quot;0.7.4\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ed47af3-0336-4053-94c5-a390614ee8bc&quot;,&quot;parentUUID&quot;:&quot;a84e6887-03b5-4b27-a366-a6c8812b53c0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the module version&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return the module version&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await NodePyATVInstance.version({noColors:true,spawn:createFakeSpawn(cp=&gt;cp.code(1).end())});assert.strictEqual(result.module,version)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41f0b85e-2caa-4331-82b6-75606f10864d&quot;,&quot;parentUUID&quot;:&quot;a84e6887-03b5-4b27-a366-a6c8812b53c0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle option.atvremotePath&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should handle option.atvremotePath&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await NodePyATVInstance.version({atvremotePath:\&quot;/foo/bar\&quot;,spawn:createFakeSpawn(cp=&gt;{assert.strictEqual(cp.cmd(),\&quot;/foo/bar\&quot;);cp.code(1).end()})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;882159d9-c43e-4403-a5cd-e63facdeed43&quot;,&quot;parentUUID&quot;:&quot;a84e6887-03b5-4b27-a366-a6c8812b53c0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with option.debug = true&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should work with option.debug = true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await NodePyATVInstance.version({debug:true,spawn:createFakeSpawn(cp=&gt;cp.code(1).end())})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;915b44e7-2bca-400b-b82d-9dceaf9a3ab3&quot;,&quot;parentUUID&quot;:&quot;a84e6887-03b5-4b27-a366-a6c8812b53c0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with option.noColors&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should work with option.noColors&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await NodePyATVInstance.version({debug:__name(()=&gt;{},\&quot;debug\&quot;),noColors:true,spawn:createFakeSpawn(cp=&gt;cp.code(1).end())})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2fcb292d-ae7e-4118-b312-4040db795943&quot;,&quot;parentUUID&quot;:&quot;a84e6887-03b5-4b27-a366-a6c8812b53c0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return null on pyatv stderr output&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return null on pyatv stderr output&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await NodePyATVInstance.version({spawn:createFakeSpawn(cp=&gt;cp.stderr(\&quot;Hello World!\&quot;).code(123).end())});assert.strictEqual(result.pyatv,null)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a69d4af3-a7e3-4317-9ef6-8559e9a74f15&quot;,&quot;parentUUID&quot;:&quot;a84e6887-03b5-4b27-a366-a6c8812b53c0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return null on pyatv error&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return null on pyatv error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await NodePyATVInstance.version({spawn:createFakeSpawn(cp=&gt;{cp.error(new Error(\&quot;Hello world!\&quot;)).end()})});assert.strictEqual(result.pyatv,null)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ce5ba601-f23b-4d18-a99a-4498144e100d&quot;,&quot;parentUUID&quot;:&quot;a84e6887-03b5-4b27-a366-a6c8812b53c0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return null on invalid pyatv version&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return null on invalid pyatv version&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await NodePyATVInstance.version({spawn:createFakeSpawn(cp=&gt;{cp.stdout(\&quot;atvremote 42\&quot;).code(1).end()})});assert.strictEqual(result.pyatv,null)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;97f164da-4f0f-4257-b64a-6798476f1c76&quot;,&quot;parentUUID&quot;:&quot;a84e6887-03b5-4b27-a366-a6c8812b53c0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1e1643eb-c2b6-462d-a1ba-2dbd56f59d08&quot;,&quot;2ed47af3-0336-4053-94c5-a390614ee8bc&quot;,&quot;41f0b85e-2caa-4331-82b6-75606f10864d&quot;,&quot;882159d9-c43e-4403-a5cd-e63facdeed43&quot;,&quot;915b44e7-2bca-400b-b82d-9dceaf9a3ab3&quot;,&quot;2fcb292d-ae7e-4118-b312-4040db795943&quot;,&quot;a69d4af3-a7e3-4317-9ef6-8559e9a74f15&quot;,&quot;ce5ba601-f23b-4d18-a99a-4498144e100d&quot;,&quot;97f164da-4f0f-4257-b64a-6798476f1c76&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:885,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5c21b60c-e879-4e93-a69c-d497cef015ec&quot;,&quot;title&quot;:&quot;static check()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should resolve in test environment [L]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should resolve in test environment [L]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5939,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(12e3);await NodePyATVInstance.check()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9d7e4e45-e336-4c4c-af68-7f0e1a996777&quot;,&quot;parentUUID&quot;:&quot;5c21b60c-e879-4e93-a69c-d497cef015ec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return nice error message if pyatv was not found&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should return nice error message if pyatv was not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.check({spawn:createFakeSpawn(cp=&gt;{cp.error(new Error(\&quot;spawn atvremote ENOENT\&quot;)).code(1).end()})})},/Unable to find pyatv. Is it installed?/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8fb35d76-a7bb-49e1-81bc-29f1d04acc2b&quot;,&quot;parentUUID&quot;:&quot;5c21b60c-e879-4e93-a69c-d497cef015ec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return nice error message if myatv is too old&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should return nice error message if myatv is too old&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.check({spawn:createFakeSpawn(cp=&gt;{cp.stdout(\&quot;atvremote 0.5.1\&quot;).code(1).end()})})},/Found pyatv, but unforunately it&#x27;s too old. Please update pyatv./)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;78cd5752-877c-47f3-9a8a-7e34b1613bec&quot;,&quot;parentUUID&quot;:&quot;5c21b60c-e879-4e93-a69c-d497cef015ec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return nice error message if scan failed&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should return nice error message if scan failed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let i=0;await assert.rejects(async()=&gt;{await NodePyATVInstance.check({spawn:createFakeSpawn(cp=&gt;{if(i===0){cp.stdout(\&quot;atvremote 0.7.0\&quot;).code(1).end();i++}else{cp.error(new Error(\&quot;spawn atvremote ENOENT\&quot;)).code(1).end()}})})},/Unable to scan for devices/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;45b690fa-e331-4ffb-83fd-3c5c7dafe5d2&quot;,&quot;parentUUID&quot;:&quot;5c21b60c-e879-4e93-a69c-d497cef015ec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9d7e4e45-e336-4c4c-af68-7f0e1a996777&quot;,&quot;8fb35d76-a7bb-49e1-81bc-29f1d04acc2b&quot;,&quot;78cd5752-877c-47f3-9a8a-7e34b1613bec&quot;,&quot;45b690fa-e331-4ffb-83fd-3c5c7dafe5d2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5945,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;16bf95e7-3b18-40d0-afc7-81df5539dcad&quot;,&quot;title&quot;:&quot;static find()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work [L]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work [L]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5450,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(1e4);const result=await NodePyATVInstance.find();assert.ok(Array.isArray(result))&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e0a12ee4-1982-49a0-81ef-29f10828d1c1&quot;,&quot;parentUUID&quot;:&quot;16bf95e7-3b18-40d0-afc7-81df5539dcad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle option.atvscriptPath&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should handle option.atvscriptPath&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await NodePyATVInstance.find({atvscriptPath:\&quot;/foo/bar\&quot;,spawn:createFakeSpawn(cp=&gt;{assert.strictEqual(cp.cmd(),\&quot;/foo/bar\&quot;);cp.stdout({datetime:\&quot;2020-11-06T20:47:30.840022+01:00\&quot;,devices:[],result:\&quot;success\&quot;}).end()})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;77886cda-c7a3-462f-9dc7-28d3dd0a37ae&quot;,&quot;parentUUID&quot;:&quot;16bf95e7-3b18-40d0-afc7-81df5539dcad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error on stderr output&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error on stderr output&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stderr(\&quot;Hello World!\&quot;).code(1).end()})})},/Unable to execute request/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e96e1870-24ba-42b6-a098-18b778f3db21&quot;,&quot;parentUUID&quot;:&quot;16bf95e7-3b18-40d0-afc7-81df5539dcad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error on error&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.error(new Error(\&quot;Hello world!\&quot;)).code(1).end()})})},/Hello world!/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5429c8b7-9835-4c78-9c63-d497927225d8&quot;,&quot;parentUUID&quot;:&quot;16bf95e7-3b18-40d0-afc7-81df5539dcad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error on pyatv failure&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error on pyatv failure&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout({datetime:\&quot;2020-11-06T20:47:30.840022+01:00\&quot;,error:\&quot;Task exception was never retrieved\&quot;,exception:\&quot;[Errno 113] Connect call failed\&quot;,result:\&quot;failure\&quot;}).code(1).end()})})},/Unable to find any devices, but received 1 error: /)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;31af0521-08eb-4f80-98a0-e55367782081&quot;,&quot;parentUUID&quot;:&quot;16bf95e7-3b18-40d0-afc7-81df5539dcad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if atvscript result is not valid json&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error if atvscript result is not valid json&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout(JSON.stringify({datetime:\&quot;2020-11-06T20:47:30.840022+01:00\&quot;,devices:[],result:\&quot;success\&quot;}).substr(1)).end()})})},/Unable to parse result/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3be8fe6b-f614-4e2d-91cf-b4341fa90526&quot;,&quot;parentUUID&quot;:&quot;16bf95e7-3b18-40d0-afc7-81df5539dcad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if atvscript result is not successfull&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error if atvscript result is not successfull&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout({result:\&quot;error\&quot;}).code(1).end()})})},/Unable to parse pyatv response: /)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3654cac3-f659-416d-9260-dd8b0a3f52b5&quot;,&quot;parentUUID&quot;:&quot;16bf95e7-3b18-40d0-afc7-81df5539dcad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if atvscript result is without device array&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error if atvscript result is without device array&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout({result:\&quot;success\&quot;}).code(1).end()})})},/Unable to parse pyatv response: /)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fa24cd43-efef-41fa-aef1-5e7cb4b61ec9&quot;,&quot;parentUUID&quot;:&quot;16bf95e7-3b18-40d0-afc7-81df5539dcad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work if devices are without device_info / services&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work if devices are without device_info / services&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const devices=await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout({datetime:\&quot;2020-11-06T20:47:30.840022+01:00\&quot;,devices:[{address:\&quot;10.0.10.81\&quot;,identifier:\&quot;xxx\&quot;,name:\&quot;Vardagsrum\&quot;}],result:\&quot;success\&quot;}).code(1).end()})});assert.strictEqual(devices.length,1);assert.strictEqual(devices[0].name,\&quot;Vardagsrum\&quot;);assert.strictEqual(devices[0].host,\&quot;10.0.10.81\&quot;);assert.strictEqual(devices[0].id,\&quot;xxx\&quot;);assert.strictEqual(devices[0].model,void 0);assert.strictEqual(devices[0].modelName,void 0);assert.strictEqual(devices[0].os,void 0);assert.strictEqual(devices[0].version,void 0);assert.deepStrictEqual(devices[0].services,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5533b220-a44f-4a08-b6f0-ccb3e0da1e09&quot;,&quot;parentUUID&quot;:&quot;16bf95e7-3b18-40d0-afc7-81df5539dcad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work if devices are with device_info / services&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work if devices are with device_info / services&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const devices=await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout({datetime:\&quot;2020-11-06T20:47:30.840022+01:00\&quot;,devices:[{address:\&quot;10.0.10.81\&quot;,device_info:{model:\&quot;Gen4K\&quot;,model_str:\&quot;Apple TV 4K\&quot;,operating_system:\&quot;TvOS\&quot;,version:\&quot;15.5.1\&quot;},identifier:\&quot;xxx\&quot;,name:\&quot;Vardagsrum\&quot;,services:[{port:49152,protocol:\&quot;mrp\&quot;},{port:7e3,protocol:\&quot;airplay\&quot;}]}],result:\&quot;success\&quot;}).code(1).end()})});assert.strictEqual(devices.length,1);assert.strictEqual(devices[0].name,\&quot;Vardagsrum\&quot;);assert.strictEqual(devices[0].host,\&quot;10.0.10.81\&quot;);assert.strictEqual(devices[0].id,\&quot;xxx\&quot;);assert.strictEqual(devices[0].model,\&quot;Gen4K\&quot;);assert.strictEqual(devices[0].modelName,\&quot;Apple TV 4K\&quot;);assert.strictEqual(devices[0].os,\&quot;TvOS\&quot;);assert.strictEqual(devices[0].version,\&quot;15.5.1\&quot;);assert.deepStrictEqual(devices[0].services,[{port:49152,protocol:NodePyATVProtocol.mrp},{port:7e3,protocol:NodePyATVProtocol.airplay}])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d7d7e799-3b3a-4b8f-ac3c-da521e07ceba&quot;,&quot;parentUUID&quot;:&quot;16bf95e7-3b18-40d0-afc7-81df5539dcad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for unicast scans&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work for unicast scans&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const devices=await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout(`{\&quot;result\&quot;: \&quot;failure\&quot;, \&quot;datetime\&quot;: \&quot;2024-05-18T16:20:18.103087-06:00\&quot;, \&quot;error\&quot;: \&quot;Task exception was never retrieved\&quot;, \&quot;exception\&quot;: \&quot;[Errno 113] Connect call failed (&#x27;10.0.0.232&#x27;, 32498)\&quot;, \&quot;stacktrace\&quot;: \&quot;Traceback (most recent call last):\\\\n  File \\\\\&quot;/var/lib/homebridge/appletv-enhanced/.venv/lib/python3.11/site-packages/pyatv/support/knock.py\\\\\&quot;, line 28, in _async_knock\\\\n    _, writer = await asyncio.wait_for(\\\\n                ^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/tasks.py\\\\\&quot;, line 479, in wait_for\\\\n    return fut.result()\\\\n           ^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/streams.py\\\\\&quot;, line 48, in open_connection\\\\n    transport, _ = await loop.create_connection(\\\\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1085, in create_connection\\\\n    raise exceptions[0]\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1069, in create_connection\\\\n    sock = await self._connect_sock(\\\\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 973, in _connect_sock\\\\n    await self.sock_connect(sock, address)\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 634, in sock_connect\\\\n    return await fut\\\\n           ^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 674, in _sock_connect_cb\\\\n    raise OSError(err, f&#x27;Connect call failed {address}&#x27;)\\\\nOSError: [Errno 113] Connect call failed (&#x27;10.0.0.232&#x27;, 32498)\\\\n\&quot;}\n{\&quot;result\&quot;: \&quot;failure\&quot;, \&quot;datetime\&quot;: \&quot;2024-05-18T16:20:18.114744-06:00\&quot;, \&quot;error\&quot;: \&quot;Task exception was never retrieved\&quot;, \&quot;exception\&quot;: \&quot;[Errno 113] Connect call failed (&#x27;10.0.0.229&#x27;, 32498)\&quot;, \&quot;stacktrace\&quot;: \&quot;Traceback (most recent call last):\\\\n  File \\\\\&quot;/var/lib/homebridge/appletv-enhanced/.venv/lib/python3.11/site-packages/pyatv/support/knock.py\\\\\&quot;, line 28, in _async_knock\\\\n    _, writer = await asyncio.wait_for(\\\\n                ^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/tasks.py\\\\\&quot;, line 479, in wait_for\\\\n    return fut.result()\\\\n           ^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/streams.py\\\\\&quot;, line 48, in open_connection\\\\n    transport, _ = await loop.create_connection(\\\\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1085, in create_connection\\\\n    raise exceptions[0]\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1069, in create_connection\\\\n    sock = await self._connect_sock(\\\\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 973, in _connect_sock\\\\n    await self.sock_connect(sock, address)\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 634, in sock_connect\\\\n    return await fut\\\\n           ^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 674, in _sock_connect_cb\\\\n    raise OSError(err, f&#x27;Connect call failed {address}&#x27;)\\\\nOSError: [Errno 113] Connect call failed (&#x27;10.0.0.229&#x27;, 32498)\\\\n\&quot;}\n{\&quot;result\&quot;: \&quot;success\&quot;, \&quot;datetime\&quot;: \&quot;2024-05-18T16:20:20.042648-06:00\&quot;, \&quot;devices\&quot;: [{\&quot;name\&quot;: \&quot;Living Room\&quot;, \&quot;address\&quot;: \&quot;10.0.0.30\&quot;, \&quot;identifier\&quot;: \&quot;37323C0E-99E6-4CC3-A006-1ED5368FFF8C\&quot;, \&quot;all_identifiers\&quot;: [\&quot;86B730B2-5189-4B6A-BCAA-CDDB18F05FA8\&quot;, \&quot;C8:D0:83:E9:D0:49\&quot;, \&quot;37323C0E-99E6-4CC3-A006-1ED5368FFF8C\&quot;, \&quot;C8D083E9D049\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;C8:D0:83:E9:D0:49\&quot;, \&quot;model\&quot;: \&quot;Gen4K\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4K\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.5\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49154}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}, {\&quot;name\&quot;: \&quot;Kitchen\&quot;, \&quot;address\&quot;: \&quot;10.0.0.79\&quot;, \&quot;identifier\&quot;: \&quot;45B6A67A-9FAD-497D-95EF-7FC5ECB3371C\&quot;, \&quot;all_identifiers\&quot;: [\&quot;B163C908-000F-4983-BDC7-BEFD76887EF5\&quot;, \&quot;C8:69:CD:63:2A:11\&quot;, \&quot;45B6A67A-9FAD-497D-95EF-7FC5ECB3371C\&quot;, \&quot;C869CD632A11\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;C8:69:CD:63:2A:11\&quot;, \&quot;model\&quot;: \&quot;Gen4\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.4\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49157}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}, {\&quot;name\&quot;: \&quot;Bedroom\&quot;, \&quot;address\&quot;: \&quot;10.0.0.20\&quot;, \&quot;identifier\&quot;: \&quot;CA55DA36-ADEF-4DBC-A0B3-BA68B0C53E40\&quot;, \&quot;all_identifiers\&quot;: [\&quot;08:66:98:BC:37:1F\&quot;, \&quot;108F35A0-FF21-4884-96C2-145AAAB1B4C4\&quot;, \&quot;CA55DA36-ADEF-4DBC-A0B3-BA68B0C53E40\&quot;, \&quot;086698BC371F\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;08:66:98:BC:37:1F\&quot;, \&quot;model\&quot;: \&quot;Gen4\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.4\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49154}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}, {\&quot;name\&quot;: \&quot;Basement\&quot;, \&quot;address\&quot;: \&quot;10.0.0.156\&quot;, \&quot;identifier\&quot;: \&quot;C02B27DB-2AF3-43E7-8EF7-885E1E9AB3B4\&quot;, \&quot;all_identifiers\&quot;: [\&quot;8BDB6773-479F-4C01-A185-29FF5516F2C2\&quot;, \&quot;D0:03:4B:4C:2A:2E\&quot;, \&quot;C02B27DB-2AF3-43E7-8EF7-885E1E9AB3B4\&quot;, \&quot;D0034B4C2A2E\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;D0:03:4B:4C:2A:2E\&quot;, \&quot;model\&quot;: \&quot;Gen4\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.4\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49154}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}]}`).code(1).end()})});assert.strictEqual(devices.length,4);assert.strictEqual(devices[0].name,\&quot;Living Room\&quot;);assert.strictEqual(devices[0].host,\&quot;10.0.0.30\&quot;);assert.strictEqual(devices[0].id,\&quot;37323C0E-99E6-4CC3-A006-1ED5368FFF8C\&quot;);assert.strictEqual(devices[1].name,\&quot;Kitchen\&quot;);assert.strictEqual(devices[1].host,\&quot;10.0.0.79\&quot;);assert.strictEqual(devices[1].id,\&quot;45B6A67A-9FAD-497D-95EF-7FC5ECB3371C\&quot;);assert.strictEqual(devices[2].name,\&quot;Bedroom\&quot;);assert.strictEqual(devices[2].host,\&quot;10.0.0.20\&quot;);assert.strictEqual(devices[2].id,\&quot;CA55DA36-ADEF-4DBC-A0B3-BA68B0C53E40\&quot;);assert.strictEqual(devices[3].name,\&quot;Basement\&quot;);assert.strictEqual(devices[3].host,\&quot;10.0.0.156\&quot;);assert.strictEqual(devices[3].id,\&quot;C02B27DB-2AF3-43E7-8EF7-885E1E9AB3B4\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;57302f96-b44e-4e36-9a38-56e915c899fc&quot;,&quot;parentUUID&quot;:&quot;16bf95e7-3b18-40d0-afc7-81df5539dcad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for unicast scans with returnDevicesAndErrors = true&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work for unicast scans with returnDevicesAndErrors = true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response=await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout(`{\&quot;result\&quot;: \&quot;failure\&quot;, \&quot;datetime\&quot;: \&quot;2024-05-18T16:20:18.103087-06:00\&quot;, \&quot;error\&quot;: \&quot;Task exception was never retrieved\&quot;, \&quot;exception\&quot;: \&quot;[Errno 113] Connect call failed (&#x27;10.0.0.232&#x27;, 32498)\&quot;, \&quot;stacktrace\&quot;: \&quot;Traceback (most recent call last):\\\\n  File \\\\\&quot;/var/lib/homebridge/appletv-enhanced/.venv/lib/python3.11/site-packages/pyatv/support/knock.py\\\\\&quot;, line 28, in _async_knock\\\\n    _, writer = await asyncio.wait_for(\\\\n                ^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/tasks.py\\\\\&quot;, line 479, in wait_for\\\\n    return fut.result()\\\\n           ^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/streams.py\\\\\&quot;, line 48, in open_connection\\\\n    transport, _ = await loop.create_connection(\\\\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1085, in create_connection\\\\n    raise exceptions[0]\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1069, in create_connection\\\\n    sock = await self._connect_sock(\\\\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 973, in _connect_sock\\\\n    await self.sock_connect(sock, address)\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 634, in sock_connect\\\\n    return await fut\\\\n           ^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 674, in _sock_connect_cb\\\\n    raise OSError(err, f&#x27;Connect call failed {address}&#x27;)\\\\nOSError: [Errno 113] Connect call failed (&#x27;10.0.0.232&#x27;, 32498)\\\\n\&quot;}\n{\&quot;result\&quot;: \&quot;failure\&quot;, \&quot;datetime\&quot;: \&quot;2024-05-18T16:20:18.114744-06:00\&quot;, \&quot;error\&quot;: \&quot;Task exception was never retrieved\&quot;, \&quot;exception\&quot;: \&quot;[Errno 113] Connect call failed (&#x27;10.0.0.229&#x27;, 32498)\&quot;, \&quot;stacktrace\&quot;: \&quot;Traceback (most recent call last):\\\\n  File \\\\\&quot;/var/lib/homebridge/appletv-enhanced/.venv/lib/python3.11/site-packages/pyatv/support/knock.py\\\\\&quot;, line 28, in _async_knock\\\\n    _, writer = await asyncio.wait_for(\\\\n                ^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/tasks.py\\\\\&quot;, line 479, in wait_for\\\\n    return fut.result()\\\\n           ^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/streams.py\\\\\&quot;, line 48, in open_connection\\\\n    transport, _ = await loop.create_connection(\\\\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1085, in create_connection\\\\n    raise exceptions[0]\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1069, in create_connection\\\\n    sock = await self._connect_sock(\\\\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 973, in _connect_sock\\\\n    await self.sock_connect(sock, address)\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 634, in sock_connect\\\\n    return await fut\\\\n           ^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 674, in _sock_connect_cb\\\\n    raise OSError(err, f&#x27;Connect call failed {address}&#x27;)\\\\nOSError: [Errno 113] Connect call failed (&#x27;10.0.0.229&#x27;, 32498)\\\\n\&quot;}\n{\&quot;result\&quot;: \&quot;success\&quot;, \&quot;datetime\&quot;: \&quot;2024-05-18T16:20:20.042648-06:00\&quot;, \&quot;devices\&quot;: [{\&quot;name\&quot;: \&quot;Living Room\&quot;, \&quot;address\&quot;: \&quot;10.0.0.30\&quot;, \&quot;identifier\&quot;: \&quot;37323C0E-99E6-4CC3-A006-1ED5368FFF8C\&quot;, \&quot;all_identifiers\&quot;: [\&quot;86B730B2-5189-4B6A-BCAA-CDDB18F05FA8\&quot;, \&quot;C8:D0:83:E9:D0:49\&quot;, \&quot;37323C0E-99E6-4CC3-A006-1ED5368FFF8C\&quot;, \&quot;C8D083E9D049\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;C8:D0:83:E9:D0:49\&quot;, \&quot;model\&quot;: \&quot;Gen4K\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4K\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.5\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49154}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}, {\&quot;name\&quot;: \&quot;Kitchen\&quot;, \&quot;address\&quot;: \&quot;10.0.0.79\&quot;, \&quot;identifier\&quot;: \&quot;45B6A67A-9FAD-497D-95EF-7FC5ECB3371C\&quot;, \&quot;all_identifiers\&quot;: [\&quot;B163C908-000F-4983-BDC7-BEFD76887EF5\&quot;, \&quot;C8:69:CD:63:2A:11\&quot;, \&quot;45B6A67A-9FAD-497D-95EF-7FC5ECB3371C\&quot;, \&quot;C869CD632A11\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;C8:69:CD:63:2A:11\&quot;, \&quot;model\&quot;: \&quot;Gen4\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.4\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49157}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}, {\&quot;name\&quot;: \&quot;Bedroom\&quot;, \&quot;address\&quot;: \&quot;10.0.0.20\&quot;, \&quot;identifier\&quot;: \&quot;CA55DA36-ADEF-4DBC-A0B3-BA68B0C53E40\&quot;, \&quot;all_identifiers\&quot;: [\&quot;08:66:98:BC:37:1F\&quot;, \&quot;108F35A0-FF21-4884-96C2-145AAAB1B4C4\&quot;, \&quot;CA55DA36-ADEF-4DBC-A0B3-BA68B0C53E40\&quot;, \&quot;086698BC371F\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;08:66:98:BC:37:1F\&quot;, \&quot;model\&quot;: \&quot;Gen4\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.4\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49154}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}, {\&quot;name\&quot;: \&quot;Basement\&quot;, \&quot;address\&quot;: \&quot;10.0.0.156\&quot;, \&quot;identifier\&quot;: \&quot;C02B27DB-2AF3-43E7-8EF7-885E1E9AB3B4\&quot;, \&quot;all_identifiers\&quot;: [\&quot;8BDB6773-479F-4C01-A185-29FF5516F2C2\&quot;, \&quot;D0:03:4B:4C:2A:2E\&quot;, \&quot;C02B27DB-2AF3-43E7-8EF7-885E1E9AB3B4\&quot;, \&quot;D0034B4C2A2E\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;D0:03:4B:4C:2A:2E\&quot;, \&quot;model\&quot;: \&quot;Gen4\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.4\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49154}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}]}`).code(1).end()})},true);assert.strictEqual(response.devices.length,4);assert.strictEqual(response.errors.length,2);assert.strictEqual(response.devices[0].name,\&quot;Living Room\&quot;);assert.strictEqual(response.devices[0].host,\&quot;10.0.0.30\&quot;);assert.strictEqual(response.devices[0].id,\&quot;37323C0E-99E6-4CC3-A006-1ED5368FFF8C\&quot;);assert.strictEqual(response.devices[1].name,\&quot;Kitchen\&quot;);assert.strictEqual(response.devices[1].host,\&quot;10.0.0.79\&quot;);assert.strictEqual(response.devices[1].id,\&quot;45B6A67A-9FAD-497D-95EF-7FC5ECB3371C\&quot;);assert.strictEqual(response.devices[2].name,\&quot;Bedroom\&quot;);assert.strictEqual(response.devices[2].host,\&quot;10.0.0.20\&quot;);assert.strictEqual(response.devices[2].id,\&quot;CA55DA36-ADEF-4DBC-A0B3-BA68B0C53E40\&quot;);assert.strictEqual(response.devices[3].name,\&quot;Basement\&quot;);assert.strictEqual(response.devices[3].host,\&quot;10.0.0.156\&quot;);assert.strictEqual(response.devices[3].id,\&quot;C02B27DB-2AF3-43E7-8EF7-885E1E9AB3B4\&quot;);assert.strictEqual(response.errors[0].exception,\&quot;[Errno 113] Connect call failed (&#x27;10.0.0.232&#x27;, 32498)\&quot;);assert.strictEqual(response.errors[1].exception,\&quot;[Errno 113] Connect call failed (&#x27;10.0.0.229&#x27;, 32498)\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2d9e9bb4-68ad-4749-9a7e-01d8693975a3&quot;,&quot;parentUUID&quot;:&quot;16bf95e7-3b18-40d0-afc7-81df5539dcad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e0a12ee4-1982-49a0-81ef-29f10828d1c1&quot;,&quot;77886cda-c7a3-462f-9dc7-28d3dd0a37ae&quot;,&quot;e96e1870-24ba-42b6-a098-18b778f3db21&quot;,&quot;5429c8b7-9835-4c78-9c63-d497927225d8&quot;,&quot;31af0521-08eb-4f80-98a0-e55367782081&quot;,&quot;3be8fe6b-f614-4e2d-91cf-b4341fa90526&quot;,&quot;3654cac3-f659-416d-9260-dd8b0a3f52b5&quot;,&quot;fa24cd43-efef-41fa-aef1-5e7cb4b61ec9&quot;,&quot;5533b220-a44f-4a08-b6f0-ccb3e0da1e09&quot;,&quot;d7d7e799-3b3a-4b8f-ac3c-da521e07ceba&quot;,&quot;57302f96-b44e-4e36-9a38-56e915c899fc&quot;,&quot;2d9e9bb4-68ad-4749-9a7e-01d8693975a3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5464,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;118a2c61-d3ae-4f68-8009-3a76f5e30e70&quot;,&quot;title&quot;:&quot;static device()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should pass options to constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static device() should pass options to constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=NodePyATVInstance.device({host:\&quot;192.168.178.6\&quot;,name:\&quot;My Testdevice\&quot;});assert.strictEqual(device.host,\&quot;192.168.178.6\&quot;);assert.strictEqual(device.name,\&quot;My Testdevice\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;17c5d78e-dd95-4210-8fc6-87d16a68a6e6&quot;,&quot;parentUUID&quot;:&quot;118a2c61-d3ae-4f68-8009-3a76f5e30e70&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;17c5d78e-dd95-4210-8fc6-87d16a68a6e6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d63a88ee-f44a-4114-bdbc-d6ed53d2287e&quot;,&quot;title&quot;:&quot;version()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance version() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const i=new NodePyATVInstance({atvremotePath:\&quot;test\&quot;});await i.version({spawn:createFakeSpawn(cp=&gt;{assert.strictEqual(cp.cmd(),\&quot;test\&quot;);cp.code(1).end()})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5d05c1c6-9b6d-4293-8b5e-5924f7e0c81f&quot;,&quot;parentUUID&quot;:&quot;d63a88ee-f44a-4114-bdbc-d6ed53d2287e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5d05c1c6-9b6d-4293-8b5e-5924f7e0c81f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5a31d7e5-a375-47aa-8d4e-6f3d4794440c&quot;,&quot;title&quot;:&quot;check()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance check() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const i=new NodePyATVInstance({atvremotePath:\&quot;test\&quot;});await assert.rejects(async()=&gt;{await i.check({spawn:createFakeSpawn(cp=&gt;{assert.strictEqual(cp.cmd(),\&quot;test\&quot;);cp.error(new Error(\&quot;spawn atvremote ENOENT\&quot;)).code(1).end()})})},/Unable to find pyatv. Is it installed?/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;813205ea-ad55-4305-b0e0-2c738f0e711d&quot;,&quot;parentUUID&quot;:&quot;5a31d7e5-a375-47aa-8d4e-6f3d4794440c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;813205ea-ad55-4305-b0e0-2c738f0e711d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;92876d55-2153-4d72-a236-0f56a0252759&quot;,&quot;title&quot;:&quot;find()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance find() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const i=new NodePyATVInstance({atvscriptPath:\&quot;test\&quot;});await i.find({spawn:createFakeSpawn(cp=&gt;{assert.strictEqual(cp.cmd(),\&quot;test\&quot;);cp.stdout({datetime:\&quot;2020-11-06T20:47:30.840022+01:00\&quot;,devices:[],result:\&quot;success\&quot;}).end()})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;de78516f-5eab-4f86-8026-891914530b4f&quot;,&quot;parentUUID&quot;:&quot;92876d55-2153-4d72-a236-0f56a0252759&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;de78516f-5eab-4f86-8026-891914530b4f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;43fb6979-5129-4211-820c-8a37e00e9aff&quot;,&quot;title&quot;:&quot;device()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance device() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const i=new NodePyATVInstance({debug:true});const d=i.device({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;});assert.deepStrictEqual(d.debug,true)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c40eaae-ce4b-48c3-9f05-1e4c2ab584f6&quot;,&quot;parentUUID&quot;:&quot;43fb6979-5129-4211-820c-8a37e00e9aff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8c40eaae-ce4b-48c3-9f05-1e4c2ab584f6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e2ebd345-7e16-4c0e-9f72-ffe7e004556b&quot;,&quot;title&quot;:&quot;Type Exports&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Type NodePyATVProtocol should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVProtocol should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVProtocol)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3c6da789-5494-48bd-9964-4dfe65d83166&quot;,&quot;parentUUID&quot;:&quot;e2ebd345-7e16-4c0e-9f72-ffe7e004556b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVMediaType should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVMediaType should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVMediaType)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a23f6157-8c40-43a3-8187-5497a85c564c&quot;,&quot;parentUUID&quot;:&quot;e2ebd345-7e16-4c0e-9f72-ffe7e004556b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVDeviceEvent should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVDeviceEvent should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVDeviceEvent)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2046b022-6f61-4fe7-9a03-588e9331fb3b&quot;,&quot;parentUUID&quot;:&quot;e2ebd345-7e16-4c0e-9f72-ffe7e004556b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVDeviceState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVDeviceState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVDeviceState)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3f5e5e89-60b3-42bf-874e-c764e81d9668&quot;,&quot;parentUUID&quot;:&quot;e2ebd345-7e16-4c0e-9f72-ffe7e004556b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVRepeatState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVRepeatState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVRepeatState)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eafe5746-4262-440b-9436-e983e6f79484&quot;,&quot;parentUUID&quot;:&quot;e2ebd345-7e16-4c0e-9f72-ffe7e004556b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVShuffleState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVShuffleState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVShuffleState)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fe8cd9c3-d064-465b-8944-04824812f4f2&quot;,&quot;parentUUID&quot;:&quot;e2ebd345-7e16-4c0e-9f72-ffe7e004556b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVKeys should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVKeys should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVKeys)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0c6bc1fa-7415-41e7-9c6f-b16e0393d75a&quot;,&quot;parentUUID&quot;:&quot;e2ebd345-7e16-4c0e-9f72-ffe7e004556b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVInstanceOptions should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVInstanceOptions should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVListenerState)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;63467ea5-ed4c-49d4-a07d-04fdf0ac8c88&quot;,&quot;parentUUID&quot;:&quot;e2ebd345-7e16-4c0e-9f72-ffe7e004556b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVPowerState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVPowerState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVPowerState)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9de51092-1a75-415e-8238-6f25590a9214&quot;,&quot;parentUUID&quot;:&quot;e2ebd345-7e16-4c0e-9f72-ffe7e004556b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3c6da789-5494-48bd-9964-4dfe65d83166&quot;,&quot;a23f6157-8c40-43a3-8187-5497a85c564c&quot;,&quot;2046b022-6f61-4fe7-9a03-588e9331fb3b&quot;,&quot;3f5e5e89-60b3-42bf-874e-c764e81d9668&quot;,&quot;eafe5746-4262-440b-9436-e983e6f79484&quot;,&quot;fe8cd9c3-d064-465b-8944-04824812f4f2&quot;,&quot;0c6bc1fa-7415-41e7-9c6f-b16e0393d75a&quot;,&quot;63467ea5-ed4c-49d4-a07d-04fdf0ac8c88&quot;,&quot;9de51092-1a75-415e-8238-6f25590a9214&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d21baf4c-7e41-4082-809a-3273e88d90c5&quot;,&quot;title&quot;:&quot;Tools&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;446c2789-1102-4270-8419-a5f3e8b7ef77&quot;,&quot;title&quot;:&quot;addRequestId() / removeRequestId()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a string&quot;,&quot;fullTitle&quot;:&quot;Tools addRequestId() / removeRequestId() should return a string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id=addRequestId();assert.strictEqual(typeof id,\&quot;string\&quot;);removeRequestId(id)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d883bc30-39ec-4b06-ae8e-de14a6b7ae1b&quot;,&quot;parentUUID&quot;:&quot;446c2789-1102-4270-8419-a5f3e8b7ef77&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work if given id is not in index&quot;,&quot;fullTitle&quot;:&quot;Tools addRequestId() / removeRequestId() should work if given id is not in index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;removeRequestId(\&quot;FOO\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;31146454-5b17-4e6b-83b5-8b153e8372b2&quot;,&quot;parentUUID&quot;:&quot;446c2789-1102-4270-8419-a5f3e8b7ef77&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d883bc30-39ec-4b06-ae8e-de14a6b7ae1b&quot;,&quot;31146454-5b17-4e6b-83b5-8b153e8372b2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;287b3664-e11e-4169-9ba8-9f460800ff2d&quot;,&quot;title&quot;:&quot;debug()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work without any options&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work without any options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(\&quot;TEST\&quot;,\&quot;Hello World.\&quot;,{})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e3b8569-98c9-4923-ad61-19f00acac044&quot;,&quot;parentUUID&quot;:&quot;287b3664-e11e-4169-9ba8-9f460800ff2d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with default logger&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with default logger&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(\&quot;TEST\&quot;,\&quot;Hello World.\&quot;,{debug:true})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3b906b50-6d90-4f28-af7c-26cd93f05c1e&quot;,&quot;parentUUID&quot;:&quot;287b3664-e11e-4169-9ba8-9f460800ff2d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with custom logger&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with custom logger&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(\&quot;TEST\&quot;,\&quot;Hello World.\&quot;,{debug:__name(function(msg){assert.strictEqual(this,null);assert.ok(msg.includes(\&quot;Hello World\&quot;))},\&quot;debug\&quot;)})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d719dd5b-f29a-45f5-b80e-f0c0237bd5f7&quot;,&quot;parentUUID&quot;:&quot;287b3664-e11e-4169-9ba8-9f460800ff2d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with colors disabled&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with colors disabled&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(\&quot;TEST\&quot;,\&quot;Hello World.\&quot;,{noColors:true})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9055af90-d17a-4555-846a-f0781bd86dd4&quot;,&quot;parentUUID&quot;:&quot;287b3664-e11e-4169-9ba8-9f460800ff2d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with custom logger and colors disabled&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with custom logger and colors disabled&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(\&quot;TEST\&quot;,\&quot;Hello World.\&quot;,{debug:__name(function(msg){assert.strictEqual(this,null);assert.strictEqual(msg,\&quot;[node-pyatv][TEST] Hello World.\&quot;)},\&quot;debug\&quot;),noColors:true})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b38e5699-74e9-4dec-95e6-c114326de196&quot;,&quot;parentUUID&quot;:&quot;287b3664-e11e-4169-9ba8-9f460800ff2d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8e3b8569-98c9-4923-ad61-19f00acac044&quot;,&quot;3b906b50-6d90-4f28-af7c-26cd93f05c1e&quot;,&quot;d719dd5b-f29a-45f5-b80e-f0c0237bd5f7&quot;,&quot;9055af90-d17a-4555-846a-f0781bd86dd4&quot;,&quot;b38e5699-74e9-4dec-95e6-c114326de196&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8b75eddc-9afc-4aac-9251-ec4ea0b0ba71&quot;,&quot;title&quot;:&quot;getExecutable()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should handle atvremotePath if set&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle atvremotePath if set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=getExecutable(NodePyATVExecutableType.atvremote,{atvremotePath:\&quot;/tmp/1\&quot;,atvscriptPath:\&quot;/tmp/2\&quot;});assert.strictEqual(result,\&quot;/tmp/1\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b24e3bc-f731-4df8-b69e-16b61a3dcc46&quot;,&quot;parentUUID&quot;:&quot;8b75eddc-9afc-4aac-9251-ec4ea0b0ba71&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle atvscriptPath if set&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle atvscriptPath if set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=getExecutable(NodePyATVExecutableType.atvscript,{atvremotePath:\&quot;/tmp/1\&quot;,atvscriptPath:\&quot;/tmp/2\&quot;});assert.strictEqual(result,\&quot;/tmp/2\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;77bc47c9-e1a6-42d3-827a-df1e3061a22e&quot;,&quot;parentUUID&quot;:&quot;8b75eddc-9afc-4aac-9251-ec4ea0b0ba71&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle default for atvremote&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle default for atvremote&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=getExecutable(NodePyATVExecutableType.atvremote,{atvscriptPath:\&quot;/tmp\&quot;});assert.strictEqual(result,\&quot;atvremote\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;49ba5aaf-3970-4127-8390-23a48852f3ca&quot;,&quot;parentUUID&quot;:&quot;8b75eddc-9afc-4aac-9251-ec4ea0b0ba71&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle default for atvscript&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle default for atvscript&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=getExecutable(NodePyATVExecutableType.atvscript,{atvremotePath:\&quot;/tmp\&quot;});assert.strictEqual(result,\&quot;atvscript\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;36abf3c0-c561-491f-8a93-6229accf7d0c&quot;,&quot;parentUUID&quot;:&quot;8b75eddc-9afc-4aac-9251-ec4ea0b0ba71&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2b24e3bc-f731-4df8-b69e-16b61a3dcc46&quot;,&quot;77bc47c9-e1a6-42d3-827a-df1e3061a22e&quot;,&quot;49ba5aaf-3970-4127-8390-23a48852f3ca&quot;,&quot;36abf3c0-c561-491f-8a93-6229accf7d0c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;92139ce8-4594-4b96-b201-2774a24de0fe&quot;,&quot;title&quot;:&quot;getParameters()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;empty case&quot;,&quot;fullTitle&quot;:&quot;Tools getParameters() empty case&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await getParameters();assert.deepEqual(result,[])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f499f0ef-d4c6-4393-83b6-3ac5e611d372&quot;,&quot;parentUUID&quot;:&quot;92139ce8-4594-4b96-b201-2774a24de0fe&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;easy case&quot;,&quot;fullTitle&quot;:&quot;Tools getParameters() easy case&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await getParameters({host:\&quot;192.168.178.2\&quot;});assert.deepEqual(result,[\&quot;-s\&quot;,\&quot;192.168.178.2\&quot;])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d1c4b62d-0b69-465c-be67-8bff4c34b556&quot;,&quot;parentUUID&quot;:&quot;92139ce8-4594-4b96-b201-2774a24de0fe&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;full case&quot;,&quot;fullTitle&quot;:&quot;Tools getParameters() full case&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await getParameters({airplayCredentials:\&quot;****\&quot;,companionCredentials:\&quot;1234\&quot;,dmapCredentials:\&quot;****\&quot;,hosts:[\&quot;192.168.178.2\&quot;,\&quot;192.168.178.3\&quot;],id:\&quot;****\&quot;,mrpCredentials:\&quot;****\&quot;,protocol:NodePyATVProtocol.mrp,raopCredentials:\&quot;::foo:\&quot;});assert.deepEqual(result,[\&quot;-s\&quot;,\&quot;192.168.178.2,192.168.178.3\&quot;,\&quot;-i\&quot;,\&quot;****\&quot;,\&quot;--protocol\&quot;,\&quot;mrp\&quot;,\&quot;--dmap-credentials\&quot;,\&quot;****\&quot;,\&quot;--mrp-credentials\&quot;,\&quot;****\&quot;,\&quot;--airplay-credentials\&quot;,\&quot;****\&quot;,\&quot;--companion-credentials\&quot;,\&quot;1234\&quot;,\&quot;--raop-credentials\&quot;,\&quot;::foo:\&quot;])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;31d3e361-3154-402b-b33e-7e0bfd5a2fa0&quot;,&quot;parentUUID&quot;:&quot;92139ce8-4594-4b96-b201-2774a24de0fe&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f499f0ef-d4c6-4393-83b6-3ac5e611d372&quot;,&quot;d1c4b62d-0b69-465c-be67-8bff4c34b556&quot;,&quot;31d3e361-3154-402b-b33e-7e0bfd5a2fa0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2b3e6468-f099-416f-ad89-5badce9f89a0&quot;,&quot;title&quot;:&quot;parseState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work with empty data&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should work with empty data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input={};const result=parseState(input,\&quot;\&quot;,{});assert.deepStrictEqual(result,{album:null,app:null,appId:null,artist:null,contentIdentifier:null,dateTime:null,deviceState:null,episodeNumber:null,focusState:null,genre:null,hash:null,iTunesStoreIdentifier:null,mediaType:null,outputDevices:null,position:null,powerState:null,repeat:null,seasonNumber:null,seriesName:null,shuffle:null,title:null,totalTime:null,volume:null})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9ff2c764-2531-48ac-a80a-0648265e7801&quot;,&quot;parentUUID&quot;:&quot;2b3e6468-f099-416f-ad89-5badce9f89a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work without data&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should work without data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=parseState(null,\&quot;\&quot;,{});assert.deepStrictEqual(result,{album:null,app:null,appId:null,artist:null,contentIdentifier:null,dateTime:null,deviceState:null,episodeNumber:null,focusState:null,genre:null,hash:null,iTunesStoreIdentifier:null,mediaType:null,outputDevices:null,position:null,powerState:null,repeat:null,seasonNumber:null,seriesName:null,shuffle:null,title:null,totalTime:null,volume:null})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d56b2887-696f-4eaf-8d69-3535d40dc368&quot;,&quot;parentUUID&quot;:&quot;2b3e6468-f099-416f-ad89-5badce9f89a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with example data&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should work with example data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input={album:null,app:\&quot;Disney+\&quot;,app_id:\&quot;com.disney.disneyplus\&quot;,artist:null,content_identifier:null,datetime:\&quot;2020-11-07T22:38:43.608030+01:00\&quot;,device_state:\&quot;playing\&quot;,episode_number:null,focus_state:null,genre:null,hash:\&quot;100e0ab6-6ff5-4199-9c04-a7107ff78712\&quot;,itunes_store_identifier:null,media_type:\&quot;video\&quot;,output_devices:null,position:27,power_state:null,repeat:\&quot;off\&quot;,result:\&quot;success\&quot;,season_number:null,series_name:null,shuffle:\&quot;off\&quot;,title:\&quot;Solo: A Star Wars Story\&quot;,total_time:8097,volume:null};const result=parseState(input,\&quot;\&quot;,{});assert.deepStrictEqual(result,{album:null,app:\&quot;Disney+\&quot;,appId:\&quot;com.disney.disneyplus\&quot;,artist:null,contentIdentifier:null,dateTime:new Date(\&quot;2020-11-07T22:38:43.608030+01:00\&quot;),deviceState:NodePyATVDeviceState.playing,episodeNumber:null,focusState:null,genre:null,hash:\&quot;100e0ab6-6ff5-4199-9c04-a7107ff78712\&quot;,iTunesStoreIdentifier:null,mediaType:NodePyATVMediaType.video,outputDevices:null,position:27,powerState:null,repeat:NodePyATVRepeatState.off,seasonNumber:null,seriesName:null,shuffle:NodePyATVShuffleState.off,title:\&quot;Solo: A Star Wars Story\&quot;,totalTime:8097,volume:null})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;04e8b37d-85c8-42a8-b492-86b806c49303&quot;,&quot;parentUUID&quot;:&quot;2b3e6468-f099-416f-ad89-5badce9f89a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw an error for pyatv exceptions&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should throw an error for pyatv exceptions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input={datetime:\&quot;2021-11-24T21:13:36.424576+03:00\&quot;,exception:\&quot;invalid credentials: 321\&quot;,result:\&quot;failure\&quot;,stacktrace:&#x27;Traceback (most recent call last):\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\&quot;, line 302, in appstart\\n    print(args.output(await _handle_command(args, abort_sem, loop)), flush=True)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\&quot;, line 196, in _handle_command\\n    atv = await connect(config, loop, protocol=Protocol.MRP)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/__init__.py\&quot;, line 96, in connect\\n    for setup_data in proto_methods.setup(\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\&quot;, line 192, in setup\\n    stream = AirPlayStream(config, service)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\&quot;, line 79, in __init__\\n    self._credentials: HapCredentials = parse_credentials(self.service.credentials)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/auth/hap_pairing.py\&quot;, line 139, in parse_credentials\\n    raise exceptions.InvalidCredentialsError(\&quot;invalid credentials: \&quot; + detail_string)\\npyatv.exceptions.InvalidCredentialsError: invalid credentials: 321\\n&#x27;};assert.throws(()=&gt;{parseState(input,\&quot;\&quot;,{})},/Got pyatv Error: invalid credentials: 321/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;456b60d6-690e-4021-bb39-ecd8640400d1&quot;,&quot;parentUUID&quot;:&quot;2b3e6468-f099-416f-ad89-5badce9f89a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should ignore date if it&#x27;s an invalid date&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should ignore date if it&#x27;s an invalid date&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input={datetime:\&quot;today\&quot;};const result=parseState(input,\&quot;\&quot;,{});assert.deepStrictEqual(result,{album:null,app:null,appId:null,artist:null,contentIdentifier:null,dateTime:null,deviceState:null,episodeNumber:null,focusState:null,genre:null,hash:null,iTunesStoreIdentifier:null,mediaType:null,outputDevices:null,position:null,powerState:null,repeat:null,seasonNumber:null,seriesName:null,shuffle:null,title:null,totalTime:null,volume:null})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;48775c3f-7145-49d0-8fb1-4eed6740209f&quot;,&quot;parentUUID&quot;:&quot;2b3e6468-f099-416f-ad89-5badce9f89a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should ignore data if unsupported type&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should ignore data if unsupported type&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input={album:Infinity,app:0,app_id:891645381647289,artist:90,content_identifier:null,datetime:true,device_state:43,episode_number:null,focus_state:null,genre:Math.PI,hash:1337,itunes_store_identifier:null,media_type:false,output_devices:null,position:\&quot;0:30.123\&quot;,power_state:null,repeat:true,result:\&quot;success\&quot;,season_number:null,series_name:null,shuffle:false,title:void 0,total_time:\&quot;23min\&quot;,volume:null};const result=parseState(input,\&quot;\&quot;,{});assert.deepStrictEqual(result,{album:null,app:null,appId:null,artist:null,contentIdentifier:null,dateTime:null,deviceState:null,episodeNumber:null,focusState:null,genre:null,hash:null,iTunesStoreIdentifier:null,mediaType:null,outputDevices:null,position:null,powerState:null,repeat:null,seasonNumber:null,seriesName:null,shuffle:null,title:null,totalTime:null,volume:null})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;03f164e8-3333-4269-af31-bdda9cd35e8d&quot;,&quot;parentUUID&quot;:&quot;2b3e6468-f099-416f-ad89-5badce9f89a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should ignore enums with unsupported valid&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should ignore enums with unsupported valid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input={device_state:\&quot;initiating\&quot;,media_type:\&quot;3d-experience\&quot;,repeat:\&quot;nothing\&quot;,shuffle:\&quot;everything\&quot;};const result=parseState(input,\&quot;\&quot;,{});assert.deepStrictEqual(result,{album:null,app:null,appId:null,artist:null,contentIdentifier:null,dateTime:null,deviceState:null,episodeNumber:null,focusState:null,genre:null,hash:null,iTunesStoreIdentifier:null,mediaType:null,outputDevices:null,position:null,powerState:null,repeat:null,seasonNumber:null,seriesName:null,shuffle:null,title:null,totalTime:null,volume:null})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c11d0115-59b9-4d26-8e11-3122ff85ad99&quot;,&quot;parentUUID&quot;:&quot;2b3e6468-f099-416f-ad89-5badce9f89a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9ff2c764-2531-48ac-a80a-0648265e7801&quot;,&quot;d56b2887-696f-4eaf-8d69-3535d40dc368&quot;,&quot;04e8b37d-85c8-42a8-b492-86b806c49303&quot;,&quot;456b60d6-690e-4021-bb39-ecd8640400d1&quot;,&quot;48775c3f-7145-49d0-8fb1-4eed6740209f&quot;,&quot;03f164e8-3333-4269-af31-bdda9cd35e8d&quot;,&quot;c11d0115-59b9-4d26-8e11-3122ff85ad99&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;11.1.0&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;node-pyatv&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report/assets&quot;,&quot;jsonFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/mochawesome-report/mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>