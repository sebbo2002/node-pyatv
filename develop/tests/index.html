<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:93,&quot;tests&quot;:165,&quot;passes&quot;:163,&quot;pending&quot;:2,&quot;failures&quot;:0,&quot;start&quot;:&quot;2024-07-30T18:35:45.373Z&quot;,&quot;end&quot;:&quot;2024-07-30T18:35:57.355Z&quot;,&quot;duration&quot;:11982,&quot;testsRegistered&quot;:165,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:1.2121212121212122,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;004c7909-29db-4de4-88bc-a667e7398520&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;be1377be-92b4-4501-a0c5-b8f0fedcd809&quot;,&quot;title&quot;:&quot;NodePyATVDeviceEvent&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;641384e7-6685-48c0-92b8-bd110417652d&quot;,&quot;title&quot;:&quot;get key()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get key() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event = new NodePyATVDeviceEvent({\n    key: &#x27;genre&#x27;,\n    old: &#x27;Jazz&#x27;,\n    new: &#x27;Rock&#x27;,\n    device: new NodePyATVDevice({\n        host: &#x27;192.168.178.2&#x27;,\n        name: &#x27;My Testinstance&#x27;\n    })\n});\nassert.strictEqual(event.key, &#x27;genre&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;43acfe98-a021-4aef-9b78-d781c2afbd0c&quot;,&quot;parentUUID&quot;:&quot;641384e7-6685-48c0-92b8-bd110417652d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;43acfe98-a021-4aef-9b78-d781c2afbd0c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;921b0eb9-30dd-4967-9fdb-9822e7d30138&quot;,&quot;title&quot;:&quot;get oldValue()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get oldValue() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event = new NodePyATVDeviceEvent({\n    key: &#x27;genre&#x27;,\n    old: &#x27;Jazz&#x27;,\n    new: &#x27;Rock&#x27;,\n    device: new NodePyATVDevice({\n        host: &#x27;192.168.178.2&#x27;,\n        name: &#x27;My Testinstance&#x27;\n    })\n});\nassert.strictEqual(event.oldValue, &#x27;Jazz&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bdc32ff5-181a-4ca8-98b7-5082ac17da3b&quot;,&quot;parentUUID&quot;:&quot;921b0eb9-30dd-4967-9fdb-9822e7d30138&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bdc32ff5-181a-4ca8-98b7-5082ac17da3b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;76f6f248-d12d-4655-9e70-8405c501e50a&quot;,&quot;title&quot;:&quot;get newValue()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get newValue() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event = new NodePyATVDeviceEvent({\n    key: &#x27;genre&#x27;,\n    old: &#x27;Jazz&#x27;,\n    new: &#x27;Rock&#x27;,\n    device: new NodePyATVDevice({\n        host: &#x27;192.168.178.2&#x27;,\n        name: &#x27;My Testinstance&#x27;\n    })\n});\nassert.strictEqual(event.newValue, &#x27;Rock&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;852432a8-d031-4132-9957-eb3cad41ff4c&quot;,&quot;parentUUID&quot;:&quot;76f6f248-d12d-4655-9e70-8405c501e50a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;852432a8-d031-4132-9957-eb3cad41ff4c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;68fe0cdb-802f-429d-a75d-7be24086dd3a&quot;,&quot;title&quot;:&quot;get value()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get value() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event = new NodePyATVDeviceEvent({\n    key: &#x27;genre&#x27;,\n    old: &#x27;Jazz&#x27;,\n    new: &#x27;Rock&#x27;,\n    device: new NodePyATVDevice({\n        host: &#x27;192.168.178.2&#x27;,\n        name: &#x27;My Testinstance&#x27;\n    })\n});\nassert.strictEqual(event.value, &#x27;Rock&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;83b13745-cc73-46a3-b0e5-2dcefc8d06fa&quot;,&quot;parentUUID&quot;:&quot;68fe0cdb-802f-429d-a75d-7be24086dd3a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;83b13745-cc73-46a3-b0e5-2dcefc8d06fa&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;47d0d0b3-e790-4dab-b5e4-66d68cc638c1&quot;,&quot;title&quot;:&quot;get device()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get device() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    host: &#x27;192.168.178.2&#x27;,\n    name: &#x27;My Testinstance&#x27;\n});\nconst event = new NodePyATVDeviceEvent({\n    key: &#x27;genre&#x27;,\n    old: &#x27;Jazz&#x27;,\n    new: &#x27;Rock&#x27;,\n    device\n});\nassert.deepEqual(event.device, device);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4fa3b58f-6e88-4338-bffa-8bb83408228e&quot;,&quot;parentUUID&quot;:&quot;47d0d0b3-e790-4dab-b5e4-66d68cc638c1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4fa3b58f-6e88-4338-bffa-8bb83408228e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;921c3feb-60e4-4e1e-a4e3-75cbd769bcec&quot;,&quot;title&quot;:&quot;NodePyATVDeviceEvents&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;257adafa-c925-4db5-9a1a-ce6d09786388&quot;,&quot;title&quot;:&quot;applyStateAndEmitEvents()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should emit update:key event&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit update:key event&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n        cp.stdout({\n            result: &#x27;success&#x27;,\n            title: &#x27;My Movie&#x27;\n        });\n    })\n});\nawait new Promise(cb =&gt; {\n    device.once(&#x27;update:title&#x27;, event =&gt; {\n        assert.ok(event instanceof NodePyATVDeviceEvent);\n        assert.strictEqual(event.key, &#x27;title&#x27;);\n        assert.strictEqual(event.oldValue, null);\n        assert.strictEqual(event.newValue, &#x27;My Movie&#x27;);\n        assert.strictEqual(event.value, &#x27;My Movie&#x27;);\n        assert.deepStrictEqual(event.device, device);\n        cb(undefined);\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5c675f9d-c25a-4e91-a52a-2c2ae1cd0c0c&quot;,&quot;parentUUID&quot;:&quot;257adafa-c925-4db5-9a1a-ce6d09786388&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit update event&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit update event&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n        cp.stdout({\n            result: &#x27;success&#x27;,\n            title: &#x27;My Movie&#x27;\n        });\n    })\n});\nawait new Promise(cb =&gt; {\n    device.once(&#x27;update&#x27;, event =&gt; {\n        assert.ok(event instanceof NodePyATVDeviceEvent);\n        assert.strictEqual(event.key, &#x27;title&#x27;);\n        assert.strictEqual(event.oldValue, null);\n        assert.strictEqual(event.newValue, &#x27;My Movie&#x27;);\n        assert.strictEqual(event.value, &#x27;My Movie&#x27;);\n        assert.deepStrictEqual(event.device, device);\n        cb(undefined);\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6859350f-07db-40ee-aa33-447485f690d6&quot;,&quot;parentUUID&quot;:&quot;257adafa-c925-4db5-9a1a-ce6d09786388&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit update:key event before update&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit update:key event before update&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n        cp.stdout({\n            result: &#x27;success&#x27;,\n            title: &#x27;My Movie&#x27;\n        });\n    })\n});\nconst sort = [];\nawait Promise.race([\n    new Promise(cb =&gt; {\n        device.once(&#x27;update&#x27;, () =&gt; {\n            sort.push(&#x27;update&#x27;);\n            cb(undefined);\n        });\n    }),\n    new Promise(cb =&gt; {\n        device.once(&#x27;update:title&#x27;, () =&gt; {\n            sort.push(&#x27;update:title&#x27;);\n            cb(undefined);\n        });\n    })\n]);\nassert.deepStrictEqual(sort, [&#x27;update:title&#x27;, &#x27;update&#x27;]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;33dd1e65-fb3f-4fd5-89c8-3e09ba8fcc52&quot;,&quot;parentUUID&quot;:&quot;257adafa-c925-4db5-9a1a-ce6d09786388&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error events on failures&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit error events on failures&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n        cp.stdout({\n            result: &#x27;failure&#x27;,\n            datetime: &#x27;2021-11-24T21:13:36.424576+03:00&#x27;,\n            exception: &#x27;invalid credentials: 321&#x27;,\n            stacktrace: &#x27;Traceback (most recent call last):\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\&quot;, line 302, in appstart\\n    print(args.output(await _handle_command(args, abort_sem, loop)), flush=True)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\&quot;, line 196, in _handle_command\\n    atv = await connect(config, loop, protocol=Protocol.MRP)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/__init__.py\&quot;, line 96, in connect\\n    for setup_data in proto_methods.setup(\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\&quot;, line 192, in setup\\n    stream = AirPlayStream(config, service)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\&quot;, line 79, in __init__\\n    self._credentials: HapCredentials = parse_credentials(self.service.credentials)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/auth/hap_pairing.py\&quot;, line 139, in parse_credentials\\n    raise exceptions.InvalidCredentialsError(\&quot;invalid credentials: \&quot; + detail_string)\\npyatv.exceptions.InvalidCredentialsError: invalid credentials: 321\\n&#x27;\n        });\n    })\n});\nawait new Promise(cb =&gt; {\n    device.once(&#x27;error&#x27;, error =&gt; {\n        assert.ok(error instanceof Error);\n        assert.ok(error.toString().includes(&#x27;invalid credentials: 321&#x27;));\n        cb(undefined);\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5cc91d42-2040-44ae-8693-ea1e86e4d7cc&quot;,&quot;parentUUID&quot;:&quot;257adafa-c925-4db5-9a1a-ce6d09786388&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not emit an update if new value is same as old one&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should not emit an update if new value is same as old one&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let spawnCounter = 0;\nlet eventCounter = 0;\nconst device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        if (spawnCounter === 0) {\n            cp.onStdIn(() =&gt; cp.end());\n        }\n        cp.stdout({\n            result: &#x27;success&#x27;,\n            title: &#x27;My Movie&#x27;\n        });\n        spawnCounter++;\n        if (spawnCounter &gt;= 2) {\n            cp.end();\n        }\n    })\n});\nconst listener = () =&gt; {\n    eventCounter++;\n};\ndevice.on(&#x27;update&#x27;, listener);\nawait new Promise(cb =&gt; setTimeout(cb, 0));\nawait device.getState();\ndevice.off(&#x27;update&#x27;, listener);\nassert.strictEqual(spawnCounter, 2);\nassert.strictEqual(eventCounter, 1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b9fa2252-f08f-4ae5-8585-fd119f767c3f&quot;,&quot;parentUUID&quot;:&quot;257adafa-c925-4db5-9a1a-ce6d09786388&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error event if event listener throws an exception&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit error event if event listener throws an exception&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n        cp.stdout({\n            result: &#x27;success&#x27;,\n            title: &#x27;My Movie&#x27;\n        });\n    })\n});\nlet callCounter = 0;\nconst error = new Error(&#x27;This is an error. Be nice.&#x27;);\ndevice.once(&#x27;error&#x27;, err =&gt; {\n    assert.strictEqual(err, error);\n    callCounter++;\n});\nconst listener = () =&gt; {\n    throw error;\n};\ndevice.on(&#x27;update&#x27;, listener);\nawait new Promise(cb =&gt; setTimeout(cb, 0));\ndevice.off(&#x27;update&#x27;, listener);\nassert.strictEqual(callCounter, 1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dd47c7be-3fd8-483d-9ea4-0b10337185f2&quot;,&quot;parentUUID&quot;:&quot;257adafa-c925-4db5-9a1a-ce6d09786388&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should also work with powerState&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should also work with powerState&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n        cp.stdout({\n            result: &#x27;success&#x27;,\n            datetime: new Date().toJSON(),\n            power_state: &#x27;off&#x27;\n        });\n    })\n});\nawait new Promise(cb =&gt; {\n    device.once(&#x27;update:powerState&#x27;, event =&gt; {\n        assert.ok(event instanceof NodePyATVDeviceEvent);\n        assert.strictEqual(event.key, &#x27;powerState&#x27;);\n        assert.strictEqual(event.oldValue, null);\n        assert.strictEqual(event.newValue, &#x27;off&#x27;);\n        assert.strictEqual(event.newValue, NodePyATVPowerState.off);\n        assert.strictEqual(event.value, &#x27;off&#x27;);\n        assert.strictEqual(event.value, NodePyATVPowerState.off);\n        assert.deepStrictEqual(event.device, device);\n        cb(undefined);\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8bcbb21a-d49b-4266-bca3-fa013e84555c&quot;,&quot;parentUUID&quot;:&quot;257adafa-c925-4db5-9a1a-ce6d09786388&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only one event for powerState changes&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should only one event for powerState changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n        cp.stdout({\n            result: &#x27;success&#x27;,\n            datetime: new Date().toJSON(),\n            power_state: &#x27;off&#x27;\n        });\n        cp.end();\n    })\n});\nlet counter = 0;\ndevice.on(&#x27;update&#x27;, event =&gt; {\n    assert.ok(event instanceof NodePyATVDeviceEvent);\n    assert.strictEqual(event.key, &#x27;powerState&#x27;);\n    assert.strictEqual(event.oldValue, null);\n    assert.strictEqual(event.newValue, &#x27;off&#x27;);\n    assert.strictEqual(event.newValue, NodePyATVPowerState.off);\n    assert.strictEqual(event.value, &#x27;off&#x27;);\n    assert.strictEqual(event.value, NodePyATVPowerState.off);\n    assert.deepStrictEqual(event.device, device);\n    counter++;\n});\nawait new Promise(cb =&gt; setTimeout(cb, 10));\nassert.strictEqual(counter, 1);\ndevice.removeAllListeners(&#x27;update&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b6ed6870-2869-46df-a414-25a9818b7073&quot;,&quot;parentUUID&quot;:&quot;257adafa-c925-4db5-9a1a-ce6d09786388&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only one event for focusState changes&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should only one event for focusState changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n        cp.stdout({\n            result: &#x27;success&#x27;,\n            datetime: new Date().toJSON(),\n            focus_state: &#x27;unfocused&#x27;\n        });\n        cp.end();\n    })\n});\nlet counter = 0;\ndevice.on(&#x27;update&#x27;, event =&gt; {\n    assert.ok(event instanceof NodePyATVDeviceEvent);\n    assert.strictEqual(event.key, &#x27;focusState&#x27;);\n    assert.strictEqual(event.oldValue, null);\n    assert.strictEqual(event.newValue, &#x27;unfocused&#x27;);\n    assert.strictEqual(event.newValue, NodePyATVFocusState.unfocused);\n    assert.strictEqual(event.value, &#x27;unfocused&#x27;);\n    assert.strictEqual(event.value, NodePyATVFocusState.unfocused);\n    assert.deepStrictEqual(event.device, device);\n    counter++;\n});\nawait new Promise(cb =&gt; setTimeout(cb, 10));\nassert.strictEqual(counter, 1);\ndevice.removeAllListeners(&#x27;update&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e22b4277-9073-44ba-8952-26df14b94027&quot;,&quot;parentUUID&quot;:&quot;257adafa-c925-4db5-9a1a-ce6d09786388&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only one event for outputDevices changes&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should only one event for outputDevices changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n        cp.stdout({\n            result: &#x27;success&#x27;,\n            datetime: new Date().toJSON(),\n            output_devices: [{\n                    name: &#x27;Living room&#x27;,\n                    identifier: &#x27;AAAAAAAA-BBBB-CCCC-DDDD-EEEEEEEEEEEE&#x27;\n                }]\n        });\n        cp.end();\n    })\n});\nlet counter = 0;\ndevice.on(&#x27;update&#x27;, event =&gt; {\n    assert.ok(event instanceof NodePyATVDeviceEvent);\n    assert.strictEqual(event.key, &#x27;outputDevices&#x27;);\n    assert.strictEqual(event.oldValue, null);\n    assert.deepStrictEqual(event.newValue, [{\n            name: &#x27;Living room&#x27;,\n            identifier: &#x27;AAAAAAAA-BBBB-CCCC-DDDD-EEEEEEEEEEEE&#x27;\n        }]);\n    assert.deepStrictEqual(event.value, [{\n            name: &#x27;Living room&#x27;,\n            identifier: &#x27;AAAAAAAA-BBBB-CCCC-DDDD-EEEEEEEEEEEE&#x27;\n        }]);\n    assert.deepStrictEqual(event.device, device);\n    counter++;\n});\nawait new Promise(cb =&gt; setTimeout(cb, 10));\nassert.strictEqual(counter, 1);\ndevice.removeAllListeners(&#x27;update&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7a24b7b7-a4c7-47b1-af02-ce3c4f00adc1&quot;,&quot;parentUUID&quot;:&quot;257adafa-c925-4db5-9a1a-ce6d09786388&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only one event for volume changes&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should only one event for volume changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n        cp.stdout({\n            result: &#x27;success&#x27;,\n            datetime: new Date().toJSON(),\n            volume: 20.0\n        });\n        cp.end();\n    })\n});\nlet counter = 0;\ndevice.on(&#x27;update&#x27;, event =&gt; {\n    assert.ok(event instanceof NodePyATVDeviceEvent);\n    assert.strictEqual(event.key, &#x27;volume&#x27;);\n    assert.strictEqual(event.oldValue, null);\n    assert.strictEqual(event.newValue, 20);\n    assert.strictEqual(event.value, 20);\n    assert.deepStrictEqual(event.device, device);\n    counter++;\n});\nawait new Promise(cb =&gt; setTimeout(cb, 10));\nassert.strictEqual(counter, 1);\ndevice.removeAllListeners(&#x27;update&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;231e4594-71c8-410b-8006-43366d9e71cd&quot;,&quot;parentUUID&quot;:&quot;257adafa-c925-4db5-9a1a-ce6d09786388&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not trigger any events for newly added fields&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should not trigger any events for newly added fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n        cp.stdout({\n            result: &#x27;success&#x27;,\n            datetime: new Date().toJSON(),\n            foo: &#x27;bar&#x27;\n        });\n        cp.end();\n    })\n});\ndevice.on(&#x27;update&#x27;, event =&gt; {\n    assert.fail(`Got an update event for a new field: ${event}`);\n});\nawait new Promise(cb =&gt; setTimeout(cb, 10));\ndevice.removeAllListeners(&#x27;update&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a6e20be5-1065-4b41-819f-521eed844408&quot;,&quot;parentUUID&quot;:&quot;257adafa-c925-4db5-9a1a-ce6d09786388&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5c675f9d-c25a-4e91-a52a-2c2ae1cd0c0c&quot;,&quot;6859350f-07db-40ee-aa33-447485f690d6&quot;,&quot;33dd1e65-fb3f-4fd5-89c8-3e09ba8fcc52&quot;,&quot;5cc91d42-2040-44ae-8693-ea1e86e4d7cc&quot;,&quot;b9fa2252-f08f-4ae5-8585-fd119f767c3f&quot;,&quot;dd47c7be-3fd8-483d-9ea4-0b10337185f2&quot;,&quot;8bcbb21a-d49b-4266-bca3-fa013e84555c&quot;,&quot;b6ed6870-2869-46df-a414-25a9818b7073&quot;,&quot;e22b4277-9073-44ba-8952-26df14b94027&quot;,&quot;7a24b7b7-a4c7-47b1-af02-ce3c4f00adc1&quot;,&quot;231e4594-71c8-410b-8006-43366d9e71cd&quot;,&quot;a6e20be5-1065-4b41-819f-521eed844408&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:63,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;17db7dfd-a93e-4cfc-bf11-c17c6061ac9e&quot;,&quot;title&quot;:&quot;start|stopListening()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should emit error if spawn fails&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should emit error if spawn fails&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const error = new Error();\nconst device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.error(error).end();\n    })\n});\nconst listener = () =&gt; {\n    // empty listener\n};\ndevice.on(&#x27;update&#x27;, listener);\nawait new Promise(cb =&gt; {\n    device.once(&#x27;error&#x27;, err =&gt; {\n        assert.strictEqual(err, error);\n        cb(undefined);\n    });\n});\ndevice.off(&#x27;update&#x27;, listener);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ac922a08-4042-42f2-9bdc-8db24f9217c9&quot;,&quot;parentUUID&quot;:&quot;17db7dfd-a93e-4cfc-bf11-c17c6061ac9e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error on stderr data&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should emit error on stderr data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.stderr(&#x27;Hello World!&#x27;).end();\n    })\n});\nconst listener = () =&gt; {\n    // empty listener\n};\ndevice.on(&#x27;update&#x27;, listener);\nawait new Promise(cb =&gt; {\n    device.once(&#x27;error&#x27;, err =&gt; {\n        assert.ok(err instanceof Error);\n        assert.ok(err.toString().includes(&#x27;Got stderr output from pyatv: Hello World!&#x27;));\n        cb(undefined);\n    });\n});\ndevice.off(&#x27;update&#x27;, listener);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;87b9e5f8-1de7-491c-9361-f9d1625cb27b&quot;,&quot;parentUUID&quot;:&quot;17db7dfd-a93e-4cfc-bf11-c17c6061ac9e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error if stdout is not valid json&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should emit error if stdout is not valid json&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.stdout(&#x27;#&#x27;).end();\n    })\n});\nconst listener = () =&gt; {\n    // empty listener\n};\ndevice.on(&#x27;update&#x27;, listener);\nawait new Promise(cb =&gt; {\n    device.once(&#x27;error&#x27;, err =&gt; {\n        assert.ok(err instanceof Error);\n        assert.ok(err.toString().includes(&#x27;Unable to parse stdout json: SyntaxError&#x27;));\n        cb(undefined);\n    });\n});\ndevice.off(&#x27;update&#x27;, listener);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2aed8f7c-39f8-4d83-8604-59ad925bf70a&quot;,&quot;parentUUID&quot;:&quot;17db7dfd-a93e-4cfc-bf11-c17c6061ac9e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should restart the process if it gets killed&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should restart the process if it gets killed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;pending&quot;,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;08cbd3df-1b46-4ab8-95be-656b1a5b65a0&quot;,&quot;parentUUID&quot;:&quot;17db7dfd-a93e-4cfc-bf11-c17c6061ac9e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ac922a08-4042-42f2-9bdc-8db24f9217c9&quot;,&quot;87b9e5f8-1de7-491c-9361-f9d1625cb27b&quot;,&quot;2aed8f7c-39f8-4d83-8604-59ad925bf70a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;08cbd3df-1b46-4ab8-95be-656b1a5b65a0&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e8d2ee91-f111-441e-9ab7-f9e6f791513e&quot;,&quot;title&quot;:&quot;addListener() / removeAllListeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work without any exceptions&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents addListener() / removeAllListeners() should work without any exceptions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n        cp.stdout({\n            result: &#x27;success&#x27;,\n            title: &#x27;My Movie&#x27;\n        });\n    })\n});\nconst listener = () =&gt; {\n    // empty listener\n};\ndevice.addListener(&#x27;update&#x27;, listener);\ndevice.removeAllListeners(&#x27;update&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4643f072-75a5-4827-92a9-4efee61c2c07&quot;,&quot;parentUUID&quot;:&quot;e8d2ee91-f111-441e-9ab7-f9e6f791513e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4643f072-75a5-4827-92a9-4efee61c2c07&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5842d2da-0e1e-4023-9a7b-8b0f6c413153&quot;,&quot;title&quot;:&quot;emit()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents emit() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n    })\n});\nconst event = new NodePyATVDeviceEvent({\n    key: &#x27;dateTime&#x27;,\n    old: &#x27;foo&#x27;,\n    new: &#x27;bar&#x27;,\n    device\n});\nlet executions = 0;\ndevice.once(&#x27;test&#x27;, (e) =&gt; {\n    executions++;\n    assert.strictEqual(e, event);\n    assert.strictEqual(executions, 1);\n    done();\n});\ndevice.emit(&#x27;test&#x27;, event);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;383bbafd-3975-44d1-ae3f-fa79e93e2b7f&quot;,&quot;parentUUID&quot;:&quot;5842d2da-0e1e-4023-9a7b-8b0f6c413153&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;383bbafd-3975-44d1-ae3f-fa79e93e2b7f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;31aa4d66-8ee9-4e22-a8a6-e5204d985567&quot;,&quot;title&quot;:&quot;eventNames()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents eventNames() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n    })\n});\nconst listener = () =&gt; {\n    // ignore\n};\ndevice.on(&#x27;test&#x27;, listener);\nassert.deepStrictEqual(device.eventNames(), [&#x27;test&#x27;]);\ndevice.off(&#x27;test&#x27;, listener);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e800fbef-26ce-4fa1-b9f2-99b95095908c&quot;,&quot;parentUUID&quot;:&quot;31aa4d66-8ee9-4e22-a8a6-e5204d985567&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e800fbef-26ce-4fa1-b9f2-99b95095908c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;50676804-2c38-4944-8cad-889ccbe2c971&quot;,&quot;title&quot;:&quot;getMaxListeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents getMaxListeners() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n    })\n});\nconst result = device.getMaxListeners();\nassert.ok(typeof result, &#x27;number&#x27;);\nassert.ok(result &gt;= 10);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c08e6f3-2f02-4d60-a93a-28ff0d3ffc32&quot;,&quot;parentUUID&quot;:&quot;50676804-2c38-4944-8cad-889ccbe2c971&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8c08e6f3-2f02-4d60-a93a-28ff0d3ffc32&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;af766178-c4bc-4d69-a7ae-7fefea03f110&quot;,&quot;title&quot;:&quot;listenerCount()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents listenerCount() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n    })\n});\nconst listener = () =&gt; {\n    // ignore\n};\nassert.deepStrictEqual(device.listenerCount(&#x27;test&#x27;), 0);\ndevice.on(&#x27;test&#x27;, listener);\nassert.deepStrictEqual(device.listenerCount(&#x27;test&#x27;), 1);\ndevice.off(&#x27;test&#x27;, listener);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c9ac02da-b8f6-4462-a076-98a6f46c4dec&quot;,&quot;parentUUID&quot;:&quot;af766178-c4bc-4d69-a7ae-7fefea03f110&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c9ac02da-b8f6-4462-a076-98a6f46c4dec&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;30a6e306-920d-4d7b-85d3-dc8a1e65bbcc&quot;,&quot;title&quot;:&quot;listeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents listeners() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n    })\n});\nconst listener = () =&gt; {\n    // ignore\n};\nassert.deepStrictEqual(device.listeners(&#x27;test&#x27;).length, 0);\ndevice.on(&#x27;test&#x27;, listener);\nassert.deepStrictEqual(device.listeners(&#x27;test&#x27;).length, 1);\nassert.deepStrictEqual(device.listeners(&#x27;test&#x27;)[0], listener);\ndevice.off(&#x27;test&#x27;, listener);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;56b320f8-fde1-4fca-835b-fe31ec95f5c6&quot;,&quot;parentUUID&quot;:&quot;30a6e306-920d-4d7b-85d3-dc8a1e65bbcc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;56b320f8-fde1-4fca-835b-fe31ec95f5c6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bda8ab13-289e-445e-a3c4-7905256605e6&quot;,&quot;title&quot;:&quot;prependListener()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents prependListener() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n        cp.stdout({\n            result: &#x27;success&#x27;,\n            title: &#x27;My Movie&#x27;\n        });\n    })\n});\nconst listener = () =&gt; {\n    device.removeAllListeners(&#x27;update&#x27;);\n    done();\n};\ndevice.prependListener(&#x27;update&#x27;, listener);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;45a9b743-f1d0-4b8a-baf8-3c406746b4b5&quot;,&quot;parentUUID&quot;:&quot;bda8ab13-289e-445e-a3c4-7905256605e6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;45a9b743-f1d0-4b8a-baf8-3c406746b4b5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c166b54b-85ae-44a5-a1b6-9c276632000c&quot;,&quot;title&quot;:&quot;prependOnceListener()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents prependOnceListener() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n        cp.stdout({\n            result: &#x27;success&#x27;,\n            title: &#x27;My Movie&#x27;\n        });\n    })\n});\ndevice.prependOnceListener(&#x27;update&#x27;, () =&gt; done());&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;042fbf14-72e8-4f4f-b8e7-9bb7a41ab1c7&quot;,&quot;parentUUID&quot;:&quot;c166b54b-85ae-44a5-a1b6-9c276632000c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;042fbf14-72e8-4f4f-b8e7-9bb7a41ab1c7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;73505fa8-5028-49a2-be4f-ed18940ac907&quot;,&quot;title&quot;:&quot;rawListeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents rawListeners() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n    })\n});\nconst listener = () =&gt; {\n    // ignore\n};\nassert.deepStrictEqual(device.rawListeners(&#x27;test&#x27;).length, 0);\ndevice.on(&#x27;test&#x27;, listener);\nassert.deepStrictEqual(device.rawListeners(&#x27;test&#x27;).length, 1);\nassert.deepStrictEqual(device.rawListeners(&#x27;test&#x27;)[0], listener);\ndevice.off(&#x27;test&#x27;, listener);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6a40968c-a149-42a9-ba3f-f5c6adcee34a&quot;,&quot;parentUUID&quot;:&quot;73505fa8-5028-49a2-be4f-ed18940ac907&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6a40968c-a149-42a9-ba3f-f5c6adcee34a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;14a2fe4b-736b-4a48-9e72-bd0b62dcb6ca&quot;,&quot;title&quot;:&quot;removeListener()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work without any exceptions&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents removeListener() should work without any exceptions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n        cp.stdout({\n            result: &#x27;success&#x27;,\n            title: &#x27;My Movie&#x27;\n        });\n    })\n});\nconst listener = () =&gt; {\n    // empty listener\n};\ndevice.addListener(&#x27;update&#x27;, listener);\nassert.deepStrictEqual(device.listenerCount(&#x27;update&#x27;), 1);\ndevice.removeListener(&#x27;update&#x27;, listener);\nassert.deepStrictEqual(device.listenerCount(&#x27;update&#x27;), 0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;157350ca-cc50-4a5c-ad77-081052c8a26a&quot;,&quot;parentUUID&quot;:&quot;14a2fe4b-736b-4a48-9e72-bd0b62dcb6ca&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;157350ca-cc50-4a5c-ad77-081052c8a26a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4b8348f3-998d-4886-a29b-9d5c07724e0e&quot;,&quot;title&quot;:&quot;NodePyATVDevice&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d5f6ff34-30c9-4174-9023-0dcfa7a7827a&quot;,&quot;title&quot;:&quot;get name()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the name&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get name() should return the name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;\n});\nassert.strictEqual(device.name, &#x27;My Testdevice&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;795bc9e2-2a32-48e2-bacf-3a1b0758c6b2&quot;,&quot;parentUUID&quot;:&quot;d5f6ff34-30c9-4174-9023-0dcfa7a7827a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;795bc9e2-2a32-48e2-bacf-3a1b0758c6b2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;94e0d42d-94ca-4c21-a6ad-f26f27a04223&quot;,&quot;title&quot;:&quot;get host()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the host&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get host() should return the host&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;\n});\nassert.strictEqual(device.host, &#x27;192.168.178.2&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ec8ce1a3-583a-4f46-9213-4947c14120f6&quot;,&quot;parentUUID&quot;:&quot;94e0d42d-94ca-4c21-a6ad-f26f27a04223&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ec8ce1a3-583a-4f46-9213-4947c14120f6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d3172b08-7b15-492c-bb1f-314a9758109f&quot;,&quot;title&quot;:&quot;get id()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the id&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get id() should return the id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    id: &#x27;*****&#x27;\n});\nassert.strictEqual(device.id, &#x27;*****&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f686d04d-bb57-4334-ae12-63d48d918238&quot;,&quot;parentUUID&quot;:&quot;d3172b08-7b15-492c-bb1f-314a9758109f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f686d04d-bb57-4334-ae12-63d48d918238&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4138059f-c6f4-4e69-8c44-f0d4670a7f97&quot;,&quot;title&quot;:&quot;get allIDs()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return all the IDs&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get allIDs() should return all the IDs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    id: &#x27;*****&#x27;,\n    allIDs: [\n        &#x27;some_id_1&#x27;,\n        &#x27;some_id_2&#x27;,\n        &#x27;some_id_3&#x27;,\n    ]\n});\nassert.deepStrictEqual(device.allIDs, [\n    &#x27;some_id_1&#x27;,\n    &#x27;some_id_2&#x27;,\n    &#x27;some_id_3&#x27;,\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9eaf965b-1c33-4f63-9930-4618cca9e703&quot;,&quot;parentUUID&quot;:&quot;4138059f-c6f4-4e69-8c44-f0d4670a7f97&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9eaf965b-1c33-4f63-9930-4618cca9e703&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;cdd14b92-c7d8-46e0-aa03-cfdc06bf3cf7&quot;,&quot;title&quot;:&quot;get protocol()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the protocol&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get protocol() should return the protocol&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    protocol: NodePyATVProtocol.airplay\n});\nassert.strictEqual(device.protocol, NodePyATVProtocol.airplay);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f964a4ce-defb-449c-9ada-60636219ba89&quot;,&quot;parentUUID&quot;:&quot;cdd14b92-c7d8-46e0-aa03-cfdc06bf3cf7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f964a4ce-defb-449c-9ada-60636219ba89&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3e630b30-d2b9-43df-ab55-2219d732b630&quot;,&quot;title&quot;:&quot;get mac()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the mac&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get mac() should return the mac&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    mac: &#x27;AA:BB:CC:DD:EE:FF&#x27;\n});\nassert.strictEqual(device.mac, &#x27;AA:BB:CC:DD:EE:FF&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0f027558-298a-4851-8b34-b1b79fd4bd72&quot;,&quot;parentUUID&quot;:&quot;3e630b30-d2b9-43df-ab55-2219d732b630&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0f027558-298a-4851-8b34-b1b79fd4bd72&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;98d5f37b-3c37-4d7c-bd0e-6e691d43a4ba&quot;,&quot;title&quot;:&quot;get model()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the model if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get model() should return the model if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;,\n    id: &#x27;xxx&#x27;,\n    model: &#x27;Gen4K&#x27;\n});\nassert.strictEqual(device.model, &#x27;Gen4K&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;88737a0e-3b6a-4138-b1dd-6664e2feddf5&quot;,&quot;parentUUID&quot;:&quot;98d5f37b-3c37-4d7c-bd0e-6e691d43a4ba&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get model() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;\n});\nassert.strictEqual(device.model, undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bab299b3-3ca5-48af-bb1b-7a157ec1ea33&quot;,&quot;parentUUID&quot;:&quot;98d5f37b-3c37-4d7c-bd0e-6e691d43a4ba&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;88737a0e-3b6a-4138-b1dd-6664e2feddf5&quot;,&quot;bab299b3-3ca5-48af-bb1b-7a157ec1ea33&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b852b38a-ce95-4a5d-bf5f-c35d1fa56175&quot;,&quot;title&quot;:&quot;get modelName()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the model name if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get modelName() should return the model name if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;,\n    id: &#x27;xxx&#x27;,\n    modelName: &#x27;Apple TV 4K&#x27;\n});\nassert.strictEqual(device.modelName, &#x27;Apple TV 4K&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b224be37-3b1e-4723-9328-ef6d9150f83b&quot;,&quot;parentUUID&quot;:&quot;b852b38a-ce95-4a5d-bf5f-c35d1fa56175&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get modelName() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;\n});\nassert.strictEqual(device.modelName, undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8416bea9-87b0-4227-90b8-39f1b344ea9c&quot;,&quot;parentUUID&quot;:&quot;b852b38a-ce95-4a5d-bf5f-c35d1fa56175&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b224be37-3b1e-4723-9328-ef6d9150f83b&quot;,&quot;8416bea9-87b0-4227-90b8-39f1b344ea9c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1a9dd751-1660-4237-8587-b2cb01c9f686&quot;,&quot;title&quot;:&quot;get os()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the operating system if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get os() should return the operating system if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;,\n    id: &#x27;xxx&#x27;,\n    os: &#x27;TvOS&#x27;\n});\nassert.strictEqual(device.os, &#x27;TvOS&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;084db255-deec-4ce6-8d9f-882806000277&quot;,&quot;parentUUID&quot;:&quot;1a9dd751-1660-4237-8587-b2cb01c9f686&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get os() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;\n});\nassert.strictEqual(device.os, undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;79af2c87-2e9e-42fb-b7e0-719d7af1580b&quot;,&quot;parentUUID&quot;:&quot;1a9dd751-1660-4237-8587-b2cb01c9f686&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;084db255-deec-4ce6-8d9f-882806000277&quot;,&quot;79af2c87-2e9e-42fb-b7e0-719d7af1580b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;35ce2d88-31db-4138-975b-4e280770a8f1&quot;,&quot;title&quot;:&quot;get version()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the version if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get version() should return the version if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;,\n    id: &#x27;xxx&#x27;,\n    version: &#x27;15.5.1&#x27;\n});\nassert.strictEqual(device.version, &#x27;15.5.1&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;403d5aaa-208e-4af7-8edd-bf0ec8975a35&quot;,&quot;parentUUID&quot;:&quot;35ce2d88-31db-4138-975b-4e280770a8f1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get version() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;\n});\nassert.strictEqual(device.version, undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cef19046-eb7e-49d3-a522-a332d79a15a0&quot;,&quot;parentUUID&quot;:&quot;35ce2d88-31db-4138-975b-4e280770a8f1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;403d5aaa-208e-4af7-8edd-bf0ec8975a35&quot;,&quot;cef19046-eb7e-49d3-a522-a332d79a15a0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;cd047918-b473-4fea-ad8b-b6d9674d87a9&quot;,&quot;title&quot;:&quot;get services()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the services if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get services() should return the services if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;,\n    id: &#x27;xxx&#x27;,\n    services: [\n        {\n            protocol: NodePyATVProtocol.mrp,\n            port: 49152\n        },\n        {\n            protocol: NodePyATVProtocol.airplay,\n            port: 7000\n        }\n    ]\n});\nassert.deepStrictEqual(device.services, [\n    {\n        protocol: &#x27;mrp&#x27;,\n        port: 49152\n    },\n    {\n        protocol: &#x27;airplay&#x27;,\n        port: 7000\n    }\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0dac6c91-1476-476f-a825-38ee079acb4d&quot;,&quot;parentUUID&quot;:&quot;cd047918-b473-4fea-ad8b-b6d9674d87a9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get services() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;\n});\nassert.strictEqual(device.services, undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bb8c79d8-3f12-4d0f-a67c-35b47cd01ee1&quot;,&quot;parentUUID&quot;:&quot;cd047918-b473-4fea-ad8b-b6d9674d87a9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0dac6c91-1476-476f-a825-38ee079acb4d&quot;,&quot;bb8c79d8-3f12-4d0f-a67c-35b47cd01ee1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a85ab672-d344-4a7a-86a7-116de2c0e313&quot;,&quot;title&quot;:&quot;get debug()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return true if set to true&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get debug() should return true if set to true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    debug: true\n});\nassert.strictEqual(device.debug, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3226e948-b05e-4fd8-a996-920b45761231&quot;,&quot;parentUUID&quot;:&quot;a85ab672-d344-4a7a-86a7-116de2c0e313&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return fn if set to custom function&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get debug() should return fn if set to custom function&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fn = () =&gt; { };\nconst device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    debug: fn\n});\nassert.strictEqual(device.debug, fn);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5f04c009-df8c-4fcf-9036-eed97ffbbd87&quot;,&quot;parentUUID&quot;:&quot;a85ab672-d344-4a7a-86a7-116de2c0e313&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return false if unset&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get debug() should return false if unset&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;\n});\nassert.strictEqual(device.debug, undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6d467f57-9595-4e40-a51e-700031edae0f&quot;,&quot;parentUUID&quot;:&quot;a85ab672-d344-4a7a-86a7-116de2c0e313&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3226e948-b05e-4fd8-a996-920b45761231&quot;,&quot;5f04c009-df8c-4fcf-9036-eed97ffbbd87&quot;,&quot;6d467f57-9595-4e40-a51e-700031edae0f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;07db36dd-b273-4cd6-abd7-6a6ab05ee14a&quot;,&quot;title&quot;:&quot;set debug()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work for debug = true&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;\n});\nassert.strictEqual(device.debug, undefined);\ndevice.debug = true;\nassert.strictEqual(device.debug, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bea38574-5f7c-48b6-9acb-b1c4a6d0f098&quot;,&quot;parentUUID&quot;:&quot;07db36dd-b273-4cd6-abd7-6a6ab05ee14a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for debug = undefined&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = undefined&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    debug: true\n});\nassert.strictEqual(device.debug, true);\ndevice.debug = undefined;\nassert.strictEqual(device.debug, undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;94025bea-a759-4c68-8e64-4a6c1bb5d777&quot;,&quot;parentUUID&quot;:&quot;07db36dd-b273-4cd6-abd7-6a6ab05ee14a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for debug = undefined&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = undefined&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    debug: true\n});\nassert.strictEqual(device.debug, true);\ndevice.debug = undefined;\nassert.strictEqual(device.debug, undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9b25caae-15c2-42b5-bbe9-05df535e6e39&quot;,&quot;parentUUID&quot;:&quot;07db36dd-b273-4cd6-abd7-6a6ab05ee14a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for debug = fn&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = fn&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;\n});\nconst fn = () =&gt; {\n};\nassert.strictEqual(device.debug, undefined);\ndevice.debug = fn;\nassert.strictEqual(device.debug, fn);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b4e2e7d4-dc7a-41ab-8804-5fdbbb06b6f5&quot;,&quot;parentUUID&quot;:&quot;07db36dd-b273-4cd6-abd7-6a6ab05ee14a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bea38574-5f7c-48b6-9acb-b1c4a6d0f098&quot;,&quot;94025bea-a759-4c68-8e64-4a6c1bb5d777&quot;,&quot;9b25caae-15c2-42b5-bbe9-05df535e6e39&quot;,&quot;b4e2e7d4-dc7a-41ab-8804-5fdbbb06b6f5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7b71531f-63ac-47fb-9e74-7830945600f6&quot;,&quot;title&quot;:&quot;toJSON()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a object representation&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice toJSON() should return a object representation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    id: &#x27;*****&#x27;,\n    protocol: NodePyATVProtocol.airplay\n});\nassert.deepEqual(device.toJSON(), {\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    id: &#x27;*****&#x27;,\n    protocol: NodePyATVProtocol.airplay\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c823eaa8-70a2-4577-8eb2-73565fc41fd7&quot;,&quot;parentUUID&quot;:&quot;7b71531f-63ac-47fb-9e74-7830945600f6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should be possible to create a new device from this&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice toJSON() should be possible to create a new device from this&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const config = {\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    id: &#x27;*****&#x27;,\n    protocol: NodePyATVProtocol.airplay\n};\nconst deviceA = new NodePyATVDevice(config);\nconst deviceB = new NodePyATVDevice(deviceA.toJSON());\nassert.deepEqual(deviceB.toJSON(), config);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fee7eb17-86b4-4662-8daa-21bdddcf013f&quot;,&quot;parentUUID&quot;:&quot;7b71531f-63ac-47fb-9e74-7830945600f6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c823eaa8-70a2-4577-8eb2-73565fc41fd7&quot;,&quot;fee7eb17-86b4-4662-8daa-21bdddcf013f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2d45a70c-859d-4f1b-8f3d-f497b2e773fe&quot;,&quot;title&quot;:&quot;toString()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice toString() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;\n});\nassert.strictEqual(device.toString(), &#x27;NodePyATVDevice(My Testdevice, 192.168.178.2)&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;418681a6-3b2d-47ec-b40f-ad783796103d&quot;,&quot;parentUUID&quot;:&quot;2d45a70c-859d-4f1b-8f3d-f497b2e773fe&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;418681a6-3b2d-47ec-b40f-ad783796103d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1754a598-60c1-4c43-a766-23a54ebb41da&quot;,&quot;title&quot;:&quot;getState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work [I]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should work [I]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;pending&quot;,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;07e2d8f1-7c28-4cbe-b599-881722bef6b4&quot;,&quot;parentUUID&quot;:&quot;1754a598-60c1-4c43-a766-23a54ebb41da&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end({\n            result: &#x27;success&#x27;,\n            datetime: &#x27;2020-11-07T22:38:43.608030+01:00&#x27;,\n            hash: &#x27;100e0ab6-6ff5-4199-9c04-a7107ff78712&#x27;,\n            media_type: &#x27;video&#x27;,\n            device_state: &#x27;playing&#x27;,\n            title: &#x27;Solo: A Star Wars Story&#x27;,\n            artist: null,\n            album: null,\n            genre: null,\n            total_time: 8097,\n            position: 27,\n            shuffle: &#x27;off&#x27;,\n            repeat: &#x27;off&#x27;,\n            app: &#x27;Disney+&#x27;,\n            app_id: &#x27;com.disney.disneyplus&#x27;\n        });\n    })\n});\nconst result = await device.getState();\nassert.deepStrictEqual(result, {\n    dateTime: new Date(&#x27;2020-11-07T22:38:43.608030+01:00&#x27;),\n    hash: &#x27;100e0ab6-6ff5-4199-9c04-a7107ff78712&#x27;,\n    mediaType: NodePyATVMediaType.video,\n    deviceState: NodePyATVDeviceState.playing,\n    focusState: null,\n    title: &#x27;Solo: A Star Wars Story&#x27;,\n    artist: null,\n    album: null,\n    genre: null,\n    totalTime: 8097,\n    volume: null,\n    position: 27,\n    shuffle: NodePyATVShuffleState.off,\n    repeat: NodePyATVRepeatState.off,\n    app: &#x27;Disney+&#x27;,\n    appId: &#x27;com.disney.disneyplus&#x27;,\n    powerState: null,\n    outputDevices: null\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8be4f9e6-4349-46b9-8221-9da771ade32a&quot;,&quot;parentUUID&quot;:&quot;1754a598-60c1-4c43-a766-23a54ebb41da&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should reject with error if pyatv fails&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should reject with error if pyatv fails&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end({\n            result: &#x27;failure&#x27;,\n            datetime: &#x27;2021-11-24T21:13:36.424576+03:00&#x27;,\n            exception: &#x27;invalid credentials: 321&#x27;,\n            stacktrace: &#x27;Traceback (most recent call last):\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\&quot;, line 302, in appstart\\n    print(args.output(await _handle_command(args, abort_sem, loop)), flush=True)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\&quot;, line 196, in _handle_command\\n    atv = await connect(config, loop, protocol=Protocol.MRP)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/__init__.py\&quot;, line 96, in connect\\n    for setup_data in proto_methods.setup(\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\&quot;, line 192, in setup\\n    stream = AirPlayStream(config, service)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\&quot;, line 79, in __init__\\n    self._credentials: HapCredentials = parse_credentials(self.service.credentials)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/auth/hap_pairing.py\&quot;, line 139, in parse_credentials\\n    raise exceptions.InvalidCredentialsError(\&quot;invalid credentials: \&quot; + detail_string)\\npyatv.exceptions.InvalidCredentialsError: invalid credentials: 321\\n&#x27;\n        });\n    })\n});\nassert.rejects(async () =&gt; {\n    await device.getState();\n}, /Got pyatv Error: invalid credentials: 321/);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2e0e5ae3-42c4-4b6a-8a58-15798046ed40&quot;,&quot;parentUUID&quot;:&quot;1754a598-60c1-4c43-a766-23a54ebb41da&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should cache requests for a bit&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should cache requests for a bit&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let executions = 0;\nconst device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        executions++;\n        cp.end({\n            result: &#x27;success&#x27;,\n            datetime: new Date().toJSON(),\n            hash: &#x27;100e0ab6-6ff5-4199-9c04-a7107ff78712&#x27;,\n            media_type: &#x27;video&#x27;,\n            device_state: &#x27;playing&#x27;,\n            title: &#x27;Solo: A Star Wars Story&#x27;,\n            artist: null,\n            album: null,\n            genre: null,\n            total_time: 8097,\n            position: 27,\n            shuffle: &#x27;off&#x27;,\n            repeat: &#x27;off&#x27;,\n            app: &#x27;Disney+&#x27;,\n            app_id: &#x27;com.disney.disneyplus&#x27;\n        });\n    })\n});\nconst firstResult = await device.getState();\nconst secondResult = await device.getState();\nassert.strictEqual(firstResult.dateTime, secondResult.dateTime);\nassert.strictEqual(executions, 1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5c393c24-cc57-4554-bde0-fcfa251b127c&quot;,&quot;parentUUID&quot;:&quot;1754a598-60c1-4c43-a766-23a54ebb41da&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update the position if cache was used&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should update the position if cache was used&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end({\n            result: &#x27;success&#x27;,\n            datetime: new Date(new Date().getTime() - 1000).toJSON(),\n            hash: &#x27;100e0ab6-6ff5-4199-9c04-a7107ff78712&#x27;,\n            media_type: &#x27;video&#x27;,\n            device_state: &#x27;playing&#x27;,\n            title: &#x27;Solo: A Star Wars Story&#x27;,\n            artist: null,\n            album: null,\n            genre: null,\n            total_time: 8097,\n            position: 27,\n            shuffle: &#x27;off&#x27;,\n            repeat: &#x27;off&#x27;,\n            app: &#x27;Disney+&#x27;,\n            app_id: &#x27;com.disney.disneyplus&#x27;\n        });\n    })\n});\nconst firstResult = await device.getState();\nassert.strictEqual(firstResult.position, 27);\nconst secondResult = await device.getState();\nassert.ok(secondResult.position);\nassert.ok(secondResult.position &gt; 27, `Position should be &gt; 27, was ${secondResult.position}`);\nassert.ok(secondResult.position &lt; 30, `Position should be &gt; 27, was ${secondResult.position}`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8fb341ce-fac8-442d-bc23-5d224292b311&quot;,&quot;parentUUID&quot;:&quot;1754a598-60c1-4c43-a766-23a54ebb41da&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8be4f9e6-4349-46b9-8221-9da771ade32a&quot;,&quot;2e0e5ae3-42c4-4b6a-8a58-15798046ed40&quot;,&quot;5c393c24-cc57-4554-bde0-fcfa251b127c&quot;,&quot;8fb341ce-fac8-442d-bc23-5d224292b311&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;07e2d8f1-7c28-4cbe-b599-881722bef6b4&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0f207b43-a2e2-4ac0-94a2-2f4548ced74f&quot;,&quot;title&quot;:&quot;clearState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice clearState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let executions = 0;\nconst device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        executions++;\n        cp.end({\n            result: &#x27;success&#x27;,\n            datetime: &#x27;2020-11-07T22:38:43.608030+01:00&#x27;,\n            title: &#x27;Solo: A Star Wars Story&#x27;\n        });\n    })\n});\nassert.deepStrictEqual(await device.getTitle(), &#x27;Solo: A Star Wars Story&#x27;);\ndevice.clearState();\nassert.deepStrictEqual(await device.getTitle(), &#x27;Solo: A Star Wars Story&#x27;);\nassert.strictEqual(executions, 2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b87d6afd-f176-46f0-91a9-f9287d5ebc4c&quot;,&quot;parentUUID&quot;:&quot;0f207b43-a2e2-4ac0-94a2-2f4548ced74f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b87d6afd-f176-46f0-91a9-f9287d5ebc4c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;35152f54-37dd-4789-9103-ab5f55e55b68&quot;,&quot;title&quot;:&quot;getDateTime()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getDateTime() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end({\n            result: &#x27;success&#x27;,\n            datetime: new Date().toJSON()\n        });\n    })\n});\nconst result = await device.getDateTime();\nassert.ok(result instanceof Date);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2406253a-b114-45e1-af5e-1e8c29b48d2c&quot;,&quot;parentUUID&quot;:&quot;35152f54-37dd-4789-9103-ab5f55e55b68&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2406253a-b114-45e1-af5e-1e8c29b48d2c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d16c591b-91b0-4978-9144-90d00122aefc&quot;,&quot;title&quot;:&quot;getHash()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getHash() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end({\n            result: &#x27;success&#x27;,\n            hash: &#x27;12345&#x27;\n        });\n    })\n});\nconst result = await device.getHash();\nassert.strictEqual(result, &#x27;12345&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8823b52e-efc6-496f-b3e6-443b25be1dc6&quot;,&quot;parentUUID&quot;:&quot;d16c591b-91b0-4978-9144-90d00122aefc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8823b52e-efc6-496f-b3e6-443b25be1dc6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;80a2fed6-9560-4a1d-93a6-0438dd963a1b&quot;,&quot;title&quot;:&quot;getMediaType()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getMediaType() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end({\n            result: &#x27;success&#x27;,\n            media_type: &#x27;video&#x27;\n        });\n    })\n});\nconst result = await device.getMediaType();\nassert.deepStrictEqual(result, NodePyATVMediaType.video);\nassert.deepStrictEqual(result, &#x27;video&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;767fa154-6b23-4f13-b58b-c168bd4742c3&quot;,&quot;parentUUID&quot;:&quot;80a2fed6-9560-4a1d-93a6-0438dd963a1b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;767fa154-6b23-4f13-b58b-c168bd4742c3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;60859848-0c90-4cd1-82b0-f2f051f85fc2&quot;,&quot;title&quot;:&quot;getDeviceState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getDeviceState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end({\n            result: &#x27;success&#x27;,\n            device_state: &#x27;seeking&#x27;\n        });\n    })\n});\nconst result = await device.getDeviceState();\nassert.deepStrictEqual(result, NodePyATVDeviceState.seeking);\nassert.deepStrictEqual(result, &#x27;seeking&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1df2047e-7e4f-461f-8cc8-51b3f50e41a4&quot;,&quot;parentUUID&quot;:&quot;60859848-0c90-4cd1-82b0-f2f051f85fc2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1df2047e-7e4f-461f-8cc8-51b3f50e41a4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fa067a16-3404-4bf8-a4fb-9cebf4dc928c&quot;,&quot;title&quot;:&quot;getTitle()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getTitle() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end({\n            result: &#x27;success&#x27;,\n            title: &#x27;My Movie&#x27;\n        });\n    })\n});\nconst result = await device.getTitle();\nassert.strictEqual(result, &#x27;My Movie&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;86c899cc-0f3a-4e8a-83db-5b109a69ec5e&quot;,&quot;parentUUID&quot;:&quot;fa067a16-3404-4bf8-a4fb-9cebf4dc928c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;86c899cc-0f3a-4e8a-83db-5b109a69ec5e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;81bcc375-dbb9-467f-94fd-026e09585932&quot;,&quot;title&quot;:&quot;getArtist()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getArtist() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end({\n            result: &#x27;success&#x27;,\n            artist: &#x27;My Artist&#x27;\n        });\n    })\n});\nconst result = await device.getArtist();\nassert.strictEqual(result, &#x27;My Artist&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bf71de29-2f17-45b2-8a52-c8fa01e5889d&quot;,&quot;parentUUID&quot;:&quot;81bcc375-dbb9-467f-94fd-026e09585932&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bf71de29-2f17-45b2-8a52-c8fa01e5889d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5c09217b-55d7-439f-a8d9-bda1b05a2d0f&quot;,&quot;title&quot;:&quot;getAlbum()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getAlbum() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end({\n            result: &#x27;success&#x27;,\n            album: &#x27;My ALbum&#x27;\n        });\n    })\n});\nconst result = await device.getAlbum();\nassert.strictEqual(result, &#x27;My ALbum&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;94bd56fd-4297-4c00-8954-8cd08e899490&quot;,&quot;parentUUID&quot;:&quot;5c09217b-55d7-439f-a8d9-bda1b05a2d0f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;94bd56fd-4297-4c00-8954-8cd08e899490&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d1a36e72-2b14-4db1-ba34-0f1458f8f90f&quot;,&quot;title&quot;:&quot;getGenre()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getGenre() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end({\n            result: &#x27;success&#x27;,\n            genre: &#x27;My Genre&#x27;\n        });\n    })\n});\nconst result = await device.getGenre();\nassert.strictEqual(result, &#x27;My Genre&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9e733a33-3823-4c1b-84dc-4c90ad079592&quot;,&quot;parentUUID&quot;:&quot;d1a36e72-2b14-4db1-ba34-0f1458f8f90f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9e733a33-3823-4c1b-84dc-4c90ad079592&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1cf11b5d-9ae5-4134-84cc-e57512a47bf3&quot;,&quot;title&quot;:&quot;getTotalTime()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getTotalTime() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end({\n            result: &#x27;success&#x27;,\n            total_time: 45\n        });\n    })\n});\nconst result = await device.getTotalTime();\nassert.strictEqual(result, 45);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;42c50f46-259c-459d-9860-d77924fb6d66&quot;,&quot;parentUUID&quot;:&quot;1cf11b5d-9ae5-4134-84cc-e57512a47bf3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;42c50f46-259c-459d-9860-d77924fb6d66&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9cafd3dc-5ec2-477e-b76c-fa7e84d95176&quot;,&quot;title&quot;:&quot;getPosition()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getPosition() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end({\n            result: &#x27;success&#x27;,\n            position: 30\n        });\n    })\n});\nconst result = await device.getPosition();\nassert.strictEqual(result, 30);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4aad5cd2-4fdc-4ffa-b49c-f79f4dfac01c&quot;,&quot;parentUUID&quot;:&quot;9cafd3dc-5ec2-477e-b76c-fa7e84d95176&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4aad5cd2-4fdc-4ffa-b49c-f79f4dfac01c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ea4bedc0-39fb-4b1a-a7a5-a0f3973fb4e1&quot;,&quot;title&quot;:&quot;getShuffle()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getShuffle() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end({\n            result: &#x27;success&#x27;,\n            shuffle: &#x27;songs&#x27;\n        });\n    })\n});\nconst result = await device.getShuffle();\nassert.deepStrictEqual(result, NodePyATVShuffleState.songs);\nassert.deepStrictEqual(result, &#x27;songs&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ddf44aa2-9bde-45bd-9fe4-dee356cfec49&quot;,&quot;parentUUID&quot;:&quot;ea4bedc0-39fb-4b1a-a7a5-a0f3973fb4e1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ddf44aa2-9bde-45bd-9fe4-dee356cfec49&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;369313ba-3191-4693-b832-d8c57ab29b4c&quot;,&quot;title&quot;:&quot;getRepeat()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getRepeat() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end({\n            result: &#x27;success&#x27;,\n            repeat: &#x27;all&#x27;\n        });\n    })\n});\nconst result = await device.getRepeat();\nassert.deepStrictEqual(result, NodePyATVRepeatState.all);\nassert.deepStrictEqual(result, &#x27;all&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;14c5f2ed-919b-4564-94a6-e1300acbfc90&quot;,&quot;parentUUID&quot;:&quot;369313ba-3191-4693-b832-d8c57ab29b4c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;14c5f2ed-919b-4564-94a6-e1300acbfc90&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ef4e5c1f-e2b3-4689-b3e3-5cf3c1f4e207&quot;,&quot;title&quot;:&quot;getApp()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getApp() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end({\n            result: &#x27;success&#x27;,\n            app: &#x27;My App&#x27;\n        });\n    })\n});\nconst result = await device.getApp();\nassert.strictEqual(result, &#x27;My App&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1a158961-d4b4-45e9-91b1-7a24ca0e1cd7&quot;,&quot;parentUUID&quot;:&quot;ef4e5c1f-e2b3-4689-b3e3-5cf3c1f4e207&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1a158961-d4b4-45e9-91b1-7a24ca0e1cd7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d1013179-2f1b-4fe2-9216-47c3ca94bd2c&quot;,&quot;title&quot;:&quot;getAppId()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getAppId() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end({\n            result: &#x27;success&#x27;,\n            app_id: &#x27;app.example.com&#x27;\n        });\n    })\n});\nconst result = await device.getAppId();\nassert.strictEqual(result, &#x27;app.example.com&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7a2cb665-5012-4fdc-aae0-9c6ff02b95f5&quot;,&quot;parentUUID&quot;:&quot;d1013179-2f1b-4fe2-9216-47c3ca94bd2c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7a2cb665-5012-4fdc-aae0-9c6ff02b95f5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;41b65b10-88af-4351-8610-7ead58cf9732&quot;,&quot;title&quot;:&quot;listApps()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice listApps() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end(&#x27;App: Fitness (com.apple.Fitness), App: Podcasts (com.apple.podcasts), &#x27; +\n            &#x27;App: Filme (com.apple.TVMovies), App: Prime Video (com.amazon.aiv.AIVApp), &#x27; +\n            &#x27;App: TV (com.apple.TVWatchList), App: Fotos (com.apple.TVPhotos), App: App Store &#x27; +\n            &#x27;(com.apple.TVAppStore), App: Arcade (com.apple.Arcade), App: TV-Sendungen (com.apple.TVShows), &#x27; +\n            &#x27;App: Suchen (com.apple.TVSearch), App: Live TV (de.couchfunk.WM2014), App: RTL+ &#x27; +\n            &#x27;(com.rtlinteractive.tvnow), App: Computer (com.apple.TVHomeSharing), App: ARTE &#x27; +\n            &#x27;(tv.arte.plus7), App: YouTube (com.google.ios.youtube), App: ARD Mediathek &#x27; +\n            &#x27;(de.swr.avp.ard.tablet), App: Disney+ (com.disney.disneyplus), App: Plex (com.plexapp.plex), &#x27; +\n            &#x27;App: Joyn (de.prosiebensat1digital.seventv), App: Einstellungen (com.apple.TVSettings), &#x27; +\n            &#x27;App: ZDFmediathek (de.zdf.mediathek.universal), App: Crossy Road (com.hipsterwhale.crossy), &#x27; +\n            &#x27;App: Netflix (com.netflix.Netflix), App: Infuse (com.firecore.infuse), &#x27; +\n            &#x27;App: Musik (com.apple.TVMusic)&#x27;);\n    })\n});\nconst result = await device.listApps();\nassert.strictEqual(result.length, 25);\nassert.strictEqual(result[0].id, &#x27;com.apple.Fitness&#x27;);\nassert.strictEqual(result[0].name, &#x27;Fitness&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;84ff243a-f2ea-4457-b607-b044e404b224&quot;,&quot;parentUUID&quot;:&quot;41b65b10-88af-4351-8610-7ead58cf9732&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;84ff243a-f2ea-4457-b607-b044e404b224&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4b18dd32-478b-40cf-a7f8-a4bd36317355&quot;,&quot;title&quot;:&quot;pressKey()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work with valid key&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pressKey() should work with valid key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n    })\n});\nawait device.pressKey(NodePyATVKeys.home);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;be4801b8-dbd1-4518-88d9-b5f63dd6eab1&quot;,&quot;parentUUID&quot;:&quot;4b18dd32-478b-40cf-a7f8-a4bd36317355&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error with invalid key&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pressKey() should throw error with invalid key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;\n});\nawait assert.rejects(async () =&gt; {\n    // @ts-ignore\n    await device.pressKey(&#x27;foo&#x27;);\n}, /Unsupported key value foo/);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;af3847f8-3f72-4286-8607-fef57ff9c8f4&quot;,&quot;parentUUID&quot;:&quot;4b18dd32-478b-40cf-a7f8-a4bd36317355&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if pyatv result is not success&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pressKey() should throw error if pyatv result is not success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end(&#x27;{\&quot;result\&quot;:\&quot;failure\&quot;}&#x27;);\n    })\n});\nawait assert.rejects(async () =&gt; {\n    await device.pressKey(NodePyATVKeys.home);\n}, /Unable to parse pyatv response/);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5f066262-bb95-4f90-b32b-8eaa1ba3e5be&quot;,&quot;parentUUID&quot;:&quot;4b18dd32-478b-40cf-a7f8-a4bd36317355&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;be4801b8-dbd1-4518-88d9-b5f63dd6eab1&quot;,&quot;af3847f8-3f72-4286-8607-fef57ff9c8f4&quot;,&quot;5f066262-bb95-4f90-b32b-8eaa1ba3e5be&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7507fb9f-c630-43a6-99d0-5e63b17bb204&quot;,&quot;title&quot;:&quot;down()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice down() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n    })\n});\n// @ts-ignore\nawait device[key]();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ff3a82e-91db-4684-8d62-e95ef5ea8e72&quot;,&quot;parentUUID&quot;:&quot;7507fb9f-c630-43a6-99d0-5e63b17bb204&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0ff3a82e-91db-4684-8d62-e95ef5ea8e72&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5369ed4d-639c-439e-a674-c2a7c252205e&quot;,&quot;title&quot;:&quot;home()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice home() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n    })\n});\n// @ts-ignore\nawait device[key]();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1a580c91-75f9-480a-b0e5-6a1d9de56be6&quot;,&quot;parentUUID&quot;:&quot;5369ed4d-639c-439e-a674-c2a7c252205e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1a580c91-75f9-480a-b0e5-6a1d9de56be6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f87229a5-f860-4662-b33f-dbf5c36409e1&quot;,&quot;title&quot;:&quot;homeHold()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice homeHold() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n    })\n});\n// @ts-ignore\nawait device[key]();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9d8473a3-5786-4554-acbd-aa65f4581d80&quot;,&quot;parentUUID&quot;:&quot;f87229a5-f860-4662-b33f-dbf5c36409e1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9d8473a3-5786-4554-acbd-aa65f4581d80&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a09a4bcb-5c0f-4d36-a762-7a5871ac1c3e&quot;,&quot;title&quot;:&quot;left()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice left() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n    })\n});\n// @ts-ignore\nawait device[key]();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9b6395ed-8dd3-4c6d-bd5d-d86deca33fb4&quot;,&quot;parentUUID&quot;:&quot;a09a4bcb-5c0f-4d36-a762-7a5871ac1c3e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9b6395ed-8dd3-4c6d-bd5d-d86deca33fb4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1c4ccec7-10fa-4a02-9320-dc98f5cd286e&quot;,&quot;title&quot;:&quot;menu()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice menu() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n    })\n});\n// @ts-ignore\nawait device[key]();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8ff7fc72-a292-4cf4-8da7-99dfa218508f&quot;,&quot;parentUUID&quot;:&quot;1c4ccec7-10fa-4a02-9320-dc98f5cd286e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8ff7fc72-a292-4cf4-8da7-99dfa218508f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0f8e3ff4-922d-462e-9a89-b08df4a2211f&quot;,&quot;title&quot;:&quot;next()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice next() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n    })\n});\n// @ts-ignore\nawait device[key]();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0c05ccd2-810c-4527-908d-a8399a8deec0&quot;,&quot;parentUUID&quot;:&quot;0f8e3ff4-922d-462e-9a89-b08df4a2211f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0c05ccd2-810c-4527-908d-a8399a8deec0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9169bf17-1e66-4707-99d0-bc060b8c0fdd&quot;,&quot;title&quot;:&quot;pause()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pause() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n    })\n});\n// @ts-ignore\nawait device[key]();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;659142b0-0bd2-4fc3-a36b-59ab855b4db7&quot;,&quot;parentUUID&quot;:&quot;9169bf17-1e66-4707-99d0-bc060b8c0fdd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;659142b0-0bd2-4fc3-a36b-59ab855b4db7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;cd731850-eec9-4e8a-8d9e-ddd50f0dedad&quot;,&quot;title&quot;:&quot;play()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice play() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n    })\n});\n// @ts-ignore\nawait device[key]();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ecc3e0a8-cef3-4be3-9a7c-434a88f60b49&quot;,&quot;parentUUID&quot;:&quot;cd731850-eec9-4e8a-8d9e-ddd50f0dedad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ecc3e0a8-cef3-4be3-9a7c-434a88f60b49&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8792d6f8-0780-43ed-95d4-be32a9c618a2&quot;,&quot;title&quot;:&quot;playPause()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice playPause() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n    })\n});\n// @ts-ignore\nawait device[key]();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4b9fd2c8-839a-4407-a28c-877300241f60&quot;,&quot;parentUUID&quot;:&quot;8792d6f8-0780-43ed-95d4-be32a9c618a2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4b9fd2c8-839a-4407-a28c-877300241f60&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;078aaaca-b4d4-4001-8cc0-909686db393c&quot;,&quot;title&quot;:&quot;previous()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice previous() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n    })\n});\n// @ts-ignore\nawait device[key]();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;10036908-4497-4ff3-890d-f61aedb50fff&quot;,&quot;parentUUID&quot;:&quot;078aaaca-b4d4-4001-8cc0-909686db393c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;10036908-4497-4ff3-890d-f61aedb50fff&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;23599b99-ab6e-44af-ad2d-07ba85f9a3b6&quot;,&quot;title&quot;:&quot;right()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice right() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n    })\n});\n// @ts-ignore\nawait device[key]();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4b76274f-45a7-4ff7-9803-9c762cc52b9b&quot;,&quot;parentUUID&quot;:&quot;23599b99-ab6e-44af-ad2d-07ba85f9a3b6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4b76274f-45a7-4ff7-9803-9c762cc52b9b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7a48898e-ee48-4335-a52b-d9eb2fa1125f&quot;,&quot;title&quot;:&quot;select()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice select() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n    })\n});\n// @ts-ignore\nawait device[key]();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7d85c682-513a-4fe9-9594-4762a81a90dd&quot;,&quot;parentUUID&quot;:&quot;7a48898e-ee48-4335-a52b-d9eb2fa1125f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7d85c682-513a-4fe9-9594-4762a81a90dd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;74571663-d08b-4afa-a392-2c49b4b4ea92&quot;,&quot;title&quot;:&quot;skipBackward()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice skipBackward() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n    })\n});\n// @ts-ignore\nawait device[key]();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;77c54788-f209-4321-9f75-089c85a86961&quot;,&quot;parentUUID&quot;:&quot;74571663-d08b-4afa-a392-2c49b4b4ea92&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;77c54788-f209-4321-9f75-089c85a86961&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e40c87d6-6e3c-4606-95b6-c8310485a587&quot;,&quot;title&quot;:&quot;skipForward()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice skipForward() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n    })\n});\n// @ts-ignore\nawait device[key]();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b96f90a6-83d6-487d-aa58-4afda21fcb35&quot;,&quot;parentUUID&quot;:&quot;e40c87d6-6e3c-4606-95b6-c8310485a587&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b96f90a6-83d6-487d-aa58-4afda21fcb35&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3a87bbe7-fff3-44e1-8d84-21673e370243&quot;,&quot;title&quot;:&quot;stop()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice stop() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n    })\n});\n// @ts-ignore\nawait device[key]();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4211507e-eadc-425d-ba37-6e155722a71d&quot;,&quot;parentUUID&quot;:&quot;3a87bbe7-fff3-44e1-8d84-21673e370243&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4211507e-eadc-425d-ba37-6e155722a71d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e968dd93-bbec-4874-a0f3-bee68495d6cb&quot;,&quot;title&quot;:&quot;suspend()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice suspend() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n    })\n});\n// @ts-ignore\nawait device[key]();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;67a4f9b3-6215-4178-9e81-33137af03710&quot;,&quot;parentUUID&quot;:&quot;e968dd93-bbec-4874-a0f3-bee68495d6cb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;67a4f9b3-6215-4178-9e81-33137af03710&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fad401e5-0a7b-4c28-857c-4cdfa52ad8ad&quot;,&quot;title&quot;:&quot;topMenu()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice topMenu() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n    })\n});\n// @ts-ignore\nawait device[key]();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e56b2740-4e0c-4460-bdc6-11a465b8d9f6&quot;,&quot;parentUUID&quot;:&quot;fad401e5-0a7b-4c28-857c-4cdfa52ad8ad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e56b2740-4e0c-4460-bdc6-11a465b8d9f6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;79effe71-2391-415e-a5a9-9c3a7faf59c5&quot;,&quot;title&quot;:&quot;up()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice up() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n    })\n});\n// @ts-ignore\nawait device[key]();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;295412b9-68f9-413b-8e31-c83dc6f5c50e&quot;,&quot;parentUUID&quot;:&quot;79effe71-2391-415e-a5a9-9c3a7faf59c5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;295412b9-68f9-413b-8e31-c83dc6f5c50e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0760bbe0-060f-42e5-b96a-2b16450fba30&quot;,&quot;title&quot;:&quot;volumeDown()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice volumeDown() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n    })\n});\n// @ts-ignore\nawait device[key]();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c0ab898b-989f-4a83-95e5-ec7e5f56a16c&quot;,&quot;parentUUID&quot;:&quot;0760bbe0-060f-42e5-b96a-2b16450fba30&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c0ab898b-989f-4a83-95e5-ec7e5f56a16c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c0c8e404-3c7a-4c68-a01d-ce4d8d7cfd58&quot;,&quot;title&quot;:&quot;volumeUp()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice volumeUp() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n    })\n});\n// @ts-ignore\nawait device[key]();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;45dbad20-06c3-429d-9641-b4eb12f44c1a&quot;,&quot;parentUUID&quot;:&quot;c0c8e404-3c7a-4c68-a01d-ce4d8d7cfd58&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;45dbad20-06c3-429d-9641-b4eb12f44c1a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;db7824d4-fd3c-4c89-ba35-450b571458b2&quot;,&quot;title&quot;:&quot;wakeup()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice wakeup() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n    })\n});\n// @ts-ignore\nawait device[key]();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4ba5487a-9e86-49b7-b5af-9132ae6ebc9d&quot;,&quot;parentUUID&quot;:&quot;db7824d4-fd3c-4c89-ba35-450b571458b2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4ba5487a-9e86-49b7-b5af-9132ae6ebc9d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ae89e882-36f6-44d8-a3b1-ba784852d643&quot;,&quot;title&quot;:&quot;turnOff()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice turnOff() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n    })\n});\n// @ts-ignore\nawait device[key]();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cc4c5414-b162-4ad7-9286-56be93dafd93&quot;,&quot;parentUUID&quot;:&quot;ae89e882-36f6-44d8-a3b1-ba784852d643&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cc4c5414-b162-4ad7-9286-56be93dafd93&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ed633556-fd00-4f26-92d9-5a6677fad7d6&quot;,&quot;title&quot;:&quot;turnOn()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice turnOn() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n    })\n});\n// @ts-ignore\nawait device[key]();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0f911fba-d0fc-4c3c-a926-6e5ae2664a36&quot;,&quot;parentUUID&quot;:&quot;ed633556-fd00-4f26-92d9-5a6677fad7d6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0f911fba-d0fc-4c3c-a926-6e5ae2664a36&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1199a2c0-1669-4960-8db5-6f39e491f246&quot;,&quot;title&quot;:&quot;launchApp()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice launchApp() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.end(&#x27;&#x27;);\n    })\n});\nawait device.launchApp(&#x27;com.apple.TVShows&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;75bc8498-2556-4225-bafd-c0816340a3f4&quot;,&quot;parentUUID&quot;:&quot;1199a2c0-1669-4960-8db5-6f39e491f246&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;75bc8498-2556-4225-bafd-c0816340a3f4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;458daab2-8cc3-4e0d-a266-9ac02fc85616&quot;,&quot;title&quot;:&quot;NodePyATVInstance&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;16c8b71d-dc3d-4f20-8846-18cbc4c48d1c&quot;,&quot;title&quot;:&quot;static version()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work with pyatv [L]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should work with pyatv [L]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:490,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(4000);\nconst result = await NodePyATVInstance.version();\nif (result.pyatv === null) {\n    throw new Error(&#x27;No version found for pyatv. Is it installed in test environment?&#x27;);\n}\nassert.equal(typeof result.pyatv, &#x27;string&#x27;, &#x27;result.pyatv is a string&#x27;);\nassert.ok(result.pyatv.length &gt;= 5, &#x27;result.pyatv has content&#x27;);\nassert.strictEqual(result.module, version);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5990ee94-0784-4934-8f0e-514f88d93ca8&quot;,&quot;parentUUID&quot;:&quot;16c8b71d-dc3d-4f20-8846-18cbc4c48d1c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the pyatv version&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return the pyatv version&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = await NodePyATVInstance.version({\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.code(1);\n        cp.end(&#x27;atvremote 0.7.4&#x27;);\n    })\n});\nassert.ok(result.pyatv);\nassert.strictEqual(result.pyatv, &#x27;0.7.4&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bb4bc806-fbd9-42a5-a289-e090f6b477d5&quot;,&quot;parentUUID&quot;:&quot;16c8b71d-dc3d-4f20-8846-18cbc4c48d1c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the module version&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return the module version&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = await NodePyATVInstance.version({\n    noColors: true,\n    spawn: createFakeSpawn(cp =&gt; cp.code(1).end())\n});\nassert.strictEqual(result.module, version);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0cde2947-e7ec-4b74-8381-1dd12501bec9&quot;,&quot;parentUUID&quot;:&quot;16c8b71d-dc3d-4f20-8846-18cbc4c48d1c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle option.atvremotePath&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should handle option.atvremotePath&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await NodePyATVInstance.version({\n    atvremotePath: &#x27;/foo/bar&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        assert.strictEqual(cp.cmd(), &#x27;/foo/bar&#x27;);\n        cp.code(1).end();\n    })\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7eb59dc1-870b-4c14-a891-53147dc8b055&quot;,&quot;parentUUID&quot;:&quot;16c8b71d-dc3d-4f20-8846-18cbc4c48d1c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with option.debug = true&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should work with option.debug = true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await NodePyATVInstance.version({\n    debug: true,\n    spawn: createFakeSpawn(cp =&gt; cp.code(1).end())\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ef7d6f96-6527-486c-8f3e-454146ab4736&quot;,&quot;parentUUID&quot;:&quot;16c8b71d-dc3d-4f20-8846-18cbc4c48d1c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with option.noColors&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should work with option.noColors&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await NodePyATVInstance.version({\n    debug: () =&gt; {\n        // no debug log\n    },\n    noColors: true,\n    spawn: createFakeSpawn(cp =&gt; cp.code(1).end())\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cbe86a04-e7a2-4394-9d33-d75e43d6d962&quot;,&quot;parentUUID&quot;:&quot;16c8b71d-dc3d-4f20-8846-18cbc4c48d1c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return null on pyatv stderr output&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return null on pyatv stderr output&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = await NodePyATVInstance.version({\n    spawn: createFakeSpawn(cp =&gt; cp.stderr(&#x27;Hello World!&#x27;).code(123).end())\n});\nassert.strictEqual(result.pyatv, null);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7636e43f-d89e-47b9-9e92-538ac2926d12&quot;,&quot;parentUUID&quot;:&quot;16c8b71d-dc3d-4f20-8846-18cbc4c48d1c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return null on pyatv error&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return null on pyatv error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = await NodePyATVInstance.version({\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.error(new Error(&#x27;Hello world!&#x27;)).end();\n    })\n});\nassert.strictEqual(result.pyatv, null);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1e54dacd-4dd5-4818-af70-d0dfe3e0f9a8&quot;,&quot;parentUUID&quot;:&quot;16c8b71d-dc3d-4f20-8846-18cbc4c48d1c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return null on invalid pyatv version&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return null on invalid pyatv version&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = await NodePyATVInstance.version({\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.stdout(&#x27;atvremote 42&#x27;).code(1).end();\n    })\n});\nassert.strictEqual(result.pyatv, null);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5888d70c-eb07-44b2-b55a-fe1a9345420f&quot;,&quot;parentUUID&quot;:&quot;16c8b71d-dc3d-4f20-8846-18cbc4c48d1c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5990ee94-0784-4934-8f0e-514f88d93ca8&quot;,&quot;bb4bc806-fbd9-42a5-a289-e090f6b477d5&quot;,&quot;0cde2947-e7ec-4b74-8381-1dd12501bec9&quot;,&quot;7eb59dc1-870b-4c14-a891-53147dc8b055&quot;,&quot;ef7d6f96-6527-486c-8f3e-454146ab4736&quot;,&quot;cbe86a04-e7a2-4394-9d33-d75e43d6d962&quot;,&quot;7636e43f-d89e-47b9-9e92-538ac2926d12&quot;,&quot;1e54dacd-4dd5-4818-af70-d0dfe3e0f9a8&quot;,&quot;5888d70c-eb07-44b2-b55a-fe1a9345420f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:502,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5cd44878-8621-42eb-b4f7-f186f642ec7c&quot;,&quot;title&quot;:&quot;static check()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should resolve in test environment [L]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should resolve in test environment [L]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5851,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(12000);\nawait NodePyATVInstance.check();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1127eaae-0753-4ee5-bf17-c16bb27348d7&quot;,&quot;parentUUID&quot;:&quot;5cd44878-8621-42eb-b4f7-f186f642ec7c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return nice error message if pyatv was not found&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should return nice error message if pyatv was not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async () =&gt; {\n    await NodePyATVInstance.check({\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.error(new Error(&#x27;spawn atvremote ENOENT&#x27;)).code(1).end();\n        })\n    });\n}, /Unable to find pyatv. Is it installed?/);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3bc6c9db-80bf-4d16-b74d-0145b67dc32f&quot;,&quot;parentUUID&quot;:&quot;5cd44878-8621-42eb-b4f7-f186f642ec7c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return nice error message if myatv is too old&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should return nice error message if myatv is too old&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async () =&gt; {\n    await NodePyATVInstance.check({\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.stdout(&#x27;atvremote 0.5.1&#x27;).code(1).end();\n        })\n    });\n}, /Found pyatv, but unforunately it&#x27;s too old. Please update pyatv./);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0db5f98e-9729-4098-a241-053c7c9de61a&quot;,&quot;parentUUID&quot;:&quot;5cd44878-8621-42eb-b4f7-f186f642ec7c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return nice error message if scan failed&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should return nice error message if scan failed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let i = 0;\nawait assert.rejects(async () =&gt; {\n    await NodePyATVInstance.check({\n        spawn: createFakeSpawn(cp =&gt; {\n            if (i === 0) {\n                cp.stdout(&#x27;atvremote 0.7.0&#x27;).code(1).end();\n                i++;\n            }\n            else {\n                cp.error(new Error(&#x27;spawn atvremote ENOENT&#x27;)).code(1).end();\n            }\n        })\n    });\n}, /Unable to scan for devices/);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1b2db470-fb91-4f34-9e80-b0eabd797246&quot;,&quot;parentUUID&quot;:&quot;5cd44878-8621-42eb-b4f7-f186f642ec7c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1127eaae-0753-4ee5-bf17-c16bb27348d7&quot;,&quot;3bc6c9db-80bf-4d16-b74d-0145b67dc32f&quot;,&quot;0db5f98e-9729-4098-a241-053c7c9de61a&quot;,&quot;1b2db470-fb91-4f34-9e80-b0eabd797246&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5858,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3bb7a3cb-ad23-4acf-8d56-9571788f7b54&quot;,&quot;title&quot;:&quot;static find()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work [L]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work [L]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5428,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(10000);\nconst result = await NodePyATVInstance.find();\nassert.ok(Array.isArray(result));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f1c1cac8-4b39-4d1d-8e0a-3d2ec5af1cc2&quot;,&quot;parentUUID&quot;:&quot;3bb7a3cb-ad23-4acf-8d56-9571788f7b54&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle option.atvscriptPath&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should handle option.atvscriptPath&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await NodePyATVInstance.find({\n    atvscriptPath: &#x27;/foo/bar&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        assert.strictEqual(cp.cmd(), &#x27;/foo/bar&#x27;);\n        cp.stdout({\n            &#x27;result&#x27;: &#x27;success&#x27;,\n            &#x27;datetime&#x27;: &#x27;2020-11-06T20:47:30.840022+01:00&#x27;,\n            &#x27;devices&#x27;: []\n        }).end();\n    })\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3a01326d-ba7b-4494-86de-308d713ff2de&quot;,&quot;parentUUID&quot;:&quot;3bb7a3cb-ad23-4acf-8d56-9571788f7b54&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error on stderr output&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error on stderr output&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async () =&gt; {\n    await NodePyATVInstance.find({\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.stderr(&#x27;Hello World!&#x27;).code(1).end();\n        })\n    });\n}, /Unable to execute request/);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4afe7749-ff52-4262-9795-2ed98ed4d3a6&quot;,&quot;parentUUID&quot;:&quot;3bb7a3cb-ad23-4acf-8d56-9571788f7b54&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error on error&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async () =&gt; {\n    await NodePyATVInstance.find({\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.error(new Error(&#x27;Hello world!&#x27;)).code(1).end();\n        })\n    });\n}, /Hello world!/);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4fde255d-9129-448f-bd1a-746a89bfb44b&quot;,&quot;parentUUID&quot;:&quot;3bb7a3cb-ad23-4acf-8d56-9571788f7b54&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error on pyatv failure&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error on pyatv failure&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async () =&gt; {\n    await NodePyATVInstance.find({\n        spawn: createFakeSpawn(cp =&gt; {\n            // Example output from @maxileith\n            // https://github.com/sebbo2002/node-pyatv/issues/324#issue-2360854902\n            cp.stdout({\n                result: &#x27;failure&#x27;,\n                datetime: &#x27;2020-11-06T20:47:30.840022+01:00&#x27;,\n                error: &#x27;Task exception was never retrieved&#x27;,\n                exception: &#x27;[Errno 113] Connect call failed&#x27;\n            }).code(1).end();\n        })\n    });\n}, /Unable to find any devices, but received 1 error: /);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ae417bf8-f155-48cb-bae4-35265af2f54e&quot;,&quot;parentUUID&quot;:&quot;3bb7a3cb-ad23-4acf-8d56-9571788f7b54&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if atvscript result is not valid json&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error if atvscript result is not valid json&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async () =&gt; {\n    await NodePyATVInstance.find({\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.stdout(JSON.stringify({\n                &#x27;result&#x27;: &#x27;success&#x27;,\n                &#x27;datetime&#x27;: &#x27;2020-11-06T20:47:30.840022+01:00&#x27;,\n                &#x27;devices&#x27;: []\n            }).substr(1)).end();\n        })\n    });\n}, /Unable to parse result/);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b1c3f64c-c78e-4d8c-ab6f-c6b1717fb8bf&quot;,&quot;parentUUID&quot;:&quot;3bb7a3cb-ad23-4acf-8d56-9571788f7b54&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if atvscript result is not successfull&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error if atvscript result is not successfull&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async () =&gt; {\n    await NodePyATVInstance.find({\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.stdout({\n                result: &#x27;error&#x27;\n            }).code(1).end();\n        })\n    });\n}, /Unable to parse pyatv response: /);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;10b542cf-6437-4992-8570-2e60d1eae971&quot;,&quot;parentUUID&quot;:&quot;3bb7a3cb-ad23-4acf-8d56-9571788f7b54&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if atvscript result is without device array&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error if atvscript result is without device array&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async () =&gt; {\n    await NodePyATVInstance.find({\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.stdout({\n                result: &#x27;success&#x27;\n            }).code(1).end();\n        })\n    });\n}, /Unable to parse pyatv response: /);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;86611c0b-3f05-477d-ade1-d21c1490cfeb&quot;,&quot;parentUUID&quot;:&quot;3bb7a3cb-ad23-4acf-8d56-9571788f7b54&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work if devices are without device_info / services&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work if devices are without device_info / services&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const devices = await NodePyATVInstance.find({\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.stdout({\n            result: &#x27;success&#x27;,\n            datetime: &#x27;2020-11-06T20:47:30.840022+01:00&#x27;,\n            devices: [\n                {\n                    name: &#x27;Vardagsrum&#x27;,\n                    address: &#x27;10.0.10.81&#x27;,\n                    identifier: &#x27;xxx&#x27;\n                }\n            ]\n        }).code(1).end();\n    })\n});\nassert.strictEqual(devices.length, 1);\nassert.strictEqual(devices[0].name, &#x27;Vardagsrum&#x27;);\nassert.strictEqual(devices[0].host, &#x27;10.0.10.81&#x27;);\nassert.strictEqual(devices[0].id, &#x27;xxx&#x27;);\nassert.strictEqual(devices[0].model, undefined);\nassert.strictEqual(devices[0].modelName, undefined);\nassert.strictEqual(devices[0].os, undefined);\nassert.strictEqual(devices[0].version, undefined);\nassert.deepStrictEqual(devices[0].services, undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bdc9cfcc-014b-4756-bcff-612fc573e925&quot;,&quot;parentUUID&quot;:&quot;3bb7a3cb-ad23-4acf-8d56-9571788f7b54&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work if devices are with device_info / services&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work if devices are with device_info / services&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const devices = await NodePyATVInstance.find({\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.stdout({\n            result: &#x27;success&#x27;,\n            datetime: &#x27;2020-11-06T20:47:30.840022+01:00&#x27;,\n            devices: [\n                {\n                    name: &#x27;Vardagsrum&#x27;,\n                    address: &#x27;10.0.10.81&#x27;,\n                    identifier: &#x27;xxx&#x27;,\n                    device_info: {\n                        &#x27;model&#x27;: &#x27;Gen4K&#x27;,\n                        &#x27;model_str&#x27;: &#x27;Apple TV 4K&#x27;,\n                        &#x27;operating_system&#x27;: &#x27;TvOS&#x27;,\n                        &#x27;version&#x27;: &#x27;15.5.1&#x27;\n                    },\n                    services: [\n                        {\n                            protocol: &#x27;mrp&#x27;,\n                            port: 49152\n                        },\n                        {\n                            protocol: &#x27;airplay&#x27;,\n                            port: 7000\n                        }\n                    ]\n                }\n            ]\n        }).code(1).end();\n    })\n});\nassert.strictEqual(devices.length, 1);\nassert.strictEqual(devices[0].name, &#x27;Vardagsrum&#x27;);\nassert.strictEqual(devices[0].host, &#x27;10.0.10.81&#x27;);\nassert.strictEqual(devices[0].id, &#x27;xxx&#x27;);\nassert.strictEqual(devices[0].model, &#x27;Gen4K&#x27;);\nassert.strictEqual(devices[0].modelName, &#x27;Apple TV 4K&#x27;);\nassert.strictEqual(devices[0].os, &#x27;TvOS&#x27;);\nassert.strictEqual(devices[0].version, &#x27;15.5.1&#x27;);\nassert.deepStrictEqual(devices[0].services, [\n    {\n        protocol: NodePyATVProtocol.mrp,\n        port: 49152\n    },\n    {\n        protocol: NodePyATVProtocol.airplay,\n        port: 7000\n    }\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6887e013-b7f4-4808-add2-c75ce4580623&quot;,&quot;parentUUID&quot;:&quot;3bb7a3cb-ad23-4acf-8d56-9571788f7b54&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for unicast scans&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work for unicast scans&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const devices = await NodePyATVInstance.find({\n    spawn: createFakeSpawn(cp =&gt; {\n        // Example output from @maxileith\n        // https://github.com/sebbo2002/node-pyatv/issues/324#issue-2360854902\n        cp.stdout(`{\&quot;result\&quot;: \&quot;failure\&quot;, \&quot;datetime\&quot;: \&quot;2024-05-18T16:20:18.103087-06:00\&quot;, \&quot;error\&quot;: \&quot;Task exception was never retrieved\&quot;, \&quot;exception\&quot;: \&quot;[Errno 113] Connect call failed (&#x27;10.0.0.232&#x27;, 32498)\&quot;, \&quot;stacktrace\&quot;: \&quot;Traceback (most recent call last):\\\\n  File \\\\\&quot;/var/lib/homebridge/appletv-enhanced/.venv/lib/python3.11/site-packages/pyatv/support/knock.py\\\\\&quot;, line 28, in _async_knock\\\\n    _, writer = await asyncio.wait_for(\\\\n                ^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/tasks.py\\\\\&quot;, line 479, in wait_for\\\\n    return fut.result()\\\\n           ^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/streams.py\\\\\&quot;, line 48, in open_connection\\\\n    transport, _ = await loop.create_connection(\\\\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1085, in create_connection\\\\n    raise exceptions[0]\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1069, in create_connection\\\\n    sock = await self._connect_sock(\\\\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 973, in _connect_sock\\\\n    await self.sock_connect(sock, address)\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 634, in sock_connect\\\\n    return await fut\\\\n           ^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 674, in _sock_connect_cb\\\\n    raise OSError(err, f&#x27;Connect call failed {address}&#x27;)\\\\nOSError: [Errno 113] Connect call failed (&#x27;10.0.0.232&#x27;, 32498)\\\\n\&quot;}\n{\&quot;result\&quot;: \&quot;failure\&quot;, \&quot;datetime\&quot;: \&quot;2024-05-18T16:20:18.114744-06:00\&quot;, \&quot;error\&quot;: \&quot;Task exception was never retrieved\&quot;, \&quot;exception\&quot;: \&quot;[Errno 113] Connect call failed (&#x27;10.0.0.229&#x27;, 32498)\&quot;, \&quot;stacktrace\&quot;: \&quot;Traceback (most recent call last):\\\\n  File \\\\\&quot;/var/lib/homebridge/appletv-enhanced/.venv/lib/python3.11/site-packages/pyatv/support/knock.py\\\\\&quot;, line 28, in _async_knock\\\\n    _, writer = await asyncio.wait_for(\\\\n                ^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/tasks.py\\\\\&quot;, line 479, in wait_for\\\\n    return fut.result()\\\\n           ^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/streams.py\\\\\&quot;, line 48, in open_connection\\\\n    transport, _ = await loop.create_connection(\\\\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1085, in create_connection\\\\n    raise exceptions[0]\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1069, in create_connection\\\\n    sock = await self._connect_sock(\\\\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 973, in _connect_sock\\\\n    await self.sock_connect(sock, address)\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 634, in sock_connect\\\\n    return await fut\\\\n           ^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 674, in _sock_connect_cb\\\\n    raise OSError(err, f&#x27;Connect call failed {address}&#x27;)\\\\nOSError: [Errno 113] Connect call failed (&#x27;10.0.0.229&#x27;, 32498)\\\\n\&quot;}\n{\&quot;result\&quot;: \&quot;success\&quot;, \&quot;datetime\&quot;: \&quot;2024-05-18T16:20:20.042648-06:00\&quot;, \&quot;devices\&quot;: [{\&quot;name\&quot;: \&quot;Living Room\&quot;, \&quot;address\&quot;: \&quot;10.0.0.30\&quot;, \&quot;identifier\&quot;: \&quot;37323C0E-99E6-4CC3-A006-1ED5368FFF8C\&quot;, \&quot;all_identifiers\&quot;: [\&quot;86B730B2-5189-4B6A-BCAA-CDDB18F05FA8\&quot;, \&quot;C8:D0:83:E9:D0:49\&quot;, \&quot;37323C0E-99E6-4CC3-A006-1ED5368FFF8C\&quot;, \&quot;C8D083E9D049\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;C8:D0:83:E9:D0:49\&quot;, \&quot;model\&quot;: \&quot;Gen4K\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4K\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.5\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49154}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}, {\&quot;name\&quot;: \&quot;Kitchen\&quot;, \&quot;address\&quot;: \&quot;10.0.0.79\&quot;, \&quot;identifier\&quot;: \&quot;45B6A67A-9FAD-497D-95EF-7FC5ECB3371C\&quot;, \&quot;all_identifiers\&quot;: [\&quot;B163C908-000F-4983-BDC7-BEFD76887EF5\&quot;, \&quot;C8:69:CD:63:2A:11\&quot;, \&quot;45B6A67A-9FAD-497D-95EF-7FC5ECB3371C\&quot;, \&quot;C869CD632A11\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;C8:69:CD:63:2A:11\&quot;, \&quot;model\&quot;: \&quot;Gen4\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.4\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49157}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}, {\&quot;name\&quot;: \&quot;Bedroom\&quot;, \&quot;address\&quot;: \&quot;10.0.0.20\&quot;, \&quot;identifier\&quot;: \&quot;CA55DA36-ADEF-4DBC-A0B3-BA68B0C53E40\&quot;, \&quot;all_identifiers\&quot;: [\&quot;08:66:98:BC:37:1F\&quot;, \&quot;108F35A0-FF21-4884-96C2-145AAAB1B4C4\&quot;, \&quot;CA55DA36-ADEF-4DBC-A0B3-BA68B0C53E40\&quot;, \&quot;086698BC371F\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;08:66:98:BC:37:1F\&quot;, \&quot;model\&quot;: \&quot;Gen4\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.4\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49154}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}, {\&quot;name\&quot;: \&quot;Basement\&quot;, \&quot;address\&quot;: \&quot;10.0.0.156\&quot;, \&quot;identifier\&quot;: \&quot;C02B27DB-2AF3-43E7-8EF7-885E1E9AB3B4\&quot;, \&quot;all_identifiers\&quot;: [\&quot;8BDB6773-479F-4C01-A185-29FF5516F2C2\&quot;, \&quot;D0:03:4B:4C:2A:2E\&quot;, \&quot;C02B27DB-2AF3-43E7-8EF7-885E1E9AB3B4\&quot;, \&quot;D0034B4C2A2E\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;D0:03:4B:4C:2A:2E\&quot;, \&quot;model\&quot;: \&quot;Gen4\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.4\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49154}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}]}`).code(1).end();\n    })\n});\nassert.strictEqual(devices.length, 4);\nassert.strictEqual(devices[0].name, &#x27;Living Room&#x27;);\nassert.strictEqual(devices[0].host, &#x27;10.0.0.30&#x27;);\nassert.strictEqual(devices[0].id, &#x27;37323C0E-99E6-4CC3-A006-1ED5368FFF8C&#x27;);\nassert.strictEqual(devices[1].name, &#x27;Kitchen&#x27;);\nassert.strictEqual(devices[1].host, &#x27;10.0.0.79&#x27;);\nassert.strictEqual(devices[1].id, &#x27;45B6A67A-9FAD-497D-95EF-7FC5ECB3371C&#x27;);\nassert.strictEqual(devices[2].name, &#x27;Bedroom&#x27;);\nassert.strictEqual(devices[2].host, &#x27;10.0.0.20&#x27;);\nassert.strictEqual(devices[2].id, &#x27;CA55DA36-ADEF-4DBC-A0B3-BA68B0C53E40&#x27;);\nassert.strictEqual(devices[3].name, &#x27;Basement&#x27;);\nassert.strictEqual(devices[3].host, &#x27;10.0.0.156&#x27;);\nassert.strictEqual(devices[3].id, &#x27;C02B27DB-2AF3-43E7-8EF7-885E1E9AB3B4&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1b802ebf-4a79-4de9-ae5c-9142e314a381&quot;,&quot;parentUUID&quot;:&quot;3bb7a3cb-ad23-4acf-8d56-9571788f7b54&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for unicast scans with returnDevicesAndErrors = true&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work for unicast scans with returnDevicesAndErrors = true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await NodePyATVInstance.find({\n    spawn: createFakeSpawn(cp =&gt; {\n        // Example output from @maxileith\n        // https://github.com/sebbo2002/node-pyatv/issues/324#issue-2360854902\n        cp.stdout(`{\&quot;result\&quot;: \&quot;failure\&quot;, \&quot;datetime\&quot;: \&quot;2024-05-18T16:20:18.103087-06:00\&quot;, \&quot;error\&quot;: \&quot;Task exception was never retrieved\&quot;, \&quot;exception\&quot;: \&quot;[Errno 113] Connect call failed (&#x27;10.0.0.232&#x27;, 32498)\&quot;, \&quot;stacktrace\&quot;: \&quot;Traceback (most recent call last):\\\\n  File \\\\\&quot;/var/lib/homebridge/appletv-enhanced/.venv/lib/python3.11/site-packages/pyatv/support/knock.py\\\\\&quot;, line 28, in _async_knock\\\\n    _, writer = await asyncio.wait_for(\\\\n                ^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/tasks.py\\\\\&quot;, line 479, in wait_for\\\\n    return fut.result()\\\\n           ^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/streams.py\\\\\&quot;, line 48, in open_connection\\\\n    transport, _ = await loop.create_connection(\\\\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1085, in create_connection\\\\n    raise exceptions[0]\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1069, in create_connection\\\\n    sock = await self._connect_sock(\\\\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 973, in _connect_sock\\\\n    await self.sock_connect(sock, address)\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 634, in sock_connect\\\\n    return await fut\\\\n           ^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 674, in _sock_connect_cb\\\\n    raise OSError(err, f&#x27;Connect call failed {address}&#x27;)\\\\nOSError: [Errno 113] Connect call failed (&#x27;10.0.0.232&#x27;, 32498)\\\\n\&quot;}\n{\&quot;result\&quot;: \&quot;failure\&quot;, \&quot;datetime\&quot;: \&quot;2024-05-18T16:20:18.114744-06:00\&quot;, \&quot;error\&quot;: \&quot;Task exception was never retrieved\&quot;, \&quot;exception\&quot;: \&quot;[Errno 113] Connect call failed (&#x27;10.0.0.229&#x27;, 32498)\&quot;, \&quot;stacktrace\&quot;: \&quot;Traceback (most recent call last):\\\\n  File \\\\\&quot;/var/lib/homebridge/appletv-enhanced/.venv/lib/python3.11/site-packages/pyatv/support/knock.py\\\\\&quot;, line 28, in _async_knock\\\\n    _, writer = await asyncio.wait_for(\\\\n                ^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/tasks.py\\\\\&quot;, line 479, in wait_for\\\\n    return fut.result()\\\\n           ^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/streams.py\\\\\&quot;, line 48, in open_connection\\\\n    transport, _ = await loop.create_connection(\\\\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1085, in create_connection\\\\n    raise exceptions[0]\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1069, in create_connection\\\\n    sock = await self._connect_sock(\\\\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 973, in _connect_sock\\\\n    await self.sock_connect(sock, address)\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 634, in sock_connect\\\\n    return await fut\\\\n           ^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 674, in _sock_connect_cb\\\\n    raise OSError(err, f&#x27;Connect call failed {address}&#x27;)\\\\nOSError: [Errno 113] Connect call failed (&#x27;10.0.0.229&#x27;, 32498)\\\\n\&quot;}\n{\&quot;result\&quot;: \&quot;success\&quot;, \&quot;datetime\&quot;: \&quot;2024-05-18T16:20:20.042648-06:00\&quot;, \&quot;devices\&quot;: [{\&quot;name\&quot;: \&quot;Living Room\&quot;, \&quot;address\&quot;: \&quot;10.0.0.30\&quot;, \&quot;identifier\&quot;: \&quot;37323C0E-99E6-4CC3-A006-1ED5368FFF8C\&quot;, \&quot;all_identifiers\&quot;: [\&quot;86B730B2-5189-4B6A-BCAA-CDDB18F05FA8\&quot;, \&quot;C8:D0:83:E9:D0:49\&quot;, \&quot;37323C0E-99E6-4CC3-A006-1ED5368FFF8C\&quot;, \&quot;C8D083E9D049\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;C8:D0:83:E9:D0:49\&quot;, \&quot;model\&quot;: \&quot;Gen4K\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4K\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.5\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49154}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}, {\&quot;name\&quot;: \&quot;Kitchen\&quot;, \&quot;address\&quot;: \&quot;10.0.0.79\&quot;, \&quot;identifier\&quot;: \&quot;45B6A67A-9FAD-497D-95EF-7FC5ECB3371C\&quot;, \&quot;all_identifiers\&quot;: [\&quot;B163C908-000F-4983-BDC7-BEFD76887EF5\&quot;, \&quot;C8:69:CD:63:2A:11\&quot;, \&quot;45B6A67A-9FAD-497D-95EF-7FC5ECB3371C\&quot;, \&quot;C869CD632A11\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;C8:69:CD:63:2A:11\&quot;, \&quot;model\&quot;: \&quot;Gen4\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.4\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49157}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}, {\&quot;name\&quot;: \&quot;Bedroom\&quot;, \&quot;address\&quot;: \&quot;10.0.0.20\&quot;, \&quot;identifier\&quot;: \&quot;CA55DA36-ADEF-4DBC-A0B3-BA68B0C53E40\&quot;, \&quot;all_identifiers\&quot;: [\&quot;08:66:98:BC:37:1F\&quot;, \&quot;108F35A0-FF21-4884-96C2-145AAAB1B4C4\&quot;, \&quot;CA55DA36-ADEF-4DBC-A0B3-BA68B0C53E40\&quot;, \&quot;086698BC371F\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;08:66:98:BC:37:1F\&quot;, \&quot;model\&quot;: \&quot;Gen4\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.4\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49154}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}, {\&quot;name\&quot;: \&quot;Basement\&quot;, \&quot;address\&quot;: \&quot;10.0.0.156\&quot;, \&quot;identifier\&quot;: \&quot;C02B27DB-2AF3-43E7-8EF7-885E1E9AB3B4\&quot;, \&quot;all_identifiers\&quot;: [\&quot;8BDB6773-479F-4C01-A185-29FF5516F2C2\&quot;, \&quot;D0:03:4B:4C:2A:2E\&quot;, \&quot;C02B27DB-2AF3-43E7-8EF7-885E1E9AB3B4\&quot;, \&quot;D0034B4C2A2E\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;D0:03:4B:4C:2A:2E\&quot;, \&quot;model\&quot;: \&quot;Gen4\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.4\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49154}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}]}`).code(1).end();\n    })\n}, true);\nassert.strictEqual(response.devices.length, 4);\nassert.strictEqual(response.errors.length, 2);\nassert.strictEqual(response.devices[0].name, &#x27;Living Room&#x27;);\nassert.strictEqual(response.devices[0].host, &#x27;10.0.0.30&#x27;);\nassert.strictEqual(response.devices[0].id, &#x27;37323C0E-99E6-4CC3-A006-1ED5368FFF8C&#x27;);\nassert.strictEqual(response.devices[1].name, &#x27;Kitchen&#x27;);\nassert.strictEqual(response.devices[1].host, &#x27;10.0.0.79&#x27;);\nassert.strictEqual(response.devices[1].id, &#x27;45B6A67A-9FAD-497D-95EF-7FC5ECB3371C&#x27;);\nassert.strictEqual(response.devices[2].name, &#x27;Bedroom&#x27;);\nassert.strictEqual(response.devices[2].host, &#x27;10.0.0.20&#x27;);\nassert.strictEqual(response.devices[2].id, &#x27;CA55DA36-ADEF-4DBC-A0B3-BA68B0C53E40&#x27;);\nassert.strictEqual(response.devices[3].name, &#x27;Basement&#x27;);\nassert.strictEqual(response.devices[3].host, &#x27;10.0.0.156&#x27;);\nassert.strictEqual(response.devices[3].id, &#x27;C02B27DB-2AF3-43E7-8EF7-885E1E9AB3B4&#x27;);\nassert.strictEqual(response.errors[0].exception, &#x27;[Errno 113] Connect call failed (\\&#x27;10.0.0.232\\&#x27;, 32498)&#x27;);\nassert.strictEqual(response.errors[1].exception, &#x27;[Errno 113] Connect call failed (\\&#x27;10.0.0.229\\&#x27;, 32498)&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8aba824e-45e3-45ae-a3a2-045eaba21881&quot;,&quot;parentUUID&quot;:&quot;3bb7a3cb-ad23-4acf-8d56-9571788f7b54&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f1c1cac8-4b39-4d1d-8e0a-3d2ec5af1cc2&quot;,&quot;3a01326d-ba7b-4494-86de-308d713ff2de&quot;,&quot;4afe7749-ff52-4262-9795-2ed98ed4d3a6&quot;,&quot;4fde255d-9129-448f-bd1a-746a89bfb44b&quot;,&quot;ae417bf8-f155-48cb-bae4-35265af2f54e&quot;,&quot;b1c3f64c-c78e-4d8c-ab6f-c6b1717fb8bf&quot;,&quot;10b542cf-6437-4992-8570-2e60d1eae971&quot;,&quot;86611c0b-3f05-477d-ade1-d21c1490cfeb&quot;,&quot;bdc9cfcc-014b-4756-bcff-612fc573e925&quot;,&quot;6887e013-b7f4-4808-add2-c75ce4580623&quot;,&quot;1b802ebf-4a79-4de9-ae5c-9142e314a381&quot;,&quot;8aba824e-45e3-45ae-a3a2-045eaba21881&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5444,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7e3d343a-3f06-43d7-a2d2-b2065899403c&quot;,&quot;title&quot;:&quot;static device()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should pass options to constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static device() should pass options to constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = NodePyATVInstance.device({ host: &#x27;192.168.178.6&#x27;, name: &#x27;My Testdevice&#x27; });\nassert.strictEqual(device.host, &#x27;192.168.178.6&#x27;);\nassert.strictEqual(device.name, &#x27;My Testdevice&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3f859600-2eb9-4b94-b8be-1438c71485e8&quot;,&quot;parentUUID&quot;:&quot;7e3d343a-3f06-43d7-a2d2-b2065899403c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3f859600-2eb9-4b94-b8be-1438c71485e8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1554b077-9f3c-4eb7-89ac-52ce0807400d&quot;,&quot;title&quot;:&quot;version()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance version() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const i = new NodePyATVInstance({ atvremotePath: &#x27;test&#x27; });\nawait i.version({\n    spawn: createFakeSpawn(cp =&gt; {\n        assert.strictEqual(cp.cmd(), &#x27;test&#x27;);\n        cp.code(1).end();\n    })\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;de2513b9-edd9-403a-b186-cf428c68644d&quot;,&quot;parentUUID&quot;:&quot;1554b077-9f3c-4eb7-89ac-52ce0807400d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;de2513b9-edd9-403a-b186-cf428c68644d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6caa10a5-d84c-4927-bf04-22e111a2e8df&quot;,&quot;title&quot;:&quot;check()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance check() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const i = new NodePyATVInstance({ atvremotePath: &#x27;test&#x27; });\nawait assert.rejects(async () =&gt; {\n    await i.check({\n        spawn: createFakeSpawn(cp =&gt; {\n            assert.strictEqual(cp.cmd(), &#x27;test&#x27;);\n            cp.error(new Error(&#x27;spawn atvremote ENOENT&#x27;)).code(1).end();\n        })\n    });\n}, /Unable to find pyatv. Is it installed?/);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4199bee1-97eb-48bb-acb0-b980931ba0ab&quot;,&quot;parentUUID&quot;:&quot;6caa10a5-d84c-4927-bf04-22e111a2e8df&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4199bee1-97eb-48bb-acb0-b980931ba0ab&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d9fdd847-f598-4081-aaab-d4c64df84224&quot;,&quot;title&quot;:&quot;find()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance find() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const i = new NodePyATVInstance({ atvscriptPath: &#x27;test&#x27; });\nawait i.find({\n    spawn: createFakeSpawn(cp =&gt; {\n        assert.strictEqual(cp.cmd(), &#x27;test&#x27;);\n        cp.stdout({\n            &#x27;result&#x27;: &#x27;success&#x27;,\n            &#x27;datetime&#x27;: &#x27;2020-11-06T20:47:30.840022+01:00&#x27;,\n            &#x27;devices&#x27;: []\n        }).end();\n    })\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4a74c502-33d8-4f56-b1da-5fd55937e8b4&quot;,&quot;parentUUID&quot;:&quot;d9fdd847-f598-4081-aaab-d4c64df84224&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4a74c502-33d8-4f56-b1da-5fd55937e8b4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;48b32cab-d9b3-4147-b0da-e487f42dcbcf&quot;,&quot;title&quot;:&quot;device()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance device() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const i = new NodePyATVInstance({ debug: true });\nconst d = i.device({ name: &#x27;My Testdevice&#x27;, host: &#x27;192.168.178.2&#x27; });\nassert.deepStrictEqual(d.debug, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;31a9d0ee-e70c-4fb1-b8a4-8538afb80f6f&quot;,&quot;parentUUID&quot;:&quot;48b32cab-d9b3-4147-b0da-e487f42dcbcf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;31a9d0ee-e70c-4fb1-b8a4-8538afb80f6f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a39deda1-f2da-4bcf-b4db-368dc53765f7&quot;,&quot;title&quot;:&quot;Type Exports&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Type NodePyATVProtocol should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVProtocol should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVProtocol);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;181272fc-a887-4870-adf1-e7d7557664d1&quot;,&quot;parentUUID&quot;:&quot;a39deda1-f2da-4bcf-b4db-368dc53765f7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVMediaType should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVMediaType should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVMediaType);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e3a27592-b130-4cf5-b8d1-619c838a25a9&quot;,&quot;parentUUID&quot;:&quot;a39deda1-f2da-4bcf-b4db-368dc53765f7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVDeviceEvent should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVDeviceEvent should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVDeviceEvent);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;02ab2884-40b4-41d7-85c2-0ed33bb74064&quot;,&quot;parentUUID&quot;:&quot;a39deda1-f2da-4bcf-b4db-368dc53765f7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVDeviceState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVDeviceState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVDeviceState);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;43243a9d-1cb4-4d26-afd9-f1c347580244&quot;,&quot;parentUUID&quot;:&quot;a39deda1-f2da-4bcf-b4db-368dc53765f7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVRepeatState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVRepeatState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVRepeatState);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ab9a46b4-33e4-4019-bf1e-7d47de09092c&quot;,&quot;parentUUID&quot;:&quot;a39deda1-f2da-4bcf-b4db-368dc53765f7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVShuffleState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVShuffleState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVShuffleState);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2de0c6ed-5320-4cde-b25d-1369a0160047&quot;,&quot;parentUUID&quot;:&quot;a39deda1-f2da-4bcf-b4db-368dc53765f7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVKeys should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVKeys should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVKeys);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9b10a1ca-212d-48e8-ac6d-8dbd635dede9&quot;,&quot;parentUUID&quot;:&quot;a39deda1-f2da-4bcf-b4db-368dc53765f7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVInstanceOptions should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVInstanceOptions should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVListenerState);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6a5b97dd-621a-4d75-a93d-091606d9de61&quot;,&quot;parentUUID&quot;:&quot;a39deda1-f2da-4bcf-b4db-368dc53765f7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVPowerState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVPowerState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVPowerState);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8add4432-ac70-4085-aa9d-417a6089cbb4&quot;,&quot;parentUUID&quot;:&quot;a39deda1-f2da-4bcf-b4db-368dc53765f7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;181272fc-a887-4870-adf1-e7d7557664d1&quot;,&quot;e3a27592-b130-4cf5-b8d1-619c838a25a9&quot;,&quot;02ab2884-40b4-41d7-85c2-0ed33bb74064&quot;,&quot;43243a9d-1cb4-4d26-afd9-f1c347580244&quot;,&quot;ab9a46b4-33e4-4019-bf1e-7d47de09092c&quot;,&quot;2de0c6ed-5320-4cde-b25d-1369a0160047&quot;,&quot;9b10a1ca-212d-48e8-ac6d-8dbd635dede9&quot;,&quot;6a5b97dd-621a-4d75-a93d-091606d9de61&quot;,&quot;8add4432-ac70-4085-aa9d-417a6089cbb4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4b846b0f-aec0-4443-a2ff-75ae85c8d982&quot;,&quot;title&quot;:&quot;Tools&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c6024b56-69a5-4bc9-b5a6-2b86b739c954&quot;,&quot;title&quot;:&quot;addRequestId() / removeRequestId()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a string&quot;,&quot;fullTitle&quot;:&quot;Tools addRequestId() / removeRequestId() should return a string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = addRequestId();\nassert.strictEqual(typeof id, &#x27;string&#x27;);\nremoveRequestId(id);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e0d8ecdc-bb98-4fde-b672-d55e6f66392e&quot;,&quot;parentUUID&quot;:&quot;c6024b56-69a5-4bc9-b5a6-2b86b739c954&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work if given id is not in index&quot;,&quot;fullTitle&quot;:&quot;Tools addRequestId() / removeRequestId() should work if given id is not in index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;removeRequestId(&#x27;FOO&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;874a23e2-3d9f-4503-9834-646fcb93fe56&quot;,&quot;parentUUID&quot;:&quot;c6024b56-69a5-4bc9-b5a6-2b86b739c954&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e0d8ecdc-bb98-4fde-b672-d55e6f66392e&quot;,&quot;874a23e2-3d9f-4503-9834-646fcb93fe56&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8fe3ec59-fc8b-4d22-afce-7385eba6a8bf&quot;,&quot;title&quot;:&quot;debug()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work without any options&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work without any options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(&#x27;TEST&#x27;, &#x27;Hello World.&#x27;, {});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ab6a942f-7eb1-4c7f-bf4e-0e58882954d8&quot;,&quot;parentUUID&quot;:&quot;8fe3ec59-fc8b-4d22-afce-7385eba6a8bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with default logger&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with default logger&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(&#x27;TEST&#x27;, &#x27;Hello World.&#x27;, { debug: true });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dd9fede9-1b44-4514-a7a2-6f8fbeaae684&quot;,&quot;parentUUID&quot;:&quot;8fe3ec59-fc8b-4d22-afce-7385eba6a8bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with custom logger&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with custom logger&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(&#x27;TEST&#x27;, &#x27;Hello World.&#x27;, {\n    debug: function (msg) {\n        assert.strictEqual(this, null);\n        assert.ok(msg.includes(&#x27;Hello World&#x27;));\n    }\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f3bf71fd-2038-4b94-a2c7-6b3e6870c4f0&quot;,&quot;parentUUID&quot;:&quot;8fe3ec59-fc8b-4d22-afce-7385eba6a8bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with colors disabled&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with colors disabled&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(&#x27;TEST&#x27;, &#x27;Hello World.&#x27;, { noColors: true });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9db1d6cb-9c37-4159-b365-a59b558251bb&quot;,&quot;parentUUID&quot;:&quot;8fe3ec59-fc8b-4d22-afce-7385eba6a8bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with custom logger and colors disabled&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with custom logger and colors disabled&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(&#x27;TEST&#x27;, &#x27;Hello World.&#x27;, {\n    noColors: true,\n    debug: function (msg) {\n        assert.strictEqual(this, null);\n        assert.strictEqual(msg, &#x27;[node-pyatv][TEST] Hello World.&#x27;);\n    }\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3fdf6b44-627c-4666-ae55-169e9c1f142a&quot;,&quot;parentUUID&quot;:&quot;8fe3ec59-fc8b-4d22-afce-7385eba6a8bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ab6a942f-7eb1-4c7f-bf4e-0e58882954d8&quot;,&quot;dd9fede9-1b44-4514-a7a2-6f8fbeaae684&quot;,&quot;f3bf71fd-2038-4b94-a2c7-6b3e6870c4f0&quot;,&quot;9db1d6cb-9c37-4159-b365-a59b558251bb&quot;,&quot;3fdf6b44-627c-4666-ae55-169e9c1f142a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6207a938-37a1-488b-9c3d-ba8b6d745310&quot;,&quot;title&quot;:&quot;getExecutable()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should handle atvremotePath if set&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle atvremotePath if set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = getExecutable(NodePyATVExecutableType.atvremote, {\n    atvremotePath: &#x27;/tmp/1&#x27;,\n    atvscriptPath: &#x27;/tmp/2&#x27;\n});\nassert.strictEqual(result, &#x27;/tmp/1&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bf38bb87-9d7b-40af-8871-c0b8394b5f6f&quot;,&quot;parentUUID&quot;:&quot;6207a938-37a1-488b-9c3d-ba8b6d745310&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle atvscriptPath if set&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle atvscriptPath if set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = getExecutable(NodePyATVExecutableType.atvscript, {\n    atvremotePath: &#x27;/tmp/1&#x27;,\n    atvscriptPath: &#x27;/tmp/2&#x27;\n});\nassert.strictEqual(result, &#x27;/tmp/2&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c44db406-0119-49c2-b2f4-ccad85e9554e&quot;,&quot;parentUUID&quot;:&quot;6207a938-37a1-488b-9c3d-ba8b6d745310&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle default for atvremote&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle default for atvremote&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = getExecutable(NodePyATVExecutableType.atvremote, {\n    atvscriptPath: &#x27;/tmp&#x27;\n});\nassert.strictEqual(result, &#x27;atvremote&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d6830ee6-c793-4745-be31-08dcc8cdb7c5&quot;,&quot;parentUUID&quot;:&quot;6207a938-37a1-488b-9c3d-ba8b6d745310&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle default for atvscript&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle default for atvscript&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = getExecutable(NodePyATVExecutableType.atvscript, {\n    atvremotePath: &#x27;/tmp&#x27;\n});\nassert.strictEqual(result, &#x27;atvscript&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0c27f15c-af45-4024-b5fa-e49b5200f5d1&quot;,&quot;parentUUID&quot;:&quot;6207a938-37a1-488b-9c3d-ba8b6d745310&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bf38bb87-9d7b-40af-8871-c0b8394b5f6f&quot;,&quot;c44db406-0119-49c2-b2f4-ccad85e9554e&quot;,&quot;d6830ee6-c793-4745-be31-08dcc8cdb7c5&quot;,&quot;0c27f15c-af45-4024-b5fa-e49b5200f5d1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;93f07494-ee02-4ba9-ae13-944a5e7e7479&quot;,&quot;title&quot;:&quot;getParameters()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;empty case&quot;,&quot;fullTitle&quot;:&quot;Tools getParameters() empty case&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = await getParameters();\nassert.deepEqual(result, []);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;826e02c8-b3f2-4789-90cf-6ae591f40641&quot;,&quot;parentUUID&quot;:&quot;93f07494-ee02-4ba9-ae13-944a5e7e7479&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;easy case&quot;,&quot;fullTitle&quot;:&quot;Tools getParameters() easy case&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = await getParameters({\n    host: &#x27;192.168.178.2&#x27;\n});\nassert.deepEqual(result, [&#x27;-s&#x27;, &#x27;192.168.178.2&#x27;]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1e65eec1-0f35-4ba6-8ac5-a5eff046f23d&quot;,&quot;parentUUID&quot;:&quot;93f07494-ee02-4ba9-ae13-944a5e7e7479&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;full case&quot;,&quot;fullTitle&quot;:&quot;Tools getParameters() full case&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = await getParameters({\n    hosts: [&#x27;192.168.178.2&#x27;, &#x27;192.168.178.3&#x27;],\n    id: &#x27;****&#x27;,\n    protocol: NodePyATVProtocol.mrp,\n    dmapCredentials: &#x27;****&#x27;,\n    mrpCredentials: &#x27;****&#x27;,\n    airplayCredentials: &#x27;****&#x27;,\n    companionCredentials: &#x27;1234&#x27;,\n    raopCredentials: &#x27;::foo:&#x27;\n});\nassert.deepEqual(result, [\n    &#x27;-s&#x27;, &#x27;192.168.178.2,192.168.178.3&#x27;,\n    &#x27;-i&#x27;, &#x27;****&#x27;,\n    &#x27;--protocol&#x27;, &#x27;mrp&#x27;,\n    &#x27;--dmap-credentials&#x27;, &#x27;****&#x27;,\n    &#x27;--mrp-credentials&#x27;, &#x27;****&#x27;,\n    &#x27;--airplay-credentials&#x27;, &#x27;****&#x27;,\n    &#x27;--companion-credentials&#x27;, &#x27;1234&#x27;,\n    &#x27;--raop-credentials&#x27;, &#x27;::foo:&#x27;\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b558bc3a-c684-43a6-b282-0f47d51bebf8&quot;,&quot;parentUUID&quot;:&quot;93f07494-ee02-4ba9-ae13-944a5e7e7479&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;826e02c8-b3f2-4789-90cf-6ae591f40641&quot;,&quot;1e65eec1-0f35-4ba6-8ac5-a5eff046f23d&quot;,&quot;b558bc3a-c684-43a6-b282-0f47d51bebf8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d7d732a0-5426-4699-a96f-f2e7fdf2d7ee&quot;,&quot;title&quot;:&quot;parseState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work with empty data&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should work with empty data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input = {};\nconst result = parseState(input, &#x27;&#x27;, {});\nassert.deepStrictEqual(result, {\n    dateTime: null,\n    hash: null,\n    mediaType: null,\n    deviceState: null,\n    title: null,\n    artist: null,\n    album: null,\n    genre: null,\n    totalTime: null,\n    position: null,\n    shuffle: null,\n    repeat: null,\n    app: null,\n    appId: null,\n    powerState: null,\n    focusState: null,\n    volume: null,\n    outputDevices: null\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f977324e-24c6-448a-9db0-9f63ca4eaa3a&quot;,&quot;parentUUID&quot;:&quot;d7d732a0-5426-4699-a96f-f2e7fdf2d7ee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work without data&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should work without data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// @ts-ignore\nconst result = parseState(null, &#x27;&#x27;, {});\nassert.deepStrictEqual(result, {\n    dateTime: null,\n    hash: null,\n    mediaType: null,\n    deviceState: null,\n    title: null,\n    artist: null,\n    album: null,\n    genre: null,\n    totalTime: null,\n    position: null,\n    shuffle: null,\n    repeat: null,\n    app: null,\n    appId: null,\n    powerState: null,\n    focusState: null,\n    volume: null,\n    outputDevices: null\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;accf0118-e358-442f-8f31-8944a8b1eaf7&quot;,&quot;parentUUID&quot;:&quot;d7d732a0-5426-4699-a96f-f2e7fdf2d7ee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with example data&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should work with example data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input = {\n    result: &#x27;success&#x27;,\n    datetime: &#x27;2020-11-07T22:38:43.608030+01:00&#x27;,\n    hash: &#x27;100e0ab6-6ff5-4199-9c04-a7107ff78712&#x27;,\n    media_type: &#x27;video&#x27;,\n    device_state: &#x27;playing&#x27;,\n    title: &#x27;Solo: A Star Wars Story&#x27;,\n    artist: null,\n    album: null,\n    genre: null,\n    total_time: 8097,\n    position: 27,\n    shuffle: &#x27;off&#x27;,\n    repeat: &#x27;off&#x27;,\n    app: &#x27;Disney+&#x27;,\n    app_id: &#x27;com.disney.disneyplus&#x27;,\n    power_state: null,\n    focus_state: null,\n    volume: null,\n    output_devices: null\n};\nconst result = parseState(input, &#x27;&#x27;, {});\nassert.deepStrictEqual(result, {\n    dateTime: new Date(&#x27;2020-11-07T22:38:43.608030+01:00&#x27;),\n    hash: &#x27;100e0ab6-6ff5-4199-9c04-a7107ff78712&#x27;,\n    mediaType: NodePyATVMediaType.video,\n    deviceState: NodePyATVDeviceState.playing,\n    title: &#x27;Solo: A Star Wars Story&#x27;,\n    artist: null,\n    album: null,\n    genre: null,\n    totalTime: 8097,\n    position: 27,\n    shuffle: NodePyATVShuffleState.off,\n    repeat: NodePyATVRepeatState.off,\n    app: &#x27;Disney+&#x27;,\n    appId: &#x27;com.disney.disneyplus&#x27;,\n    powerState: null,\n    focusState: null,\n    volume: null,\n    outputDevices: null\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39099e38-3270-4b01-8dd6-dd8405888013&quot;,&quot;parentUUID&quot;:&quot;d7d732a0-5426-4699-a96f-f2e7fdf2d7ee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw an error for pyatv exceptions&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should throw an error for pyatv exceptions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input = {\n    result: &#x27;failure&#x27;,\n    datetime: &#x27;2021-11-24T21:13:36.424576+03:00&#x27;,\n    exception: &#x27;invalid credentials: 321&#x27;,\n    stacktrace: &#x27;Traceback (most recent call last):\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\&quot;, line 302, in appstart\\n    print(args.output(await _handle_command(args, abort_sem, loop)), flush=True)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\&quot;, line 196, in _handle_command\\n    atv = await connect(config, loop, protocol=Protocol.MRP)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/__init__.py\&quot;, line 96, in connect\\n    for setup_data in proto_methods.setup(\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\&quot;, line 192, in setup\\n    stream = AirPlayStream(config, service)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\&quot;, line 79, in __init__\\n    self._credentials: HapCredentials = parse_credentials(self.service.credentials)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/auth/hap_pairing.py\&quot;, line 139, in parse_credentials\\n    raise exceptions.InvalidCredentialsError(\&quot;invalid credentials: \&quot; + detail_string)\\npyatv.exceptions.InvalidCredentialsError: invalid credentials: 321\\n&#x27;\n};\nassert.throws(() =&gt; {\n    parseState(input, &#x27;&#x27;, {});\n}, /Got pyatv Error: invalid credentials: 321/);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bc0b1246-9df0-4148-9e83-f53761ba2af2&quot;,&quot;parentUUID&quot;:&quot;d7d732a0-5426-4699-a96f-f2e7fdf2d7ee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should ignore date if it&#x27;s an invalid date&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should ignore date if it&#x27;s an invalid date&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input = { datetime: &#x27;today&#x27; };\nconst result = parseState(input, &#x27;&#x27;, {});\nassert.deepStrictEqual(result, {\n    dateTime: null,\n    hash: null,\n    mediaType: null,\n    deviceState: null,\n    title: null,\n    artist: null,\n    album: null,\n    genre: null,\n    totalTime: null,\n    position: null,\n    shuffle: null,\n    repeat: null,\n    app: null,\n    appId: null,\n    powerState: null,\n    focusState: null,\n    volume: null,\n    outputDevices: null\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ee027e24-d20e-4ca2-931e-a3637a5c0396&quot;,&quot;parentUUID&quot;:&quot;d7d732a0-5426-4699-a96f-f2e7fdf2d7ee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should ignore data if unsupported type&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should ignore data if unsupported type&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input = {\n    result: &#x27;success&#x27;,\n    datetime: true,\n    hash: 1337,\n    media_type: false,\n    device_state: 43,\n    title: undefined,\n    artist: 90,\n    album: Infinity,\n    genre: Math.PI,\n    total_time: &#x27;23min&#x27;,\n    position: &#x27;0:30.123&#x27;,\n    shuffle: false,\n    repeat: true,\n    app: 0,\n    app_id: 891645381647289,\n    power_state: null,\n    focus_state: null,\n    volume: null,\n    output_devices: null\n};\nconst result = parseState(input, &#x27;&#x27;, {});\nassert.deepStrictEqual(result, {\n    dateTime: null,\n    hash: null,\n    mediaType: null,\n    deviceState: null,\n    title: null,\n    artist: null,\n    album: null,\n    genre: null,\n    totalTime: null,\n    position: null,\n    shuffle: null,\n    repeat: null,\n    app: null,\n    appId: null,\n    powerState: null,\n    focusState: null,\n    volume: null,\n    outputDevices: null\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;88055c75-5e9b-4b6f-b8d1-235a89dbf4db&quot;,&quot;parentUUID&quot;:&quot;d7d732a0-5426-4699-a96f-f2e7fdf2d7ee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should ignore enums with unsupported valid&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should ignore enums with unsupported valid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input = {\n    media_type: &#x27;3d-experience&#x27;,\n    device_state: &#x27;initiating&#x27;,\n    shuffle: &#x27;everything&#x27;,\n    repeat: &#x27;nothing&#x27;\n};\nconst result = parseState(input, &#x27;&#x27;, {});\nassert.deepStrictEqual(result, {\n    dateTime: null,\n    hash: null,\n    mediaType: null,\n    deviceState: null,\n    title: null,\n    artist: null,\n    album: null,\n    genre: null,\n    totalTime: null,\n    position: null,\n    shuffle: null,\n    repeat: null,\n    app: null,\n    appId: null,\n    powerState: null,\n    focusState: null,\n    volume: null,\n    outputDevices: null\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c3736dd1-76db-4575-b022-e738026c4941&quot;,&quot;parentUUID&quot;:&quot;d7d732a0-5426-4699-a96f-f2e7fdf2d7ee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f977324e-24c6-448a-9db0-9f63ca4eaa3a&quot;,&quot;accf0118-e358-442f-8f31-8944a8b1eaf7&quot;,&quot;39099e38-3270-4b01-8dd6-dd8405888013&quot;,&quot;bc0b1246-9df0-4148-9e83-f53761ba2af2&quot;,&quot;ee027e24-d20e-4ca2-931e-a3637a5c0396&quot;,&quot;88055c75-5e9b-4b6f-b8d1-235a89dbf4db&quot;,&quot;c3736dd1-76db-4575-b022-e738026c4941&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;10.7.0&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;node-pyatv&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report/assets&quot;,&quot;jsonFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/mochawesome-report/mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>