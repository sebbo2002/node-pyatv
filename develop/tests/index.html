<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:93,&quot;tests&quot;:162,&quot;passes&quot;:160,&quot;pending&quot;:2,&quot;failures&quot;:0,&quot;start&quot;:&quot;2024-01-30T18:20:14.670Z&quot;,&quot;end&quot;:&quot;2024-01-30T18:20:26.430Z&quot;,&quot;duration&quot;:11760,&quot;testsRegistered&quot;:162,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:1.2345679012345678,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;5730430b-a599-4bc4-881e-750a46f59cb0&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;828f3261-cd1d-4ef7-8cff-954188d636fe&quot;,&quot;title&quot;:&quot;NodePyATVDeviceEvent&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5f58a7ff-6112-4395-a26b-860525c56f80&quot;,&quot;title&quot;:&quot;get key()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get key() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event = new NodePyATVDeviceEvent({\n    key: &#x27;genre&#x27;,\n    old: &#x27;Jazz&#x27;,\n    new: &#x27;Rock&#x27;,\n    device: new NodePyATVDevice({\n        host: &#x27;192.168.178.2&#x27;,\n        name: &#x27;My Testinstance&#x27;\n    })\n});\nassert.strictEqual(event.key, &#x27;genre&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ef6982c3-b8c5-4e7f-b483-7aeb1ceadd3a&quot;,&quot;parentUUID&quot;:&quot;5f58a7ff-6112-4395-a26b-860525c56f80&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ef6982c3-b8c5-4e7f-b483-7aeb1ceadd3a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;76f43eee-725f-4438-8fed-8210a83eb268&quot;,&quot;title&quot;:&quot;get oldValue()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get oldValue() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event = new NodePyATVDeviceEvent({\n    key: &#x27;genre&#x27;,\n    old: &#x27;Jazz&#x27;,\n    new: &#x27;Rock&#x27;,\n    device: new NodePyATVDevice({\n        host: &#x27;192.168.178.2&#x27;,\n        name: &#x27;My Testinstance&#x27;\n    })\n});\nassert.strictEqual(event.oldValue, &#x27;Jazz&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;06942fb2-9aa5-460b-a1b3-c305e1a0c197&quot;,&quot;parentUUID&quot;:&quot;76f43eee-725f-4438-8fed-8210a83eb268&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;06942fb2-9aa5-460b-a1b3-c305e1a0c197&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;68e487ce-5091-4625-b469-ae95ef12e82c&quot;,&quot;title&quot;:&quot;get newValue()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get newValue() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event = new NodePyATVDeviceEvent({\n    key: &#x27;genre&#x27;,\n    old: &#x27;Jazz&#x27;,\n    new: &#x27;Rock&#x27;,\n    device: new NodePyATVDevice({\n        host: &#x27;192.168.178.2&#x27;,\n        name: &#x27;My Testinstance&#x27;\n    })\n});\nassert.strictEqual(event.newValue, &#x27;Rock&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;14c7c3d1-9d46-4462-844f-62d0050ab4ce&quot;,&quot;parentUUID&quot;:&quot;68e487ce-5091-4625-b469-ae95ef12e82c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;14c7c3d1-9d46-4462-844f-62d0050ab4ce&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0dc2c320-b5c7-46e7-a7f2-53b391f8f2fc&quot;,&quot;title&quot;:&quot;get value()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get value() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event = new NodePyATVDeviceEvent({\n    key: &#x27;genre&#x27;,\n    old: &#x27;Jazz&#x27;,\n    new: &#x27;Rock&#x27;,\n    device: new NodePyATVDevice({\n        host: &#x27;192.168.178.2&#x27;,\n        name: &#x27;My Testinstance&#x27;\n    })\n});\nassert.strictEqual(event.value, &#x27;Rock&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6928882c-a4a7-4874-bbdb-1cf012e98261&quot;,&quot;parentUUID&quot;:&quot;0dc2c320-b5c7-46e7-a7f2-53b391f8f2fc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6928882c-a4a7-4874-bbdb-1cf012e98261&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fa5567fa-8336-44fc-b5aa-8b0e9152823d&quot;,&quot;title&quot;:&quot;get device()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get device() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    host: &#x27;192.168.178.2&#x27;,\n    name: &#x27;My Testinstance&#x27;\n});\nconst event = new NodePyATVDeviceEvent({\n    key: &#x27;genre&#x27;,\n    old: &#x27;Jazz&#x27;,\n    new: &#x27;Rock&#x27;,\n    device\n});\nassert.deepEqual(event.device, device);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fc03d7b2-950e-4f46-8268-25d0df7b3578&quot;,&quot;parentUUID&quot;:&quot;fa5567fa-8336-44fc-b5aa-8b0e9152823d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fc03d7b2-950e-4f46-8268-25d0df7b3578&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d5050082-570d-4f67-b00d-201f668a4a05&quot;,&quot;title&quot;:&quot;NodePyATVDeviceEvents&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;65698026-28a1-426c-adcb-13d28bda43d1&quot;,&quot;title&quot;:&quot;applyStateAndEmitEvents()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should emit update:key event&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit update:key event&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                title: &#x27;My Movie&#x27;\n            });\n        })\n    });\n    yield new Promise(cb =&gt; {\n        device.once(&#x27;update:title&#x27;, event =&gt; {\n            assert.ok(event instanceof NodePyATVDeviceEvent);\n            assert.strictEqual(event.key, &#x27;title&#x27;);\n            assert.strictEqual(event.oldValue, null);\n            assert.strictEqual(event.newValue, &#x27;My Movie&#x27;);\n            assert.strictEqual(event.value, &#x27;My Movie&#x27;);\n            assert.deepStrictEqual(event.device, device);\n            cb(undefined);\n        });\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;da404073-6bbb-4764-b7b8-160ea1e2b912&quot;,&quot;parentUUID&quot;:&quot;65698026-28a1-426c-adcb-13d28bda43d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit update event&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit update event&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                title: &#x27;My Movie&#x27;\n            });\n        })\n    });\n    yield new Promise(cb =&gt; {\n        device.once(&#x27;update&#x27;, event =&gt; {\n            assert.ok(event instanceof NodePyATVDeviceEvent);\n            assert.strictEqual(event.key, &#x27;title&#x27;);\n            assert.strictEqual(event.oldValue, null);\n            assert.strictEqual(event.newValue, &#x27;My Movie&#x27;);\n            assert.strictEqual(event.value, &#x27;My Movie&#x27;);\n            assert.deepStrictEqual(event.device, device);\n            cb(undefined);\n        });\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;77c6e428-de18-4d20-9b47-a775ec7025b5&quot;,&quot;parentUUID&quot;:&quot;65698026-28a1-426c-adcb-13d28bda43d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit update:key event before update&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit update:key event before update&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                title: &#x27;My Movie&#x27;\n            });\n        })\n    });\n    const sort = [];\n    yield Promise.race([\n        new Promise(cb =&gt; {\n            device.once(&#x27;update&#x27;, () =&gt; {\n                sort.push(&#x27;update&#x27;);\n                cb(undefined);\n            });\n        }),\n        new Promise(cb =&gt; {\n            device.once(&#x27;update:title&#x27;, () =&gt; {\n                sort.push(&#x27;update:title&#x27;);\n                cb(undefined);\n            });\n        })\n    ]);\n    assert.deepStrictEqual(sort, [&#x27;update:title&#x27;, &#x27;update&#x27;]);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f8587f63-2630-4190-aa4b-a49364724542&quot;,&quot;parentUUID&quot;:&quot;65698026-28a1-426c-adcb-13d28bda43d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error events on failures&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit error events on failures&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;failure&#x27;,\n                datetime: &#x27;2021-11-24T21:13:36.424576+03:00&#x27;,\n                exception: &#x27;invalid credentials: 321&#x27;,\n                stacktrace: &#x27;Traceback (most recent call last):\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\\\&quot;, line 302, in appstart\\n    print(args.output(await _handle_command(args, abort_sem, loop)), flush=True)\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\\\&quot;, line 196, in _handle_command\\n    atv = await connect(config, loop, protocol=Protocol.MRP)\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/__init__.py\\\&quot;, line 96, in connect\\n    for setup_data in proto_methods.setup(\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\\\&quot;, line 192, in setup\\n    stream = AirPlayStream(config, service)\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\\\&quot;, line 79, in __init__\\n    self._credentials: HapCredentials = parse_credentials(self.service.credentials)\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/auth/hap_pairing.py\\\&quot;, line 139, in parse_credentials\\n    raise exceptions.InvalidCredentialsError(\\\&quot;invalid credentials: \\\&quot; + detail_string)\\npyatv.exceptions.InvalidCredentialsError: invalid credentials: 321\\n&#x27;\n            });\n        })\n    });\n    yield new Promise(cb =&gt; {\n        device.once(&#x27;error&#x27;, error =&gt; {\n            assert.ok(error instanceof Error);\n            assert.ok(error.toString().includes(&#x27;invalid credentials: 321&#x27;));\n            cb(undefined);\n        });\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;569e835d-2527-480a-887a-66ba9075ba46&quot;,&quot;parentUUID&quot;:&quot;65698026-28a1-426c-adcb-13d28bda43d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not emit an update if new value is same as old one&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should not emit an update if new value is same as old one&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    let spawnCounter = 0;\n    let eventCounter = 0;\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            if (spawnCounter === 0) {\n                cp.onStdIn(() =&gt; cp.end());\n            }\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                title: &#x27;My Movie&#x27;\n            });\n            spawnCounter++;\n            if (spawnCounter &gt;= 2) {\n                cp.end();\n            }\n        })\n    });\n    const listener = () =&gt; {\n        eventCounter++;\n    };\n    device.on(&#x27;update&#x27;, listener);\n    yield new Promise(cb =&gt; setTimeout(cb, 0));\n    yield device.getState();\n    device.off(&#x27;update&#x27;, listener);\n    assert.strictEqual(spawnCounter, 2);\n    assert.strictEqual(eventCounter, 1);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0c0937e5-3fde-40cb-bc11-c94811ba18c9&quot;,&quot;parentUUID&quot;:&quot;65698026-28a1-426c-adcb-13d28bda43d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error event if event listener throws an exception&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit error event if event listener throws an exception&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                title: &#x27;My Movie&#x27;\n            });\n        })\n    });\n    let callCounter = 0;\n    const error = new Error(&#x27;This is an error. Be nice.&#x27;);\n    device.once(&#x27;error&#x27;, err =&gt; {\n        assert.strictEqual(err, error);\n        callCounter++;\n    });\n    const listener = () =&gt; {\n        throw error;\n    };\n    device.on(&#x27;update&#x27;, listener);\n    yield new Promise(cb =&gt; setTimeout(cb, 0));\n    device.off(&#x27;update&#x27;, listener);\n    assert.strictEqual(callCounter, 1);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8eec4459-0952-4df3-a659-9fa2b4729483&quot;,&quot;parentUUID&quot;:&quot;65698026-28a1-426c-adcb-13d28bda43d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should also work with powerState&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should also work with powerState&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                datetime: new Date().toJSON(),\n                power_state: &#x27;off&#x27;\n            });\n        })\n    });\n    yield new Promise(cb =&gt; {\n        device.once(&#x27;update:powerState&#x27;, event =&gt; {\n            assert.ok(event instanceof NodePyATVDeviceEvent);\n            assert.strictEqual(event.key, &#x27;powerState&#x27;);\n            assert.strictEqual(event.oldValue, null);\n            assert.strictEqual(event.newValue, &#x27;off&#x27;);\n            assert.strictEqual(event.newValue, NodePyATVPowerState.off);\n            assert.strictEqual(event.value, &#x27;off&#x27;);\n            assert.strictEqual(event.value, NodePyATVPowerState.off);\n            assert.deepStrictEqual(event.device, device);\n            cb(undefined);\n        });\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;18d16526-c4a1-4175-96f2-aa164d4e5592&quot;,&quot;parentUUID&quot;:&quot;65698026-28a1-426c-adcb-13d28bda43d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only one event for powerState changes&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should only one event for powerState changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                datetime: new Date().toJSON(),\n                power_state: &#x27;off&#x27;\n            });\n            cp.end();\n        })\n    });\n    let counter = 0;\n    device.on(&#x27;update&#x27;, event =&gt; {\n        assert.ok(event instanceof NodePyATVDeviceEvent);\n        assert.strictEqual(event.key, &#x27;powerState&#x27;);\n        assert.strictEqual(event.oldValue, null);\n        assert.strictEqual(event.newValue, &#x27;off&#x27;);\n        assert.strictEqual(event.newValue, NodePyATVPowerState.off);\n        assert.strictEqual(event.value, &#x27;off&#x27;);\n        assert.strictEqual(event.value, NodePyATVPowerState.off);\n        assert.deepStrictEqual(event.device, device);\n        counter++;\n    });\n    yield new Promise(cb =&gt; setTimeout(cb, 10));\n    assert.strictEqual(counter, 1);\n    device.removeAllListeners(&#x27;update&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ee259b41-727f-4456-a67d-be025124aed8&quot;,&quot;parentUUID&quot;:&quot;65698026-28a1-426c-adcb-13d28bda43d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only one event for focusState changes&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should only one event for focusState changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                datetime: new Date().toJSON(),\n                focus_state: &#x27;unfocused&#x27;\n            });\n            cp.end();\n        })\n    });\n    let counter = 0;\n    device.on(&#x27;update&#x27;, event =&gt; {\n        assert.ok(event instanceof NodePyATVDeviceEvent);\n        assert.strictEqual(event.key, &#x27;focusState&#x27;);\n        assert.strictEqual(event.oldValue, null);\n        assert.strictEqual(event.newValue, &#x27;unfocused&#x27;);\n        assert.strictEqual(event.newValue, NodePyATVFocusState.unfocused);\n        assert.strictEqual(event.value, &#x27;unfocused&#x27;);\n        assert.strictEqual(event.value, NodePyATVFocusState.unfocused);\n        assert.deepStrictEqual(event.device, device);\n        counter++;\n    });\n    yield new Promise(cb =&gt; setTimeout(cb, 10));\n    assert.strictEqual(counter, 1);\n    device.removeAllListeners(&#x27;update&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;607860f2-6ea0-469f-868e-ca697de81974&quot;,&quot;parentUUID&quot;:&quot;65698026-28a1-426c-adcb-13d28bda43d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only one event for outputDevices changes&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should only one event for outputDevices changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                datetime: new Date().toJSON(),\n                output_devices: [{\n                        name: &#x27;Living room&#x27;,\n                        identifier: &#x27;AAAAAAAA-BBBB-CCCC-DDDD-EEEEEEEEEEEE&#x27;\n                    }]\n            });\n            cp.end();\n        })\n    });\n    let counter = 0;\n    device.on(&#x27;update&#x27;, event =&gt; {\n        assert.ok(event instanceof NodePyATVDeviceEvent);\n        assert.strictEqual(event.key, &#x27;outputDevices&#x27;);\n        assert.strictEqual(event.oldValue, null);\n        assert.deepStrictEqual(event.newValue, [{\n                name: &#x27;Living room&#x27;,\n                identifier: &#x27;AAAAAAAA-BBBB-CCCC-DDDD-EEEEEEEEEEEE&#x27;\n            }]);\n        assert.deepStrictEqual(event.value, [{\n                name: &#x27;Living room&#x27;,\n                identifier: &#x27;AAAAAAAA-BBBB-CCCC-DDDD-EEEEEEEEEEEE&#x27;\n            }]);\n        assert.deepStrictEqual(event.device, device);\n        counter++;\n    });\n    yield new Promise(cb =&gt; setTimeout(cb, 10));\n    assert.strictEqual(counter, 1);\n    device.removeAllListeners(&#x27;update&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a15f8e89-4782-4b7d-944e-8d1e4d6986cf&quot;,&quot;parentUUID&quot;:&quot;65698026-28a1-426c-adcb-13d28bda43d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only one event for volume changes&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should only one event for volume changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                datetime: new Date().toJSON(),\n                volume: 20.0\n            });\n            cp.end();\n        })\n    });\n    let counter = 0;\n    device.on(&#x27;update&#x27;, event =&gt; {\n        assert.ok(event instanceof NodePyATVDeviceEvent);\n        assert.strictEqual(event.key, &#x27;volume&#x27;);\n        assert.strictEqual(event.oldValue, null);\n        assert.strictEqual(event.newValue, 20);\n        assert.strictEqual(event.value, 20);\n        assert.deepStrictEqual(event.device, device);\n        counter++;\n    });\n    yield new Promise(cb =&gt; setTimeout(cb, 10));\n    assert.strictEqual(counter, 1);\n    device.removeAllListeners(&#x27;update&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;640a3a36-1a7e-41f8-b932-9fa02d8d186f&quot;,&quot;parentUUID&quot;:&quot;65698026-28a1-426c-adcb-13d28bda43d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not trigger any events for newly added fields&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should not trigger any events for newly added fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                datetime: new Date().toJSON(),\n                foo: &#x27;bar&#x27;\n            });\n            cp.end();\n        })\n    });\n    device.on(&#x27;update&#x27;, event =&gt; {\n        assert.fail(`Got an update event for a new field: ${event}`);\n    });\n    yield new Promise(cb =&gt; setTimeout(cb, 10));\n    device.removeAllListeners(&#x27;update&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;03a11beb-ae8f-4175-b410-665cc28dd49b&quot;,&quot;parentUUID&quot;:&quot;65698026-28a1-426c-adcb-13d28bda43d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;da404073-6bbb-4764-b7b8-160ea1e2b912&quot;,&quot;77c6e428-de18-4d20-9b47-a775ec7025b5&quot;,&quot;f8587f63-2630-4190-aa4b-a49364724542&quot;,&quot;569e835d-2527-480a-887a-66ba9075ba46&quot;,&quot;0c0937e5-3fde-40cb-bc11-c94811ba18c9&quot;,&quot;8eec4459-0952-4df3-a659-9fa2b4729483&quot;,&quot;18d16526-c4a1-4175-96f2-aa164d4e5592&quot;,&quot;ee259b41-727f-4456-a67d-be025124aed8&quot;,&quot;607860f2-6ea0-469f-868e-ca697de81974&quot;,&quot;a15f8e89-4782-4b7d-944e-8d1e4d6986cf&quot;,&quot;640a3a36-1a7e-41f8-b932-9fa02d8d186f&quot;,&quot;03a11beb-ae8f-4175-b410-665cc28dd49b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:64,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;697ee28b-0861-4580-a767-3257baedacdd&quot;,&quot;title&quot;:&quot;start|stopListening()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should emit error if spawn fails&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should emit error if spawn fails&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const error = new Error();\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.error(error).end();\n        })\n    });\n    const listener = () =&gt; {\n        // empty listener\n    };\n    device.on(&#x27;update&#x27;, listener);\n    yield new Promise(cb =&gt; {\n        device.once(&#x27;error&#x27;, err =&gt; {\n            assert.strictEqual(err, error);\n            cb(undefined);\n        });\n    });\n    device.off(&#x27;update&#x27;, listener);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6ad53dde-001d-4455-9f06-4fdd23ac46fc&quot;,&quot;parentUUID&quot;:&quot;697ee28b-0861-4580-a767-3257baedacdd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error on stderr data&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should emit error on stderr data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.stderr(&#x27;Hello World!&#x27;).end();\n        })\n    });\n    const listener = () =&gt; {\n        // empty listener\n    };\n    device.on(&#x27;update&#x27;, listener);\n    yield new Promise(cb =&gt; {\n        device.once(&#x27;error&#x27;, err =&gt; {\n            assert.ok(err instanceof Error);\n            assert.ok(err.toString().includes(&#x27;Got stderr output from pyatv: Hello World!&#x27;));\n            cb(undefined);\n        });\n    });\n    device.off(&#x27;update&#x27;, listener);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;64d462ac-ef1c-4d39-ab25-cc77678696c2&quot;,&quot;parentUUID&quot;:&quot;697ee28b-0861-4580-a767-3257baedacdd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error if stdout is not valid json&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should emit error if stdout is not valid json&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.stdout(&#x27;#&#x27;).end();\n        })\n    });\n    const listener = () =&gt; {\n        // empty listener\n    };\n    device.on(&#x27;update&#x27;, listener);\n    yield new Promise(cb =&gt; {\n        device.once(&#x27;error&#x27;, err =&gt; {\n            assert.ok(err instanceof Error);\n            assert.ok(err.toString().includes(&#x27;Unable to parse stdout json: SyntaxError&#x27;));\n            cb(undefined);\n        });\n    });\n    device.off(&#x27;update&#x27;, listener);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0470a7be-bfc9-4192-85f5-ba721e041c21&quot;,&quot;parentUUID&quot;:&quot;697ee28b-0861-4580-a767-3257baedacdd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should restart the process if it gets killed&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should restart the process if it gets killed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;pending&quot;,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c43843e-8ff0-43f6-a04a-677339f05d97&quot;,&quot;parentUUID&quot;:&quot;697ee28b-0861-4580-a767-3257baedacdd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6ad53dde-001d-4455-9f06-4fdd23ac46fc&quot;,&quot;64d462ac-ef1c-4d39-ab25-cc77678696c2&quot;,&quot;0470a7be-bfc9-4192-85f5-ba721e041c21&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;8c43843e-8ff0-43f6-a04a-677339f05d97&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d8a95981-0ec2-42e9-8551-d385b38621be&quot;,&quot;title&quot;:&quot;addListener() / removeAllListeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work without any exceptions&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents addListener() / removeAllListeners() should work without any exceptions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                title: &#x27;My Movie&#x27;\n            });\n        })\n    });\n    const listener = () =&gt; {\n        // empty listener\n    };\n    device.addListener(&#x27;update&#x27;, listener);\n    device.removeAllListeners(&#x27;update&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8147b463-23a0-4976-b9a3-11458e48f62e&quot;,&quot;parentUUID&quot;:&quot;d8a95981-0ec2-42e9-8551-d385b38621be&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8147b463-23a0-4976-b9a3-11458e48f62e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c201b72f-59dc-4cf6-94f4-5543da1b7817&quot;,&quot;title&quot;:&quot;emit()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents emit() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n    })\n});\nconst event = new NodePyATVDeviceEvent({\n    key: &#x27;dateTime&#x27;,\n    old: &#x27;foo&#x27;,\n    new: &#x27;bar&#x27;,\n    device\n});\nlet executions = 0;\ndevice.once(&#x27;test&#x27;, (e) =&gt; {\n    executions++;\n    assert.strictEqual(e, event);\n    assert.strictEqual(executions, 1);\n    done();\n});\ndevice.emit(&#x27;test&#x27;, event);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f0628edb-f78a-43c2-ab08-d95ed1a8f0a2&quot;,&quot;parentUUID&quot;:&quot;c201b72f-59dc-4cf6-94f4-5543da1b7817&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f0628edb-f78a-43c2-ab08-d95ed1a8f0a2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7242ebda-b3b8-4126-96c8-ddc12b0d9598&quot;,&quot;title&quot;:&quot;eventNames()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents eventNames() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n    })\n});\nconst listener = () =&gt; {\n    // ignore\n};\ndevice.on(&#x27;test&#x27;, listener);\nassert.deepStrictEqual(device.eventNames(), [&#x27;test&#x27;]);\ndevice.off(&#x27;test&#x27;, listener);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;76cd25f8-efb1-4efe-98c9-5547cf9445ef&quot;,&quot;parentUUID&quot;:&quot;7242ebda-b3b8-4126-96c8-ddc12b0d9598&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;76cd25f8-efb1-4efe-98c9-5547cf9445ef&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;71990046-171e-4e5f-9e57-29c998dc49f3&quot;,&quot;title&quot;:&quot;getMaxListeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents getMaxListeners() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n    })\n});\nconst result = device.getMaxListeners();\nassert.ok(typeof result, &#x27;number&#x27;);\nassert.ok(result &gt;= 10);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;21643ea9-c79a-4149-a012-6a53276c264a&quot;,&quot;parentUUID&quot;:&quot;71990046-171e-4e5f-9e57-29c998dc49f3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;21643ea9-c79a-4149-a012-6a53276c264a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6179635b-d2f9-45f4-ba9d-2a4a8117452c&quot;,&quot;title&quot;:&quot;listenerCount()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents listenerCount() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n    })\n});\nconst listener = () =&gt; {\n    // ignore\n};\nassert.deepStrictEqual(device.listenerCount(&#x27;test&#x27;), 0);\ndevice.on(&#x27;test&#x27;, listener);\nassert.deepStrictEqual(device.listenerCount(&#x27;test&#x27;), 1);\ndevice.off(&#x27;test&#x27;, listener);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ee7a6c0b-a5a3-4857-aa3e-81a7e35dfd35&quot;,&quot;parentUUID&quot;:&quot;6179635b-d2f9-45f4-ba9d-2a4a8117452c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ee7a6c0b-a5a3-4857-aa3e-81a7e35dfd35&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;92d81b8a-2d04-434a-a986-e484932f5b7f&quot;,&quot;title&quot;:&quot;listeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents listeners() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n    })\n});\nconst listener = () =&gt; {\n    // ignore\n};\nassert.deepStrictEqual(device.listeners(&#x27;test&#x27;).length, 0);\ndevice.on(&#x27;test&#x27;, listener);\nassert.deepStrictEqual(device.listeners(&#x27;test&#x27;).length, 1);\nassert.deepStrictEqual(device.listeners(&#x27;test&#x27;)[0], listener);\ndevice.off(&#x27;test&#x27;, listener);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;583770f3-f999-43c7-9608-48a34425f5d8&quot;,&quot;parentUUID&quot;:&quot;92d81b8a-2d04-434a-a986-e484932f5b7f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;583770f3-f999-43c7-9608-48a34425f5d8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8fe31c5d-b13a-49a6-9e54-8c099cb946ab&quot;,&quot;title&quot;:&quot;prependListener()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents prependListener() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n        cp.stdout({\n            result: &#x27;success&#x27;,\n            title: &#x27;My Movie&#x27;\n        });\n    })\n});\nconst listener = () =&gt; {\n    device.removeAllListeners(&#x27;update&#x27;);\n    done();\n};\ndevice.prependListener(&#x27;update&#x27;, listener);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;be077c2e-3c31-4327-add5-164329ad5455&quot;,&quot;parentUUID&quot;:&quot;8fe31c5d-b13a-49a6-9e54-8c099cb946ab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;be077c2e-3c31-4327-add5-164329ad5455&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;dbe1e08e-066c-4a86-8178-e9aa4ef3dd89&quot;,&quot;title&quot;:&quot;prependOnceListener()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents prependOnceListener() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n        cp.stdout({\n            result: &#x27;success&#x27;,\n            title: &#x27;My Movie&#x27;\n        });\n    })\n});\ndevice.prependOnceListener(&#x27;update&#x27;, () =&gt; done());&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c8f2670-1bf0-4110-8ebf-4efdb73877d8&quot;,&quot;parentUUID&quot;:&quot;dbe1e08e-066c-4a86-8178-e9aa4ef3dd89&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8c8f2670-1bf0-4110-8ebf-4efdb73877d8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ef6c6fd8-83df-4fa4-a585-544153f1ec7f&quot;,&quot;title&quot;:&quot;rawListeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents rawListeners() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: createFakeSpawn(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n    })\n});\nconst listener = () =&gt; {\n    // ignore\n};\nassert.deepStrictEqual(device.rawListeners(&#x27;test&#x27;).length, 0);\ndevice.on(&#x27;test&#x27;, listener);\nassert.deepStrictEqual(device.rawListeners(&#x27;test&#x27;).length, 1);\nassert.deepStrictEqual(device.rawListeners(&#x27;test&#x27;)[0], listener);\ndevice.off(&#x27;test&#x27;, listener);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a09f8930-b4b5-4563-b744-8efecb58afca&quot;,&quot;parentUUID&quot;:&quot;ef6c6fd8-83df-4fa4-a585-544153f1ec7f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a09f8930-b4b5-4563-b744-8efecb58afca&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3be769ed-fd55-45c5-9bb1-5aa201652c50&quot;,&quot;title&quot;:&quot;removeListener()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work without any exceptions&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents removeListener() should work without any exceptions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                title: &#x27;My Movie&#x27;\n            });\n        })\n    });\n    const listener = () =&gt; {\n        // empty listener\n    };\n    device.addListener(&#x27;update&#x27;, listener);\n    assert.deepStrictEqual(device.listenerCount(&#x27;update&#x27;), 1);\n    device.removeListener(&#x27;update&#x27;, listener);\n    assert.deepStrictEqual(device.listenerCount(&#x27;update&#x27;), 0);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;99a474ae-55e5-4fa1-bbc2-dc82bfc5b092&quot;,&quot;parentUUID&quot;:&quot;3be769ed-fd55-45c5-9bb1-5aa201652c50&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;99a474ae-55e5-4fa1-bbc2-dc82bfc5b092&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;204b060e-6ccb-4cd5-b5b2-7c9643dd182e&quot;,&quot;title&quot;:&quot;NodePyATVDevice&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;8c805690-7b37-4d22-80f1-2153256b3ca3&quot;,&quot;title&quot;:&quot;get name()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the name&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get name() should return the name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;\n});\nassert.strictEqual(device.name, &#x27;My Testdevice&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9400085c-6a42-4c9c-af0d-f83d958005a3&quot;,&quot;parentUUID&quot;:&quot;8c805690-7b37-4d22-80f1-2153256b3ca3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9400085c-6a42-4c9c-af0d-f83d958005a3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;98c83eb7-5a68-4f79-b344-2ee0f3b50ec4&quot;,&quot;title&quot;:&quot;get host()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the host&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get host() should return the host&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;\n});\nassert.strictEqual(device.host, &#x27;192.168.178.2&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;86e6fe04-f42b-4be0-b32b-170d8500ca28&quot;,&quot;parentUUID&quot;:&quot;98c83eb7-5a68-4f79-b344-2ee0f3b50ec4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;86e6fe04-f42b-4be0-b32b-170d8500ca28&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;43e5b080-a671-45f1-a2d3-5b9b2759c9fe&quot;,&quot;title&quot;:&quot;get id()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the id&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get id() should return the id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    id: &#x27;*****&#x27;\n});\nassert.strictEqual(device.id, &#x27;*****&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fdbff5e4-cc75-48b5-8d90-f0765e2f34cd&quot;,&quot;parentUUID&quot;:&quot;43e5b080-a671-45f1-a2d3-5b9b2759c9fe&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fdbff5e4-cc75-48b5-8d90-f0765e2f34cd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;260eeec9-f4df-4d6a-8c5a-55c4234e6ad2&quot;,&quot;title&quot;:&quot;get allIDs()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return all the IDs&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get allIDs() should return all the IDs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    id: &#x27;*****&#x27;,\n    allIDs: [\n        &#x27;some_id_1&#x27;,\n        &#x27;some_id_2&#x27;,\n        &#x27;some_id_3&#x27;,\n    ]\n});\nassert.deepStrictEqual(device.allIDs, [\n    &#x27;some_id_1&#x27;,\n    &#x27;some_id_2&#x27;,\n    &#x27;some_id_3&#x27;,\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cc3090e5-936a-4e70-8eef-b8503018a96c&quot;,&quot;parentUUID&quot;:&quot;260eeec9-f4df-4d6a-8c5a-55c4234e6ad2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cc3090e5-936a-4e70-8eef-b8503018a96c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d9550525-b7d2-4b11-a03e-0edea137db11&quot;,&quot;title&quot;:&quot;get protocol()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the protocol&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get protocol() should return the protocol&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    protocol: NodePyATVProtocol.airplay\n});\nassert.strictEqual(device.protocol, NodePyATVProtocol.airplay);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;70d906d4-68c6-4b41-8870-449873a13f16&quot;,&quot;parentUUID&quot;:&quot;d9550525-b7d2-4b11-a03e-0edea137db11&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;70d906d4-68c6-4b41-8870-449873a13f16&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;284b2486-d094-4e7e-8581-ee7dd3f7a2c1&quot;,&quot;title&quot;:&quot;get mac()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the mac&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get mac() should return the mac&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    mac: &#x27;AA:BB:CC:DD:EE:FF&#x27;\n});\nassert.strictEqual(device.mac, &#x27;AA:BB:CC:DD:EE:FF&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0a7d5db9-33ab-4a8d-b70f-1110ab07d3dd&quot;,&quot;parentUUID&quot;:&quot;284b2486-d094-4e7e-8581-ee7dd3f7a2c1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0a7d5db9-33ab-4a8d-b70f-1110ab07d3dd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c0c9293d-1c9c-4c17-a850-929dc0a7846f&quot;,&quot;title&quot;:&quot;get model()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the model if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get model() should return the model if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;,\n    id: &#x27;xxx&#x27;,\n    model: &#x27;Gen4K&#x27;\n});\nassert.strictEqual(device.model, &#x27;Gen4K&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;10556b2c-2e48-4709-8d80-df3eed93b5d0&quot;,&quot;parentUUID&quot;:&quot;c0c9293d-1c9c-4c17-a850-929dc0a7846f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get model() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;\n});\nassert.strictEqual(device.model, undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;64323c51-47d7-44e8-b384-89fcf58dec2f&quot;,&quot;parentUUID&quot;:&quot;c0c9293d-1c9c-4c17-a850-929dc0a7846f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;10556b2c-2e48-4709-8d80-df3eed93b5d0&quot;,&quot;64323c51-47d7-44e8-b384-89fcf58dec2f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;27042801-0fe9-46f2-8809-2854558a07d8&quot;,&quot;title&quot;:&quot;get modelName()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the model name if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get modelName() should return the model name if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;,\n    id: &#x27;xxx&#x27;,\n    modelName: &#x27;Apple TV 4K&#x27;\n});\nassert.strictEqual(device.modelName, &#x27;Apple TV 4K&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;71cdd6af-7adb-40a2-b83c-988a43bad045&quot;,&quot;parentUUID&quot;:&quot;27042801-0fe9-46f2-8809-2854558a07d8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get modelName() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;\n});\nassert.strictEqual(device.modelName, undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;649365b0-0023-40c0-82d6-e9e9113ef1b0&quot;,&quot;parentUUID&quot;:&quot;27042801-0fe9-46f2-8809-2854558a07d8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;71cdd6af-7adb-40a2-b83c-988a43bad045&quot;,&quot;649365b0-0023-40c0-82d6-e9e9113ef1b0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ebbc0f30-50c4-42cc-b996-d8af8990312b&quot;,&quot;title&quot;:&quot;get os()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the operating system if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get os() should return the operating system if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;,\n    id: &#x27;xxx&#x27;,\n    os: &#x27;TvOS&#x27;\n});\nassert.strictEqual(device.os, &#x27;TvOS&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;548b90c8-fe7f-422d-b0f2-c5f6c7823043&quot;,&quot;parentUUID&quot;:&quot;ebbc0f30-50c4-42cc-b996-d8af8990312b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get os() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;\n});\nassert.strictEqual(device.os, undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e1392622-f04d-4741-beca-0adcc3a98f62&quot;,&quot;parentUUID&quot;:&quot;ebbc0f30-50c4-42cc-b996-d8af8990312b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;548b90c8-fe7f-422d-b0f2-c5f6c7823043&quot;,&quot;e1392622-f04d-4741-beca-0adcc3a98f62&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2662b7ae-fa10-4c73-86b0-ebf8b313fa6b&quot;,&quot;title&quot;:&quot;get version()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the version if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get version() should return the version if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;,\n    id: &#x27;xxx&#x27;,\n    version: &#x27;15.5.1&#x27;\n});\nassert.strictEqual(device.version, &#x27;15.5.1&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e5c812d6-44a7-4b9a-aa14-6c8459a3401f&quot;,&quot;parentUUID&quot;:&quot;2662b7ae-fa10-4c73-86b0-ebf8b313fa6b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get version() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;\n});\nassert.strictEqual(device.version, undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;492c7ba0-bac2-4eee-8749-c144d7301a46&quot;,&quot;parentUUID&quot;:&quot;2662b7ae-fa10-4c73-86b0-ebf8b313fa6b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e5c812d6-44a7-4b9a-aa14-6c8459a3401f&quot;,&quot;492c7ba0-bac2-4eee-8749-c144d7301a46&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;96d316b7-c36b-4f08-89cf-a5233b7564fc&quot;,&quot;title&quot;:&quot;get services()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the services if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get services() should return the services if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;,\n    id: &#x27;xxx&#x27;,\n    services: [\n        {\n            protocol: NodePyATVProtocol.mrp,\n            port: 49152\n        },\n        {\n            protocol: NodePyATVProtocol.airplay,\n            port: 7000\n        }\n    ]\n});\nassert.deepStrictEqual(device.services, [\n    {\n        protocol: &#x27;mrp&#x27;,\n        port: 49152\n    },\n    {\n        protocol: &#x27;airplay&#x27;,\n        port: 7000\n    }\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9260ccc8-764a-408b-92d3-4def7816fb8c&quot;,&quot;parentUUID&quot;:&quot;96d316b7-c36b-4f08-89cf-a5233b7564fc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get services() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;Vardagsrum&#x27;,\n    host: &#x27;10.0.10.81&#x27;\n});\nassert.strictEqual(device.services, undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;25e83100-2814-4a92-af46-690ba82a34ee&quot;,&quot;parentUUID&quot;:&quot;96d316b7-c36b-4f08-89cf-a5233b7564fc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9260ccc8-764a-408b-92d3-4def7816fb8c&quot;,&quot;25e83100-2814-4a92-af46-690ba82a34ee&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7cc9331b-f3d4-4412-8a9a-2e38e14aafa0&quot;,&quot;title&quot;:&quot;get debug()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return true if set to true&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get debug() should return true if set to true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    debug: true\n});\nassert.strictEqual(device.debug, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;51b8f5a0-bbee-40bd-afd3-8e73fa27f70a&quot;,&quot;parentUUID&quot;:&quot;7cc9331b-f3d4-4412-8a9a-2e38e14aafa0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return fn if set to custom function&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get debug() should return fn if set to custom function&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// eslint-disable-next-line @typescript-eslint/no-empty-function\nconst fn = () =&gt; {\n};\nconst device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    debug: fn\n});\nassert.strictEqual(device.debug, fn);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c1e62218-c24f-4074-8605-88d5aa492c85&quot;,&quot;parentUUID&quot;:&quot;7cc9331b-f3d4-4412-8a9a-2e38e14aafa0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return false if unset&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get debug() should return false if unset&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;\n});\nassert.strictEqual(device.debug, undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c67bb500-8f94-46ac-a35b-369a8392ce48&quot;,&quot;parentUUID&quot;:&quot;7cc9331b-f3d4-4412-8a9a-2e38e14aafa0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;51b8f5a0-bbee-40bd-afd3-8e73fa27f70a&quot;,&quot;c1e62218-c24f-4074-8605-88d5aa492c85&quot;,&quot;c67bb500-8f94-46ac-a35b-369a8392ce48&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;cea083f7-b433-43ab-bd41-cbef20e1f679&quot;,&quot;title&quot;:&quot;set debug()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work for debug = true&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;\n});\nassert.strictEqual(device.debug, undefined);\ndevice.debug = true;\nassert.strictEqual(device.debug, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dc2461ec-e267-463a-a001-4856f516861b&quot;,&quot;parentUUID&quot;:&quot;cea083f7-b433-43ab-bd41-cbef20e1f679&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for debug = undefined&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = undefined&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    debug: true\n});\nassert.strictEqual(device.debug, true);\ndevice.debug = undefined;\nassert.strictEqual(device.debug, undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;14cab24c-6ecf-4011-872e-e0808e931863&quot;,&quot;parentUUID&quot;:&quot;cea083f7-b433-43ab-bd41-cbef20e1f679&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for debug = undefined&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = undefined&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    debug: true\n});\nassert.strictEqual(device.debug, true);\ndevice.debug = undefined;\nassert.strictEqual(device.debug, undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d204a98c-0f58-447a-8128-40e228fd3dc6&quot;,&quot;parentUUID&quot;:&quot;cea083f7-b433-43ab-bd41-cbef20e1f679&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for debug = fn&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = fn&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;\n});\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nconst fn = () =&gt; {\n};\nassert.strictEqual(device.debug, undefined);\ndevice.debug = fn;\nassert.strictEqual(device.debug, fn);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;180cd7d6-f742-4e90-af85-c9e4f56233ae&quot;,&quot;parentUUID&quot;:&quot;cea083f7-b433-43ab-bd41-cbef20e1f679&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dc2461ec-e267-463a-a001-4856f516861b&quot;,&quot;14cab24c-6ecf-4011-872e-e0808e931863&quot;,&quot;d204a98c-0f58-447a-8128-40e228fd3dc6&quot;,&quot;180cd7d6-f742-4e90-af85-c9e4f56233ae&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2ca24a47-948d-4418-9e51-80c646b506cb&quot;,&quot;title&quot;:&quot;toJSON()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a object representation&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice toJSON() should return a object representation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    id: &#x27;*****&#x27;,\n    protocol: NodePyATVProtocol.airplay\n});\nassert.deepEqual(device.toJSON(), {\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    id: &#x27;*****&#x27;,\n    protocol: NodePyATVProtocol.airplay\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;22601053-d746-4c89-aa6a-cdda65eb53f0&quot;,&quot;parentUUID&quot;:&quot;2ca24a47-948d-4418-9e51-80c646b506cb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should be possible to create a new device from this&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice toJSON() should be possible to create a new device from this&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const config = {\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    id: &#x27;*****&#x27;,\n    protocol: NodePyATVProtocol.airplay\n};\nconst deviceA = new NodePyATVDevice(config);\nconst deviceB = new NodePyATVDevice(deviceA.toJSON());\nassert.deepEqual(deviceB.toJSON(), config);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fd6353a0-6317-42f2-aa9d-7bb85720b5e9&quot;,&quot;parentUUID&quot;:&quot;2ca24a47-948d-4418-9e51-80c646b506cb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;22601053-d746-4c89-aa6a-cdda65eb53f0&quot;,&quot;fd6353a0-6317-42f2-aa9d-7bb85720b5e9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f85a6dc3-7bb1-49b5-a02c-17c989eeeef0&quot;,&quot;title&quot;:&quot;toString()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice toString() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new NodePyATVDevice({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;\n});\nassert.strictEqual(device.toString(), &#x27;NodePyATVDevice(My Testdevice, 192.168.178.2)&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;13215b20-52ad-4353-856d-40f77cc80552&quot;,&quot;parentUUID&quot;:&quot;f85a6dc3-7bb1-49b5-a02c-17c989eeeef0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;13215b20-52ad-4353-856d-40f77cc80552&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;356debe8-6175-4481-b943-6c682c714d6d&quot;,&quot;title&quot;:&quot;getState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work [I]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should work [I]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;pending&quot;,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5a474161-f8f0-4eba-be8e-7e54e018816a&quot;,&quot;parentUUID&quot;:&quot;356debe8-6175-4481-b943-6c682c714d6d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                datetime: &#x27;2020-11-07T22:38:43.608030+01:00&#x27;,\n                hash: &#x27;100e0ab6-6ff5-4199-9c04-a7107ff78712&#x27;,\n                media_type: &#x27;video&#x27;,\n                device_state: &#x27;playing&#x27;,\n                title: &#x27;Solo: A Star Wars Story&#x27;,\n                artist: null,\n                album: null,\n                genre: null,\n                total_time: 8097,\n                position: 27,\n                shuffle: &#x27;off&#x27;,\n                repeat: &#x27;off&#x27;,\n                app: &#x27;Disney+&#x27;,\n                app_id: &#x27;com.disney.disneyplus&#x27;\n            });\n        })\n    });\n    const result = yield device.getState();\n    assert.deepStrictEqual(result, {\n        dateTime: new Date(&#x27;2020-11-07T22:38:43.608030+01:00&#x27;),\n        hash: &#x27;100e0ab6-6ff5-4199-9c04-a7107ff78712&#x27;,\n        mediaType: NodePyATVMediaType.video,\n        deviceState: NodePyATVDeviceState.playing,\n        focusState: null,\n        title: &#x27;Solo: A Star Wars Story&#x27;,\n        artist: null,\n        album: null,\n        genre: null,\n        totalTime: 8097,\n        volume: null,\n        position: 27,\n        shuffle: NodePyATVShuffleState.off,\n        repeat: NodePyATVRepeatState.off,\n        app: &#x27;Disney+&#x27;,\n        appId: &#x27;com.disney.disneyplus&#x27;,\n        powerState: null,\n        outputDevices: null\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;073ff09c-599d-47cb-a00b-c2cd400d359d&quot;,&quot;parentUUID&quot;:&quot;356debe8-6175-4481-b943-6c682c714d6d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should reject with error if pyatv fails&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should reject with error if pyatv fails&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;failure&#x27;,\n                datetime: &#x27;2021-11-24T21:13:36.424576+03:00&#x27;,\n                exception: &#x27;invalid credentials: 321&#x27;,\n                stacktrace: &#x27;Traceback (most recent call last):\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\\\&quot;, line 302, in appstart\\n    print(args.output(await _handle_command(args, abort_sem, loop)), flush=True)\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\\\&quot;, line 196, in _handle_command\\n    atv = await connect(config, loop, protocol=Protocol.MRP)\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/__init__.py\\\&quot;, line 96, in connect\\n    for setup_data in proto_methods.setup(\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\\\&quot;, line 192, in setup\\n    stream = AirPlayStream(config, service)\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\\\&quot;, line 79, in __init__\\n    self._credentials: HapCredentials = parse_credentials(self.service.credentials)\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/auth/hap_pairing.py\\\&quot;, line 139, in parse_credentials\\n    raise exceptions.InvalidCredentialsError(\\\&quot;invalid credentials: \\\&quot; + detail_string)\\npyatv.exceptions.InvalidCredentialsError: invalid credentials: 321\\n&#x27;\n            });\n        })\n    });\n    assert.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield device.getState();\n    }), /Got pyatv Error: invalid credentials: 321/);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9732dc7b-717e-4816-bd29-0998fb2584ab&quot;,&quot;parentUUID&quot;:&quot;356debe8-6175-4481-b943-6c682c714d6d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should cache requests for a bit&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should cache requests for a bit&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    let executions = 0;\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            executions++;\n            cp.end({\n                result: &#x27;success&#x27;,\n                datetime: new Date().toJSON(),\n                hash: &#x27;100e0ab6-6ff5-4199-9c04-a7107ff78712&#x27;,\n                media_type: &#x27;video&#x27;,\n                device_state: &#x27;playing&#x27;,\n                title: &#x27;Solo: A Star Wars Story&#x27;,\n                artist: null,\n                album: null,\n                genre: null,\n                total_time: 8097,\n                position: 27,\n                shuffle: &#x27;off&#x27;,\n                repeat: &#x27;off&#x27;,\n                app: &#x27;Disney+&#x27;,\n                app_id: &#x27;com.disney.disneyplus&#x27;\n            });\n        })\n    });\n    const firstResult = yield device.getState();\n    const secondResult = yield device.getState();\n    assert.strictEqual(firstResult.dateTime, secondResult.dateTime);\n    assert.strictEqual(executions, 1);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b3cc049e-9cf8-49cd-bac9-ed5e50853976&quot;,&quot;parentUUID&quot;:&quot;356debe8-6175-4481-b943-6c682c714d6d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update the position if cache was used&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should update the position if cache was used&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                datetime: new Date(new Date().getTime() - 1000).toJSON(),\n                hash: &#x27;100e0ab6-6ff5-4199-9c04-a7107ff78712&#x27;,\n                media_type: &#x27;video&#x27;,\n                device_state: &#x27;playing&#x27;,\n                title: &#x27;Solo: A Star Wars Story&#x27;,\n                artist: null,\n                album: null,\n                genre: null,\n                total_time: 8097,\n                position: 27,\n                shuffle: &#x27;off&#x27;,\n                repeat: &#x27;off&#x27;,\n                app: &#x27;Disney+&#x27;,\n                app_id: &#x27;com.disney.disneyplus&#x27;\n            });\n        })\n    });\n    const firstResult = yield device.getState();\n    assert.strictEqual(firstResult.position, 27);\n    const secondResult = yield device.getState();\n    assert.ok(secondResult.position);\n    assert.ok(secondResult.position &gt; 27, `Position should be &gt; 27, was ${secondResult.position}`);\n    assert.ok(secondResult.position &lt; 30, `Position should be &gt; 27, was ${secondResult.position}`);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;465effd8-3db5-4e91-bbd7-67bb7aa5654c&quot;,&quot;parentUUID&quot;:&quot;356debe8-6175-4481-b943-6c682c714d6d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;073ff09c-599d-47cb-a00b-c2cd400d359d&quot;,&quot;9732dc7b-717e-4816-bd29-0998fb2584ab&quot;,&quot;b3cc049e-9cf8-49cd-bac9-ed5e50853976&quot;,&quot;465effd8-3db5-4e91-bbd7-67bb7aa5654c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;5a474161-f8f0-4eba-be8e-7e54e018816a&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;afc260b1-8b2d-48ad-8fd4-30e026a78d7f&quot;,&quot;title&quot;:&quot;clearState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice clearState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    let executions = 0;\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            executions++;\n            cp.end({\n                result: &#x27;success&#x27;,\n                datetime: &#x27;2020-11-07T22:38:43.608030+01:00&#x27;,\n                title: &#x27;Solo: A Star Wars Story&#x27;\n            });\n        })\n    });\n    assert.deepStrictEqual(yield device.getTitle(), &#x27;Solo: A Star Wars Story&#x27;);\n    device.clearState();\n    assert.deepStrictEqual(yield device.getTitle(), &#x27;Solo: A Star Wars Story&#x27;);\n    assert.strictEqual(executions, 2);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c2239cca-d6a9-42a8-9fa9-d770ab23e026&quot;,&quot;parentUUID&quot;:&quot;afc260b1-8b2d-48ad-8fd4-30e026a78d7f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c2239cca-d6a9-42a8-9fa9-d770ab23e026&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a94075c0-bd26-48f4-bed4-20afc316fde6&quot;,&quot;title&quot;:&quot;getDateTime()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getDateTime() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                datetime: new Date().toJSON()\n            });\n        })\n    });\n    const result = yield device.getDateTime();\n    assert.ok(result instanceof Date);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2532b8a3-9cee-4d3a-96ae-02881a872b7c&quot;,&quot;parentUUID&quot;:&quot;a94075c0-bd26-48f4-bed4-20afc316fde6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2532b8a3-9cee-4d3a-96ae-02881a872b7c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a6a308ff-dfd4-44a3-ab8c-0184ae861065&quot;,&quot;title&quot;:&quot;getHash()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getHash() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                hash: &#x27;12345&#x27;\n            });\n        })\n    });\n    const result = yield device.getHash();\n    assert.strictEqual(result, &#x27;12345&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6c2280b2-b6ec-434b-ba44-805e4983ee37&quot;,&quot;parentUUID&quot;:&quot;a6a308ff-dfd4-44a3-ab8c-0184ae861065&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6c2280b2-b6ec-434b-ba44-805e4983ee37&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f7db6a5a-bd97-44b4-bd8a-fffed55ce6b0&quot;,&quot;title&quot;:&quot;getMediaType()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getMediaType() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                media_type: &#x27;video&#x27;\n            });\n        })\n    });\n    const result = yield device.getMediaType();\n    assert.deepStrictEqual(result, NodePyATVMediaType.video);\n    assert.deepStrictEqual(result, &#x27;video&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cc393799-7631-4ecb-a9a5-bcf93ccd5298&quot;,&quot;parentUUID&quot;:&quot;f7db6a5a-bd97-44b4-bd8a-fffed55ce6b0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cc393799-7631-4ecb-a9a5-bcf93ccd5298&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ad552855-12e3-4bf9-baac-d71847a1b221&quot;,&quot;title&quot;:&quot;getDeviceState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getDeviceState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                device_state: &#x27;seeking&#x27;\n            });\n        })\n    });\n    const result = yield device.getDeviceState();\n    assert.deepStrictEqual(result, NodePyATVDeviceState.seeking);\n    assert.deepStrictEqual(result, &#x27;seeking&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a6fca33a-54d1-421c-a12b-a37e14a4a8ae&quot;,&quot;parentUUID&quot;:&quot;ad552855-12e3-4bf9-baac-d71847a1b221&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a6fca33a-54d1-421c-a12b-a37e14a4a8ae&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fa91f300-689b-4edc-81a1-9e32a9944c40&quot;,&quot;title&quot;:&quot;getTitle()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getTitle() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                title: &#x27;My Movie&#x27;\n            });\n        })\n    });\n    const result = yield device.getTitle();\n    assert.strictEqual(result, &#x27;My Movie&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;36edc9b1-5eb0-41c7-98ec-46975368881d&quot;,&quot;parentUUID&quot;:&quot;fa91f300-689b-4edc-81a1-9e32a9944c40&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;36edc9b1-5eb0-41c7-98ec-46975368881d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0b2e9864-f609-4ace-b584-9d943a0d03c6&quot;,&quot;title&quot;:&quot;getArtist()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getArtist() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                artist: &#x27;My Artist&#x27;\n            });\n        })\n    });\n    const result = yield device.getArtist();\n    assert.strictEqual(result, &#x27;My Artist&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e6270c26-6923-47d5-88a9-f5fc8bcdf0e3&quot;,&quot;parentUUID&quot;:&quot;0b2e9864-f609-4ace-b584-9d943a0d03c6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e6270c26-6923-47d5-88a9-f5fc8bcdf0e3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bb3c6331-02ec-44ca-afee-4f9b5d442dd4&quot;,&quot;title&quot;:&quot;getAlbum()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getAlbum() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                album: &#x27;My ALbum&#x27;\n            });\n        })\n    });\n    const result = yield device.getAlbum();\n    assert.strictEqual(result, &#x27;My ALbum&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c6c82dc8-e829-4bab-aa1b-0291ae257108&quot;,&quot;parentUUID&quot;:&quot;bb3c6331-02ec-44ca-afee-4f9b5d442dd4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c6c82dc8-e829-4bab-aa1b-0291ae257108&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3108e7a2-bed6-44b2-badc-224fc7c57f7f&quot;,&quot;title&quot;:&quot;getGenre()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getGenre() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                genre: &#x27;My Genre&#x27;\n            });\n        })\n    });\n    const result = yield device.getGenre();\n    assert.strictEqual(result, &#x27;My Genre&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3cbb492a-88d6-4b55-8d5d-ed6a3a716b44&quot;,&quot;parentUUID&quot;:&quot;3108e7a2-bed6-44b2-badc-224fc7c57f7f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3cbb492a-88d6-4b55-8d5d-ed6a3a716b44&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a02b468e-17f6-4a54-894e-404cbaa0e1c4&quot;,&quot;title&quot;:&quot;getTotalTime()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getTotalTime() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                total_time: 45\n            });\n        })\n    });\n    const result = yield device.getTotalTime();\n    assert.strictEqual(result, 45);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0670cdf3-705b-4e17-8f11-b160e6d1a514&quot;,&quot;parentUUID&quot;:&quot;a02b468e-17f6-4a54-894e-404cbaa0e1c4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0670cdf3-705b-4e17-8f11-b160e6d1a514&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2e71ed03-4ca2-4d40-802e-faeb6ff1b9ab&quot;,&quot;title&quot;:&quot;getPosition()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getPosition() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                position: 30\n            });\n        })\n    });\n    const result = yield device.getPosition();\n    assert.strictEqual(result, 30);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7078c8ed-8698-49c9-99eb-cee42d7036c8&quot;,&quot;parentUUID&quot;:&quot;2e71ed03-4ca2-4d40-802e-faeb6ff1b9ab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7078c8ed-8698-49c9-99eb-cee42d7036c8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5ffe408d-1309-49fd-b212-733abd8d1d37&quot;,&quot;title&quot;:&quot;getShuffle()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getShuffle() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                shuffle: &#x27;songs&#x27;\n            });\n        })\n    });\n    const result = yield device.getShuffle();\n    assert.deepStrictEqual(result, NodePyATVShuffleState.songs);\n    assert.deepStrictEqual(result, &#x27;songs&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;da3bfd65-a6ab-463c-bc27-0b6e8cac8670&quot;,&quot;parentUUID&quot;:&quot;5ffe408d-1309-49fd-b212-733abd8d1d37&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;da3bfd65-a6ab-463c-bc27-0b6e8cac8670&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e59cb109-eac8-4dc3-86f9-51739c58ea1c&quot;,&quot;title&quot;:&quot;getRepeat()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getRepeat() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                repeat: &#x27;all&#x27;\n            });\n        })\n    });\n    const result = yield device.getRepeat();\n    assert.deepStrictEqual(result, NodePyATVRepeatState.all);\n    assert.deepStrictEqual(result, &#x27;all&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3f924c8e-cb0e-48b9-88a3-6f448e045ca4&quot;,&quot;parentUUID&quot;:&quot;e59cb109-eac8-4dc3-86f9-51739c58ea1c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3f924c8e-cb0e-48b9-88a3-6f448e045ca4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9b8fd447-9762-4321-84f2-4b59ab692685&quot;,&quot;title&quot;:&quot;getApp()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getApp() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                app: &#x27;My App&#x27;\n            });\n        })\n    });\n    const result = yield device.getApp();\n    assert.strictEqual(result, &#x27;My App&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;921b7f5d-bd37-40e2-b117-0c359e7a2a0e&quot;,&quot;parentUUID&quot;:&quot;9b8fd447-9762-4321-84f2-4b59ab692685&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;921b7f5d-bd37-40e2-b117-0c359e7a2a0e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;008e5508-7135-4c97-a71f-11d3adaffed1&quot;,&quot;title&quot;:&quot;getAppId()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getAppId() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                app_id: &#x27;app.example.com&#x27;\n            });\n        })\n    });\n    const result = yield device.getAppId();\n    assert.strictEqual(result, &#x27;app.example.com&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dd183641-6156-498f-9f4a-0b9e59f5cd59&quot;,&quot;parentUUID&quot;:&quot;008e5508-7135-4c97-a71f-11d3adaffed1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dd183641-6156-498f-9f4a-0b9e59f5cd59&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f1168e5a-9710-4d2f-b7f4-c6fbd8253cfd&quot;,&quot;title&quot;:&quot;listApps()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice listApps() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;App: Fitness (com.apple.Fitness), App: Podcasts (com.apple.podcasts), &#x27; +\n                &#x27;App: Filme (com.apple.TVMovies), App: Prime Video (com.amazon.aiv.AIVApp), &#x27; +\n                &#x27;App: TV (com.apple.TVWatchList), App: Fotos (com.apple.TVPhotos), App: AppStore &#x27; +\n                &#x27;(com.apple.TVAppStore), App: Arcade (com.apple.Arcade), App: TV-Sendungen (com.apple.TVShows), &#x27; +\n                &#x27;App: Suchen (com.apple.TVSearch), App: Live TV (de.couchfunk.WM2014), App: RTL+ &#x27; +\n                &#x27;(com.rtlinteractive.tvnow), App: Computer (com.apple.TVHomeSharing), App: ARTE &#x27; +\n                &#x27;(tv.arte.plus7), App: YouTube (com.google.ios.youtube), App: ARD Mediathek &#x27; +\n                &#x27;(de.swr.avp.ard.tablet), App: Disney+ (com.disney.disneyplus), App: Plex (com.plexapp.plex), &#x27; +\n                &#x27;App: Joyn (de.prosiebensat1digital.seventv), App: Einstellungen (com.apple.TVSettings), &#x27; +\n                &#x27;App: ZDFmediathek (de.zdf.mediathek.universal), App: Crossy Road (com.hipsterwhale.crossy), &#x27; +\n                &#x27;App: Netflix (com.netflix.Netflix), App: Infuse (com.firecore.infuse), &#x27; +\n                &#x27;App: Musik (com.apple.TVMusic)&#x27;);\n        })\n    });\n    const result = yield device.listApps();\n    assert.strictEqual(result.length, 25);\n    assert.strictEqual(result[0].id, &#x27;com.apple.Fitness&#x27;);\n    assert.strictEqual(result[0].name, &#x27;Fitness&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;edd1f7d5-2e4a-4e83-8769-bab6bc4f34ec&quot;,&quot;parentUUID&quot;:&quot;f1168e5a-9710-4d2f-b7f4-c6fbd8253cfd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;edd1f7d5-2e4a-4e83-8769-bab6bc4f34ec&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;dbf700b0-e4d6-4e2c-a67b-4603d2b0b7a7&quot;,&quot;title&quot;:&quot;pressKey()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work with valid key&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pressKey() should work with valid key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    yield device.pressKey(NodePyATVKeys.home);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fb969aa8-1aa6-4720-bd90-a537b9d50c1d&quot;,&quot;parentUUID&quot;:&quot;dbf700b0-e4d6-4e2c-a67b-4603d2b0b7a7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error with invalid key&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pressKey() should throw error with invalid key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;\n    });\n    yield assert.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        // @ts-ignore\n        yield device.pressKey(&#x27;foo&#x27;);\n    }), /Unsupported key value foo/);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;32d277c4-4f99-434b-930a-3a82c46626de&quot;,&quot;parentUUID&quot;:&quot;dbf700b0-e4d6-4e2c-a67b-4603d2b0b7a7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if pyatv result is not success&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pressKey() should throw error if pyatv result is not success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;failure\&quot;}&#x27;);\n        })\n    });\n    yield assert.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield device.pressKey(NodePyATVKeys.home);\n    }), /Unable to parse pyatv response/);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;20c49f8f-c5ca-4202-89bb-df9ad3308bd0&quot;,&quot;parentUUID&quot;:&quot;dbf700b0-e4d6-4e2c-a67b-4603d2b0b7a7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fb969aa8-1aa6-4720-bd90-a537b9d50c1d&quot;,&quot;32d277c4-4f99-434b-930a-3a82c46626de&quot;,&quot;20c49f8f-c5ca-4202-89bb-df9ad3308bd0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;927da01d-546b-4c8d-9434-3cbdcf1150dc&quot;,&quot;title&quot;:&quot;down()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice down() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9cc8c9a8-1a2f-4023-bb08-50565be0cf2c&quot;,&quot;parentUUID&quot;:&quot;927da01d-546b-4c8d-9434-3cbdcf1150dc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9cc8c9a8-1a2f-4023-bb08-50565be0cf2c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5396576d-5e0e-4835-b907-1174e13e3e8e&quot;,&quot;title&quot;:&quot;home()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice home() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7046c885-1234-4924-9075-9aa3729c6c19&quot;,&quot;parentUUID&quot;:&quot;5396576d-5e0e-4835-b907-1174e13e3e8e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7046c885-1234-4924-9075-9aa3729c6c19&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;91307dbf-5c6f-47f4-8477-635effac3cbb&quot;,&quot;title&quot;:&quot;homeHold()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice homeHold() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;457ea226-df94-4e68-bac5-fddf4e8c9b46&quot;,&quot;parentUUID&quot;:&quot;91307dbf-5c6f-47f4-8477-635effac3cbb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;457ea226-df94-4e68-bac5-fddf4e8c9b46&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2dedfe1c-aa2f-45af-aff9-57dfb0eb5266&quot;,&quot;title&quot;:&quot;left()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice left() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6c331a80-514f-4624-bc48-1ef3891118fa&quot;,&quot;parentUUID&quot;:&quot;2dedfe1c-aa2f-45af-aff9-57dfb0eb5266&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6c331a80-514f-4624-bc48-1ef3891118fa&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;77380ad7-7bcb-4a08-8a67-0e2e19573f40&quot;,&quot;title&quot;:&quot;menu()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice menu() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ee1068d9-6f89-4ef3-945f-feab6d87ce2b&quot;,&quot;parentUUID&quot;:&quot;77380ad7-7bcb-4a08-8a67-0e2e19573f40&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ee1068d9-6f89-4ef3-945f-feab6d87ce2b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;332bd673-eb42-45bd-8313-e02de45df452&quot;,&quot;title&quot;:&quot;next()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice next() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;01e7d549-a995-4c80-a4ac-d12068b273b4&quot;,&quot;parentUUID&quot;:&quot;332bd673-eb42-45bd-8313-e02de45df452&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;01e7d549-a995-4c80-a4ac-d12068b273b4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b82f24ec-2900-41cd-ab36-34c058ff54c2&quot;,&quot;title&quot;:&quot;pause()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pause() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7ea8675a-0a46-41a5-a232-ae0c1f82a3bf&quot;,&quot;parentUUID&quot;:&quot;b82f24ec-2900-41cd-ab36-34c058ff54c2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7ea8675a-0a46-41a5-a232-ae0c1f82a3bf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e098877d-3f0a-4203-ae31-fe45727829d3&quot;,&quot;title&quot;:&quot;play()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice play() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1fa8c3d5-90c4-407c-b313-fd81021e53e5&quot;,&quot;parentUUID&quot;:&quot;e098877d-3f0a-4203-ae31-fe45727829d3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1fa8c3d5-90c4-407c-b313-fd81021e53e5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;26f8884c-122a-466c-a5c0-c573754cc4a5&quot;,&quot;title&quot;:&quot;playPause()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice playPause() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fb85649e-57cd-47a6-affd-278793bd7c15&quot;,&quot;parentUUID&quot;:&quot;26f8884c-122a-466c-a5c0-c573754cc4a5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fb85649e-57cd-47a6-affd-278793bd7c15&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7759b571-2e5e-4402-a5c9-9cde3aab49c5&quot;,&quot;title&quot;:&quot;previous()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice previous() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;505509b5-294c-4226-87a3-d983c3e67e4d&quot;,&quot;parentUUID&quot;:&quot;7759b571-2e5e-4402-a5c9-9cde3aab49c5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;505509b5-294c-4226-87a3-d983c3e67e4d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1239fd9d-ff89-4780-bf66-a788a1658b29&quot;,&quot;title&quot;:&quot;right()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice right() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;62e2c7ae-a184-4fb3-a109-f56f4e91ed87&quot;,&quot;parentUUID&quot;:&quot;1239fd9d-ff89-4780-bf66-a788a1658b29&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;62e2c7ae-a184-4fb3-a109-f56f4e91ed87&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f68fe141-c159-43e4-96cf-cb14785a5433&quot;,&quot;title&quot;:&quot;select()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice select() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f1609e59-a292-4e30-aab8-c620a3325061&quot;,&quot;parentUUID&quot;:&quot;f68fe141-c159-43e4-96cf-cb14785a5433&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f1609e59-a292-4e30-aab8-c620a3325061&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f5dafa45-dd7a-45b6-855e-8b8ef9638d55&quot;,&quot;title&quot;:&quot;skipBackward()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice skipBackward() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f4737397-99d5-4d18-a992-eafa46b37675&quot;,&quot;parentUUID&quot;:&quot;f5dafa45-dd7a-45b6-855e-8b8ef9638d55&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f4737397-99d5-4d18-a992-eafa46b37675&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;85028f7a-023f-467f-867f-e289c546b986&quot;,&quot;title&quot;:&quot;skipForward()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice skipForward() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ae9e7f25-6362-4651-a4b9-bdc2536a6886&quot;,&quot;parentUUID&quot;:&quot;85028f7a-023f-467f-867f-e289c546b986&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ae9e7f25-6362-4651-a4b9-bdc2536a6886&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0f67a226-677e-46ed-9305-a3eeda0db582&quot;,&quot;title&quot;:&quot;stop()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice stop() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;68513f78-404f-435f-9c78-08756996e2cf&quot;,&quot;parentUUID&quot;:&quot;0f67a226-677e-46ed-9305-a3eeda0db582&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;68513f78-404f-435f-9c78-08756996e2cf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;36aa2d37-1c1c-42d8-9725-15c31f7d046d&quot;,&quot;title&quot;:&quot;suspend()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice suspend() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b3337f92-e5a6-4216-90dc-a128c867f352&quot;,&quot;parentUUID&quot;:&quot;36aa2d37-1c1c-42d8-9725-15c31f7d046d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b3337f92-e5a6-4216-90dc-a128c867f352&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;997b640d-3f06-48d1-94b8-bb21ecf5b0c6&quot;,&quot;title&quot;:&quot;topMenu()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice topMenu() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;09405157-8fbe-4e7a-a529-91145c83b661&quot;,&quot;parentUUID&quot;:&quot;997b640d-3f06-48d1-94b8-bb21ecf5b0c6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;09405157-8fbe-4e7a-a529-91145c83b661&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;719d27ee-894d-4e77-bd65-207a1456ee2e&quot;,&quot;title&quot;:&quot;up()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice up() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;05b336d8-26a5-40b2-b1eb-a14bc8b26a88&quot;,&quot;parentUUID&quot;:&quot;719d27ee-894d-4e77-bd65-207a1456ee2e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;05b336d8-26a5-40b2-b1eb-a14bc8b26a88&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ff843680-6d06-43fa-bb1f-322708c7b4d9&quot;,&quot;title&quot;:&quot;volumeDown()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice volumeDown() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0c9ef29d-3efb-47f5-be25-a86dc6c03f40&quot;,&quot;parentUUID&quot;:&quot;ff843680-6d06-43fa-bb1f-322708c7b4d9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0c9ef29d-3efb-47f5-be25-a86dc6c03f40&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;db0c9a38-7b4f-4b8a-b394-bbf68fe03bb9&quot;,&quot;title&quot;:&quot;volumeUp()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice volumeUp() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9df06b78-c97f-4b5e-a163-f77e01092497&quot;,&quot;parentUUID&quot;:&quot;db0c9a38-7b4f-4b8a-b394-bbf68fe03bb9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9df06b78-c97f-4b5e-a163-f77e01092497&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;40f8714c-8880-474f-9766-0f37857f4b52&quot;,&quot;title&quot;:&quot;wakeup()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice wakeup() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4652c733-0ca8-4953-af1d-04277780283d&quot;,&quot;parentUUID&quot;:&quot;40f8714c-8880-474f-9766-0f37857f4b52&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4652c733-0ca8-4953-af1d-04277780283d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;00fcece8-e3e5-4a3b-8053-3915f90d9d71&quot;,&quot;title&quot;:&quot;turnOff()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice turnOff() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;926008b8-1e2e-47e8-ae18-34822242f9cd&quot;,&quot;parentUUID&quot;:&quot;00fcece8-e3e5-4a3b-8053-3915f90d9d71&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;926008b8-1e2e-47e8-ae18-34822242f9cd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;63a6c9ea-7021-4637-9b1f-15e2ccf00c6d&quot;,&quot;title&quot;:&quot;turnOn()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice turnOn() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ef351597-8146-4555-9ec0-19e2b69c0c56&quot;,&quot;parentUUID&quot;:&quot;63a6c9ea-7021-4637-9b1f-15e2ccf00c6d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ef351597-8146-4555-9ec0-19e2b69c0c56&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5866dede-e172-4737-b432-edcda957e1c0&quot;,&quot;title&quot;:&quot;launchApp()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice launchApp() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new NodePyATVDevice({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.end(&#x27;&#x27;);\n        })\n    });\n    yield device.launchApp(&#x27;com.apple.TVShows&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b3a0eea4-7311-4982-ad7b-41078d7d85af&quot;,&quot;parentUUID&quot;:&quot;5866dede-e172-4737-b432-edcda957e1c0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b3a0eea4-7311-4982-ad7b-41078d7d85af&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;30d25680-bc89-42cd-8656-588004f857e5&quot;,&quot;title&quot;:&quot;NodePyATVInstance&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;52efc960-17e8-4bdf-a2fb-a0cb761248ed&quot;,&quot;title&quot;:&quot;static version()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work with pyatv [L]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should work with pyatv [L]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:404,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    this.timeout(4000);\n    const result = yield NodePyATVInstance.version();\n    if (result.pyatv === null) {\n        throw new Error(&#x27;No version found for pyatv. Is it installed in test environment?&#x27;);\n    }\n    assert.equal(typeof result.pyatv, &#x27;string&#x27;, &#x27;result.pyatv is a string&#x27;);\n    assert.ok(result.pyatv.length &gt;= 5, &#x27;result.pyatv has content&#x27;);\n    assert.strictEqual(result.module, version);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b77423fa-3c12-4902-8a55-4e908f4611c9&quot;,&quot;parentUUID&quot;:&quot;52efc960-17e8-4bdf-a2fb-a0cb761248ed&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the pyatv version&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return the pyatv version&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const result = yield NodePyATVInstance.version({\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.code(1);\n            cp.end(&#x27;atvremote 0.7.4&#x27;);\n        })\n    });\n    assert.ok(result.pyatv);\n    assert.strictEqual(result.pyatv, &#x27;0.7.4&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;deb34bf5-841e-413e-9e92-14e8ed24ceff&quot;,&quot;parentUUID&quot;:&quot;52efc960-17e8-4bdf-a2fb-a0cb761248ed&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the module version&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return the module version&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const result = yield NodePyATVInstance.version({\n        noColors: true,\n        spawn: createFakeSpawn(cp =&gt; cp.code(1).end())\n    });\n    assert.strictEqual(result.module, version);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e4afad9e-12b8-47ff-bdfd-7414eed37442&quot;,&quot;parentUUID&quot;:&quot;52efc960-17e8-4bdf-a2fb-a0cb761248ed&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle option.atvremotePath&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should handle option.atvremotePath&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield NodePyATVInstance.version({\n        atvremotePath: &#x27;/foo/bar&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            assert.strictEqual(cp.cmd(), &#x27;/foo/bar&#x27;);\n            cp.code(1).end();\n        })\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;52f5f929-eee8-4025-8c6e-aad9651a0399&quot;,&quot;parentUUID&quot;:&quot;52efc960-17e8-4bdf-a2fb-a0cb761248ed&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with option.debug = true&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should work with option.debug = true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield NodePyATVInstance.version({\n        debug: true,\n        spawn: createFakeSpawn(cp =&gt; cp.code(1).end())\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b8b0d294-f9dd-47d4-abe1-92acb2804ce2&quot;,&quot;parentUUID&quot;:&quot;52efc960-17e8-4bdf-a2fb-a0cb761248ed&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with option.noColors&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should work with option.noColors&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield NodePyATVInstance.version({\n        debug: () =&gt; {\n            // no debug log\n        },\n        noColors: true,\n        spawn: createFakeSpawn(cp =&gt; cp.code(1).end())\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;065db4d6-f662-4ce4-a8a9-bdcbbf2bc25b&quot;,&quot;parentUUID&quot;:&quot;52efc960-17e8-4bdf-a2fb-a0cb761248ed&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return null on pyatv stderr output&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return null on pyatv stderr output&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const result = yield NodePyATVInstance.version({\n        spawn: createFakeSpawn(cp =&gt; cp.stderr(&#x27;Hello World!&#x27;).code(123).end())\n    });\n    assert.strictEqual(result.pyatv, null);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f78b30ca-8133-48a9-89cb-056fc97934f1&quot;,&quot;parentUUID&quot;:&quot;52efc960-17e8-4bdf-a2fb-a0cb761248ed&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return null on pyatv error&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return null on pyatv error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const result = yield NodePyATVInstance.version({\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.error(new Error(&#x27;Hello world!&#x27;)).end();\n        })\n    });\n    assert.strictEqual(result.pyatv, null);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9cb59966-0da3-4ca4-b032-9b68f6d1cd6e&quot;,&quot;parentUUID&quot;:&quot;52efc960-17e8-4bdf-a2fb-a0cb761248ed&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return null on invalid pyatv version&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return null on invalid pyatv version&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const result = yield NodePyATVInstance.version({\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.stdout(&#x27;atvremote 42&#x27;).code(1).end();\n        })\n    });\n    assert.strictEqual(result.pyatv, null);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;be8ce103-0d97-41d8-85b4-b51963edaab2&quot;,&quot;parentUUID&quot;:&quot;52efc960-17e8-4bdf-a2fb-a0cb761248ed&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b77423fa-3c12-4902-8a55-4e908f4611c9&quot;,&quot;deb34bf5-841e-413e-9e92-14e8ed24ceff&quot;,&quot;e4afad9e-12b8-47ff-bdfd-7414eed37442&quot;,&quot;52f5f929-eee8-4025-8c6e-aad9651a0399&quot;,&quot;b8b0d294-f9dd-47d4-abe1-92acb2804ce2&quot;,&quot;065db4d6-f662-4ce4-a8a9-bdcbbf2bc25b&quot;,&quot;f78b30ca-8133-48a9-89cb-056fc97934f1&quot;,&quot;9cb59966-0da3-4ca4-b032-9b68f6d1cd6e&quot;,&quot;be8ce103-0d97-41d8-85b4-b51963edaab2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:417,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a2b3470f-75f8-496f-8a4a-e339f7a28c08&quot;,&quot;title&quot;:&quot;static check()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should resolve in test environment [L]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should resolve in test environment [L]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5757,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    this.timeout(12000);\n    yield NodePyATVInstance.check();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;59eca463-46a4-404d-a9dc-bf730e08cbc5&quot;,&quot;parentUUID&quot;:&quot;a2b3470f-75f8-496f-8a4a-e339f7a28c08&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return nice error message if pyatv was not found&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should return nice error message if pyatv was not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield assert.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield NodePyATVInstance.check({\n            spawn: createFakeSpawn(cp =&gt; {\n                cp.error(new Error(&#x27;spawn atvremote ENOENT&#x27;)).code(1).end();\n            })\n        });\n    }), /Unable to find pyatv. Is it installed?/);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d1cb7147-4e8c-416f-a53c-042dd1964679&quot;,&quot;parentUUID&quot;:&quot;a2b3470f-75f8-496f-8a4a-e339f7a28c08&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return nice error message if myatv is too old&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should return nice error message if myatv is too old&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield assert.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield NodePyATVInstance.check({\n            spawn: createFakeSpawn(cp =&gt; {\n                cp.stdout(&#x27;atvremote 0.5.1&#x27;).code(1).end();\n            })\n        });\n    }), /Found pyatv, but unforunately it&#x27;s too old. Please update pyatv./);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f2d7bcf-05f7-4513-a9b1-18f877e3052f&quot;,&quot;parentUUID&quot;:&quot;a2b3470f-75f8-496f-8a4a-e339f7a28c08&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return nice error message if scan failed&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should return nice error message if scan failed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    let i = 0;\n    yield assert.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield NodePyATVInstance.check({\n            spawn: createFakeSpawn(cp =&gt; {\n                if (i === 0) {\n                    cp.stdout(&#x27;atvremote 0.7.0&#x27;).code(1).end();\n                    i++;\n                }\n                else {\n                    cp.error(new Error(&#x27;spawn atvremote ENOENT&#x27;)).code(1).end();\n                }\n            })\n        });\n    }), /Unable to scan for devices/);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e1e78768-6b95-4eda-a760-bbaa185f7910&quot;,&quot;parentUUID&quot;:&quot;a2b3470f-75f8-496f-8a4a-e339f7a28c08&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;59eca463-46a4-404d-a9dc-bf730e08cbc5&quot;,&quot;d1cb7147-4e8c-416f-a53c-042dd1964679&quot;,&quot;1f2d7bcf-05f7-4513-a9b1-18f877e3052f&quot;,&quot;e1e78768-6b95-4eda-a760-bbaa185f7910&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5764,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6c90b95f-f20e-4c41-8b54-a025f5f879b5&quot;,&quot;title&quot;:&quot;static find()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work [L]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work [L]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5385,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    this.timeout(10000);\n    const result = yield NodePyATVInstance.find();\n    assert.ok(Array.isArray(result));\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0e0f0204-64a0-40f1-9aec-00fc7e8fbcf3&quot;,&quot;parentUUID&quot;:&quot;6c90b95f-f20e-4c41-8b54-a025f5f879b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle option.atvscriptPath&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should handle option.atvscriptPath&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield NodePyATVInstance.find({\n        atvscriptPath: &#x27;/foo/bar&#x27;,\n        spawn: createFakeSpawn(cp =&gt; {\n            assert.strictEqual(cp.cmd(), &#x27;/foo/bar&#x27;);\n            cp.stdout({\n                &#x27;result&#x27;: &#x27;success&#x27;,\n                &#x27;datetime&#x27;: &#x27;2020-11-06T20:47:30.840022+01:00&#x27;,\n                &#x27;devices&#x27;: []\n            }).end();\n        })\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b65e9925-9373-4ab8-baf5-ac48e7d777f0&quot;,&quot;parentUUID&quot;:&quot;6c90b95f-f20e-4c41-8b54-a025f5f879b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error on stderr output&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error on stderr output&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield assert.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield NodePyATVInstance.find({\n            spawn: createFakeSpawn(cp =&gt; {\n                cp.stderr(&#x27;Hello World!&#x27;).code(1).end();\n            })\n        });\n    }), /Unable to execute request/);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4e3310fe-98e0-44c7-9998-ce4311c39f04&quot;,&quot;parentUUID&quot;:&quot;6c90b95f-f20e-4c41-8b54-a025f5f879b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error on error&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield assert.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield NodePyATVInstance.find({\n            spawn: createFakeSpawn(cp =&gt; {\n                cp.error(new Error(&#x27;Hello world!&#x27;)).code(1).end();\n            })\n        });\n    }), /Hello world!/);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;690476dc-1968-4213-b819-5e118086fae8&quot;,&quot;parentUUID&quot;:&quot;6c90b95f-f20e-4c41-8b54-a025f5f879b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if atvscript result is not valid json&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error if atvscript result is not valid json&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield assert.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield NodePyATVInstance.find({\n            spawn: createFakeSpawn(cp =&gt; {\n                cp.stdout(JSON.stringify({\n                    &#x27;result&#x27;: &#x27;success&#x27;,\n                    &#x27;datetime&#x27;: &#x27;2020-11-06T20:47:30.840022+01:00&#x27;,\n                    &#x27;devices&#x27;: []\n                }).substr(1)).end();\n            })\n        });\n    }), /Unable to parse result/);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c21eec62-5ac3-4d4e-9c7b-a44619400cd5&quot;,&quot;parentUUID&quot;:&quot;6c90b95f-f20e-4c41-8b54-a025f5f879b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if atvscript result is not successfull&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error if atvscript result is not successfull&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield assert.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield NodePyATVInstance.find({\n            spawn: createFakeSpawn(cp =&gt; {\n                cp.stdout({\n                    result: &#x27;error&#x27;\n                }).code(1).end();\n            })\n        });\n    }), /Unable to parse pyatv response: /);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b9e1621d-38fe-41c1-862b-41c57a18d460&quot;,&quot;parentUUID&quot;:&quot;6c90b95f-f20e-4c41-8b54-a025f5f879b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if atvscript result is without device array&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error if atvscript result is without device array&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield assert.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield NodePyATVInstance.find({\n            spawn: createFakeSpawn(cp =&gt; {\n                cp.stdout({\n                    result: &#x27;success&#x27;\n                }).code(1).end();\n            })\n        });\n    }), /Unable to parse pyatv response: /);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e4f62816-6595-4eb6-a43d-a278ae23ade9&quot;,&quot;parentUUID&quot;:&quot;6c90b95f-f20e-4c41-8b54-a025f5f879b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work if devices are without device_info / services&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work if devices are without device_info / services&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const devices = yield NodePyATVInstance.find({\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                datetime: &#x27;2020-11-06T20:47:30.840022+01:00&#x27;,\n                devices: [\n                    {\n                        name: &#x27;Vardagsrum&#x27;,\n                        address: &#x27;10.0.10.81&#x27;,\n                        identifier: &#x27;xxx&#x27;\n                    }\n                ]\n            }).code(1).end();\n        })\n    });\n    assert.strictEqual(devices.length, 1);\n    assert.strictEqual(devices[0].name, &#x27;Vardagsrum&#x27;);\n    assert.strictEqual(devices[0].host, &#x27;10.0.10.81&#x27;);\n    assert.strictEqual(devices[0].id, &#x27;xxx&#x27;);\n    assert.strictEqual(devices[0].model, undefined);\n    assert.strictEqual(devices[0].modelName, undefined);\n    assert.strictEqual(devices[0].os, undefined);\n    assert.strictEqual(devices[0].version, undefined);\n    assert.deepStrictEqual(devices[0].services, undefined);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;510e84ba-46e7-457c-be93-d5d44a738c82&quot;,&quot;parentUUID&quot;:&quot;6c90b95f-f20e-4c41-8b54-a025f5f879b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work if devices are with device_info / services&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work if devices are with device_info / services&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const devices = yield NodePyATVInstance.find({\n        spawn: createFakeSpawn(cp =&gt; {\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                datetime: &#x27;2020-11-06T20:47:30.840022+01:00&#x27;,\n                devices: [\n                    {\n                        name: &#x27;Vardagsrum&#x27;,\n                        address: &#x27;10.0.10.81&#x27;,\n                        identifier: &#x27;xxx&#x27;,\n                        device_info: {\n                            &#x27;model&#x27;: &#x27;Gen4K&#x27;,\n                            &#x27;model_str&#x27;: &#x27;Apple TV 4K&#x27;,\n                            &#x27;operating_system&#x27;: &#x27;TvOS&#x27;,\n                            &#x27;version&#x27;: &#x27;15.5.1&#x27;\n                        },\n                        services: [\n                            {\n                                protocol: &#x27;mrp&#x27;,\n                                port: 49152\n                            },\n                            {\n                                protocol: &#x27;airplay&#x27;,\n                                port: 7000\n                            }\n                        ]\n                    }\n                ]\n            }).code(1).end();\n        })\n    });\n    assert.strictEqual(devices.length, 1);\n    assert.strictEqual(devices[0].name, &#x27;Vardagsrum&#x27;);\n    assert.strictEqual(devices[0].host, &#x27;10.0.10.81&#x27;);\n    assert.strictEqual(devices[0].id, &#x27;xxx&#x27;);\n    assert.strictEqual(devices[0].model, &#x27;Gen4K&#x27;);\n    assert.strictEqual(devices[0].modelName, &#x27;Apple TV 4K&#x27;);\n    assert.strictEqual(devices[0].os, &#x27;TvOS&#x27;);\n    assert.strictEqual(devices[0].version, &#x27;15.5.1&#x27;);\n    assert.deepStrictEqual(devices[0].services, [\n        {\n            protocol: NodePyATVProtocol.mrp,\n            port: 49152\n        },\n        {\n            protocol: NodePyATVProtocol.airplay,\n            port: 7000\n        }\n    ]);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;40f51666-4c70-4ba9-a4d5-ed157106b250&quot;,&quot;parentUUID&quot;:&quot;6c90b95f-f20e-4c41-8b54-a025f5f879b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0e0f0204-64a0-40f1-9aec-00fc7e8fbcf3&quot;,&quot;b65e9925-9373-4ab8-baf5-ac48e7d777f0&quot;,&quot;4e3310fe-98e0-44c7-9998-ce4311c39f04&quot;,&quot;690476dc-1968-4213-b819-5e118086fae8&quot;,&quot;c21eec62-5ac3-4d4e-9c7b-a44619400cd5&quot;,&quot;b9e1621d-38fe-41c1-862b-41c57a18d460&quot;,&quot;e4f62816-6595-4eb6-a43d-a278ae23ade9&quot;,&quot;510e84ba-46e7-457c-be93-d5d44a738c82&quot;,&quot;40f51666-4c70-4ba9-a4d5-ed157106b250&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5396,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e816be92-17ba-4421-bff6-ce73964c709c&quot;,&quot;title&quot;:&quot;static device()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should pass options to constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static device() should pass options to constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = NodePyATVInstance.device({ host: &#x27;192.168.178.6&#x27;, name: &#x27;My Testdevice&#x27; });\nassert.strictEqual(device.host, &#x27;192.168.178.6&#x27;);\nassert.strictEqual(device.name, &#x27;My Testdevice&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;11abcf79-9552-4dd5-8670-7c974bcc102c&quot;,&quot;parentUUID&quot;:&quot;e816be92-17ba-4421-bff6-ce73964c709c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;11abcf79-9552-4dd5-8670-7c974bcc102c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e0e85b83-0bcb-4a2f-8c84-49e723032d00&quot;,&quot;title&quot;:&quot;version()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance version() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const i = new NodePyATVInstance({ atvremotePath: &#x27;test&#x27; });\n    yield i.version({\n        spawn: createFakeSpawn(cp =&gt; {\n            assert.strictEqual(cp.cmd(), &#x27;test&#x27;);\n            cp.code(1).end();\n        })\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;57e821f4-6d5f-46ff-a981-46f4524ba97f&quot;,&quot;parentUUID&quot;:&quot;e0e85b83-0bcb-4a2f-8c84-49e723032d00&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;57e821f4-6d5f-46ff-a981-46f4524ba97f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4230cdde-1812-403a-9f36-60098615d883&quot;,&quot;title&quot;:&quot;check()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance check() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const i = new NodePyATVInstance({ atvremotePath: &#x27;test&#x27; });\n    yield assert.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield i.check({\n            spawn: createFakeSpawn(cp =&gt; {\n                assert.strictEqual(cp.cmd(), &#x27;test&#x27;);\n                cp.error(new Error(&#x27;spawn atvremote ENOENT&#x27;)).code(1).end();\n            })\n        });\n    }), /Unable to find pyatv. Is it installed?/);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;27eb9741-6d7d-41c9-9f0a-89aac4ea174c&quot;,&quot;parentUUID&quot;:&quot;4230cdde-1812-403a-9f36-60098615d883&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;27eb9741-6d7d-41c9-9f0a-89aac4ea174c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d44f99c3-9c54-4a4f-a59e-76c2c3b2f8e0&quot;,&quot;title&quot;:&quot;find()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance find() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const i = new NodePyATVInstance({ atvscriptPath: &#x27;test&#x27; });\n    yield i.find({\n        spawn: createFakeSpawn(cp =&gt; {\n            assert.strictEqual(cp.cmd(), &#x27;test&#x27;);\n            cp.stdout({\n                &#x27;result&#x27;: &#x27;success&#x27;,\n                &#x27;datetime&#x27;: &#x27;2020-11-06T20:47:30.840022+01:00&#x27;,\n                &#x27;devices&#x27;: []\n            }).end();\n        })\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;598f8591-0653-4298-918a-d5524e8137d9&quot;,&quot;parentUUID&quot;:&quot;d44f99c3-9c54-4a4f-a59e-76c2c3b2f8e0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;598f8591-0653-4298-918a-d5524e8137d9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;cb7306c3-bbfe-4b4f-a22c-3c7e9cf7af35&quot;,&quot;title&quot;:&quot;device()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance device() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const i = new NodePyATVInstance({ debug: true });\n    const d = i.device({ name: &#x27;My Testdevice&#x27;, host: &#x27;192.168.178.2&#x27; });\n    assert.deepStrictEqual(d.debug, true);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cc4aaf52-3f41-42ef-bedc-0ea8e02a2a0c&quot;,&quot;parentUUID&quot;:&quot;cb7306c3-bbfe-4b4f-a22c-3c7e9cf7af35&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cc4aaf52-3f41-42ef-bedc-0ea8e02a2a0c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;cb87e7f3-3667-44c1-a535-448107ecb7dd&quot;,&quot;title&quot;:&quot;Type Exports&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Type NodePyATVProtocol should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVProtocol should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVProtocol);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4c9f02db-1aa0-4824-952c-ca5eee9effb0&quot;,&quot;parentUUID&quot;:&quot;cb87e7f3-3667-44c1-a535-448107ecb7dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVMediaType should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVMediaType should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVMediaType);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;74cb2da6-0836-44cd-9f89-febf20597560&quot;,&quot;parentUUID&quot;:&quot;cb87e7f3-3667-44c1-a535-448107ecb7dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVDeviceEvent should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVDeviceEvent should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVDeviceEvent);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;48f8ba53-d6d0-48ae-b54e-bbd18c781e16&quot;,&quot;parentUUID&quot;:&quot;cb87e7f3-3667-44c1-a535-448107ecb7dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVDeviceState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVDeviceState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVDeviceState);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b24a6776-f786-454a-bef7-721e6e4fe2bb&quot;,&quot;parentUUID&quot;:&quot;cb87e7f3-3667-44c1-a535-448107ecb7dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVRepeatState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVRepeatState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVRepeatState);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ce0596b-dd74-4c2b-a8a7-6703ec57bdaf&quot;,&quot;parentUUID&quot;:&quot;cb87e7f3-3667-44c1-a535-448107ecb7dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVShuffleState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVShuffleState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVShuffleState);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b3b74aaa-78a2-42b7-8c48-33574e412baf&quot;,&quot;parentUUID&quot;:&quot;cb87e7f3-3667-44c1-a535-448107ecb7dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVKeys should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVKeys should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVKeys);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e9a84052-5df3-489c-8b89-91ddfc1f9117&quot;,&quot;parentUUID&quot;:&quot;cb87e7f3-3667-44c1-a535-448107ecb7dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVInstanceOptions should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVInstanceOptions should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVListenerState);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0b5978e6-3c8b-4800-92d6-2e12c3ecdcf3&quot;,&quot;parentUUID&quot;:&quot;cb87e7f3-3667-44c1-a535-448107ecb7dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVPowerState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVPowerState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVPowerState);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aa74f4b2-9f8b-4fb4-8c06-d3a8e3e480fb&quot;,&quot;parentUUID&quot;:&quot;cb87e7f3-3667-44c1-a535-448107ecb7dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4c9f02db-1aa0-4824-952c-ca5eee9effb0&quot;,&quot;74cb2da6-0836-44cd-9f89-febf20597560&quot;,&quot;48f8ba53-d6d0-48ae-b54e-bbd18c781e16&quot;,&quot;b24a6776-f786-454a-bef7-721e6e4fe2bb&quot;,&quot;0ce0596b-dd74-4c2b-a8a7-6703ec57bdaf&quot;,&quot;b3b74aaa-78a2-42b7-8c48-33574e412baf&quot;,&quot;e9a84052-5df3-489c-8b89-91ddfc1f9117&quot;,&quot;0b5978e6-3c8b-4800-92d6-2e12c3ecdcf3&quot;,&quot;aa74f4b2-9f8b-4fb4-8c06-d3a8e3e480fb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;525c2ccc-4b0e-49f3-9fde-727dbb49c7e6&quot;,&quot;title&quot;:&quot;Tools&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;344298f8-62a4-403a-ad97-c9a34103d2be&quot;,&quot;title&quot;:&quot;addRequestId() / removeRequestId()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a string&quot;,&quot;fullTitle&quot;:&quot;Tools addRequestId() / removeRequestId() should return a string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = addRequestId();\nassert.strictEqual(typeof id, &#x27;string&#x27;);\nremoveRequestId(id);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4929fff7-7cf9-45c4-9c49-584077500e84&quot;,&quot;parentUUID&quot;:&quot;344298f8-62a4-403a-ad97-c9a34103d2be&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work if given id is not in index&quot;,&quot;fullTitle&quot;:&quot;Tools addRequestId() / removeRequestId() should work if given id is not in index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;removeRequestId(&#x27;FOO&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;300ee023-00e2-41bb-926f-e4a4a2b85fa1&quot;,&quot;parentUUID&quot;:&quot;344298f8-62a4-403a-ad97-c9a34103d2be&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4929fff7-7cf9-45c4-9c49-584077500e84&quot;,&quot;300ee023-00e2-41bb-926f-e4a4a2b85fa1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1efa6a6e-be66-4e8f-8a92-c84c811ea252&quot;,&quot;title&quot;:&quot;debug()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work without any options&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work without any options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(&#x27;TEST&#x27;, &#x27;Hello World.&#x27;, {});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d3491cfc-0928-4d7d-bc11-fd3049d2cf5a&quot;,&quot;parentUUID&quot;:&quot;1efa6a6e-be66-4e8f-8a92-c84c811ea252&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with default logger&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with default logger&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(&#x27;TEST&#x27;, &#x27;Hello World.&#x27;, { debug: true });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f131f36c-db05-4011-b53c-90dd503bfd99&quot;,&quot;parentUUID&quot;:&quot;1efa6a6e-be66-4e8f-8a92-c84c811ea252&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with custom logger&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with custom logger&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(&#x27;TEST&#x27;, &#x27;Hello World.&#x27;, {\n    debug: function (msg) {\n        assert.strictEqual(this, null);\n        assert.ok(msg.includes(&#x27;Hello World&#x27;));\n    }\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;471493d1-af27-481d-b723-f24b61a29131&quot;,&quot;parentUUID&quot;:&quot;1efa6a6e-be66-4e8f-8a92-c84c811ea252&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with colors disabled&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with colors disabled&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(&#x27;TEST&#x27;, &#x27;Hello World.&#x27;, { noColors: true });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b3fcc6d7-3960-40e5-ab1c-ecb9379d6dc2&quot;,&quot;parentUUID&quot;:&quot;1efa6a6e-be66-4e8f-8a92-c84c811ea252&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with custom logger and colors disabled&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with custom logger and colors disabled&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(&#x27;TEST&#x27;, &#x27;Hello World.&#x27;, {\n    noColors: true,\n    debug: function (msg) {\n        assert.strictEqual(this, null);\n        assert.strictEqual(msg, &#x27;[node-pyatv][TEST] Hello World.&#x27;);\n    }\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e4cc5e0a-8b57-4153-b46c-08a0690cb0cc&quot;,&quot;parentUUID&quot;:&quot;1efa6a6e-be66-4e8f-8a92-c84c811ea252&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d3491cfc-0928-4d7d-bc11-fd3049d2cf5a&quot;,&quot;f131f36c-db05-4011-b53c-90dd503bfd99&quot;,&quot;471493d1-af27-481d-b723-f24b61a29131&quot;,&quot;b3fcc6d7-3960-40e5-ab1c-ecb9379d6dc2&quot;,&quot;e4cc5e0a-8b57-4153-b46c-08a0690cb0cc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3e0fea1e-7917-4d80-90a6-9647953cfd12&quot;,&quot;title&quot;:&quot;getExecutable()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should handle atvremotePath if set&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle atvremotePath if set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = getExecutable(NodePyATVExecutableType.atvremote, {\n    atvremotePath: &#x27;/tmp/1&#x27;,\n    atvscriptPath: &#x27;/tmp/2&#x27;\n});\nassert.strictEqual(result, &#x27;/tmp/1&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;69589b52-583f-4ba2-8144-f54a6fdc9385&quot;,&quot;parentUUID&quot;:&quot;3e0fea1e-7917-4d80-90a6-9647953cfd12&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle atvscriptPath if set&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle atvscriptPath if set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = getExecutable(NodePyATVExecutableType.atvscript, {\n    atvremotePath: &#x27;/tmp/1&#x27;,\n    atvscriptPath: &#x27;/tmp/2&#x27;\n});\nassert.strictEqual(result, &#x27;/tmp/2&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7648615f-4e42-4cab-a0fd-50f009f2d4e6&quot;,&quot;parentUUID&quot;:&quot;3e0fea1e-7917-4d80-90a6-9647953cfd12&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle default for atvremote&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle default for atvremote&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = getExecutable(NodePyATVExecutableType.atvremote, {\n    atvscriptPath: &#x27;/tmp&#x27;\n});\nassert.strictEqual(result, &#x27;atvremote&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;418939d9-0113-4984-800b-1ee5b8333c83&quot;,&quot;parentUUID&quot;:&quot;3e0fea1e-7917-4d80-90a6-9647953cfd12&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle default for atvscript&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle default for atvscript&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = getExecutable(NodePyATVExecutableType.atvscript, {\n    atvremotePath: &#x27;/tmp&#x27;\n});\nassert.strictEqual(result, &#x27;atvscript&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3c723012-4d40-4d60-82ee-d1b0553b61b7&quot;,&quot;parentUUID&quot;:&quot;3e0fea1e-7917-4d80-90a6-9647953cfd12&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;69589b52-583f-4ba2-8144-f54a6fdc9385&quot;,&quot;7648615f-4e42-4cab-a0fd-50f009f2d4e6&quot;,&quot;418939d9-0113-4984-800b-1ee5b8333c83&quot;,&quot;3c723012-4d40-4d60-82ee-d1b0553b61b7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;716e5ffd-05b2-4c65-a1e9-45a1e6c296c4&quot;,&quot;title&quot;:&quot;getParameters()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;empty case&quot;,&quot;fullTitle&quot;:&quot;Tools getParameters() empty case&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const result = yield getParameters();\n    assert.deepEqual(result, []);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f81477d2-7b76-49e3-9565-5cb33736fe8b&quot;,&quot;parentUUID&quot;:&quot;716e5ffd-05b2-4c65-a1e9-45a1e6c296c4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;easy case&quot;,&quot;fullTitle&quot;:&quot;Tools getParameters() easy case&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const result = yield getParameters({\n        host: &#x27;192.168.178.2&#x27;\n    });\n    assert.deepEqual(result, [&#x27;-s&#x27;, &#x27;192.168.178.2&#x27;]);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;634de474-bd18-4e27-8a00-f71e9c27566d&quot;,&quot;parentUUID&quot;:&quot;716e5ffd-05b2-4c65-a1e9-45a1e6c296c4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;full case&quot;,&quot;fullTitle&quot;:&quot;Tools getParameters() full case&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const result = yield getParameters({\n        hosts: [&#x27;192.168.178.2&#x27;, &#x27;192.168.178.3&#x27;],\n        id: &#x27;****&#x27;,\n        protocol: NodePyATVProtocol.mrp,\n        dmapCredentials: &#x27;****&#x27;,\n        mrpCredentials: &#x27;****&#x27;,\n        airplayCredentials: &#x27;****&#x27;,\n        companionCredentials: &#x27;1234&#x27;,\n        raopCredentials: &#x27;::foo:&#x27;\n    });\n    assert.deepEqual(result, [\n        &#x27;-s&#x27;, &#x27;192.168.178.2,192.168.178.3&#x27;,\n        &#x27;-i&#x27;, &#x27;****&#x27;,\n        &#x27;--protocol&#x27;, &#x27;mrp&#x27;,\n        &#x27;--dmap-credentials&#x27;, &#x27;****&#x27;,\n        &#x27;--mrp-credentials&#x27;, &#x27;****&#x27;,\n        &#x27;--airplay-credentials&#x27;, &#x27;****&#x27;,\n        &#x27;--companion-credentials&#x27;, &#x27;1234&#x27;,\n        &#x27;--raop-credentials&#x27;, &#x27;::foo:&#x27;\n    ]);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bc14a6f4-b266-496c-9e71-6b20dc40953f&quot;,&quot;parentUUID&quot;:&quot;716e5ffd-05b2-4c65-a1e9-45a1e6c296c4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f81477d2-7b76-49e3-9565-5cb33736fe8b&quot;,&quot;634de474-bd18-4e27-8a00-f71e9c27566d&quot;,&quot;bc14a6f4-b266-496c-9e71-6b20dc40953f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;98334dfa-625a-4c1b-88e1-a3596b888de2&quot;,&quot;title&quot;:&quot;parseState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work with empty data&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should work with empty data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input = {};\nconst result = parseState(input, &#x27;&#x27;, {});\nassert.deepStrictEqual(result, {\n    dateTime: null,\n    hash: null,\n    mediaType: null,\n    deviceState: null,\n    title: null,\n    artist: null,\n    album: null,\n    genre: null,\n    totalTime: null,\n    position: null,\n    shuffle: null,\n    repeat: null,\n    app: null,\n    appId: null,\n    powerState: null,\n    focusState: null,\n    volume: null,\n    outputDevices: null\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e05139b4-0089-465a-929f-768e03732fdc&quot;,&quot;parentUUID&quot;:&quot;98334dfa-625a-4c1b-88e1-a3596b888de2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work without data&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should work without data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// @ts-ignore\nconst result = parseState(null, &#x27;&#x27;, {});\nassert.deepStrictEqual(result, {\n    dateTime: null,\n    hash: null,\n    mediaType: null,\n    deviceState: null,\n    title: null,\n    artist: null,\n    album: null,\n    genre: null,\n    totalTime: null,\n    position: null,\n    shuffle: null,\n    repeat: null,\n    app: null,\n    appId: null,\n    powerState: null,\n    focusState: null,\n    volume: null,\n    outputDevices: null\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;89f6e33f-753b-4a47-b782-5ca69d71b3e2&quot;,&quot;parentUUID&quot;:&quot;98334dfa-625a-4c1b-88e1-a3596b888de2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with example data&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should work with example data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input = {\n    result: &#x27;success&#x27;,\n    datetime: &#x27;2020-11-07T22:38:43.608030+01:00&#x27;,\n    hash: &#x27;100e0ab6-6ff5-4199-9c04-a7107ff78712&#x27;,\n    media_type: &#x27;video&#x27;,\n    device_state: &#x27;playing&#x27;,\n    title: &#x27;Solo: A Star Wars Story&#x27;,\n    artist: null,\n    album: null,\n    genre: null,\n    total_time: 8097,\n    position: 27,\n    shuffle: &#x27;off&#x27;,\n    repeat: &#x27;off&#x27;,\n    app: &#x27;Disney+&#x27;,\n    app_id: &#x27;com.disney.disneyplus&#x27;,\n    power_state: null,\n    focus_state: null,\n    volume: null,\n    output_devices: null\n};\nconst result = parseState(input, &#x27;&#x27;, {});\nassert.deepStrictEqual(result, {\n    dateTime: new Date(&#x27;2020-11-07T22:38:43.608030+01:00&#x27;),\n    hash: &#x27;100e0ab6-6ff5-4199-9c04-a7107ff78712&#x27;,\n    mediaType: NodePyATVMediaType.video,\n    deviceState: NodePyATVDeviceState.playing,\n    title: &#x27;Solo: A Star Wars Story&#x27;,\n    artist: null,\n    album: null,\n    genre: null,\n    totalTime: 8097,\n    position: 27,\n    shuffle: NodePyATVShuffleState.off,\n    repeat: NodePyATVRepeatState.off,\n    app: &#x27;Disney+&#x27;,\n    appId: &#x27;com.disney.disneyplus&#x27;,\n    powerState: null,\n    focusState: null,\n    volume: null,\n    outputDevices: null\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;690ecb9b-c727-4c37-b950-bec77e0a5a1e&quot;,&quot;parentUUID&quot;:&quot;98334dfa-625a-4c1b-88e1-a3596b888de2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw an error for pyatv exceptions&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should throw an error for pyatv exceptions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input = {\n    result: &#x27;failure&#x27;,\n    datetime: &#x27;2021-11-24T21:13:36.424576+03:00&#x27;,\n    exception: &#x27;invalid credentials: 321&#x27;,\n    stacktrace: &#x27;Traceback (most recent call last):\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\\\&quot;, line 302, in appstart\\n    print(args.output(await _handle_command(args, abort_sem, loop)), flush=True)\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\\\&quot;, line 196, in _handle_command\\n    atv = await connect(config, loop, protocol=Protocol.MRP)\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/__init__.py\\\&quot;, line 96, in connect\\n    for setup_data in proto_methods.setup(\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\\\&quot;, line 192, in setup\\n    stream = AirPlayStream(config, service)\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\\\&quot;, line 79, in __init__\\n    self._credentials: HapCredentials = parse_credentials(self.service.credentials)\\n  File \\\&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/auth/hap_pairing.py\\\&quot;, line 139, in parse_credentials\\n    raise exceptions.InvalidCredentialsError(\\\&quot;invalid credentials: \\\&quot; + detail_string)\\npyatv.exceptions.InvalidCredentialsError: invalid credentials: 321\\n&#x27;\n};\nassert.throws(() =&gt; {\n    parseState(input, &#x27;&#x27;, {});\n}, /Got pyatv Error: invalid credentials: 321/);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4273b25c-a0b0-4eb4-b279-482ac4d65d89&quot;,&quot;parentUUID&quot;:&quot;98334dfa-625a-4c1b-88e1-a3596b888de2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should ignore date if it&#x27;s an invalid date&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should ignore date if it&#x27;s an invalid date&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input = { datetime: &#x27;today&#x27; };\nconst result = parseState(input, &#x27;&#x27;, {});\nassert.deepStrictEqual(result, {\n    dateTime: null,\n    hash: null,\n    mediaType: null,\n    deviceState: null,\n    title: null,\n    artist: null,\n    album: null,\n    genre: null,\n    totalTime: null,\n    position: null,\n    shuffle: null,\n    repeat: null,\n    app: null,\n    appId: null,\n    powerState: null,\n    focusState: null,\n    volume: null,\n    outputDevices: null\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;57859ba2-9947-4c81-a4be-e2a124df1c04&quot;,&quot;parentUUID&quot;:&quot;98334dfa-625a-4c1b-88e1-a3596b888de2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should ignore data if unsupported type&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should ignore data if unsupported type&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input = {\n    result: &#x27;success&#x27;,\n    datetime: true,\n    hash: 1337,\n    media_type: false,\n    device_state: 43,\n    title: undefined,\n    artist: 90,\n    album: Infinity,\n    genre: Math.PI,\n    total_time: &#x27;23min&#x27;,\n    position: &#x27;0:30.123&#x27;,\n    shuffle: false,\n    repeat: true,\n    app: 0,\n    app_id: 891645381647289,\n    power_state: null,\n    focus_state: null,\n    volume: null,\n    output_devices: null\n};\nconst result = parseState(input, &#x27;&#x27;, {});\nassert.deepStrictEqual(result, {\n    dateTime: null,\n    hash: null,\n    mediaType: null,\n    deviceState: null,\n    title: null,\n    artist: null,\n    album: null,\n    genre: null,\n    totalTime: null,\n    position: null,\n    shuffle: null,\n    repeat: null,\n    app: null,\n    appId: null,\n    powerState: null,\n    focusState: null,\n    volume: null,\n    outputDevices: null\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;15cb97db-4ed0-4796-91d1-e2e5c099f34e&quot;,&quot;parentUUID&quot;:&quot;98334dfa-625a-4c1b-88e1-a3596b888de2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should ignore enums with unsupported valid&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should ignore enums with unsupported valid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input = {\n    media_type: &#x27;3d-experience&#x27;,\n    device_state: &#x27;initiating&#x27;,\n    shuffle: &#x27;everything&#x27;,\n    repeat: &#x27;nothing&#x27;\n};\nconst result = parseState(input, &#x27;&#x27;, {});\nassert.deepStrictEqual(result, {\n    dateTime: null,\n    hash: null,\n    mediaType: null,\n    deviceState: null,\n    title: null,\n    artist: null,\n    album: null,\n    genre: null,\n    totalTime: null,\n    position: null,\n    shuffle: null,\n    repeat: null,\n    app: null,\n    appId: null,\n    powerState: null,\n    focusState: null,\n    volume: null,\n    outputDevices: null\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e20f3668-6c52-4671-b18a-944d00aca9cc&quot;,&quot;parentUUID&quot;:&quot;98334dfa-625a-4c1b-88e1-a3596b888de2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e05139b4-0089-465a-929f-768e03732fdc&quot;,&quot;89f6e33f-753b-4a47-b782-5ca69d71b3e2&quot;,&quot;690ecb9b-c727-4c37-b950-bec77e0a5a1e&quot;,&quot;4273b25c-a0b0-4eb4-b279-482ac4d65d89&quot;,&quot;57859ba2-9947-4c81-a4be-e2a124df1c04&quot;,&quot;15cb97db-4ed0-4796-91d1-e2e5c099f34e&quot;,&quot;e20f3668-6c52-4671-b18a-944d00aca9cc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;10.2.0&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;node-pyatv&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report/assets&quot;,&quot;jsonFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/mochawesome-report/mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>