<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:102,&quot;tests&quot;:174,&quot;passes&quot;:172,&quot;pending&quot;:2,&quot;failures&quot;:0,&quot;start&quot;:&quot;2025-06-10T19:56:16.973Z&quot;,&quot;end&quot;:&quot;2025-06-10T19:56:29.020Z&quot;,&quot;duration&quot;:12047,&quot;testsRegistered&quot;:174,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:1.1494252873563218,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;4eb27001-7d55-4e86-89e3-77c49346edbb&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ab8e53a5-6b5c-4b32-9fa0-d9b6c13d1333&quot;,&quot;title&quot;:&quot;NodePyATVDeviceEvent&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;01804643-110f-408e-a115-2074fe1e2960&quot;,&quot;title&quot;:&quot;get key()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get key() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event=new NodePyATVDeviceEvent({device:new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testinstance\&quot;}),key:\&quot;genre\&quot;,new:\&quot;Rock\&quot;,old:\&quot;Jazz\&quot;});assert.strictEqual(event.key,\&quot;genre\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c5298f83-d8dd-4c28-b07d-e7f8839337c9&quot;,&quot;parentUUID&quot;:&quot;01804643-110f-408e-a115-2074fe1e2960&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c5298f83-d8dd-4c28-b07d-e7f8839337c9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6f280e3d-2180-4d05-a7a4-3e44d6ea012e&quot;,&quot;title&quot;:&quot;get oldValue()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get oldValue() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event=new NodePyATVDeviceEvent({device:new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testinstance\&quot;}),key:\&quot;genre\&quot;,new:\&quot;Rock\&quot;,old:\&quot;Jazz\&quot;});assert.strictEqual(event.oldValue,\&quot;Jazz\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;53fc131d-df48-4d10-b910-bdcf7e9c55dd&quot;,&quot;parentUUID&quot;:&quot;6f280e3d-2180-4d05-a7a4-3e44d6ea012e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;53fc131d-df48-4d10-b910-bdcf7e9c55dd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;68185149-60fd-4872-b731-9843bea39f52&quot;,&quot;title&quot;:&quot;get newValue()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get newValue() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event=new NodePyATVDeviceEvent({device:new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testinstance\&quot;}),key:\&quot;genre\&quot;,new:\&quot;Rock\&quot;,old:\&quot;Jazz\&quot;});assert.strictEqual(event.newValue,\&quot;Rock\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a7042f38-0257-4102-ba22-11cc5c6711b4&quot;,&quot;parentUUID&quot;:&quot;68185149-60fd-4872-b731-9843bea39f52&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a7042f38-0257-4102-ba22-11cc5c6711b4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;760bc08f-7c7e-418f-98e8-59c7ad2ebdec&quot;,&quot;title&quot;:&quot;get value()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get value() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event=new NodePyATVDeviceEvent({device:new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testinstance\&quot;}),key:\&quot;genre\&quot;,new:\&quot;Rock\&quot;,old:\&quot;Jazz\&quot;});assert.strictEqual(event.value,\&quot;Rock\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cf5c9e11-1862-451b-b2d7-493a5e19fff9&quot;,&quot;parentUUID&quot;:&quot;760bc08f-7c7e-418f-98e8-59c7ad2ebdec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cf5c9e11-1862-451b-b2d7-493a5e19fff9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ffd6d621-fd9a-4337-8620-b75b37091e21&quot;,&quot;title&quot;:&quot;get device()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get device() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testinstance\&quot;});const event=new NodePyATVDeviceEvent({device,key:\&quot;genre\&quot;,new:\&quot;Rock\&quot;,old:\&quot;Jazz\&quot;});assert.deepEqual(event.device,device)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;60ffe566-99a5-43b1-89d4-3e54ae20a2a8&quot;,&quot;parentUUID&quot;:&quot;ffd6d621-fd9a-4337-8620-b75b37091e21&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;60ffe566-99a5-43b1-89d4-3e54ae20a2a8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6a82678b-ce79-4261-964f-8190f9ab41eb&quot;,&quot;title&quot;:&quot;NodePyATVDeviceEvents&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d92016d7-18fd-407c-9cea-efce1d1a9faa&quot;,&quot;title&quot;:&quot;applyStateAndEmitEvents()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should emit update:key event&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit update:key event&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});await new Promise(cb=&gt;{device.once(\&quot;update:title\&quot;,event=&gt;{assert.ok(event instanceof NodePyATVDeviceEvent);assert.strictEqual(event.key,\&quot;title\&quot;);assert.strictEqual(event.oldValue,null);assert.strictEqual(event.newValue,\&quot;My Movie\&quot;);assert.strictEqual(event.value,\&quot;My Movie\&quot;);assert.deepStrictEqual(event.device,device);cb(void 0)})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;284bcccf-d123-42f5-a833-3beae238ff23&quot;,&quot;parentUUID&quot;:&quot;d92016d7-18fd-407c-9cea-efce1d1a9faa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit update event&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit update event&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});await new Promise(cb=&gt;{device.once(\&quot;update\&quot;,event=&gt;{assert.ok(event instanceof NodePyATVDeviceEvent);assert.strictEqual(event.key,\&quot;title\&quot;);assert.strictEqual(event.oldValue,null);assert.strictEqual(event.newValue,\&quot;My Movie\&quot;);assert.strictEqual(event.value,\&quot;My Movie\&quot;);assert.deepStrictEqual(event.device,device);cb(void 0)})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f17e06fa-edfd-4262-9b08-21e891caf099&quot;,&quot;parentUUID&quot;:&quot;d92016d7-18fd-407c-9cea-efce1d1a9faa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit update:key event before update&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit update:key event before update&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});const sort=[];await Promise.race([new Promise(cb=&gt;{device.once(\&quot;update\&quot;,()=&gt;{sort.push(\&quot;update\&quot;);cb(void 0)})}),new Promise(cb=&gt;{device.once(\&quot;update:title\&quot;,()=&gt;{sort.push(\&quot;update:title\&quot;);cb(void 0)})})]);assert.deepStrictEqual(sort,[\&quot;update:title\&quot;,\&quot;update\&quot;])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7db42401-0b68-4189-b41f-a3ffbe93cf52&quot;,&quot;parentUUID&quot;:&quot;d92016d7-18fd-407c-9cea-efce1d1a9faa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error events on failures&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit error events on failures&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({datetime:\&quot;2021-11-24T21:13:36.424576+03:00\&quot;,exception:\&quot;invalid credentials: 321\&quot;,result:\&quot;failure\&quot;,stacktrace:&#x27;Traceback (most recent call last):\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\&quot;, line 302, in appstart\\n    print(args.output(await _handle_command(args, abort_sem, loop)), flush=True)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\&quot;, line 196, in _handle_command\\n    atv = await connect(config, loop, protocol=Protocol.MRP)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/__init__.py\&quot;, line 96, in connect\\n    for setup_data in proto_methods.setup(\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\&quot;, line 192, in setup\\n    stream = AirPlayStream(config, service)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\&quot;, line 79, in __init__\\n    self._credentials: HapCredentials = parse_credentials(self.service.credentials)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/auth/hap_pairing.py\&quot;, line 139, in parse_credentials\\n    raise exceptions.InvalidCredentialsError(\&quot;invalid credentials: \&quot; + detail_string)\\npyatv.exceptions.InvalidCredentialsError: invalid credentials: 321\\n&#x27;})})});await new Promise(cb=&gt;{device.once(\&quot;error\&quot;,error=&gt;{assert.ok(error instanceof Error);assert.ok(error.toString().includes(\&quot;invalid credentials: 321\&quot;));cb(void 0)})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;38da5534-11f9-4aed-ae84-47c0963796b4&quot;,&quot;parentUUID&quot;:&quot;d92016d7-18fd-407c-9cea-efce1d1a9faa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not emit an update if new value is same as old one&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should not emit an update if new value is same as old one&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let spawnCounter=0;let eventCounter=0;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{if(spawnCounter===0){cp.onStdIn(()=&gt;cp.end())}cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;});spawnCounter++;if(spawnCounter&gt;=2){cp.end()}})});const listener=__name(()=&gt;{eventCounter++},\&quot;listener\&quot;);device.on(\&quot;update\&quot;,listener);await new Promise(cb=&gt;setTimeout(cb,0));await device.getState();device.off(\&quot;update\&quot;,listener);assert.strictEqual(spawnCounter,2);assert.strictEqual(eventCounter,1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cc0e1150-3e65-46e6-8e9c-53cb6eb2dd29&quot;,&quot;parentUUID&quot;:&quot;d92016d7-18fd-407c-9cea-efce1d1a9faa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error event if event listener throws an exception&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit error event if event listener throws an exception&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});let callCounter=0;const error=new Error(\&quot;This is an error. Be nice.\&quot;);device.once(\&quot;error\&quot;,err=&gt;{assert.strictEqual(err,error);callCounter++});const listener=__name(()=&gt;{throw error},\&quot;listener\&quot;);device.on(\&quot;update\&quot;,listener);await new Promise(cb=&gt;setTimeout(cb,0));device.off(\&quot;update\&quot;,listener);assert.strictEqual(callCounter,1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5665e153-e721-4fe0-8f7c-537710b11790&quot;,&quot;parentUUID&quot;:&quot;d92016d7-18fd-407c-9cea-efce1d1a9faa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should also work with powerState&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should also work with powerState&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({datetime:new Date().toJSON(),power_state:\&quot;off\&quot;,result:\&quot;success\&quot;})})});await new Promise(cb=&gt;{device.once(\&quot;update:powerState\&quot;,event=&gt;{assert.ok(event instanceof NodePyATVDeviceEvent);assert.strictEqual(event.key,\&quot;powerState\&quot;);assert.strictEqual(event.oldValue,null);assert.strictEqual(event.newValue,\&quot;off\&quot;);assert.strictEqual(event.newValue,NodePyATVPowerState.off);assert.strictEqual(event.value,\&quot;off\&quot;);assert.strictEqual(event.value,NodePyATVPowerState.off);assert.deepStrictEqual(event.device,device);cb(void 0)})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;512512b9-581e-463e-b6bf-745ef36c15f1&quot;,&quot;parentUUID&quot;:&quot;d92016d7-18fd-407c-9cea-efce1d1a9faa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only one event for powerState changes&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should only one event for powerState changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({datetime:new Date().toJSON(),power_state:\&quot;off\&quot;,result:\&quot;success\&quot;});cp.end()})});let counter=0;device.on(\&quot;update\&quot;,event=&gt;{assert.ok(event instanceof NodePyATVDeviceEvent);assert.strictEqual(event.key,\&quot;powerState\&quot;);assert.strictEqual(event.oldValue,null);assert.strictEqual(event.newValue,\&quot;off\&quot;);assert.strictEqual(event.newValue,NodePyATVPowerState.off);assert.strictEqual(event.value,\&quot;off\&quot;);assert.strictEqual(event.value,NodePyATVPowerState.off);assert.deepStrictEqual(event.device,device);counter++});await new Promise(cb=&gt;setTimeout(cb,10));assert.strictEqual(counter,1);device.removeAllListeners(\&quot;update\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;851eb9d2-f287-41a6-b7f5-1f33764d66a3&quot;,&quot;parentUUID&quot;:&quot;d92016d7-18fd-407c-9cea-efce1d1a9faa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only one event for focusState changes&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should only one event for focusState changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({datetime:new Date().toJSON(),focus_state:\&quot;unfocused\&quot;,result:\&quot;success\&quot;});cp.end()})});let counter=0;device.on(\&quot;update\&quot;,event=&gt;{assert.ok(event instanceof NodePyATVDeviceEvent);assert.strictEqual(event.key,\&quot;focusState\&quot;);assert.strictEqual(event.oldValue,null);assert.strictEqual(event.newValue,\&quot;unfocused\&quot;);assert.strictEqual(event.newValue,NodePyATVFocusState.unfocused);assert.strictEqual(event.value,\&quot;unfocused\&quot;);assert.strictEqual(event.value,NodePyATVFocusState.unfocused);assert.deepStrictEqual(event.device,device);counter++});await new Promise(cb=&gt;setTimeout(cb,10));assert.strictEqual(counter,1);device.removeAllListeners(\&quot;update\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;92dfa180-557d-43c6-b9ae-4803598ef48b&quot;,&quot;parentUUID&quot;:&quot;d92016d7-18fd-407c-9cea-efce1d1a9faa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only one event for outputDevices changes&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should only one event for outputDevices changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({datetime:new Date().toJSON(),output_devices:[{identifier:\&quot;AAAAAAAA-BBBB-CCCC-DDDD-EEEEEEEEEEEE\&quot;,name:\&quot;Living room\&quot;}],result:\&quot;success\&quot;});cp.end()})});let counter=0;device.on(\&quot;update\&quot;,event=&gt;{assert.ok(event instanceof NodePyATVDeviceEvent);assert.strictEqual(event.key,\&quot;outputDevices\&quot;);assert.strictEqual(event.oldValue,null);assert.deepStrictEqual(event.newValue,[{identifier:\&quot;AAAAAAAA-BBBB-CCCC-DDDD-EEEEEEEEEEEE\&quot;,name:\&quot;Living room\&quot;}]);assert.deepStrictEqual(event.value,[{identifier:\&quot;AAAAAAAA-BBBB-CCCC-DDDD-EEEEEEEEEEEE\&quot;,name:\&quot;Living room\&quot;}]);assert.deepStrictEqual(event.device,device);counter++});await new Promise(cb=&gt;setTimeout(cb,10));assert.strictEqual(counter,1);device.removeAllListeners(\&quot;update\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b7ec465-b862-4950-bd17-13864a8b5aaa&quot;,&quot;parentUUID&quot;:&quot;d92016d7-18fd-407c-9cea-efce1d1a9faa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should only one event for volume changes&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should only one event for volume changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({datetime:new Date().toJSON(),result:\&quot;success\&quot;,volume:20});cp.end()})});let counter=0;device.on(\&quot;update\&quot;,event=&gt;{assert.ok(event instanceof NodePyATVDeviceEvent);assert.strictEqual(event.key,\&quot;volume\&quot;);assert.strictEqual(event.oldValue,null);assert.strictEqual(event.newValue,20);assert.strictEqual(event.value,20);assert.deepStrictEqual(event.device,device);counter++});await new Promise(cb=&gt;setTimeout(cb,10));assert.strictEqual(counter,1);device.removeAllListeners(\&quot;update\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b2139191-2f30-4ba8-b23e-1b68cd165fa7&quot;,&quot;parentUUID&quot;:&quot;d92016d7-18fd-407c-9cea-efce1d1a9faa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not trigger any events for newly added fields&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should not trigger any events for newly added fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({datetime:new Date().toJSON(),foo:\&quot;bar\&quot;,result:\&quot;success\&quot;});cp.end()})});device.on(\&quot;update\&quot;,event=&gt;{assert.fail(`Got an update event for a new field: ${event}`)});await new Promise(cb=&gt;setTimeout(cb,10));device.removeAllListeners(\&quot;update\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bd5c6d0d-6bf6-4854-a6ed-538795d90e9e&quot;,&quot;parentUUID&quot;:&quot;d92016d7-18fd-407c-9cea-efce1d1a9faa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;284bcccf-d123-42f5-a833-3beae238ff23&quot;,&quot;f17e06fa-edfd-4262-9b08-21e891caf099&quot;,&quot;7db42401-0b68-4189-b41f-a3ffbe93cf52&quot;,&quot;38da5534-11f9-4aed-ae84-47c0963796b4&quot;,&quot;cc0e1150-3e65-46e6-8e9c-53cb6eb2dd29&quot;,&quot;5665e153-e721-4fe0-8f7c-537710b11790&quot;,&quot;512512b9-581e-463e-b6bf-745ef36c15f1&quot;,&quot;851eb9d2-f287-41a6-b7f5-1f33764d66a3&quot;,&quot;92dfa180-557d-43c6-b9ae-4803598ef48b&quot;,&quot;2b7ec465-b862-4950-bd17-13864a8b5aaa&quot;,&quot;b2139191-2f30-4ba8-b23e-1b68cd165fa7&quot;,&quot;bd5c6d0d-6bf6-4854-a6ed-538795d90e9e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:64,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1059bab5-4e00-45fe-8030-81c1f2642aa3&quot;,&quot;title&quot;:&quot;start|stopListening()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should emit error if spawn fails&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should emit error if spawn fails&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const error=new Error;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.error(error).end()})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);device.on(\&quot;update\&quot;,listener);await new Promise(cb=&gt;{device.once(\&quot;error\&quot;,err=&gt;{assert.strictEqual(err,error);cb(void 0)})});device.off(\&quot;update\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c41bb6a5-17b3-4ac0-9a1e-67a178a550e6&quot;,&quot;parentUUID&quot;:&quot;1059bab5-4e00-45fe-8030-81c1f2642aa3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error on stderr data&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should emit error on stderr data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.stderr(\&quot;Hello World!\&quot;).end()})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);device.on(\&quot;update\&quot;,listener);await new Promise(cb=&gt;{device.once(\&quot;error\&quot;,err=&gt;{assert.ok(err instanceof Error);assert.ok(err.toString().includes(\&quot;Got stderr output from pyatv: Hello World!\&quot;));cb(void 0)})});device.off(\&quot;update\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;971d4375-7983-4792-822d-4352f1b4dc79&quot;,&quot;parentUUID&quot;:&quot;1059bab5-4e00-45fe-8030-81c1f2642aa3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error if stdout is not valid json&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should emit error if stdout is not valid json&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.stdout(\&quot;#\&quot;).end()})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);device.on(\&quot;update\&quot;,listener);await new Promise(cb=&gt;{device.once(\&quot;error\&quot;,err=&gt;{assert.ok(err instanceof Error);assert.ok(err.toString().includes(\&quot;Unable to parse stdout json: SyntaxError\&quot;));cb(void 0)})});device.off(\&quot;update\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;87a6616c-cdca-4965-84c8-4687ad98d2d2&quot;,&quot;parentUUID&quot;:&quot;1059bab5-4e00-45fe-8030-81c1f2642aa3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should restart the process if it gets killed&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should restart the process if it gets killed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;pending&quot;,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1dad45c3-ae1f-4453-9ec2-a417cb2e3054&quot;,&quot;parentUUID&quot;:&quot;1059bab5-4e00-45fe-8030-81c1f2642aa3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c41bb6a5-17b3-4ac0-9a1e-67a178a550e6&quot;,&quot;971d4375-7983-4792-822d-4352f1b4dc79&quot;,&quot;87a6616c-cdca-4965-84c8-4687ad98d2d2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;1dad45c3-ae1f-4453-9ec2-a417cb2e3054&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8e57791e-5755-48b5-bc74-75ec6794d5d7&quot;,&quot;title&quot;:&quot;addListener() / removeAllListeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work without any exceptions&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents addListener() / removeAllListeners() should work without any exceptions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);device.addListener(\&quot;update\&quot;,listener);device.removeAllListeners(\&quot;update\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1a41e6f8-dfb0-47ad-9a60-93651caedafa&quot;,&quot;parentUUID&quot;:&quot;8e57791e-5755-48b5-bc74-75ec6794d5d7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1a41e6f8-dfb0-47ad-9a60-93651caedafa&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7c709a99-63cd-459d-81c0-3e0382076019&quot;,&quot;title&quot;:&quot;emit()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents emit() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end())})});const event=new NodePyATVDeviceEvent({device,key:\&quot;dateTime\&quot;,new:\&quot;bar\&quot;,old:\&quot;foo\&quot;});let executions=0;device.once(\&quot;test\&quot;,e=&gt;{executions++;assert.strictEqual(e,event);assert.strictEqual(executions,1);done()});device.emit(\&quot;test\&quot;,event)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7a492f3c-dc0a-41e3-93df-75031ce365a7&quot;,&quot;parentUUID&quot;:&quot;7c709a99-63cd-459d-81c0-3e0382076019&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7a492f3c-dc0a-41e3-93df-75031ce365a7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;67a7fc5e-640c-4d66-8d98-370b6fec6948&quot;,&quot;title&quot;:&quot;eventNames()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents eventNames() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end())})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);device.on(\&quot;test\&quot;,listener);assert.deepStrictEqual(device.eventNames(),[\&quot;test\&quot;]);device.off(\&quot;test\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e82e39fa-b201-4224-a6f8-d6201834927b&quot;,&quot;parentUUID&quot;:&quot;67a7fc5e-640c-4d66-8d98-370b6fec6948&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e82e39fa-b201-4224-a6f8-d6201834927b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d317c32f-3d15-423c-ae73-74e3407b51ff&quot;,&quot;title&quot;:&quot;getMaxListeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents getMaxListeners() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end())})});const result=device.getMaxListeners();assert.ok(typeof result,\&quot;number\&quot;);assert.ok(result&gt;=10)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e6669e1e-e8ca-41d7-af59-2797758cae94&quot;,&quot;parentUUID&quot;:&quot;d317c32f-3d15-423c-ae73-74e3407b51ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e6669e1e-e8ca-41d7-af59-2797758cae94&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f1ad3e63-6e47-4f93-a4f8-0914ca8a4a93&quot;,&quot;title&quot;:&quot;listenerCount()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents listenerCount() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end())})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);assert.deepStrictEqual(device.listenerCount(\&quot;test\&quot;),0);device.on(\&quot;test\&quot;,listener);assert.deepStrictEqual(device.listenerCount(\&quot;test\&quot;),1);device.off(\&quot;test\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;792b061a-ee3c-4240-a37c-5da806900c6c&quot;,&quot;parentUUID&quot;:&quot;f1ad3e63-6e47-4f93-a4f8-0914ca8a4a93&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;792b061a-ee3c-4240-a37c-5da806900c6c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;455c7b7a-6633-436d-a70f-28338a1b6284&quot;,&quot;title&quot;:&quot;listeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents listeners() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end())})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);assert.deepStrictEqual(device.listeners(\&quot;test\&quot;).length,0);device.on(\&quot;test\&quot;,listener);assert.deepStrictEqual(device.listeners(\&quot;test\&quot;).length,1);assert.deepStrictEqual(device.listeners(\&quot;test\&quot;)[0],listener);device.off(\&quot;test\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ebebcad5-54db-4d90-bdc4-1c15193f33f4&quot;,&quot;parentUUID&quot;:&quot;455c7b7a-6633-436d-a70f-28338a1b6284&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ebebcad5-54db-4d90-bdc4-1c15193f33f4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c34ab0bf-83ab-45dd-b703-b097a9da03ed&quot;,&quot;title&quot;:&quot;prependListener()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents prependListener() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});const listener=__name(()=&gt;{device.removeAllListeners(\&quot;update\&quot;);done()},\&quot;listener\&quot;);device.prependListener(\&quot;update\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;da7acf48-d597-4c8d-998c-0db657eab146&quot;,&quot;parentUUID&quot;:&quot;c34ab0bf-83ab-45dd-b703-b097a9da03ed&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;da7acf48-d597-4c8d-998c-0db657eab146&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b73d653f-11d6-4c55-9f83-1d648bedbb32&quot;,&quot;title&quot;:&quot;prependOnceListener()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents prependOnceListener() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});device.prependOnceListener(\&quot;update\&quot;,()=&gt;done())&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;af19ccb8-d6b0-48e2-8cd4-e4f8bca68516&quot;,&quot;parentUUID&quot;:&quot;b73d653f-11d6-4c55-9f83-1d648bedbb32&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;af19ccb8-d6b0-48e2-8cd4-e4f8bca68516&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f52a00f3-2346-4aa6-8b8d-1e8bf8f74fe0&quot;,&quot;title&quot;:&quot;rawListeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents rawListeners() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end())})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);assert.deepStrictEqual(device.rawListeners(\&quot;test\&quot;).length,0);device.on(\&quot;test\&quot;,listener);assert.deepStrictEqual(device.rawListeners(\&quot;test\&quot;).length,1);assert.deepStrictEqual(device.rawListeners(\&quot;test\&quot;)[0],listener);device.off(\&quot;test\&quot;,listener)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;badbe0e1-3969-4734-a78a-1ee4286d0a1a&quot;,&quot;parentUUID&quot;:&quot;f52a00f3-2346-4aa6-8b8d-1e8bf8f74fe0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;badbe0e1-3969-4734-a78a-1ee4286d0a1a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1883d23a-ac20-48a2-885d-ded14092070f&quot;,&quot;title&quot;:&quot;removeListener()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work without any exceptions&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents removeListener() should work without any exceptions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.onStdIn(()=&gt;cp.end());cp.stdout({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});const listener=__name(()=&gt;{},\&quot;listener\&quot;);device.addListener(\&quot;update\&quot;,listener);assert.deepStrictEqual(device.listenerCount(\&quot;update\&quot;),1);device.removeListener(\&quot;update\&quot;,listener);assert.deepStrictEqual(device.listenerCount(\&quot;update\&quot;),0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2d335deb-6d9f-44df-871d-70357671fa1d&quot;,&quot;parentUUID&quot;:&quot;1883d23a-ac20-48a2-885d-ded14092070f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2d335deb-6d9f-44df-871d-70357671fa1d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0b25fb33-cfaa-40b3-afab-2ccee568466c&quot;,&quot;title&quot;:&quot;NodePyATVDevice&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c0dff91f-0470-4701-a50c-cb6cf50c44eb&quot;,&quot;title&quot;:&quot;get name()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the name&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get name() should return the name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;});assert.strictEqual(device.name,\&quot;My Testdevice\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8f65ec70-1ff4-4204-bac5-b7b7fc2dc04b&quot;,&quot;parentUUID&quot;:&quot;c0dff91f-0470-4701-a50c-cb6cf50c44eb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8f65ec70-1ff4-4204-bac5-b7b7fc2dc04b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;00b55e0e-3cef-40c7-98ff-49c1d3b2fef8&quot;,&quot;title&quot;:&quot;get host()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the host&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get host() should return the host&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;});assert.strictEqual(device.host,\&quot;192.168.178.2\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;906065b4-7867-43f2-93fd-077a0cf63eaf&quot;,&quot;parentUUID&quot;:&quot;00b55e0e-3cef-40c7-98ff-49c1d3b2fef8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;906065b4-7867-43f2-93fd-077a0cf63eaf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2cf0d2df-8398-45d3-9409-1b09385f1f39&quot;,&quot;title&quot;:&quot;get id()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the id&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get id() should return the id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,id:\&quot;*****\&quot;,name:\&quot;My Testdevice\&quot;});assert.strictEqual(device.id,\&quot;*****\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c5e5ccf0-5827-4d5f-85b6-0cce8344db45&quot;,&quot;parentUUID&quot;:&quot;2cf0d2df-8398-45d3-9409-1b09385f1f39&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c5e5ccf0-5827-4d5f-85b6-0cce8344db45&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e8baa21c-5f7f-45c7-a657-aea3bbc14da6&quot;,&quot;title&quot;:&quot;get allIDs()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return all the IDs&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get allIDs() should return all the IDs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({allIDs:[\&quot;some_id_1\&quot;,\&quot;some_id_2\&quot;,\&quot;some_id_3\&quot;],host:\&quot;192.168.178.2\&quot;,id:\&quot;*****\&quot;,name:\&quot;My Testdevice\&quot;});assert.deepStrictEqual(device.allIDs,[\&quot;some_id_1\&quot;,\&quot;some_id_2\&quot;,\&quot;some_id_3\&quot;])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;638c3fcc-7b7c-4e3e-a142-7070aa12e948&quot;,&quot;parentUUID&quot;:&quot;e8baa21c-5f7f-45c7-a657-aea3bbc14da6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;638c3fcc-7b7c-4e3e-a142-7070aa12e948&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5d7a846d-88d5-4e84-b659-e3d9df667a90&quot;,&quot;title&quot;:&quot;get protocol()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the protocol&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get protocol() should return the protocol&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,protocol:NodePyATVProtocol.airplay});assert.strictEqual(device.protocol,NodePyATVProtocol.airplay)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f34ae8df-43b5-4fe5-a769-60709dc112af&quot;,&quot;parentUUID&quot;:&quot;5d7a846d-88d5-4e84-b659-e3d9df667a90&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f34ae8df-43b5-4fe5-a769-60709dc112af&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d9c55b4f-5709-4444-96bc-38c5be939c58&quot;,&quot;title&quot;:&quot;get mac()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the mac&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get mac() should return the mac&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,mac:\&quot;AA:BB:CC:DD:EE:FF\&quot;,name:\&quot;My Testdevice\&quot;});assert.strictEqual(device.mac,\&quot;AA:BB:CC:DD:EE:FF\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6bcbca34-19ed-45c5-8745-79e3d2a827bd&quot;,&quot;parentUUID&quot;:&quot;d9c55b4f-5709-4444-96bc-38c5be939c58&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6bcbca34-19ed-45c5-8745-79e3d2a827bd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6ad4536f-8905-4a88-9bcd-62e74140f5e9&quot;,&quot;title&quot;:&quot;get model()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the model if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get model() should return the model if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;10.0.10.81\&quot;,id:\&quot;xxx\&quot;,model:\&quot;Gen4K\&quot;,name:\&quot;Vardagsrum\&quot;});assert.strictEqual(device.model,\&quot;Gen4K\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d3c09069-4f66-41b5-835d-010572741dc3&quot;,&quot;parentUUID&quot;:&quot;6ad4536f-8905-4a88-9bcd-62e74140f5e9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get model() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;10.0.10.81\&quot;,name:\&quot;Vardagsrum\&quot;});assert.strictEqual(device.model,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7b7249ad-ea58-4f06-a018-bf9a7182ecd1&quot;,&quot;parentUUID&quot;:&quot;6ad4536f-8905-4a88-9bcd-62e74140f5e9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d3c09069-4f66-41b5-835d-010572741dc3&quot;,&quot;7b7249ad-ea58-4f06-a018-bf9a7182ecd1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7a9b139b-292c-49cb-a1fd-8c0a85df0507&quot;,&quot;title&quot;:&quot;get modelName()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the model name if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get modelName() should return the model name if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;10.0.10.81\&quot;,id:\&quot;xxx\&quot;,modelName:\&quot;Apple TV 4K\&quot;,name:\&quot;Vardagsrum\&quot;});assert.strictEqual(device.modelName,\&quot;Apple TV 4K\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;da37934f-0844-49b2-b5b0-63b1faa6120c&quot;,&quot;parentUUID&quot;:&quot;7a9b139b-292c-49cb-a1fd-8c0a85df0507&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get modelName() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;10.0.10.81\&quot;,name:\&quot;Vardagsrum\&quot;});assert.strictEqual(device.modelName,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8cde61e-5f8c-4df9-a327-9f3efc3ce2d9&quot;,&quot;parentUUID&quot;:&quot;7a9b139b-292c-49cb-a1fd-8c0a85df0507&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;da37934f-0844-49b2-b5b0-63b1faa6120c&quot;,&quot;c8cde61e-5f8c-4df9-a327-9f3efc3ce2d9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d6353a86-b723-4c8c-8292-7659eb70835e&quot;,&quot;title&quot;:&quot;get os()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the operating system if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get os() should return the operating system if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;10.0.10.81\&quot;,id:\&quot;xxx\&quot;,name:\&quot;Vardagsrum\&quot;,os:\&quot;TvOS\&quot;});assert.strictEqual(device.os,\&quot;TvOS\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c70de354-a1fc-4e2a-9631-9a4698be96a4&quot;,&quot;parentUUID&quot;:&quot;d6353a86-b723-4c8c-8292-7659eb70835e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get os() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;10.0.10.81\&quot;,name:\&quot;Vardagsrum\&quot;});assert.strictEqual(device.os,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1418ab09-9316-4df0-a06d-6df458fd6c78&quot;,&quot;parentUUID&quot;:&quot;d6353a86-b723-4c8c-8292-7659eb70835e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c70de354-a1fc-4e2a-9631-9a4698be96a4&quot;,&quot;1418ab09-9316-4df0-a06d-6df458fd6c78&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e55b80ef-353a-4731-92a9-81e9f99105d0&quot;,&quot;title&quot;:&quot;get version()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the version if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get version() should return the version if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;10.0.10.81\&quot;,id:\&quot;xxx\&quot;,name:\&quot;Vardagsrum\&quot;,version:\&quot;15.5.1\&quot;});assert.strictEqual(device.version,\&quot;15.5.1\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ad6a31cf-e8d8-459f-8fb1-491235a1b43a&quot;,&quot;parentUUID&quot;:&quot;e55b80ef-353a-4731-92a9-81e9f99105d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get version() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;10.0.10.81\&quot;,name:\&quot;Vardagsrum\&quot;});assert.strictEqual(device.version,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39917dbe-0d05-4c8a-9a19-e4e7012e1980&quot;,&quot;parentUUID&quot;:&quot;e55b80ef-353a-4731-92a9-81e9f99105d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ad6a31cf-e8d8-459f-8fb1-491235a1b43a&quot;,&quot;39917dbe-0d05-4c8a-9a19-e4e7012e1980&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d94e5811-5fe2-474c-8cb4-1482aa7f5c51&quot;,&quot;title&quot;:&quot;get services()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the services if set by scan&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get services() should return the services if set by scan&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;10.0.10.81\&quot;,id:\&quot;xxx\&quot;,name:\&quot;Vardagsrum\&quot;,services:[{port:49152,protocol:NodePyATVProtocol.mrp},{port:7e3,protocol:NodePyATVProtocol.airplay}]});assert.deepStrictEqual(device.services,[{port:49152,protocol:\&quot;mrp\&quot;},{port:7e3,protocol:\&quot;airplay\&quot;}])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d5138f27-1119-4837-892c-df29102d37ed&quot;,&quot;parentUUID&quot;:&quot;d94e5811-5fe2-474c-8cb4-1482aa7f5c51&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return undefined otherwise&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get services() should return undefined otherwise&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;10.0.10.81\&quot;,name:\&quot;Vardagsrum\&quot;});assert.strictEqual(device.services,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3c7833a9-6f9f-4965-ac60-c40f78475c2b&quot;,&quot;parentUUID&quot;:&quot;d94e5811-5fe2-474c-8cb4-1482aa7f5c51&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d5138f27-1119-4837-892c-df29102d37ed&quot;,&quot;3c7833a9-6f9f-4965-ac60-c40f78475c2b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3d63b1c6-1191-45ba-918a-0a1c827968b3&quot;,&quot;title&quot;:&quot;get debug()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return true if set to true&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get debug() should return true if set to true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({debug:true,host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;});assert.strictEqual(device.debug,true)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;432978e5-a685-4e94-b45b-e4843f7dd086&quot;,&quot;parentUUID&quot;:&quot;3d63b1c6-1191-45ba-918a-0a1c827968b3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return fn if set to custom function&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get debug() should return fn if set to custom function&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fn=__name(()=&gt;{},\&quot;fn\&quot;);const device=new NodePyATVDevice({debug:fn,host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;});assert.strictEqual(device.debug,fn)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d33e3d8f-3583-4ace-bc62-9d52ee438580&quot;,&quot;parentUUID&quot;:&quot;3d63b1c6-1191-45ba-918a-0a1c827968b3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return false if unset&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get debug() should return false if unset&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;});assert.strictEqual(device.debug,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6d8ec68b-6d87-4956-9a6b-85fcee56178f&quot;,&quot;parentUUID&quot;:&quot;3d63b1c6-1191-45ba-918a-0a1c827968b3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;432978e5-a685-4e94-b45b-e4843f7dd086&quot;,&quot;d33e3d8f-3583-4ace-bc62-9d52ee438580&quot;,&quot;6d8ec68b-6d87-4956-9a6b-85fcee56178f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ac2fd2a3-838c-42bd-b723-cc0a122dd5ce&quot;,&quot;title&quot;:&quot;set debug()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work for debug = true&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;});assert.strictEqual(device.debug,void 0);device.debug=true;assert.strictEqual(device.debug,true)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eed0e13b-77e3-4cba-ba2b-6154166a0eed&quot;,&quot;parentUUID&quot;:&quot;ac2fd2a3-838c-42bd-b723-cc0a122dd5ce&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for debug = undefined&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = undefined&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({debug:true,host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;});assert.strictEqual(device.debug,true);device.debug=void 0;assert.strictEqual(device.debug,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c367de3f-adb1-407a-b5ff-fd93a1f74ba1&quot;,&quot;parentUUID&quot;:&quot;ac2fd2a3-838c-42bd-b723-cc0a122dd5ce&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for debug = undefined&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = undefined&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({debug:true,host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;});assert.strictEqual(device.debug,true);device.debug=void 0;assert.strictEqual(device.debug,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;abc74464-3b9c-4bb4-8e0b-99fea47468b8&quot;,&quot;parentUUID&quot;:&quot;ac2fd2a3-838c-42bd-b723-cc0a122dd5ce&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for debug = fn&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = fn&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;});const fn=__name(()=&gt;{},\&quot;fn\&quot;);assert.strictEqual(device.debug,void 0);device.debug=fn;assert.strictEqual(device.debug,fn)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ed82332d-25c3-49bf-b14a-c0a22c351584&quot;,&quot;parentUUID&quot;:&quot;ac2fd2a3-838c-42bd-b723-cc0a122dd5ce&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;eed0e13b-77e3-4cba-ba2b-6154166a0eed&quot;,&quot;c367de3f-adb1-407a-b5ff-fd93a1f74ba1&quot;,&quot;abc74464-3b9c-4bb4-8e0b-99fea47468b8&quot;,&quot;ed82332d-25c3-49bf-b14a-c0a22c351584&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f487412e-371a-4e7b-9ebf-9d082e23e0c0&quot;,&quot;title&quot;:&quot;toJSON()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a object representation&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice toJSON() should return a object representation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,id:\&quot;*****\&quot;,name:\&quot;My Testdevice\&quot;,protocol:NodePyATVProtocol.airplay});assert.deepEqual(device.toJSON(),{host:\&quot;192.168.178.2\&quot;,id:\&quot;*****\&quot;,mac:void 0,name:\&quot;My Testdevice\&quot;,protocol:NodePyATVProtocol.airplay})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;12123de5-b861-4ec0-be9f-1beb9fb4815e&quot;,&quot;parentUUID&quot;:&quot;f487412e-371a-4e7b-9ebf-9d082e23e0c0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should be possible to create a new device from this&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice toJSON() should be possible to create a new device from this&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const config={host:\&quot;192.168.178.2\&quot;,id:\&quot;*****\&quot;,mac:\&quot;469943881251875\&quot;,name:\&quot;My Testdevice\&quot;,protocol:NodePyATVProtocol.airplay};const deviceA=new NodePyATVDevice(config);const deviceB=new NodePyATVDevice(deviceA.toJSON());assert.deepEqual(deviceB.toJSON(),config)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fc078696-69b2-4bb2-ba5a-ec5b496ad9a0&quot;,&quot;parentUUID&quot;:&quot;f487412e-371a-4e7b-9ebf-9d082e23e0c0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;12123de5-b861-4ec0-be9f-1beb9fb4815e&quot;,&quot;fc078696-69b2-4bb2-ba5a-ec5b496ad9a0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;140c576f-784b-4329-89aa-69b66a737c48&quot;,&quot;title&quot;:&quot;toString()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice toString() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;});assert.strictEqual(device.toString(),\&quot;NodePyATVDevice(My Testdevice, 192.168.178.2)\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;237df863-ad50-48a1-84a7-70c096d4448b&quot;,&quot;parentUUID&quot;:&quot;140c576f-784b-4329-89aa-69b66a737c48&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;237df863-ad50-48a1-84a7-70c096d4448b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;56081a9c-efde-4f60-ba9f-79ffd2e95084&quot;,&quot;title&quot;:&quot;getState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work [I]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should work [I]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;pending&quot;,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;73f08c52-ab7b-44c7-bcc3-00517e872bbb&quot;,&quot;parentUUID&quot;:&quot;56081a9c-efde-4f60-ba9f-79ffd2e95084&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({album:null,app:\&quot;Disney+\&quot;,app_id:\&quot;com.disney.disneyplus\&quot;,artist:null,datetime:\&quot;2020-11-07T22:38:43.608030+01:00\&quot;,device_state:\&quot;playing\&quot;,genre:null,hash:\&quot;100e0ab6-6ff5-4199-9c04-a7107ff78712\&quot;,media_type:\&quot;video\&quot;,position:27,repeat:\&quot;off\&quot;,result:\&quot;success\&quot;,shuffle:\&quot;off\&quot;,title:\&quot;Solo: A Star Wars Story\&quot;,total_time:8097})})});const result=await device.getState();assert.deepStrictEqual(result,{album:null,app:\&quot;Disney+\&quot;,appId:\&quot;com.disney.disneyplus\&quot;,artist:null,contentIdentifier:null,dateTime:new Date(\&quot;2020-11-07T22:38:43.608030+01:00\&quot;),deviceState:NodePyATVDeviceState.playing,episodeNumber:null,focusState:null,genre:null,hash:\&quot;100e0ab6-6ff5-4199-9c04-a7107ff78712\&quot;,iTunesStoreIdentifier:null,mediaType:NodePyATVMediaType.video,outputDevices:null,position:27,powerState:null,repeat:NodePyATVRepeatState.off,seasonNumber:null,seriesName:null,shuffle:NodePyATVShuffleState.off,title:\&quot;Solo: A Star Wars Story\&quot;,totalTime:8097,volume:null})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a859c808-cf08-4930-98ed-51d3da625ff8&quot;,&quot;parentUUID&quot;:&quot;56081a9c-efde-4f60-ba9f-79ffd2e95084&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should reject with error if pyatv fails&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should reject with error if pyatv fails&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({datetime:\&quot;2021-11-24T21:13:36.424576+03:00\&quot;,exception:\&quot;invalid credentials: 321\&quot;,result:\&quot;failure\&quot;,stacktrace:&#x27;Traceback (most recent call last):\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\&quot;, line 302, in appstart\\n    print(args.output(await _handle_command(args, abort_sem, loop)), flush=True)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\&quot;, line 196, in _handle_command\\n    atv = await connect(config, loop, protocol=Protocol.MRP)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/__init__.py\&quot;, line 96, in connect\\n    for setup_data in proto_methods.setup(\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\&quot;, line 192, in setup\\n    stream = AirPlayStream(config, service)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\&quot;, line 79, in __init__\\n    self._credentials: HapCredentials = parse_credentials(self.service.credentials)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/auth/hap_pairing.py\&quot;, line 139, in parse_credentials\\n    raise exceptions.InvalidCredentialsError(\&quot;invalid credentials: \&quot; + detail_string)\\npyatv.exceptions.InvalidCredentialsError: invalid credentials: 321\\n&#x27;})})});assert.rejects(async()=&gt;{await device.getState()},/Got pyatv Error: invalid credentials: 321/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a2750d47-24f8-4183-ae01-fc6ddb5cac8e&quot;,&quot;parentUUID&quot;:&quot;56081a9c-efde-4f60-ba9f-79ffd2e95084&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should cache requests for a bit&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should cache requests for a bit&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let executions=0;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{executions++;cp.end({album:null,app:\&quot;Disney+\&quot;,app_id:\&quot;com.disney.disneyplus\&quot;,artist:null,datetime:new Date().toJSON(),device_state:\&quot;playing\&quot;,genre:null,hash:\&quot;100e0ab6-6ff5-4199-9c04-a7107ff78712\&quot;,media_type:\&quot;video\&quot;,position:27,repeat:\&quot;off\&quot;,result:\&quot;success\&quot;,shuffle:\&quot;off\&quot;,title:\&quot;Solo: A Star Wars Story\&quot;,total_time:8097})})});const firstResult=await device.getState();const secondResult=await device.getState();assert.strictEqual(firstResult.dateTime,secondResult.dateTime);assert.strictEqual(executions,1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3af68765-fbe2-4694-9f78-59f2ccc36ff1&quot;,&quot;parentUUID&quot;:&quot;56081a9c-efde-4f60-ba9f-79ffd2e95084&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update the position if cache was used&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should update the position if cache was used&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({album:null,app:\&quot;Disney+\&quot;,app_id:\&quot;com.disney.disneyplus\&quot;,artist:null,datetime:new Date(new Date().getTime()-1e3).toJSON(),device_state:\&quot;playing\&quot;,genre:null,hash:\&quot;100e0ab6-6ff5-4199-9c04-a7107ff78712\&quot;,media_type:\&quot;video\&quot;,position:27,repeat:\&quot;off\&quot;,result:\&quot;success\&quot;,shuffle:\&quot;off\&quot;,title:\&quot;Solo: A Star Wars Story\&quot;,total_time:8097})})});const firstResult=await device.getState();assert.strictEqual(firstResult.position,27);const secondResult=await device.getState();assert.ok(secondResult.position);assert.ok(secondResult.position&gt;27,`Position should be &gt; 27, was ${secondResult.position}`);assert.ok(secondResult.position&lt;30,`Position should be &gt; 27, was ${secondResult.position}`)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5f7cfb77-054e-4306-85e9-0221f303e743&quot;,&quot;parentUUID&quot;:&quot;56081a9c-efde-4f60-ba9f-79ffd2e95084&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a859c808-cf08-4930-98ed-51d3da625ff8&quot;,&quot;a2750d47-24f8-4183-ae01-fc6ddb5cac8e&quot;,&quot;3af68765-fbe2-4694-9f78-59f2ccc36ff1&quot;,&quot;5f7cfb77-054e-4306-85e9-0221f303e743&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;73f08c52-ab7b-44c7-bcc3-00517e872bbb&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f0829568-50eb-491a-a81b-146c27721fea&quot;,&quot;title&quot;:&quot;clearState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice clearState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let executions=0;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{executions++;cp.end({datetime:\&quot;2020-11-07T22:38:43.608030+01:00\&quot;,result:\&quot;success\&quot;,title:\&quot;Solo: A Star Wars Story\&quot;})})});assert.deepStrictEqual(await device.getTitle(),\&quot;Solo: A Star Wars Story\&quot;);device.clearState();assert.deepStrictEqual(await device.getTitle(),\&quot;Solo: A Star Wars Story\&quot;);assert.strictEqual(executions,2)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c1ecbd28-687b-4403-8dd0-fcff78ba9678&quot;,&quot;parentUUID&quot;:&quot;f0829568-50eb-491a-a81b-146c27721fea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c1ecbd28-687b-4403-8dd0-fcff78ba9678&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1434f8a4-4f08-4df7-8c57-5c78b4d8325b&quot;,&quot;title&quot;:&quot;getDateTime()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getDateTime() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({datetime:new Date().toJSON(),result:\&quot;success\&quot;})})});const result=await device.getDateTime();assert.ok(result instanceof Date)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5069d5be-de09-4d07-9cd2-0f37305396d8&quot;,&quot;parentUUID&quot;:&quot;1434f8a4-4f08-4df7-8c57-5c78b4d8325b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5069d5be-de09-4d07-9cd2-0f37305396d8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;be6432a4-1658-4483-a65a-787d35469ad4&quot;,&quot;title&quot;:&quot;getHash()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getHash() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({hash:\&quot;12345\&quot;,result:\&quot;success\&quot;})})});const result=await device.getHash();assert.strictEqual(result,\&quot;12345\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;795134ff-1173-46c3-9fba-c2088c05fcc0&quot;,&quot;parentUUID&quot;:&quot;be6432a4-1658-4483-a65a-787d35469ad4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;795134ff-1173-46c3-9fba-c2088c05fcc0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;eb3e05f5-d638-46f0-8c08-7f47f9f14600&quot;,&quot;title&quot;:&quot;getMediaType()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getMediaType() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({media_type:\&quot;video\&quot;,result:\&quot;success\&quot;})})});const result=await device.getMediaType();assert.deepStrictEqual(result,NodePyATVMediaType.video);assert.deepStrictEqual(result,\&quot;video\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;931035ea-0f72-470c-8ff4-573d44e186d9&quot;,&quot;parentUUID&quot;:&quot;eb3e05f5-d638-46f0-8c08-7f47f9f14600&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;931035ea-0f72-470c-8ff4-573d44e186d9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1d8dcc92-c5c5-45e0-9d00-f806482208f1&quot;,&quot;title&quot;:&quot;getDeviceState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getDeviceState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({device_state:\&quot;seeking\&quot;,result:\&quot;success\&quot;})})});const result=await device.getDeviceState();assert.deepStrictEqual(result,NodePyATVDeviceState.seeking);assert.deepStrictEqual(result,\&quot;seeking\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;455636e0-ad7f-4a80-9f60-3f4813a4bc21&quot;,&quot;parentUUID&quot;:&quot;1d8dcc92-c5c5-45e0-9d00-f806482208f1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;455636e0-ad7f-4a80-9f60-3f4813a4bc21&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;341469ac-e9a9-4a25-8b5a-9850e6368210&quot;,&quot;title&quot;:&quot;getTitle()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getTitle() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,title:\&quot;My Movie\&quot;})})});const result=await device.getTitle();assert.strictEqual(result,\&quot;My Movie\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;80295c66-3d4e-4963-aeb2-2589f11b6be9&quot;,&quot;parentUUID&quot;:&quot;341469ac-e9a9-4a25-8b5a-9850e6368210&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;80295c66-3d4e-4963-aeb2-2589f11b6be9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;45cc2f2e-7714-45b1-998d-45489f7fb13e&quot;,&quot;title&quot;:&quot;getArtist()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getArtist() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({artist:\&quot;My Artist\&quot;,result:\&quot;success\&quot;})})});const result=await device.getArtist();assert.strictEqual(result,\&quot;My Artist\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8a29b6be-624f-41aa-ad93-0ed4e3482a5a&quot;,&quot;parentUUID&quot;:&quot;45cc2f2e-7714-45b1-998d-45489f7fb13e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8a29b6be-624f-41aa-ad93-0ed4e3482a5a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d42a3be9-c8a9-4b46-bd99-57f2b32c7641&quot;,&quot;title&quot;:&quot;getAlbum()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getAlbum() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({album:\&quot;My ALbum\&quot;,result:\&quot;success\&quot;})})});const result=await device.getAlbum();assert.strictEqual(result,\&quot;My ALbum\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;55948357-e8b2-4796-8b5d-b61efea9351d&quot;,&quot;parentUUID&quot;:&quot;d42a3be9-c8a9-4b46-bd99-57f2b32c7641&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;55948357-e8b2-4796-8b5d-b61efea9351d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;48321dd3-6e3a-4539-b3e0-79612c45c73b&quot;,&quot;title&quot;:&quot;getGenre()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getGenre() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({genre:\&quot;My Genre\&quot;,result:\&quot;success\&quot;})})});const result=await device.getGenre();assert.strictEqual(result,\&quot;My Genre\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d6f6a7fc-9810-4b46-b6b5-d7a8e587c52f&quot;,&quot;parentUUID&quot;:&quot;48321dd3-6e3a-4539-b3e0-79612c45c73b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d6f6a7fc-9810-4b46-b6b5-d7a8e587c52f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0a0d9848-fc20-4fda-89ac-b6ad45e5d1dc&quot;,&quot;title&quot;:&quot;getTotalTime()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getTotalTime() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,total_time:45})})});const result=await device.getTotalTime();assert.strictEqual(result,45)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5899c3c7-990d-45fb-aeae-2514d5880bfc&quot;,&quot;parentUUID&quot;:&quot;0a0d9848-fc20-4fda-89ac-b6ad45e5d1dc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5899c3c7-990d-45fb-aeae-2514d5880bfc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;36411793-828d-47db-8374-4a90f96a0377&quot;,&quot;title&quot;:&quot;getPosition()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getPosition() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({position:30,result:\&quot;success\&quot;})})});const result=await device.getPosition();assert.strictEqual(result,30)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;14d3144a-8e43-4ec8-8395-2a4913fd65a4&quot;,&quot;parentUUID&quot;:&quot;36411793-828d-47db-8374-4a90f96a0377&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;14d3144a-8e43-4ec8-8395-2a4913fd65a4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7d9de4aa-ccb2-47af-95cd-84bd178e656b&quot;,&quot;title&quot;:&quot;getShuffle()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getShuffle() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,shuffle:\&quot;songs\&quot;})})});const result=await device.getShuffle();assert.deepStrictEqual(result,NodePyATVShuffleState.songs);assert.deepStrictEqual(result,\&quot;songs\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1486bb2a-355d-4ba5-a563-c1682f1f168c&quot;,&quot;parentUUID&quot;:&quot;7d9de4aa-ccb2-47af-95cd-84bd178e656b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1486bb2a-355d-4ba5-a563-c1682f1f168c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;43c132ee-b855-4e41-8bd6-95bb057cd2c0&quot;,&quot;title&quot;:&quot;getRepeat()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getRepeat() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({repeat:\&quot;all\&quot;,result:\&quot;success\&quot;})})});const result=await device.getRepeat();assert.deepStrictEqual(result,NodePyATVRepeatState.all);assert.deepStrictEqual(result,\&quot;all\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ef663c3b-7e4e-4d3e-a9d8-6cdb7c9392d8&quot;,&quot;parentUUID&quot;:&quot;43c132ee-b855-4e41-8bd6-95bb057cd2c0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ef663c3b-7e4e-4d3e-a9d8-6cdb7c9392d8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;dc863ec1-d6e8-4e49-99c1-b2395e9a73a5&quot;,&quot;title&quot;:&quot;getApp()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getApp() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({app:\&quot;My App\&quot;,result:\&quot;success\&quot;})})});const result=await device.getApp();assert.strictEqual(result,\&quot;My App\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c0017267-64c9-4591-a8fa-c080a6731822&quot;,&quot;parentUUID&quot;:&quot;dc863ec1-d6e8-4e49-99c1-b2395e9a73a5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c0017267-64c9-4591-a8fa-c080a6731822&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;61a93757-c2dc-432b-8112-5c9b37da56cd&quot;,&quot;title&quot;:&quot;getAppId()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getAppId() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({app_id:\&quot;app.example.com\&quot;,result:\&quot;success\&quot;})})});const result=await device.getAppId();assert.strictEqual(result,\&quot;app.example.com\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5a868766-08a4-4434-a7b0-15e4ab9dba1a&quot;,&quot;parentUUID&quot;:&quot;61a93757-c2dc-432b-8112-5c9b37da56cd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5a868766-08a4-4434-a7b0-15e4ab9dba1a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;43269629-509c-409b-b13e-56c77bfded98&quot;,&quot;title&quot;:&quot;getPowerState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getPowerState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({power_state:\&quot;on\&quot;,result:\&quot;success\&quot;})})});const result=await device.getPowerState();assert.strictEqual(result,NodePyATVPowerState.on)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fd8b1f22-ad3a-4768-b739-f085d86097f3&quot;,&quot;parentUUID&quot;:&quot;43269629-509c-409b-b13e-56c77bfded98&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fd8b1f22-ad3a-4768-b739-f085d86097f3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6656687c-9bb0-4191-9946-7822738814a0&quot;,&quot;title&quot;:&quot;getVolume()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getVolume() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,volume:50})})});const result=await device.getVolume();assert.strictEqual(result,50)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dc2cd078-f5fd-465f-a30b-73de2ddbe148&quot;,&quot;parentUUID&quot;:&quot;6656687c-9bb0-4191-9946-7822738814a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dc2cd078-f5fd-465f-a30b-73de2ddbe148&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;617b9eb0-bd39-471e-99cd-405698e49a73&quot;,&quot;title&quot;:&quot;getFocusState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getFocusState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({focus_state:\&quot;focused\&quot;,result:\&quot;success\&quot;})})});const result=await device.getFocusState();assert.strictEqual(result,NodePyATVFocusState.focused)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dc9dc5bf-e23c-438a-8234-756d36689589&quot;,&quot;parentUUID&quot;:&quot;617b9eb0-bd39-471e-99cd-405698e49a73&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dc9dc5bf-e23c-438a-8234-756d36689589&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c4b0da84-6e52-4b91-9fa5-57b5505a589f&quot;,&quot;title&quot;:&quot;getOutputDevices()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getOutputDevices() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({output_devices:[{identifier:\&quot;foo\&quot;,name:\&quot;Apple TV\&quot;}],result:\&quot;success\&quot;})})});const result=await device.getOutputDevices();assert.deepStrictEqual(result,[{identifier:\&quot;foo\&quot;,name:\&quot;Apple TV\&quot;}])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9bb7be5d-0e34-45d8-adf3-b1a2d1505d69&quot;,&quot;parentUUID&quot;:&quot;c4b0da84-6e52-4b91-9fa5-57b5505a589f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9bb7be5d-0e34-45d8-adf3-b1a2d1505d69&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b1da4d19-1f7e-4071-8fae-ece3f6459363&quot;,&quot;title&quot;:&quot;getContentIdentifier()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getContentIdentifier() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({content_identifier:\&quot;1234\&quot;,result:\&quot;success\&quot;})})});const result=await device.getContentIdentifier();assert.strictEqual(result,\&quot;1234\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7062891b-7e7b-4562-884c-e374b50917f4&quot;,&quot;parentUUID&quot;:&quot;b1da4d19-1f7e-4071-8fae-ece3f6459363&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7062891b-7e7b-4562-884c-e374b50917f4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ab485051-af15-4881-a7b1-1bc6f326f11b&quot;,&quot;title&quot;:&quot;getiTunesStoreIdentifier()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getiTunesStoreIdentifier() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({itunes_store_identifier:1234,result:\&quot;success\&quot;})})});const result=await device.getiTunesStoreIdentifier();assert.strictEqual(result,1234)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1d30f7c0-0a6e-4ec8-a53d-90db01f4b5be&quot;,&quot;parentUUID&quot;:&quot;ab485051-af15-4881-a7b1-1bc6f326f11b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1d30f7c0-0a6e-4ec8-a53d-90db01f4b5be&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;53886be4-9ac2-46f7-8413-a0a5a23640e3&quot;,&quot;title&quot;:&quot;getEpisodeNumber()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getEpisodeNumber() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({episode_number:12,result:\&quot;success\&quot;})})});const result=await device.getEpisodeNumber();assert.strictEqual(result,12)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d9b54815-1b81-4ebb-b8ec-705abf067ec1&quot;,&quot;parentUUID&quot;:&quot;53886be4-9ac2-46f7-8413-a0a5a23640e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d9b54815-1b81-4ebb-b8ec-705abf067ec1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d19b9105-d50e-411f-b80e-a004952117cb&quot;,&quot;title&quot;:&quot;getSeasonNumber()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getSeasonNumber() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,season_number:2})})});const result=await device.getSeasonNumber();assert.strictEqual(result,2)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b825d95a-3320-43a0-9396-781bae772a99&quot;,&quot;parentUUID&quot;:&quot;d19b9105-d50e-411f-b80e-a004952117cb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b825d95a-3320-43a0-9396-781bae772a99&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;451ad686-5f4c-4c8e-bb2c-ef67e9cea7bd&quot;,&quot;title&quot;:&quot;getSeriesName()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getSeriesName() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end({result:\&quot;success\&quot;,series_name:\&quot;The Testing Disaster\&quot;})})});const result=await device.getSeriesName();assert.strictEqual(result,\&quot;The Testing Disaster\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fb7e050e-c1af-4062-a175-d30ae6b9259b&quot;,&quot;parentUUID&quot;:&quot;451ad686-5f4c-4c8e-bb2c-ef67e9cea7bd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fb7e050e-c1af-4062-a175-d30ae6b9259b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;81813c4a-729f-41b1-8a54-3d53dc0593e9&quot;,&quot;title&quot;:&quot;listApps()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice listApps() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(\&quot;App: Fitness (com.apple.Fitness), App: Podcasts (com.apple.podcasts), App: Filme (com.apple.TVMovies), App: Prime Video (com.amazon.aiv.AIVApp), App: TV (com.apple.TVWatchList), App: Fotos (com.apple.TVPhotos), App: App\\xA0Store (com.apple.TVAppStore), App: Arcade (com.apple.Arcade), App: TV-Sendungen (com.apple.TVShows), App: Suchen (com.apple.TVSearch), App: Live TV (de.couchfunk.WM2014), App: RTL+ (com.rtlinteractive.tvnow), App: Computer (com.apple.TVHomeSharing), App: ARTE (tv.arte.plus7), App: YouTube (com.google.ios.youtube), App: ARD Mediathek (de.swr.avp.ard.tablet), App: Disney+ (com.disney.disneyplus), App: Plex (com.plexapp.plex), App: Joyn (de.prosiebensat1digital.seventv), App: Einstellungen (com.apple.TVSettings), App: ZDFmediathek (de.zdf.mediathek.universal), App: Crossy Road (com.hipsterwhale.crossy), App: Netflix (com.netflix.Netflix), App: Infuse (com.firecore.infuse), App: Musik (com.apple.TVMusic)\&quot;)})});const result=await device.listApps();assert.strictEqual(result.length,25);assert.strictEqual(result[0].id,\&quot;com.apple.Fitness\&quot;);assert.strictEqual(result[0].name,\&quot;Fitness\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;156e6e10-619c-4236-bada-3e25aa633e4f&quot;,&quot;parentUUID&quot;:&quot;81813c4a-729f-41b1-8a54-3d53dc0593e9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;156e6e10-619c-4236-bada-3e25aa633e4f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1f3c6537-db6a-440f-aa40-9e251a629ab5&quot;,&quot;title&quot;:&quot;pressKey()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work with valid key&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pressKey() should work with valid key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device.pressKey(NodePyATVKeys.home)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9c9e66a2-fd09-4888-bfee-d8a55df08eb7&quot;,&quot;parentUUID&quot;:&quot;1f3c6537-db6a-440f-aa40-9e251a629ab5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error with invalid key&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pressKey() should throw error with invalid key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;});await assert.rejects(async()=&gt;{await device.pressKey(\&quot;foo\&quot;)},/Unsupported key value foo/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e4787ce1-c337-4bd5-ba12-f631bc209d4d&quot;,&quot;parentUUID&quot;:&quot;1f3c6537-db6a-440f-aa40-9e251a629ab5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if pyatv result is not success&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pressKey() should throw error if pyatv result is not success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;failure\&quot;}&#x27;)})});await assert.rejects(async()=&gt;{await device.pressKey(NodePyATVKeys.home)},/Unable to parse pyatv response/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;badbda38-d6f7-4688-972f-c2b6a0105aa5&quot;,&quot;parentUUID&quot;:&quot;1f3c6537-db6a-440f-aa40-9e251a629ab5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9c9e66a2-fd09-4888-bfee-d8a55df08eb7&quot;,&quot;e4787ce1-c337-4bd5-ba12-f631bc209d4d&quot;,&quot;badbda38-d6f7-4688-972f-c2b6a0105aa5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d23c448c-ea2c-422a-aced-67b7c3cd752a&quot;,&quot;title&quot;:&quot;down()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice down() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3ce60f99-03a8-43f1-9226-7792eda52a76&quot;,&quot;parentUUID&quot;:&quot;d23c448c-ea2c-422a-aced-67b7c3cd752a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3ce60f99-03a8-43f1-9226-7792eda52a76&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e88a8d4b-2a18-46fd-99b0-923df17dd9a1&quot;,&quot;title&quot;:&quot;home()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice home() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;36331ef5-63f6-4d0d-94ab-ed6a4796bea9&quot;,&quot;parentUUID&quot;:&quot;e88a8d4b-2a18-46fd-99b0-923df17dd9a1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;36331ef5-63f6-4d0d-94ab-ed6a4796bea9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;52b3852a-bd8f-47c4-8f00-ad27994f69f7&quot;,&quot;title&quot;:&quot;homeHold()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice homeHold() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c25578ab-4095-46a8-8cdb-7f63cb7805ad&quot;,&quot;parentUUID&quot;:&quot;52b3852a-bd8f-47c4-8f00-ad27994f69f7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c25578ab-4095-46a8-8cdb-7f63cb7805ad&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3b9f7553-7b92-48a6-aa0c-c619933934e0&quot;,&quot;title&quot;:&quot;left()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice left() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5059209e-7266-49c5-ac90-d4f112861da0&quot;,&quot;parentUUID&quot;:&quot;3b9f7553-7b92-48a6-aa0c-c619933934e0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5059209e-7266-49c5-ac90-d4f112861da0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f2f4c664-4432-448b-81de-b476051911fe&quot;,&quot;title&quot;:&quot;menu()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice menu() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7c87912e-8ceb-40b8-9bc0-15cefa70e252&quot;,&quot;parentUUID&quot;:&quot;f2f4c664-4432-448b-81de-b476051911fe&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7c87912e-8ceb-40b8-9bc0-15cefa70e252&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;88f269bd-ed98-40fa-beee-de782633cabb&quot;,&quot;title&quot;:&quot;next()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice next() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;19e0c3e8-70c1-4281-9b95-7cb13358a6d2&quot;,&quot;parentUUID&quot;:&quot;88f269bd-ed98-40fa-beee-de782633cabb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;19e0c3e8-70c1-4281-9b95-7cb13358a6d2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;10fa6137-7b70-4ce1-90ac-94719fac4008&quot;,&quot;title&quot;:&quot;pause()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pause() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5a9fffbe-e8d7-4f97-9e65-9ac21895181f&quot;,&quot;parentUUID&quot;:&quot;10fa6137-7b70-4ce1-90ac-94719fac4008&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5a9fffbe-e8d7-4f97-9e65-9ac21895181f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;619a97b4-a9b7-4c25-b483-e19e987e105f&quot;,&quot;title&quot;:&quot;play()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice play() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;09afa96b-3174-4e98-a1ef-0b5ef75430c7&quot;,&quot;parentUUID&quot;:&quot;619a97b4-a9b7-4c25-b483-e19e987e105f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;09afa96b-3174-4e98-a1ef-0b5ef75430c7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d33f74a1-eeca-4af9-bc6a-7e51eb884efd&quot;,&quot;title&quot;:&quot;playPause()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice playPause() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;abd03879-fffe-456d-b612-09b49d6ad770&quot;,&quot;parentUUID&quot;:&quot;d33f74a1-eeca-4af9-bc6a-7e51eb884efd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;abd03879-fffe-456d-b612-09b49d6ad770&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7909d2be-bfc7-46fd-8d61-55e08a9d0c0d&quot;,&quot;title&quot;:&quot;previous()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice previous() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;749ea409-4a0b-413d-9ed8-1d8e100044a0&quot;,&quot;parentUUID&quot;:&quot;7909d2be-bfc7-46fd-8d61-55e08a9d0c0d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;749ea409-4a0b-413d-9ed8-1d8e100044a0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;958dcb10-8c74-41f9-ac33-f7f3fea1cf73&quot;,&quot;title&quot;:&quot;right()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice right() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3914bc0-7211-42aa-a6d8-95ada983b92a&quot;,&quot;parentUUID&quot;:&quot;958dcb10-8c74-41f9-ac33-f7f3fea1cf73&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a3914bc0-7211-42aa-a6d8-95ada983b92a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;18496206-e4bf-4d91-8818-dc5efc4e2a4c&quot;,&quot;title&quot;:&quot;select()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice select() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a571ef45-6d60-4cef-a72a-50936c83df2d&quot;,&quot;parentUUID&quot;:&quot;18496206-e4bf-4d91-8818-dc5efc4e2a4c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a571ef45-6d60-4cef-a72a-50936c83df2d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d712ebaf-8e5e-4114-bf92-a48911576d07&quot;,&quot;title&quot;:&quot;skipBackward()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice skipBackward() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f99a9773-79f6-44fc-a0bc-3441e3ef643d&quot;,&quot;parentUUID&quot;:&quot;d712ebaf-8e5e-4114-bf92-a48911576d07&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f99a9773-79f6-44fc-a0bc-3441e3ef643d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2af16952-cd73-4be5-84ba-4e22cac577f9&quot;,&quot;title&quot;:&quot;skipForward()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice skipForward() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;30eac759-1e32-4557-9beb-4ec1ea7e7b22&quot;,&quot;parentUUID&quot;:&quot;2af16952-cd73-4be5-84ba-4e22cac577f9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;30eac759-1e32-4557-9beb-4ec1ea7e7b22&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8d07a908-c3a0-4ffe-bf53-aaab46bf635f&quot;,&quot;title&quot;:&quot;stop()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice stop() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5b58d0f4-1d18-42d6-9086-2e500b156037&quot;,&quot;parentUUID&quot;:&quot;8d07a908-c3a0-4ffe-bf53-aaab46bf635f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5b58d0f4-1d18-42d6-9086-2e500b156037&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fc784620-9ef5-4536-a3fb-8ffbd02b2a48&quot;,&quot;title&quot;:&quot;suspend()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice suspend() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2e829769-fc62-439c-ba84-a7b36652844a&quot;,&quot;parentUUID&quot;:&quot;fc784620-9ef5-4536-a3fb-8ffbd02b2a48&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2e829769-fc62-439c-ba84-a7b36652844a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d376d267-2d9c-4bca-b7a2-068f6f866d28&quot;,&quot;title&quot;:&quot;topMenu()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice topMenu() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;338f1162-8886-4c3e-9d68-bd41b423fb6a&quot;,&quot;parentUUID&quot;:&quot;d376d267-2d9c-4bca-b7a2-068f6f866d28&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;338f1162-8886-4c3e-9d68-bd41b423fb6a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2162f847-740e-4306-9961-3a2ec17d7503&quot;,&quot;title&quot;:&quot;turnOff()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice turnOff() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7c3fcadb-e38e-499a-8b99-15f394aa0ab3&quot;,&quot;parentUUID&quot;:&quot;2162f847-740e-4306-9961-3a2ec17d7503&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7c3fcadb-e38e-499a-8b99-15f394aa0ab3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b845d763-3f9b-4da0-af6a-4e595d547f2b&quot;,&quot;title&quot;:&quot;turnOn()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice turnOn() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;191c1881-2719-4330-ae82-5865d92cee4d&quot;,&quot;parentUUID&quot;:&quot;b845d763-3f9b-4da0-af6a-4e595d547f2b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;191c1881-2719-4330-ae82-5865d92cee4d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;27315b06-db72-48c5-b74a-bbff1b0dc5b7&quot;,&quot;title&quot;:&quot;up()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice up() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;64d8cf93-8414-4420-981a-631ad2a757a1&quot;,&quot;parentUUID&quot;:&quot;27315b06-db72-48c5-b74a-bbff1b0dc5b7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;64d8cf93-8414-4420-981a-631ad2a757a1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1258873c-861e-4b43-855a-918ea0cf604f&quot;,&quot;title&quot;:&quot;volumeDown()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice volumeDown() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;25dadb25-e478-42f3-af2d-1006db06a6ad&quot;,&quot;parentUUID&quot;:&quot;1258873c-861e-4b43-855a-918ea0cf604f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;25dadb25-e478-42f3-af2d-1006db06a6ad&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ffc3dd2d-bacb-428f-be8a-79b094660e29&quot;,&quot;title&quot;:&quot;volumeUp()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice volumeUp() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;95ea1fa1-d8c2-490d-b58f-bbf6567bd5c7&quot;,&quot;parentUUID&quot;:&quot;ffc3dd2d-bacb-428f-be8a-79b094660e29&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;95ea1fa1-d8c2-490d-b58f-bbf6567bd5c7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c8df07f2-2a94-4833-80dc-5674aaf99ac7&quot;,&quot;title&quot;:&quot;wakeup()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice wakeup() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;)})});await device[key]()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fcbc8a64-dd82-4048-8b8b-0431dfa5eef5&quot;,&quot;parentUUID&quot;:&quot;c8df07f2-2a94-4833-80dc-5674aaf99ac7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fcbc8a64-dd82-4048-8b8b-0431dfa5eef5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3c817b82-e5e6-48cf-868b-e98015207e26&quot;,&quot;title&quot;:&quot;launchApp()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice launchApp() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=new NodePyATVDevice({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;,spawn:createFakeSpawn(cp=&gt;{cp.end(\&quot;\&quot;)})});await device.launchApp(\&quot;com.apple.TVShows\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;35085c13-22e9-4f24-a034-3d0e56b14c0e&quot;,&quot;parentUUID&quot;:&quot;3c817b82-e5e6-48cf-868b-e98015207e26&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;35085c13-22e9-4f24-a034-3d0e56b14c0e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b8d3687c-ad77-4253-9d00-995675760d58&quot;,&quot;title&quot;:&quot;NodePyATVInstance&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;4277ea5f-ad6c-47bf-ab66-21514a1e69fd&quot;,&quot;title&quot;:&quot;static version()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work with pyatv [L]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should work with pyatv [L]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:484,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(4e3);const result=await NodePyATVInstance.version();if(result.pyatv===null){throw new Error(\&quot;No version found for pyatv. Is it installed in test environment?\&quot;)}assert.equal(typeof result.pyatv,\&quot;string\&quot;,\&quot;result.pyatv is a string\&quot;);assert.ok(result.pyatv.length&gt;=5,\&quot;result.pyatv has content\&quot;);assert.strictEqual(result.module,version)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1b5521b5-99c4-4158-b167-bf1160749f1d&quot;,&quot;parentUUID&quot;:&quot;4277ea5f-ad6c-47bf-ab66-21514a1e69fd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the pyatv version&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return the pyatv version&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await NodePyATVInstance.version({spawn:createFakeSpawn(cp=&gt;{cp.code(1);cp.end(\&quot;atvremote 0.7.4\&quot;)})});assert.ok(result.pyatv);assert.strictEqual(result.pyatv,\&quot;0.7.4\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;89977b45-a923-4af7-8c3a-1fa3326b47cb&quot;,&quot;parentUUID&quot;:&quot;4277ea5f-ad6c-47bf-ab66-21514a1e69fd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the module version&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return the module version&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await NodePyATVInstance.version({noColors:true,spawn:createFakeSpawn(cp=&gt;cp.code(1).end())});assert.strictEqual(result.module,version)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7cb71c98-f815-40f1-996f-8385b4fa5a49&quot;,&quot;parentUUID&quot;:&quot;4277ea5f-ad6c-47bf-ab66-21514a1e69fd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle option.atvremotePath&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should handle option.atvremotePath&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await NodePyATVInstance.version({atvremotePath:\&quot;/foo/bar\&quot;,spawn:createFakeSpawn(cp=&gt;{assert.strictEqual(cp.cmd(),\&quot;/foo/bar\&quot;);cp.code(1).end()})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3ef01fee-b38c-4346-afb1-c80404555110&quot;,&quot;parentUUID&quot;:&quot;4277ea5f-ad6c-47bf-ab66-21514a1e69fd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with option.debug = true&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should work with option.debug = true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await NodePyATVInstance.version({debug:true,spawn:createFakeSpawn(cp=&gt;cp.code(1).end())})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5c257fa0-e405-416c-a9dd-ec96ae1bc83d&quot;,&quot;parentUUID&quot;:&quot;4277ea5f-ad6c-47bf-ab66-21514a1e69fd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with option.noColors&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should work with option.noColors&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await NodePyATVInstance.version({debug:__name(()=&gt;{},\&quot;debug\&quot;),noColors:true,spawn:createFakeSpawn(cp=&gt;cp.code(1).end())})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;20c23b28-7d10-4611-9d5a-3003bd133aac&quot;,&quot;parentUUID&quot;:&quot;4277ea5f-ad6c-47bf-ab66-21514a1e69fd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return null on pyatv stderr output&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return null on pyatv stderr output&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await NodePyATVInstance.version({spawn:createFakeSpawn(cp=&gt;cp.stderr(\&quot;Hello World!\&quot;).code(123).end())});assert.strictEqual(result.pyatv,null)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c803ac3e-1240-453c-b965-d3f588db3db6&quot;,&quot;parentUUID&quot;:&quot;4277ea5f-ad6c-47bf-ab66-21514a1e69fd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return null on pyatv error&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return null on pyatv error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await NodePyATVInstance.version({spawn:createFakeSpawn(cp=&gt;{cp.error(new Error(\&quot;Hello world!\&quot;)).end()})});assert.strictEqual(result.pyatv,null)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d500a1f5-6b5e-4056-b9c9-dc1b98b0172e&quot;,&quot;parentUUID&quot;:&quot;4277ea5f-ad6c-47bf-ab66-21514a1e69fd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return null on invalid pyatv version&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return null on invalid pyatv version&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await NodePyATVInstance.version({spawn:createFakeSpawn(cp=&gt;{cp.stdout(\&quot;atvremote 42\&quot;).code(1).end()})});assert.strictEqual(result.pyatv,null)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;49c11b53-9a7e-462f-a9f6-7176ec8166e4&quot;,&quot;parentUUID&quot;:&quot;4277ea5f-ad6c-47bf-ab66-21514a1e69fd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1b5521b5-99c4-4158-b167-bf1160749f1d&quot;,&quot;89977b45-a923-4af7-8c3a-1fa3326b47cb&quot;,&quot;7cb71c98-f815-40f1-996f-8385b4fa5a49&quot;,&quot;3ef01fee-b38c-4346-afb1-c80404555110&quot;,&quot;5c257fa0-e405-416c-a9dd-ec96ae1bc83d&quot;,&quot;20c23b28-7d10-4611-9d5a-3003bd133aac&quot;,&quot;c803ac3e-1240-453c-b965-d3f588db3db6&quot;,&quot;d500a1f5-6b5e-4056-b9c9-dc1b98b0172e&quot;,&quot;49c11b53-9a7e-462f-a9f6-7176ec8166e4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:498,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3316ff47-40c7-4411-8b5a-bf8c524fe440&quot;,&quot;title&quot;:&quot;static check()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should resolve in test environment [L]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should resolve in test environment [L]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5888,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(12e3);await NodePyATVInstance.check()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8986e0f1-13e7-4100-a088-1f99a49b00f2&quot;,&quot;parentUUID&quot;:&quot;3316ff47-40c7-4411-8b5a-bf8c524fe440&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return nice error message if pyatv was not found&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should return nice error message if pyatv was not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.check({spawn:createFakeSpawn(cp=&gt;{cp.error(new Error(\&quot;spawn atvremote ENOENT\&quot;)).code(1).end()})})},/Unable to find pyatv. Is it installed?/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;587dd94c-2b66-4730-9e17-151a82c13303&quot;,&quot;parentUUID&quot;:&quot;3316ff47-40c7-4411-8b5a-bf8c524fe440&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return nice error message if myatv is too old&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should return nice error message if myatv is too old&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.check({spawn:createFakeSpawn(cp=&gt;{cp.stdout(\&quot;atvremote 0.5.1\&quot;).code(1).end()})})},/Found pyatv, but unforunately it&#x27;s too old. Please update pyatv./)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9182511f-3b7d-4366-bd5c-7effa7647cc9&quot;,&quot;parentUUID&quot;:&quot;3316ff47-40c7-4411-8b5a-bf8c524fe440&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return nice error message if scan failed&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should return nice error message if scan failed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let i=0;await assert.rejects(async()=&gt;{await NodePyATVInstance.check({spawn:createFakeSpawn(cp=&gt;{if(i===0){cp.stdout(\&quot;atvremote 0.7.0\&quot;).code(1).end();i++}else{cp.error(new Error(\&quot;spawn atvremote ENOENT\&quot;)).code(1).end()}})})},/Unable to scan for devices/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;905af5f3-3e0a-4e1a-9b44-7f8044d0515e&quot;,&quot;parentUUID&quot;:&quot;3316ff47-40c7-4411-8b5a-bf8c524fe440&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8986e0f1-13e7-4100-a088-1f99a49b00f2&quot;,&quot;587dd94c-2b66-4730-9e17-151a82c13303&quot;,&quot;9182511f-3b7d-4366-bd5c-7effa7647cc9&quot;,&quot;905af5f3-3e0a-4e1a-9b44-7f8044d0515e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5895,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7d65f7c3-ea87-4b78-a6e1-81638e4a9c5f&quot;,&quot;title&quot;:&quot;static find()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work [L]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work [L]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5443,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(1e4);const result=await NodePyATVInstance.find();assert.ok(Array.isArray(result))&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;31786ec3-eb39-40ce-977e-02b12f2a8245&quot;,&quot;parentUUID&quot;:&quot;7d65f7c3-ea87-4b78-a6e1-81638e4a9c5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle option.atvscriptPath&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should handle option.atvscriptPath&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await NodePyATVInstance.find({atvscriptPath:\&quot;/foo/bar\&quot;,spawn:createFakeSpawn(cp=&gt;{assert.strictEqual(cp.cmd(),\&quot;/foo/bar\&quot;);cp.stdout({datetime:\&quot;2020-11-06T20:47:30.840022+01:00\&quot;,devices:[],result:\&quot;success\&quot;}).end()})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0c26697d-e220-48d7-96a1-6a11b8c7f4cb&quot;,&quot;parentUUID&quot;:&quot;7d65f7c3-ea87-4b78-a6e1-81638e4a9c5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error on stderr output&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error on stderr output&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stderr(\&quot;Hello World!\&quot;).code(1).end()})})},/Unable to execute request/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;35d8bbb3-c9e1-482c-aae1-93ed9f3f49ed&quot;,&quot;parentUUID&quot;:&quot;7d65f7c3-ea87-4b78-a6e1-81638e4a9c5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error on error&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.error(new Error(\&quot;Hello world!\&quot;)).code(1).end()})})},/Hello world!/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fb3fc970-fb7f-4a03-b4c9-0f795d15fc94&quot;,&quot;parentUUID&quot;:&quot;7d65f7c3-ea87-4b78-a6e1-81638e4a9c5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error on pyatv failure&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error on pyatv failure&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout({datetime:\&quot;2020-11-06T20:47:30.840022+01:00\&quot;,error:\&quot;Task exception was never retrieved\&quot;,exception:\&quot;[Errno 113] Connect call failed\&quot;,result:\&quot;failure\&quot;}).code(1).end()})})},/Unable to find any devices, but received 1 error: /)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4e6da98a-8e5b-4c98-b3e9-800f36e39cbd&quot;,&quot;parentUUID&quot;:&quot;7d65f7c3-ea87-4b78-a6e1-81638e4a9c5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if atvscript result is not valid json&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error if atvscript result is not valid json&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout(JSON.stringify({datetime:\&quot;2020-11-06T20:47:30.840022+01:00\&quot;,devices:[],result:\&quot;success\&quot;}).substr(1)).end()})})},/Unable to parse result/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f548d3d6-f2e7-429f-ab8b-1dd34a6cf83c&quot;,&quot;parentUUID&quot;:&quot;7d65f7c3-ea87-4b78-a6e1-81638e4a9c5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if atvscript result is not successfull&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error if atvscript result is not successfull&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout({result:\&quot;error\&quot;}).code(1).end()})})},/Unable to parse pyatv response: /)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;88b5426b-9f5f-4705-b11a-6b6e80cff725&quot;,&quot;parentUUID&quot;:&quot;7d65f7c3-ea87-4b78-a6e1-81638e4a9c5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if atvscript result is without device array&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error if atvscript result is without device array&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await assert.rejects(async()=&gt;{await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout({result:\&quot;success\&quot;}).code(1).end()})})},/Unable to parse pyatv response: /)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9d63db48-db7e-4fec-a81a-35315963fb36&quot;,&quot;parentUUID&quot;:&quot;7d65f7c3-ea87-4b78-a6e1-81638e4a9c5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work if devices are without device_info / services&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work if devices are without device_info / services&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const devices=await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout({datetime:\&quot;2020-11-06T20:47:30.840022+01:00\&quot;,devices:[{address:\&quot;10.0.10.81\&quot;,identifier:\&quot;xxx\&quot;,name:\&quot;Vardagsrum\&quot;}],result:\&quot;success\&quot;}).code(1).end()})});assert.strictEqual(devices.length,1);assert.strictEqual(devices[0].name,\&quot;Vardagsrum\&quot;);assert.strictEqual(devices[0].host,\&quot;10.0.10.81\&quot;);assert.strictEqual(devices[0].id,\&quot;xxx\&quot;);assert.strictEqual(devices[0].model,void 0);assert.strictEqual(devices[0].modelName,void 0);assert.strictEqual(devices[0].os,void 0);assert.strictEqual(devices[0].version,void 0);assert.deepStrictEqual(devices[0].services,void 0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c5d7b5b9-8ff2-4e66-bef5-38c85902e2e0&quot;,&quot;parentUUID&quot;:&quot;7d65f7c3-ea87-4b78-a6e1-81638e4a9c5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work if devices are with device_info / services&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work if devices are with device_info / services&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const devices=await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout({datetime:\&quot;2020-11-06T20:47:30.840022+01:00\&quot;,devices:[{address:\&quot;10.0.10.81\&quot;,device_info:{model:\&quot;Gen4K\&quot;,model_str:\&quot;Apple TV 4K\&quot;,operating_system:\&quot;TvOS\&quot;,version:\&quot;15.5.1\&quot;},identifier:\&quot;xxx\&quot;,name:\&quot;Vardagsrum\&quot;,services:[{port:49152,protocol:\&quot;mrp\&quot;},{port:7e3,protocol:\&quot;airplay\&quot;}]}],result:\&quot;success\&quot;}).code(1).end()})});assert.strictEqual(devices.length,1);assert.strictEqual(devices[0].name,\&quot;Vardagsrum\&quot;);assert.strictEqual(devices[0].host,\&quot;10.0.10.81\&quot;);assert.strictEqual(devices[0].id,\&quot;xxx\&quot;);assert.strictEqual(devices[0].model,\&quot;Gen4K\&quot;);assert.strictEqual(devices[0].modelName,\&quot;Apple TV 4K\&quot;);assert.strictEqual(devices[0].os,\&quot;TvOS\&quot;);assert.strictEqual(devices[0].version,\&quot;15.5.1\&quot;);assert.deepStrictEqual(devices[0].services,[{port:49152,protocol:NodePyATVProtocol.mrp},{port:7e3,protocol:NodePyATVProtocol.airplay}])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39d9ce79-2c68-4d29-b159-05ab4de76277&quot;,&quot;parentUUID&quot;:&quot;7d65f7c3-ea87-4b78-a6e1-81638e4a9c5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for unicast scans&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work for unicast scans&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const devices=await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout(`{\&quot;result\&quot;: \&quot;failure\&quot;, \&quot;datetime\&quot;: \&quot;2024-05-18T16:20:18.103087-06:00\&quot;, \&quot;error\&quot;: \&quot;Task exception was never retrieved\&quot;, \&quot;exception\&quot;: \&quot;[Errno 113] Connect call failed (&#x27;10.0.0.232&#x27;, 32498)\&quot;, \&quot;stacktrace\&quot;: \&quot;Traceback (most recent call last):\\\\n  File \\\\\&quot;/var/lib/homebridge/appletv-enhanced/.venv/lib/python3.11/site-packages/pyatv/support/knock.py\\\\\&quot;, line 28, in _async_knock\\\\n    _, writer = await asyncio.wait_for(\\\\n                ^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/tasks.py\\\\\&quot;, line 479, in wait_for\\\\n    return fut.result()\\\\n           ^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/streams.py\\\\\&quot;, line 48, in open_connection\\\\n    transport, _ = await loop.create_connection(\\\\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1085, in create_connection\\\\n    raise exceptions[0]\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1069, in create_connection\\\\n    sock = await self._connect_sock(\\\\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 973, in _connect_sock\\\\n    await self.sock_connect(sock, address)\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 634, in sock_connect\\\\n    return await fut\\\\n           ^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 674, in _sock_connect_cb\\\\n    raise OSError(err, f&#x27;Connect call failed {address}&#x27;)\\\\nOSError: [Errno 113] Connect call failed (&#x27;10.0.0.232&#x27;, 32498)\\\\n\&quot;}\n{\&quot;result\&quot;: \&quot;failure\&quot;, \&quot;datetime\&quot;: \&quot;2024-05-18T16:20:18.114744-06:00\&quot;, \&quot;error\&quot;: \&quot;Task exception was never retrieved\&quot;, \&quot;exception\&quot;: \&quot;[Errno 113] Connect call failed (&#x27;10.0.0.229&#x27;, 32498)\&quot;, \&quot;stacktrace\&quot;: \&quot;Traceback (most recent call last):\\\\n  File \\\\\&quot;/var/lib/homebridge/appletv-enhanced/.venv/lib/python3.11/site-packages/pyatv/support/knock.py\\\\\&quot;, line 28, in _async_knock\\\\n    _, writer = await asyncio.wait_for(\\\\n                ^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/tasks.py\\\\\&quot;, line 479, in wait_for\\\\n    return fut.result()\\\\n           ^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/streams.py\\\\\&quot;, line 48, in open_connection\\\\n    transport, _ = await loop.create_connection(\\\\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1085, in create_connection\\\\n    raise exceptions[0]\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1069, in create_connection\\\\n    sock = await self._connect_sock(\\\\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 973, in _connect_sock\\\\n    await self.sock_connect(sock, address)\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 634, in sock_connect\\\\n    return await fut\\\\n           ^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 674, in _sock_connect_cb\\\\n    raise OSError(err, f&#x27;Connect call failed {address}&#x27;)\\\\nOSError: [Errno 113] Connect call failed (&#x27;10.0.0.229&#x27;, 32498)\\\\n\&quot;}\n{\&quot;result\&quot;: \&quot;success\&quot;, \&quot;datetime\&quot;: \&quot;2024-05-18T16:20:20.042648-06:00\&quot;, \&quot;devices\&quot;: [{\&quot;name\&quot;: \&quot;Living Room\&quot;, \&quot;address\&quot;: \&quot;10.0.0.30\&quot;, \&quot;identifier\&quot;: \&quot;37323C0E-99E6-4CC3-A006-1ED5368FFF8C\&quot;, \&quot;all_identifiers\&quot;: [\&quot;86B730B2-5189-4B6A-BCAA-CDDB18F05FA8\&quot;, \&quot;C8:D0:83:E9:D0:49\&quot;, \&quot;37323C0E-99E6-4CC3-A006-1ED5368FFF8C\&quot;, \&quot;C8D083E9D049\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;C8:D0:83:E9:D0:49\&quot;, \&quot;model\&quot;: \&quot;Gen4K\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4K\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.5\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49154}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}, {\&quot;name\&quot;: \&quot;Kitchen\&quot;, \&quot;address\&quot;: \&quot;10.0.0.79\&quot;, \&quot;identifier\&quot;: \&quot;45B6A67A-9FAD-497D-95EF-7FC5ECB3371C\&quot;, \&quot;all_identifiers\&quot;: [\&quot;B163C908-000F-4983-BDC7-BEFD76887EF5\&quot;, \&quot;C8:69:CD:63:2A:11\&quot;, \&quot;45B6A67A-9FAD-497D-95EF-7FC5ECB3371C\&quot;, \&quot;C869CD632A11\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;C8:69:CD:63:2A:11\&quot;, \&quot;model\&quot;: \&quot;Gen4\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.4\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49157}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}, {\&quot;name\&quot;: \&quot;Bedroom\&quot;, \&quot;address\&quot;: \&quot;10.0.0.20\&quot;, \&quot;identifier\&quot;: \&quot;CA55DA36-ADEF-4DBC-A0B3-BA68B0C53E40\&quot;, \&quot;all_identifiers\&quot;: [\&quot;08:66:98:BC:37:1F\&quot;, \&quot;108F35A0-FF21-4884-96C2-145AAAB1B4C4\&quot;, \&quot;CA55DA36-ADEF-4DBC-A0B3-BA68B0C53E40\&quot;, \&quot;086698BC371F\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;08:66:98:BC:37:1F\&quot;, \&quot;model\&quot;: \&quot;Gen4\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.4\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49154}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}, {\&quot;name\&quot;: \&quot;Basement\&quot;, \&quot;address\&quot;: \&quot;10.0.0.156\&quot;, \&quot;identifier\&quot;: \&quot;C02B27DB-2AF3-43E7-8EF7-885E1E9AB3B4\&quot;, \&quot;all_identifiers\&quot;: [\&quot;8BDB6773-479F-4C01-A185-29FF5516F2C2\&quot;, \&quot;D0:03:4B:4C:2A:2E\&quot;, \&quot;C02B27DB-2AF3-43E7-8EF7-885E1E9AB3B4\&quot;, \&quot;D0034B4C2A2E\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;D0:03:4B:4C:2A:2E\&quot;, \&quot;model\&quot;: \&quot;Gen4\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.4\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49154}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}]}`).code(1).end()})});assert.strictEqual(devices.length,4);assert.strictEqual(devices[0].name,\&quot;Living Room\&quot;);assert.strictEqual(devices[0].host,\&quot;10.0.0.30\&quot;);assert.strictEqual(devices[0].id,\&quot;37323C0E-99E6-4CC3-A006-1ED5368FFF8C\&quot;);assert.strictEqual(devices[1].name,\&quot;Kitchen\&quot;);assert.strictEqual(devices[1].host,\&quot;10.0.0.79\&quot;);assert.strictEqual(devices[1].id,\&quot;45B6A67A-9FAD-497D-95EF-7FC5ECB3371C\&quot;);assert.strictEqual(devices[2].name,\&quot;Bedroom\&quot;);assert.strictEqual(devices[2].host,\&quot;10.0.0.20\&quot;);assert.strictEqual(devices[2].id,\&quot;CA55DA36-ADEF-4DBC-A0B3-BA68B0C53E40\&quot;);assert.strictEqual(devices[3].name,\&quot;Basement\&quot;);assert.strictEqual(devices[3].host,\&quot;10.0.0.156\&quot;);assert.strictEqual(devices[3].id,\&quot;C02B27DB-2AF3-43E7-8EF7-885E1E9AB3B4\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1fcf8d45-d181-43ae-9fe6-3ce1b5d9d359&quot;,&quot;parentUUID&quot;:&quot;7d65f7c3-ea87-4b78-a6e1-81638e4a9c5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for unicast scans with returnDevicesAndErrors = true&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work for unicast scans with returnDevicesAndErrors = true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response=await NodePyATVInstance.find({spawn:createFakeSpawn(cp=&gt;{cp.stdout(`{\&quot;result\&quot;: \&quot;failure\&quot;, \&quot;datetime\&quot;: \&quot;2024-05-18T16:20:18.103087-06:00\&quot;, \&quot;error\&quot;: \&quot;Task exception was never retrieved\&quot;, \&quot;exception\&quot;: \&quot;[Errno 113] Connect call failed (&#x27;10.0.0.232&#x27;, 32498)\&quot;, \&quot;stacktrace\&quot;: \&quot;Traceback (most recent call last):\\\\n  File \\\\\&quot;/var/lib/homebridge/appletv-enhanced/.venv/lib/python3.11/site-packages/pyatv/support/knock.py\\\\\&quot;, line 28, in _async_knock\\\\n    _, writer = await asyncio.wait_for(\\\\n                ^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/tasks.py\\\\\&quot;, line 479, in wait_for\\\\n    return fut.result()\\\\n           ^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/streams.py\\\\\&quot;, line 48, in open_connection\\\\n    transport, _ = await loop.create_connection(\\\\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1085, in create_connection\\\\n    raise exceptions[0]\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1069, in create_connection\\\\n    sock = await self._connect_sock(\\\\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 973, in _connect_sock\\\\n    await self.sock_connect(sock, address)\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 634, in sock_connect\\\\n    return await fut\\\\n           ^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 674, in _sock_connect_cb\\\\n    raise OSError(err, f&#x27;Connect call failed {address}&#x27;)\\\\nOSError: [Errno 113] Connect call failed (&#x27;10.0.0.232&#x27;, 32498)\\\\n\&quot;}\n{\&quot;result\&quot;: \&quot;failure\&quot;, \&quot;datetime\&quot;: \&quot;2024-05-18T16:20:18.114744-06:00\&quot;, \&quot;error\&quot;: \&quot;Task exception was never retrieved\&quot;, \&quot;exception\&quot;: \&quot;[Errno 113] Connect call failed (&#x27;10.0.0.229&#x27;, 32498)\&quot;, \&quot;stacktrace\&quot;: \&quot;Traceback (most recent call last):\\\\n  File \\\\\&quot;/var/lib/homebridge/appletv-enhanced/.venv/lib/python3.11/site-packages/pyatv/support/knock.py\\\\\&quot;, line 28, in _async_knock\\\\n    _, writer = await asyncio.wait_for(\\\\n                ^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/tasks.py\\\\\&quot;, line 479, in wait_for\\\\n    return fut.result()\\\\n           ^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/streams.py\\\\\&quot;, line 48, in open_connection\\\\n    transport, _ = await loop.create_connection(\\\\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1085, in create_connection\\\\n    raise exceptions[0]\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 1069, in create_connection\\\\n    sock = await self._connect_sock(\\\\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/base_events.py\\\\\&quot;, line 973, in _connect_sock\\\\n    await self.sock_connect(sock, address)\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 634, in sock_connect\\\\n    return await fut\\\\n           ^^^^^^^^^\\\\n  File \\\\\&quot;/usr/lib/python3.11/asyncio/selector_events.py\\\\\&quot;, line 674, in _sock_connect_cb\\\\n    raise OSError(err, f&#x27;Connect call failed {address}&#x27;)\\\\nOSError: [Errno 113] Connect call failed (&#x27;10.0.0.229&#x27;, 32498)\\\\n\&quot;}\n{\&quot;result\&quot;: \&quot;success\&quot;, \&quot;datetime\&quot;: \&quot;2024-05-18T16:20:20.042648-06:00\&quot;, \&quot;devices\&quot;: [{\&quot;name\&quot;: \&quot;Living Room\&quot;, \&quot;address\&quot;: \&quot;10.0.0.30\&quot;, \&quot;identifier\&quot;: \&quot;37323C0E-99E6-4CC3-A006-1ED5368FFF8C\&quot;, \&quot;all_identifiers\&quot;: [\&quot;86B730B2-5189-4B6A-BCAA-CDDB18F05FA8\&quot;, \&quot;C8:D0:83:E9:D0:49\&quot;, \&quot;37323C0E-99E6-4CC3-A006-1ED5368FFF8C\&quot;, \&quot;C8D083E9D049\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;C8:D0:83:E9:D0:49\&quot;, \&quot;model\&quot;: \&quot;Gen4K\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4K\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.5\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49154}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}, {\&quot;name\&quot;: \&quot;Kitchen\&quot;, \&quot;address\&quot;: \&quot;10.0.0.79\&quot;, \&quot;identifier\&quot;: \&quot;45B6A67A-9FAD-497D-95EF-7FC5ECB3371C\&quot;, \&quot;all_identifiers\&quot;: [\&quot;B163C908-000F-4983-BDC7-BEFD76887EF5\&quot;, \&quot;C8:69:CD:63:2A:11\&quot;, \&quot;45B6A67A-9FAD-497D-95EF-7FC5ECB3371C\&quot;, \&quot;C869CD632A11\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;C8:69:CD:63:2A:11\&quot;, \&quot;model\&quot;: \&quot;Gen4\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.4\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49157}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}, {\&quot;name\&quot;: \&quot;Bedroom\&quot;, \&quot;address\&quot;: \&quot;10.0.0.20\&quot;, \&quot;identifier\&quot;: \&quot;CA55DA36-ADEF-4DBC-A0B3-BA68B0C53E40\&quot;, \&quot;all_identifiers\&quot;: [\&quot;08:66:98:BC:37:1F\&quot;, \&quot;108F35A0-FF21-4884-96C2-145AAAB1B4C4\&quot;, \&quot;CA55DA36-ADEF-4DBC-A0B3-BA68B0C53E40\&quot;, \&quot;086698BC371F\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;08:66:98:BC:37:1F\&quot;, \&quot;model\&quot;: \&quot;Gen4\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.4\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49154}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}, {\&quot;name\&quot;: \&quot;Basement\&quot;, \&quot;address\&quot;: \&quot;10.0.0.156\&quot;, \&quot;identifier\&quot;: \&quot;C02B27DB-2AF3-43E7-8EF7-885E1E9AB3B4\&quot;, \&quot;all_identifiers\&quot;: [\&quot;8BDB6773-479F-4C01-A185-29FF5516F2C2\&quot;, \&quot;D0:03:4B:4C:2A:2E\&quot;, \&quot;C02B27DB-2AF3-43E7-8EF7-885E1E9AB3B4\&quot;, \&quot;D0034B4C2A2E\&quot;], \&quot;device_info\&quot;: {\&quot;mac\&quot;: \&quot;D0:03:4B:4C:2A:2E\&quot;, \&quot;model\&quot;: \&quot;Gen4\&quot;, \&quot;model_str\&quot;: \&quot;Apple TV 4\&quot;, \&quot;operating_system\&quot;: \&quot;TvOS\&quot;, \&quot;version\&quot;: \&quot;17.4\&quot;}, \&quot;services\&quot;: [{\&quot;protocol\&quot;: \&quot;companion\&quot;, \&quot;port\&quot;: 49153}, {\&quot;protocol\&quot;: \&quot;airplay\&quot;, \&quot;port\&quot;: 7000}, {\&quot;protocol\&quot;: \&quot;mrp\&quot;, \&quot;port\&quot;: 49154}, {\&quot;protocol\&quot;: \&quot;raop\&quot;, \&quot;port\&quot;: 7000}]}]}`).code(1).end()})},true);assert.strictEqual(response.devices.length,4);assert.strictEqual(response.errors.length,2);assert.strictEqual(response.devices[0].name,\&quot;Living Room\&quot;);assert.strictEqual(response.devices[0].host,\&quot;10.0.0.30\&quot;);assert.strictEqual(response.devices[0].id,\&quot;37323C0E-99E6-4CC3-A006-1ED5368FFF8C\&quot;);assert.strictEqual(response.devices[1].name,\&quot;Kitchen\&quot;);assert.strictEqual(response.devices[1].host,\&quot;10.0.0.79\&quot;);assert.strictEqual(response.devices[1].id,\&quot;45B6A67A-9FAD-497D-95EF-7FC5ECB3371C\&quot;);assert.strictEqual(response.devices[2].name,\&quot;Bedroom\&quot;);assert.strictEqual(response.devices[2].host,\&quot;10.0.0.20\&quot;);assert.strictEqual(response.devices[2].id,\&quot;CA55DA36-ADEF-4DBC-A0B3-BA68B0C53E40\&quot;);assert.strictEqual(response.devices[3].name,\&quot;Basement\&quot;);assert.strictEqual(response.devices[3].host,\&quot;10.0.0.156\&quot;);assert.strictEqual(response.devices[3].id,\&quot;C02B27DB-2AF3-43E7-8EF7-885E1E9AB3B4\&quot;);assert.strictEqual(response.errors[0].exception,\&quot;[Errno 113] Connect call failed (&#x27;10.0.0.232&#x27;, 32498)\&quot;);assert.strictEqual(response.errors[1].exception,\&quot;[Errno 113] Connect call failed (&#x27;10.0.0.229&#x27;, 32498)\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cc4bf38b-d72a-42b5-8801-f3ffb4c63992&quot;,&quot;parentUUID&quot;:&quot;7d65f7c3-ea87-4b78-a6e1-81638e4a9c5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;31786ec3-eb39-40ce-977e-02b12f2a8245&quot;,&quot;0c26697d-e220-48d7-96a1-6a11b8c7f4cb&quot;,&quot;35d8bbb3-c9e1-482c-aae1-93ed9f3f49ed&quot;,&quot;fb3fc970-fb7f-4a03-b4c9-0f795d15fc94&quot;,&quot;4e6da98a-8e5b-4c98-b3e9-800f36e39cbd&quot;,&quot;f548d3d6-f2e7-429f-ab8b-1dd34a6cf83c&quot;,&quot;88b5426b-9f5f-4705-b11a-6b6e80cff725&quot;,&quot;9d63db48-db7e-4fec-a81a-35315963fb36&quot;,&quot;c5d7b5b9-8ff2-4e66-bef5-38c85902e2e0&quot;,&quot;39d9ce79-2c68-4d29-b159-05ab4de76277&quot;,&quot;1fcf8d45-d181-43ae-9fe6-3ce1b5d9d359&quot;,&quot;cc4bf38b-d72a-42b5-8801-f3ffb4c63992&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5459,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;53181ffa-ae51-4acd-b44a-368a094b0cac&quot;,&quot;title&quot;:&quot;static device()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should pass options to constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static device() should pass options to constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device=NodePyATVInstance.device({host:\&quot;192.168.178.6\&quot;,name:\&quot;My Testdevice\&quot;});assert.strictEqual(device.host,\&quot;192.168.178.6\&quot;);assert.strictEqual(device.name,\&quot;My Testdevice\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fcfa4e75-0b87-4f2c-96d9-7796ee27aef6&quot;,&quot;parentUUID&quot;:&quot;53181ffa-ae51-4acd-b44a-368a094b0cac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fcfa4e75-0b87-4f2c-96d9-7796ee27aef6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;01d02a1b-ea63-41b0-bbca-36f727d34f20&quot;,&quot;title&quot;:&quot;version()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance version() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const i=new NodePyATVInstance({atvremotePath:\&quot;test\&quot;});await i.version({spawn:createFakeSpawn(cp=&gt;{assert.strictEqual(cp.cmd(),\&quot;test\&quot;);cp.code(1).end()})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;891c6b5c-7177-4f98-bc19-1b4852ec61f2&quot;,&quot;parentUUID&quot;:&quot;01d02a1b-ea63-41b0-bbca-36f727d34f20&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;891c6b5c-7177-4f98-bc19-1b4852ec61f2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f1717beb-222c-4cf0-9424-50074b277cc6&quot;,&quot;title&quot;:&quot;check()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance check() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const i=new NodePyATVInstance({atvremotePath:\&quot;test\&quot;});await assert.rejects(async()=&gt;{await i.check({spawn:createFakeSpawn(cp=&gt;{assert.strictEqual(cp.cmd(),\&quot;test\&quot;);cp.error(new Error(\&quot;spawn atvremote ENOENT\&quot;)).code(1).end()})})},/Unable to find pyatv. Is it installed?/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5599ca26-f638-43f0-a2a9-18b04a81ca41&quot;,&quot;parentUUID&quot;:&quot;f1717beb-222c-4cf0-9424-50074b277cc6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5599ca26-f638-43f0-a2a9-18b04a81ca41&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a2580fd2-b146-4683-bb0c-80cdefbc3aec&quot;,&quot;title&quot;:&quot;find()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance find() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const i=new NodePyATVInstance({atvscriptPath:\&quot;test\&quot;});await i.find({spawn:createFakeSpawn(cp=&gt;{assert.strictEqual(cp.cmd(),\&quot;test\&quot;);cp.stdout({datetime:\&quot;2020-11-06T20:47:30.840022+01:00\&quot;,devices:[],result:\&quot;success\&quot;}).end()})})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0835fd90-bc44-412c-9c2e-3e49ccd7f5a8&quot;,&quot;parentUUID&quot;:&quot;a2580fd2-b146-4683-bb0c-80cdefbc3aec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0835fd90-bc44-412c-9c2e-3e49ccd7f5a8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ae5135bf-52a3-4c05-9491-e1c2101d4be7&quot;,&quot;title&quot;:&quot;device()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance device() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const i=new NodePyATVInstance({debug:true});const d=i.device({host:\&quot;192.168.178.2\&quot;,name:\&quot;My Testdevice\&quot;});assert.deepStrictEqual(d.debug,true)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ee09f74-d39b-4445-b53a-a5b1ee49ed79&quot;,&quot;parentUUID&quot;:&quot;ae5135bf-52a3-4c05-9491-e1c2101d4be7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0ee09f74-d39b-4445-b53a-a5b1ee49ed79&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;57b19a5d-3b06-4dfa-b5b1-fafc06a0c88b&quot;,&quot;title&quot;:&quot;Type Exports&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Type NodePyATVProtocol should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVProtocol should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVProtocol)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b15e4394-0860-4ccd-8846-80b9bac36000&quot;,&quot;parentUUID&quot;:&quot;57b19a5d-3b06-4dfa-b5b1-fafc06a0c88b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVMediaType should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVMediaType should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVMediaType)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;324c89b2-720d-4442-8050-ea851bfe5c21&quot;,&quot;parentUUID&quot;:&quot;57b19a5d-3b06-4dfa-b5b1-fafc06a0c88b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVDeviceEvent should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVDeviceEvent should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVDeviceEvent)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4553979e-2bf3-4ab2-9c8c-67ba0d49a1ba&quot;,&quot;parentUUID&quot;:&quot;57b19a5d-3b06-4dfa-b5b1-fafc06a0c88b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVDeviceState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVDeviceState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVDeviceState)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;64de80df-4ca2-4b42-8177-91ec7a618095&quot;,&quot;parentUUID&quot;:&quot;57b19a5d-3b06-4dfa-b5b1-fafc06a0c88b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVRepeatState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVRepeatState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVRepeatState)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6b9be959-60c7-4f11-b47e-5d3f523c8d6a&quot;,&quot;parentUUID&quot;:&quot;57b19a5d-3b06-4dfa-b5b1-fafc06a0c88b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVShuffleState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVShuffleState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVShuffleState)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3681f494-0463-4d11-b103-55467014a385&quot;,&quot;parentUUID&quot;:&quot;57b19a5d-3b06-4dfa-b5b1-fafc06a0c88b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVKeys should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVKeys should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVKeys)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;878bd75d-783b-4127-8a2d-e31037ec3268&quot;,&quot;parentUUID&quot;:&quot;57b19a5d-3b06-4dfa-b5b1-fafc06a0c88b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVInstanceOptions should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVInstanceOptions should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVListenerState)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9b5f5460-8505-491f-b75d-dd6d04c5768a&quot;,&quot;parentUUID&quot;:&quot;57b19a5d-3b06-4dfa-b5b1-fafc06a0c88b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVPowerState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVPowerState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert.ok(NodePyATVPowerState)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e3f307b3-8b0a-47aa-9cf7-c26b0e951802&quot;,&quot;parentUUID&quot;:&quot;57b19a5d-3b06-4dfa-b5b1-fafc06a0c88b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b15e4394-0860-4ccd-8846-80b9bac36000&quot;,&quot;324c89b2-720d-4442-8050-ea851bfe5c21&quot;,&quot;4553979e-2bf3-4ab2-9c8c-67ba0d49a1ba&quot;,&quot;64de80df-4ca2-4b42-8177-91ec7a618095&quot;,&quot;6b9be959-60c7-4f11-b47e-5d3f523c8d6a&quot;,&quot;3681f494-0463-4d11-b103-55467014a385&quot;,&quot;878bd75d-783b-4127-8a2d-e31037ec3268&quot;,&quot;9b5f5460-8505-491f-b75d-dd6d04c5768a&quot;,&quot;e3f307b3-8b0a-47aa-9cf7-c26b0e951802&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3aba2b95-9c8b-40f9-8f56-fb13da398903&quot;,&quot;title&quot;:&quot;Tools&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;2a392220-e169-43ec-ba6c-c15a678b5f12&quot;,&quot;title&quot;:&quot;addRequestId() / removeRequestId()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a string&quot;,&quot;fullTitle&quot;:&quot;Tools addRequestId() / removeRequestId() should return a string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id=addRequestId();assert.strictEqual(typeof id,\&quot;string\&quot;);removeRequestId(id)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f1c2e939-3526-4f4b-9919-0eff9f7e3a7a&quot;,&quot;parentUUID&quot;:&quot;2a392220-e169-43ec-ba6c-c15a678b5f12&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work if given id is not in index&quot;,&quot;fullTitle&quot;:&quot;Tools addRequestId() / removeRequestId() should work if given id is not in index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;removeRequestId(\&quot;FOO\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e43136ca-d416-4eaf-95ab-c674aa2fd92d&quot;,&quot;parentUUID&quot;:&quot;2a392220-e169-43ec-ba6c-c15a678b5f12&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f1c2e939-3526-4f4b-9919-0eff9f7e3a7a&quot;,&quot;e43136ca-d416-4eaf-95ab-c674aa2fd92d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;29dca6e0-9de1-4397-8edb-2c4811ba8d8a&quot;,&quot;title&quot;:&quot;debug()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work without any options&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work without any options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(\&quot;TEST\&quot;,\&quot;Hello World.\&quot;,{})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a77cf2d7-b3d2-48ad-9b94-ceca04a88865&quot;,&quot;parentUUID&quot;:&quot;29dca6e0-9de1-4397-8edb-2c4811ba8d8a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with default logger&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with default logger&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(\&quot;TEST\&quot;,\&quot;Hello World.\&quot;,{debug:true})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a595a202-b434-45f1-9b13-778f09f971be&quot;,&quot;parentUUID&quot;:&quot;29dca6e0-9de1-4397-8edb-2c4811ba8d8a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with custom logger&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with custom logger&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(\&quot;TEST\&quot;,\&quot;Hello World.\&quot;,{debug:__name(function(msg){assert.strictEqual(this,null);assert.ok(msg.includes(\&quot;Hello World\&quot;))},\&quot;debug\&quot;)})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;97ecace0-f263-4a0c-a92d-204724b4966a&quot;,&quot;parentUUID&quot;:&quot;29dca6e0-9de1-4397-8edb-2c4811ba8d8a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with colors disabled&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with colors disabled&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(\&quot;TEST\&quot;,\&quot;Hello World.\&quot;,{noColors:true})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1c4691c9-25c8-48df-bd0a-4768c3d8de4e&quot;,&quot;parentUUID&quot;:&quot;29dca6e0-9de1-4397-8edb-2c4811ba8d8a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with custom logger and colors disabled&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with custom logger and colors disabled&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;debug(\&quot;TEST\&quot;,\&quot;Hello World.\&quot;,{debug:__name(function(msg){assert.strictEqual(this,null);assert.strictEqual(msg,\&quot;[node-pyatv][TEST] Hello World.\&quot;)},\&quot;debug\&quot;),noColors:true})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6f8bcba5-ff59-4a3e-8e76-c6fc45b4979a&quot;,&quot;parentUUID&quot;:&quot;29dca6e0-9de1-4397-8edb-2c4811ba8d8a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a77cf2d7-b3d2-48ad-9b94-ceca04a88865&quot;,&quot;a595a202-b434-45f1-9b13-778f09f971be&quot;,&quot;97ecace0-f263-4a0c-a92d-204724b4966a&quot;,&quot;1c4691c9-25c8-48df-bd0a-4768c3d8de4e&quot;,&quot;6f8bcba5-ff59-4a3e-8e76-c6fc45b4979a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8ac1b286-f54f-4a0b-bf0d-8b205ade2c86&quot;,&quot;title&quot;:&quot;getExecutable()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should handle atvremotePath if set&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle atvremotePath if set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=getExecutable(NodePyATVExecutableType.atvremote,{atvremotePath:\&quot;/tmp/1\&quot;,atvscriptPath:\&quot;/tmp/2\&quot;});assert.strictEqual(result,\&quot;/tmp/1\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;650910bd-3ff7-4812-9787-d971b10a3b49&quot;,&quot;parentUUID&quot;:&quot;8ac1b286-f54f-4a0b-bf0d-8b205ade2c86&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle atvscriptPath if set&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle atvscriptPath if set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=getExecutable(NodePyATVExecutableType.atvscript,{atvremotePath:\&quot;/tmp/1\&quot;,atvscriptPath:\&quot;/tmp/2\&quot;});assert.strictEqual(result,\&quot;/tmp/2\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;64f237f6-c18e-41e8-baf6-870ee4858676&quot;,&quot;parentUUID&quot;:&quot;8ac1b286-f54f-4a0b-bf0d-8b205ade2c86&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle default for atvremote&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle default for atvremote&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=getExecutable(NodePyATVExecutableType.atvremote,{atvscriptPath:\&quot;/tmp\&quot;});assert.strictEqual(result,\&quot;atvremote\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c409b38-ca60-4583-9930-52806f0917a0&quot;,&quot;parentUUID&quot;:&quot;8ac1b286-f54f-4a0b-bf0d-8b205ade2c86&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle default for atvscript&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle default for atvscript&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=getExecutable(NodePyATVExecutableType.atvscript,{atvremotePath:\&quot;/tmp\&quot;});assert.strictEqual(result,\&quot;atvscript\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;99af00f0-a46b-41dd-9f04-cc7c1ceaf124&quot;,&quot;parentUUID&quot;:&quot;8ac1b286-f54f-4a0b-bf0d-8b205ade2c86&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;650910bd-3ff7-4812-9787-d971b10a3b49&quot;,&quot;64f237f6-c18e-41e8-baf6-870ee4858676&quot;,&quot;8c409b38-ca60-4583-9930-52806f0917a0&quot;,&quot;99af00f0-a46b-41dd-9f04-cc7c1ceaf124&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3ce721dd-028a-4b5c-a9f8-ca4729bb81c4&quot;,&quot;title&quot;:&quot;getParameters()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;empty case&quot;,&quot;fullTitle&quot;:&quot;Tools getParameters() empty case&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await getParameters();assert.deepEqual(result,[])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e9e9edf3-0ab1-42e0-b16d-e8d30cafc4ed&quot;,&quot;parentUUID&quot;:&quot;3ce721dd-028a-4b5c-a9f8-ca4729bb81c4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;easy case&quot;,&quot;fullTitle&quot;:&quot;Tools getParameters() easy case&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await getParameters({host:\&quot;192.168.178.2\&quot;});assert.deepEqual(result,[\&quot;-s\&quot;,\&quot;192.168.178.2\&quot;])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;88bd5339-e874-42c9-b4ee-957d8cc04898&quot;,&quot;parentUUID&quot;:&quot;3ce721dd-028a-4b5c-a9f8-ca4729bb81c4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;full case&quot;,&quot;fullTitle&quot;:&quot;Tools getParameters() full case&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=await getParameters({airplayCredentials:\&quot;****\&quot;,companionCredentials:\&quot;1234\&quot;,dmapCredentials:\&quot;****\&quot;,hosts:[\&quot;192.168.178.2\&quot;,\&quot;192.168.178.3\&quot;],id:\&quot;****\&quot;,mrpCredentials:\&quot;****\&quot;,protocol:NodePyATVProtocol.mrp,raopCredentials:\&quot;::foo:\&quot;});assert.deepEqual(result,[\&quot;-s\&quot;,\&quot;192.168.178.2,192.168.178.3\&quot;,\&quot;-i\&quot;,\&quot;****\&quot;,\&quot;--protocol\&quot;,\&quot;mrp\&quot;,\&quot;--dmap-credentials\&quot;,\&quot;****\&quot;,\&quot;--mrp-credentials\&quot;,\&quot;****\&quot;,\&quot;--airplay-credentials\&quot;,\&quot;****\&quot;,\&quot;--companion-credentials\&quot;,\&quot;1234\&quot;,\&quot;--raop-credentials\&quot;,\&quot;::foo:\&quot;])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2891b642-507b-4a54-b1c6-007cf5de6547&quot;,&quot;parentUUID&quot;:&quot;3ce721dd-028a-4b5c-a9f8-ca4729bb81c4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e9e9edf3-0ab1-42e0-b16d-e8d30cafc4ed&quot;,&quot;88bd5339-e874-42c9-b4ee-957d8cc04898&quot;,&quot;2891b642-507b-4a54-b1c6-007cf5de6547&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b82480fe-789e-499e-8ba9-e7adc6308b62&quot;,&quot;title&quot;:&quot;parseState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work with empty data&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should work with empty data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input={};const result=parseState(input,\&quot;\&quot;,{});assert.deepStrictEqual(result,{album:null,app:null,appId:null,artist:null,contentIdentifier:null,dateTime:null,deviceState:null,episodeNumber:null,focusState:null,genre:null,hash:null,iTunesStoreIdentifier:null,mediaType:null,outputDevices:null,position:null,powerState:null,repeat:null,seasonNumber:null,seriesName:null,shuffle:null,title:null,totalTime:null,volume:null})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3626d00d-c960-4a35-8560-a2c2595ce058&quot;,&quot;parentUUID&quot;:&quot;b82480fe-789e-499e-8ba9-e7adc6308b62&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work without data&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should work without data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result=parseState(null,\&quot;\&quot;,{});assert.deepStrictEqual(result,{album:null,app:null,appId:null,artist:null,contentIdentifier:null,dateTime:null,deviceState:null,episodeNumber:null,focusState:null,genre:null,hash:null,iTunesStoreIdentifier:null,mediaType:null,outputDevices:null,position:null,powerState:null,repeat:null,seasonNumber:null,seriesName:null,shuffle:null,title:null,totalTime:null,volume:null})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9c663d5b-c7c2-46ec-bd80-886ee3e9e454&quot;,&quot;parentUUID&quot;:&quot;b82480fe-789e-499e-8ba9-e7adc6308b62&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with example data&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should work with example data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input={album:null,app:\&quot;Disney+\&quot;,app_id:\&quot;com.disney.disneyplus\&quot;,artist:null,content_identifier:null,datetime:\&quot;2020-11-07T22:38:43.608030+01:00\&quot;,device_state:\&quot;playing\&quot;,episode_number:null,focus_state:null,genre:null,hash:\&quot;100e0ab6-6ff5-4199-9c04-a7107ff78712\&quot;,itunes_store_identifier:null,media_type:\&quot;video\&quot;,output_devices:null,position:27,power_state:null,repeat:\&quot;off\&quot;,result:\&quot;success\&quot;,season_number:null,series_name:null,shuffle:\&quot;off\&quot;,title:\&quot;Solo: A Star Wars Story\&quot;,total_time:8097,volume:null};const result=parseState(input,\&quot;\&quot;,{});assert.deepStrictEqual(result,{album:null,app:\&quot;Disney+\&quot;,appId:\&quot;com.disney.disneyplus\&quot;,artist:null,contentIdentifier:null,dateTime:new Date(\&quot;2020-11-07T22:38:43.608030+01:00\&quot;),deviceState:NodePyATVDeviceState.playing,episodeNumber:null,focusState:null,genre:null,hash:\&quot;100e0ab6-6ff5-4199-9c04-a7107ff78712\&quot;,iTunesStoreIdentifier:null,mediaType:NodePyATVMediaType.video,outputDevices:null,position:27,powerState:null,repeat:NodePyATVRepeatState.off,seasonNumber:null,seriesName:null,shuffle:NodePyATVShuffleState.off,title:\&quot;Solo: A Star Wars Story\&quot;,totalTime:8097,volume:null})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c1ab67c7-7638-4a3e-b6e6-74fb2c318d42&quot;,&quot;parentUUID&quot;:&quot;b82480fe-789e-499e-8ba9-e7adc6308b62&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw an error for pyatv exceptions&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should throw an error for pyatv exceptions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input={datetime:\&quot;2021-11-24T21:13:36.424576+03:00\&quot;,exception:\&quot;invalid credentials: 321\&quot;,result:\&quot;failure\&quot;,stacktrace:&#x27;Traceback (most recent call last):\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\&quot;, line 302, in appstart\\n    print(args.output(await _handle_command(args, abort_sem, loop)), flush=True)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/scripts/atvscript.py\&quot;, line 196, in _handle_command\\n    atv = await connect(config, loop, protocol=Protocol.MRP)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/__init__.py\&quot;, line 96, in connect\\n    for setup_data in proto_methods.setup(\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\&quot;, line 192, in setup\\n    stream = AirPlayStream(config, service)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/protocols/airplay/__init__.py\&quot;, line 79, in __init__\\n    self._credentials: HapCredentials = parse_credentials(self.service.credentials)\\n  File \&quot;/Users/free/Library/Python/3.8/lib/python/site-packages/pyatv/auth/hap_pairing.py\&quot;, line 139, in parse_credentials\\n    raise exceptions.InvalidCredentialsError(\&quot;invalid credentials: \&quot; + detail_string)\\npyatv.exceptions.InvalidCredentialsError: invalid credentials: 321\\n&#x27;};assert.throws(()=&gt;{parseState(input,\&quot;\&quot;,{})},/Got pyatv Error: invalid credentials: 321/)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c15724c4-05ee-492c-8bdc-f134ee7427cf&quot;,&quot;parentUUID&quot;:&quot;b82480fe-789e-499e-8ba9-e7adc6308b62&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should ignore date if it&#x27;s an invalid date&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should ignore date if it&#x27;s an invalid date&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input={datetime:\&quot;today\&quot;};const result=parseState(input,\&quot;\&quot;,{});assert.deepStrictEqual(result,{album:null,app:null,appId:null,artist:null,contentIdentifier:null,dateTime:null,deviceState:null,episodeNumber:null,focusState:null,genre:null,hash:null,iTunesStoreIdentifier:null,mediaType:null,outputDevices:null,position:null,powerState:null,repeat:null,seasonNumber:null,seriesName:null,shuffle:null,title:null,totalTime:null,volume:null})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dd754a47-b1eb-4936-97fa-d63362964798&quot;,&quot;parentUUID&quot;:&quot;b82480fe-789e-499e-8ba9-e7adc6308b62&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should ignore data if unsupported type&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should ignore data if unsupported type&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input={album:Infinity,app:0,app_id:891645381647289,artist:90,content_identifier:null,datetime:true,device_state:43,episode_number:null,focus_state:null,genre:Math.PI,hash:1337,itunes_store_identifier:null,media_type:false,output_devices:null,position:\&quot;0:30.123\&quot;,power_state:null,repeat:true,result:\&quot;success\&quot;,season_number:null,series_name:null,shuffle:false,title:void 0,total_time:\&quot;23min\&quot;,volume:null};const result=parseState(input,\&quot;\&quot;,{});assert.deepStrictEqual(result,{album:null,app:null,appId:null,artist:null,contentIdentifier:null,dateTime:null,deviceState:null,episodeNumber:null,focusState:null,genre:null,hash:null,iTunesStoreIdentifier:null,mediaType:null,outputDevices:null,position:null,powerState:null,repeat:null,seasonNumber:null,seriesName:null,shuffle:null,title:null,totalTime:null,volume:null})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5500aead-fa13-4929-8d32-75fe71b7d536&quot;,&quot;parentUUID&quot;:&quot;b82480fe-789e-499e-8ba9-e7adc6308b62&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should ignore enums with unsupported valid&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should ignore enums with unsupported valid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input={device_state:\&quot;initiating\&quot;,media_type:\&quot;3d-experience\&quot;,repeat:\&quot;nothing\&quot;,shuffle:\&quot;everything\&quot;};const result=parseState(input,\&quot;\&quot;,{});assert.deepStrictEqual(result,{album:null,app:null,appId:null,artist:null,contentIdentifier:null,dateTime:null,deviceState:null,episodeNumber:null,focusState:null,genre:null,hash:null,iTunesStoreIdentifier:null,mediaType:null,outputDevices:null,position:null,powerState:null,repeat:null,seasonNumber:null,seriesName:null,shuffle:null,title:null,totalTime:null,volume:null})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0920659e-4b4d-4503-93f6-467cd574ac84&quot;,&quot;parentUUID&quot;:&quot;b82480fe-789e-499e-8ba9-e7adc6308b62&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3626d00d-c960-4a35-8560-a2c2595ce058&quot;,&quot;9c663d5b-c7c2-46ec-bd80-886ee3e9e454&quot;,&quot;c1ab67c7-7638-4a3e-b6e6-74fb2c318d42&quot;,&quot;c15724c4-05ee-492c-8bdc-f134ee7427cf&quot;,&quot;dd754a47-b1eb-4936-97fa-d63362964798&quot;,&quot;5500aead-fa13-4929-8d32-75fe71b7d536&quot;,&quot;0920659e-4b4d-4503-93f6-467cd574ac84&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;11.5.0&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;node-pyatv&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report/assets&quot;,&quot;jsonFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/mochawesome-report/mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>