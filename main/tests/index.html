<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:82,&quot;tests&quot;:136,&quot;passes&quot;:134,&quot;pending&quot;:2,&quot;failures&quot;:0,&quot;start&quot;:&quot;2021-10-09T19:25:50.868Z&quot;,&quot;end&quot;:&quot;2021-10-09T19:26:02.680Z&quot;,&quot;duration&quot;:11812,&quot;testsRegistered&quot;:136,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:1.4705882352941175,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;e4e1b6bb-dd3a-46e2-b34a-c7e17e122847&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0373ac2a-fd66-4185-9476-91e9b0d3a7a7&quot;,&quot;title&quot;:&quot;NodePyATVDeviceEvent&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;87ec5a84-4e1d-48e3-8c43-243ece34325e&quot;,&quot;title&quot;:&quot;get key()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get key() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event = new device_event_1.default({\n    key: &#x27;genre&#x27;,\n    old: &#x27;Jazz&#x27;,\n    new: &#x27;Rock&#x27;,\n    device: new device_1.default({\n        host: &#x27;192.168.178.2&#x27;,\n        name: &#x27;My Testinstance&#x27;\n    })\n});\nassert_1.default.strictEqual(event.key, &#x27;genre&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e5864ff8-89eb-4c2c-b909-fa5c697a763b&quot;,&quot;parentUUID&quot;:&quot;87ec5a84-4e1d-48e3-8c43-243ece34325e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e5864ff8-89eb-4c2c-b909-fa5c697a763b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b95f4769-3594-48ce-bc9c-fc346898972e&quot;,&quot;title&quot;:&quot;get oldValue()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get oldValue() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event = new device_event_1.default({\n    key: &#x27;genre&#x27;,\n    old: &#x27;Jazz&#x27;,\n    new: &#x27;Rock&#x27;,\n    device: new device_1.default({\n        host: &#x27;192.168.178.2&#x27;,\n        name: &#x27;My Testinstance&#x27;\n    })\n});\nassert_1.default.strictEqual(event.oldValue, &#x27;Jazz&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;772e2a52-81ab-4873-afe9-546695541dff&quot;,&quot;parentUUID&quot;:&quot;b95f4769-3594-48ce-bc9c-fc346898972e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;772e2a52-81ab-4873-afe9-546695541dff&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9515ca2a-1872-46e7-9915-74fec5eef437&quot;,&quot;title&quot;:&quot;get newValue()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get newValue() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event = new device_event_1.default({\n    key: &#x27;genre&#x27;,\n    old: &#x27;Jazz&#x27;,\n    new: &#x27;Rock&#x27;,\n    device: new device_1.default({\n        host: &#x27;192.168.178.2&#x27;,\n        name: &#x27;My Testinstance&#x27;\n    })\n});\nassert_1.default.strictEqual(event.newValue, &#x27;Rock&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;25abdbbe-c30a-41f3-af4e-2aace1ae4d18&quot;,&quot;parentUUID&quot;:&quot;9515ca2a-1872-46e7-9915-74fec5eef437&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;25abdbbe-c30a-41f3-af4e-2aace1ae4d18&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7d16b937-5c25-461d-9a97-db76709a9351&quot;,&quot;title&quot;:&quot;get value()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get value() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const event = new device_event_1.default({\n    key: &#x27;genre&#x27;,\n    old: &#x27;Jazz&#x27;,\n    new: &#x27;Rock&#x27;,\n    device: new device_1.default({\n        host: &#x27;192.168.178.2&#x27;,\n        name: &#x27;My Testinstance&#x27;\n    })\n});\nassert_1.default.strictEqual(event.value, &#x27;Rock&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e3e02f0f-e924-49b9-bc5d-19a1a1d0b595&quot;,&quot;parentUUID&quot;:&quot;7d16b937-5c25-461d-9a97-db76709a9351&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e3e02f0f-e924-49b9-bc5d-19a1a1d0b595&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b3756fc1-73f2-4883-b07e-97009002dc35&quot;,&quot;title&quot;:&quot;get device()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-event.ts&quot;,&quot;file&quot;:&quot;/test/device-event.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvent get device() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new device_1.default({\n    host: &#x27;192.168.178.2&#x27;,\n    name: &#x27;My Testinstance&#x27;\n});\nconst event = new device_event_1.default({\n    key: &#x27;genre&#x27;,\n    old: &#x27;Jazz&#x27;,\n    new: &#x27;Rock&#x27;,\n    device\n});\nassert_1.default.deepEqual(event.device, device);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;36b79503-4acb-4001-8d3b-5898b605da67&quot;,&quot;parentUUID&quot;:&quot;b3756fc1-73f2-4883-b07e-97009002dc35&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;36b79503-4acb-4001-8d3b-5898b605da67&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;76aca1ff-2c77-4e09-8106-9ee0c31ff666&quot;,&quot;title&quot;:&quot;NodePyATVDeviceEvents&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;bb327a8e-26c7-4411-8abd-c347b41668dd&quot;,&quot;title&quot;:&quot;applyStateAndEmitEvents()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should emit update:key event&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit update:key event&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                title: &#x27;My Movie&#x27;\n            });\n        })\n    });\n    yield new Promise(cb =&gt; {\n        device.once(&#x27;update:title&#x27;, event =&gt; {\n            assert_1.default.ok(event instanceof device_event_1.default);\n            assert_1.default.strictEqual(event.key, &#x27;title&#x27;);\n            assert_1.default.strictEqual(event.oldValue, null);\n            assert_1.default.strictEqual(event.newValue, &#x27;My Movie&#x27;);\n            assert_1.default.strictEqual(event.value, &#x27;My Movie&#x27;);\n            assert_1.default.deepStrictEqual(event.device, device);\n            cb(undefined);\n        });\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c89cf15a-d5e5-46c1-971e-5b28354c87b3&quot;,&quot;parentUUID&quot;:&quot;bb327a8e-26c7-4411-8abd-c347b41668dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit update event&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit update event&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                title: &#x27;My Movie&#x27;\n            });\n        })\n    });\n    yield new Promise(cb =&gt; {\n        device.once(&#x27;update&#x27;, event =&gt; {\n            assert_1.default.ok(event instanceof device_event_1.default);\n            assert_1.default.strictEqual(event.key, &#x27;title&#x27;);\n            assert_1.default.strictEqual(event.oldValue, null);\n            assert_1.default.strictEqual(event.newValue, &#x27;My Movie&#x27;);\n            assert_1.default.strictEqual(event.value, &#x27;My Movie&#x27;);\n            assert_1.default.deepStrictEqual(event.device, device);\n            cb(undefined);\n        });\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;09286462-0f7e-4e1f-820b-abe506a23b72&quot;,&quot;parentUUID&quot;:&quot;bb327a8e-26c7-4411-8abd-c347b41668dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit update:key event before update&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit update:key event before update&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                title: &#x27;My Movie&#x27;\n            });\n        })\n    });\n    const sort = [];\n    yield Promise.race([\n        new Promise(cb =&gt; {\n            device.once(&#x27;update&#x27;, () =&gt; {\n                sort.push(&#x27;update&#x27;);\n                cb(undefined);\n            });\n        }),\n        new Promise(cb =&gt; {\n            device.once(&#x27;update:title&#x27;, () =&gt; {\n                sort.push(&#x27;update:title&#x27;);\n                cb(undefined);\n            });\n        })\n    ]);\n    assert_1.default.deepStrictEqual(sort, [&#x27;update:title&#x27;, &#x27;update&#x27;]);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2e181117-6218-4560-9cd6-ed8e16676778&quot;,&quot;parentUUID&quot;:&quot;bb327a8e-26c7-4411-8abd-c347b41668dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not emit an update if new value is same as old one&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should not emit an update if new value is same as old one&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    let spawnCounter = 0;\n    let eventCounter = 0;\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            if (spawnCounter === 0) {\n                cp.onStdIn(() =&gt; cp.end());\n            }\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                title: &#x27;My Movie&#x27;\n            });\n            spawnCounter++;\n            if (spawnCounter &gt;= 2) {\n                cp.end();\n            }\n        })\n    });\n    const listener = () =&gt; {\n        eventCounter++;\n    };\n    device.on(&#x27;update&#x27;, listener);\n    yield new Promise(cb =&gt; setTimeout(cb, 0));\n    yield device.getState();\n    device.off(&#x27;update&#x27;, listener);\n    assert_1.default.strictEqual(spawnCounter, 2);\n    assert_1.default.strictEqual(eventCounter, 1);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8a7205f1-e2dd-452c-8136-7391b842f1d6&quot;,&quot;parentUUID&quot;:&quot;bb327a8e-26c7-4411-8abd-c347b41668dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error event if event listener throws an exception&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should emit error event if event listener throws an exception&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                title: &#x27;My Movie&#x27;\n            });\n        })\n    });\n    let callCounter = 0;\n    const error = new Error(&#x27;This is an error. Be nice.&#x27;);\n    device.once(&#x27;error&#x27;, err =&gt; {\n        assert_1.default.strictEqual(err, error);\n        callCounter++;\n    });\n    const listener = () =&gt; {\n        throw error;\n    };\n    device.on(&#x27;update&#x27;, listener);\n    yield new Promise(cb =&gt; setTimeout(cb, 0));\n    device.off(&#x27;update&#x27;, listener);\n    assert_1.default.strictEqual(callCounter, 1);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b825ae72-1da3-49d0-aa3d-dea13d77d803&quot;,&quot;parentUUID&quot;:&quot;bb327a8e-26c7-4411-8abd-c347b41668dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should also work with powerState&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents applyStateAndEmitEvents() should also work with powerState&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                datetime: new Date().toJSON(),\n                power_state: &#x27;off&#x27;\n            });\n        })\n    });\n    yield new Promise(cb =&gt; {\n        device.once(&#x27;update:powerState&#x27;, event =&gt; {\n            assert_1.default.ok(event instanceof device_event_1.default);\n            assert_1.default.strictEqual(event.key, &#x27;powerState&#x27;);\n            assert_1.default.strictEqual(event.oldValue, null);\n            assert_1.default.strictEqual(event.newValue, &#x27;off&#x27;);\n            assert_1.default.strictEqual(event.newValue, types_1.NodePyATVPowerState.off);\n            assert_1.default.strictEqual(event.value, &#x27;off&#x27;);\n            assert_1.default.strictEqual(event.value, types_1.NodePyATVPowerState.off);\n            assert_1.default.deepStrictEqual(event.device, device);\n            cb(undefined);\n        });\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c560c6d0-183f-46cb-972d-c46783cdcbbd&quot;,&quot;parentUUID&quot;:&quot;bb327a8e-26c7-4411-8abd-c347b41668dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c89cf15a-d5e5-46c1-971e-5b28354c87b3&quot;,&quot;09286462-0f7e-4e1f-820b-abe506a23b72&quot;,&quot;2e181117-6218-4560-9cd6-ed8e16676778&quot;,&quot;8a7205f1-e2dd-452c-8136-7391b842f1d6&quot;,&quot;b825ae72-1da3-49d0-aa3d-dea13d77d803&quot;,&quot;c560c6d0-183f-46cb-972d-c46783cdcbbd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;69b0cc3d-12c8-40ba-a825-a13efe77d2e9&quot;,&quot;title&quot;:&quot;start|stopListening()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should emit error if spawn fails&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should emit error if spawn fails&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const error = new Error();\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.error(error).end();\n        })\n    });\n    const listener = () =&gt; {\n        // empty listener\n    };\n    device.on(&#x27;update&#x27;, listener);\n    yield new Promise(cb =&gt; {\n        device.once(&#x27;error&#x27;, err =&gt; {\n            assert_1.default.strictEqual(err, error);\n            cb(undefined);\n        });\n    });\n    device.off(&#x27;update&#x27;, listener);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c46ccb30-e5f0-4814-8ad0-f86b35ede001&quot;,&quot;parentUUID&quot;:&quot;69b0cc3d-12c8-40ba-a825-a13efe77d2e9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error on stderr data&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should emit error on stderr data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.stderr(&#x27;Hello World!&#x27;).end();\n        })\n    });\n    const listener = () =&gt; {\n        // empty listener\n    };\n    device.on(&#x27;update&#x27;, listener);\n    yield new Promise(cb =&gt; {\n        device.once(&#x27;error&#x27;, err =&gt; {\n            assert_1.default.ok(err instanceof Error);\n            assert_1.default.ok(err.toString().includes(&#x27;Got stderr output from pyatv: Hello World!&#x27;));\n            cb(undefined);\n        });\n    });\n    device.off(&#x27;update&#x27;, listener);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;66228cfc-6063-4be5-8f90-d150ec0959ae&quot;,&quot;parentUUID&quot;:&quot;69b0cc3d-12c8-40ba-a825-a13efe77d2e9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should emit error if stdout is not valid json&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should emit error if stdout is not valid json&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.stdout(&#x27;#&#x27;).end();\n        })\n    });\n    const listener = () =&gt; {\n        // empty listener\n    };\n    device.on(&#x27;update&#x27;, listener);\n    yield new Promise(cb =&gt; {\n        device.once(&#x27;error&#x27;, err =&gt; {\n            assert_1.default.ok(err instanceof Error);\n            assert_1.default.ok(err.toString().includes(&#x27;Unable to parse stdout json: SyntaxError: &#x27; +\n                &#x27;Unexpected token # in JSON at position 0&#x27;));\n            cb(undefined);\n        });\n    });\n    device.off(&#x27;update&#x27;, listener);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dbe872ed-44a4-4665-b796-5372b678722d&quot;,&quot;parentUUID&quot;:&quot;69b0cc3d-12c8-40ba-a825-a13efe77d2e9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should restart the process if it gets killed&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents start|stopListening() should restart the process if it gets killed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;pending&quot;,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3521049e-3de0-44b8-bcb0-81de1b57c6eb&quot;,&quot;parentUUID&quot;:&quot;69b0cc3d-12c8-40ba-a825-a13efe77d2e9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c46ccb30-e5f0-4814-8ad0-f86b35ede001&quot;,&quot;66228cfc-6063-4be5-8f90-d150ec0959ae&quot;,&quot;dbe872ed-44a4-4665-b796-5372b678722d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;3521049e-3de0-44b8-bcb0-81de1b57c6eb&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f9a981ab-0d3a-4155-be90-0aabbc44f831&quot;,&quot;title&quot;:&quot;addListener() / removeAllListeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work without any exceptions&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents addListener() / removeAllListeners() should work without any exceptions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                title: &#x27;My Movie&#x27;\n            });\n        })\n    });\n    const listener = () =&gt; {\n        // empty listener\n    };\n    device.addListener(&#x27;update&#x27;, listener);\n    device.removeAllListeners(&#x27;update&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5eded13b-a2cd-4367-8c0d-855c7d9fc9b7&quot;,&quot;parentUUID&quot;:&quot;f9a981ab-0d3a-4155-be90-0aabbc44f831&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5eded13b-a2cd-4367-8c0d-855c7d9fc9b7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2079cf11-c1dc-4fd8-9da0-8b92d164c989&quot;,&quot;title&quot;:&quot;emit()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents emit() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new device_1.default({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n    })\n});\nconst event = new device_event_1.default({\n    key: &#x27;dateTime&#x27;,\n    old: &#x27;foo&#x27;,\n    new: &#x27;bar&#x27;,\n    device\n});\nlet executions = 0;\ndevice.once(&#x27;test&#x27;, (e) =&gt; {\n    executions++;\n    assert_1.default.strictEqual(e, event);\n    assert_1.default.strictEqual(executions, 1);\n    done();\n});\ndevice.emit(&#x27;test&#x27;, event);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;211427a7-0ca1-4aec-907a-9bbf4280021c&quot;,&quot;parentUUID&quot;:&quot;2079cf11-c1dc-4fd8-9da0-8b92d164c989&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;211427a7-0ca1-4aec-907a-9bbf4280021c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;cc659022-27b6-4833-a48a-817462033536&quot;,&quot;title&quot;:&quot;eventNames()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents eventNames() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new device_1.default({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n    })\n});\nconst listener = () =&gt; {\n    // ignore\n};\ndevice.on(&#x27;test&#x27;, listener);\nassert_1.default.deepStrictEqual(device.eventNames(), [&#x27;test&#x27;]);\ndevice.off(&#x27;test&#x27;, listener);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;55fe3add-159d-4135-bd5f-e3cf6035b82e&quot;,&quot;parentUUID&quot;:&quot;cc659022-27b6-4833-a48a-817462033536&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;55fe3add-159d-4135-bd5f-e3cf6035b82e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6c077650-808b-4ca5-8104-a14626d6c585&quot;,&quot;title&quot;:&quot;getMaxListeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents getMaxListeners() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new device_1.default({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n    })\n});\nconst result = device.getMaxListeners();\nassert_1.default.ok(typeof result, &#x27;number&#x27;);\nassert_1.default.ok(result &gt;= 10);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b0090645-3acf-48f1-89d2-c785a15e6a19&quot;,&quot;parentUUID&quot;:&quot;6c077650-808b-4ca5-8104-a14626d6c585&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b0090645-3acf-48f1-89d2-c785a15e6a19&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;99cdaf13-35f4-4404-b3ea-011fdf5b127e&quot;,&quot;title&quot;:&quot;listenerCount()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents listenerCount() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new device_1.default({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n    })\n});\nconst listener = () =&gt; {\n    // ignore\n};\nassert_1.default.deepStrictEqual(device.listenerCount(&#x27;test&#x27;), 0);\ndevice.on(&#x27;test&#x27;, listener);\nassert_1.default.deepStrictEqual(device.listenerCount(&#x27;test&#x27;), 1);\ndevice.off(&#x27;test&#x27;, listener);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ea2e9bc3-9d7e-487b-9e64-960f9380b698&quot;,&quot;parentUUID&quot;:&quot;99cdaf13-35f4-4404-b3ea-011fdf5b127e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ea2e9bc3-9d7e-487b-9e64-960f9380b698&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f6b199d5-6b7a-488a-b589-01888ccf32f2&quot;,&quot;title&quot;:&quot;listeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents listeners() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new device_1.default({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n    })\n});\nconst listener = () =&gt; {\n    // ignore\n};\nassert_1.default.deepStrictEqual(device.listeners(&#x27;test&#x27;).length, 0);\ndevice.on(&#x27;test&#x27;, listener);\nassert_1.default.deepStrictEqual(device.listeners(&#x27;test&#x27;).length, 1);\nassert_1.default.deepStrictEqual(device.listeners(&#x27;test&#x27;)[0], listener);\ndevice.off(&#x27;test&#x27;, listener);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3bb8a812-36e7-4aac-82df-4f336b812ce1&quot;,&quot;parentUUID&quot;:&quot;f6b199d5-6b7a-488a-b589-01888ccf32f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3bb8a812-36e7-4aac-82df-4f336b812ce1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5d47b072-1214-45c5-ac6b-153cb57833ef&quot;,&quot;title&quot;:&quot;prependListener()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents prependListener() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new device_1.default({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n        cp.stdout({\n            result: &#x27;success&#x27;,\n            title: &#x27;My Movie&#x27;\n        });\n    })\n});\nconst listener = () =&gt; {\n    device.removeAllListeners(&#x27;update&#x27;);\n    done();\n};\ndevice.prependListener(&#x27;update&#x27;, listener);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9ce82b09-5c2f-41f6-92b1-a6bd108bb867&quot;,&quot;parentUUID&quot;:&quot;5d47b072-1214-45c5-ac6b-153cb57833ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9ce82b09-5c2f-41f6-92b1-a6bd108bb867&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e12b6975-9f78-4353-8f62-181155714dbe&quot;,&quot;title&quot;:&quot;prependOnceListener()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents prependOnceListener() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new device_1.default({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n        cp.stdout({\n            result: &#x27;success&#x27;,\n            title: &#x27;My Movie&#x27;\n        });\n    })\n});\ndevice.prependOnceListener(&#x27;update&#x27;, () =&gt; done());&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39c47e6a-2b0c-4e2a-8fbd-bcab8f87b342&quot;,&quot;parentUUID&quot;:&quot;e12b6975-9f78-4353-8f62-181155714dbe&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;39c47e6a-2b0c-4e2a-8fbd-bcab8f87b342&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;cd65c9d2-361e-4aa6-8f20-b72e05f1ffed&quot;,&quot;title&quot;:&quot;rawListeners()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents rawListeners() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new device_1.default({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n        cp.onStdIn(() =&gt; cp.end());\n    })\n});\nconst listener = () =&gt; {\n    // ignore\n};\nassert_1.default.deepStrictEqual(device.rawListeners(&#x27;test&#x27;).length, 0);\ndevice.on(&#x27;test&#x27;, listener);\nassert_1.default.deepStrictEqual(device.rawListeners(&#x27;test&#x27;).length, 1);\nassert_1.default.deepStrictEqual(device.rawListeners(&#x27;test&#x27;)[0], listener);\ndevice.off(&#x27;test&#x27;, listener);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;08f14309-3683-4d4b-9c66-73bec998fa70&quot;,&quot;parentUUID&quot;:&quot;cd65c9d2-361e-4aa6-8f20-b72e05f1ffed&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;08f14309-3683-4d4b-9c66-73bec998fa70&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;eb72aa07-8f47-4892-b51f-0255714911fb&quot;,&quot;title&quot;:&quot;removeListener()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device-events.ts&quot;,&quot;file&quot;:&quot;/test/device-events.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work without any exceptions&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDeviceEvents removeListener() should work without any exceptions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.onStdIn(() =&gt; cp.end());\n            cp.stdout({\n                result: &#x27;success&#x27;,\n                title: &#x27;My Movie&#x27;\n            });\n        })\n    });\n    const listener = () =&gt; {\n        // empty listener\n    };\n    device.addListener(&#x27;update&#x27;, listener);\n    assert_1.default.deepStrictEqual(device.listenerCount(&#x27;update&#x27;), 1);\n    device.removeListener(&#x27;update&#x27;, listener);\n    assert_1.default.deepStrictEqual(device.listenerCount(&#x27;update&#x27;), 0);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f45eb54e-d994-414b-b1ae-f8e4806ad849&quot;,&quot;parentUUID&quot;:&quot;eb72aa07-8f47-4892-b51f-0255714911fb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f45eb54e-d994-414b-b1ae-f8e4806ad849&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ccb75dee-dfc0-4ca1-a518-c3e3d60fc164&quot;,&quot;title&quot;:&quot;NodePyATVDevice&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;88c3bd44-3736-40a6-96c6-03c28261101a&quot;,&quot;title&quot;:&quot;get name()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the name&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get name() should return the name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new device_1.default({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;\n});\nassert_1.default.strictEqual(device.name, &#x27;My Testdevice&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;465dda47-6aec-4c31-b287-01200b084480&quot;,&quot;parentUUID&quot;:&quot;88c3bd44-3736-40a6-96c6-03c28261101a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;465dda47-6aec-4c31-b287-01200b084480&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;eb175e72-da4e-41c9-913a-c9c0cc5cb090&quot;,&quot;title&quot;:&quot;get host()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the host&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get host() should return the host&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new device_1.default({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;\n});\nassert_1.default.strictEqual(device.host, &#x27;192.168.178.2&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7e61972f-1583-439b-838d-c3bb28b9b5fb&quot;,&quot;parentUUID&quot;:&quot;eb175e72-da4e-41c9-913a-c9c0cc5cb090&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7e61972f-1583-439b-838d-c3bb28b9b5fb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1fda9e5a-7d55-43b6-a64b-8f83a0562588&quot;,&quot;title&quot;:&quot;get id()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the id&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get id() should return the id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new device_1.default({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    id: &#x27;*****&#x27;\n});\nassert_1.default.strictEqual(device.id, &#x27;*****&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4ef6ec85-d5e6-420d-bf90-7da3b1ba30c8&quot;,&quot;parentUUID&quot;:&quot;1fda9e5a-7d55-43b6-a64b-8f83a0562588&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4ef6ec85-d5e6-420d-bf90-7da3b1ba30c8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;dd422be6-2341-45c1-b787-8ce4b9845da8&quot;,&quot;title&quot;:&quot;get protocol()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the protocol&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get protocol() should return the protocol&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new device_1.default({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    protocol: types_1.NodePyATVProtocol.airplay\n});\nassert_1.default.strictEqual(device.protocol, types_1.NodePyATVProtocol.airplay);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;18b63500-f4ce-42a1-ab2b-914eb7e105a1&quot;,&quot;parentUUID&quot;:&quot;dd422be6-2341-45c1-b787-8ce4b9845da8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;18b63500-f4ce-42a1-ab2b-914eb7e105a1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9b35701f-b004-4336-8005-0e70c0983588&quot;,&quot;title&quot;:&quot;get debug()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return true if set to true&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get debug() should return true if set to true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new device_1.default({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    debug: true\n});\nassert_1.default.strictEqual(device.debug, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d1573cb0-6bc0-40f4-bc3f-501bcce97006&quot;,&quot;parentUUID&quot;:&quot;9b35701f-b004-4336-8005-0e70c0983588&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return fn if set to custom function&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get debug() should return fn if set to custom function&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// eslint-disable-next-line @typescript-eslint/no-empty-function\nconst fn = () =&gt; {\n};\nconst device = new device_1.default({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    debug: fn\n});\nassert_1.default.strictEqual(device.debug, fn);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b1c9d75d-ab6a-402c-b0f3-ec22d2959204&quot;,&quot;parentUUID&quot;:&quot;9b35701f-b004-4336-8005-0e70c0983588&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return false if unset&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice get debug() should return false if unset&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new device_1.default({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;\n});\nassert_1.default.strictEqual(device.debug, undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;85ba4069-d76d-47c7-be82-f0b2d605cb94&quot;,&quot;parentUUID&quot;:&quot;9b35701f-b004-4336-8005-0e70c0983588&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d1573cb0-6bc0-40f4-bc3f-501bcce97006&quot;,&quot;b1c9d75d-ab6a-402c-b0f3-ec22d2959204&quot;,&quot;85ba4069-d76d-47c7-be82-f0b2d605cb94&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a1065c9c-02fe-4b26-8998-b67f51818b33&quot;,&quot;title&quot;:&quot;set debug()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work for debug = true&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new device_1.default({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;\n});\nassert_1.default.strictEqual(device.debug, undefined);\ndevice.debug = true;\nassert_1.default.strictEqual(device.debug, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b5b1ab4c-a345-4dfd-9bb7-c2f910ad5dca&quot;,&quot;parentUUID&quot;:&quot;a1065c9c-02fe-4b26-8998-b67f51818b33&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for debug = undefined&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = undefined&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new device_1.default({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    debug: true\n});\nassert_1.default.strictEqual(device.debug, true);\ndevice.debug = undefined;\nassert_1.default.strictEqual(device.debug, undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;551b4b02-f911-45ff-91df-5956d9f5bad0&quot;,&quot;parentUUID&quot;:&quot;a1065c9c-02fe-4b26-8998-b67f51818b33&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for debug = undefined&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = undefined&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new device_1.default({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    debug: true\n});\nassert_1.default.strictEqual(device.debug, true);\ndevice.debug = undefined;\nassert_1.default.strictEqual(device.debug, undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;29ae5d2f-c041-4479-80d5-9c530f629ae8&quot;,&quot;parentUUID&quot;:&quot;a1065c9c-02fe-4b26-8998-b67f51818b33&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work for debug = fn&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice set debug() should work for debug = fn&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new device_1.default({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;\n});\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nconst fn = () =&gt; {\n};\nassert_1.default.strictEqual(device.debug, undefined);\ndevice.debug = fn;\nassert_1.default.strictEqual(device.debug, fn);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;680f5db3-2da2-4baf-9f94-d0f83b4af3d5&quot;,&quot;parentUUID&quot;:&quot;a1065c9c-02fe-4b26-8998-b67f51818b33&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b5b1ab4c-a345-4dfd-9bb7-c2f910ad5dca&quot;,&quot;551b4b02-f911-45ff-91df-5956d9f5bad0&quot;,&quot;29ae5d2f-c041-4479-80d5-9c530f629ae8&quot;,&quot;680f5db3-2da2-4baf-9f94-d0f83b4af3d5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;78f6a65f-2e46-4027-bb69-30ad2342139f&quot;,&quot;title&quot;:&quot;toJSON()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a object representation&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice toJSON() should return a object representation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new device_1.default({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    id: &#x27;*****&#x27;,\n    protocol: types_1.NodePyATVProtocol.airplay\n});\nassert_1.default.deepEqual(device.toJSON(), {\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    id: &#x27;*****&#x27;,\n    protocol: types_1.NodePyATVProtocol.airplay\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;94d37f9d-a6de-464f-b55e-abe355c5825f&quot;,&quot;parentUUID&quot;:&quot;78f6a65f-2e46-4027-bb69-30ad2342139f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should be possible to create a new device from this&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice toJSON() should be possible to create a new device from this&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const config = {\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;,\n    id: &#x27;*****&#x27;,\n    protocol: types_1.NodePyATVProtocol.airplay\n};\nconst deviceA = new device_1.default(config);\nconst deviceB = new device_1.default(deviceA.toJSON());\nassert_1.default.deepEqual(deviceB.toJSON(), config);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;495dbc4c-4917-49d9-abba-cf2b00ed7a73&quot;,&quot;parentUUID&quot;:&quot;78f6a65f-2e46-4027-bb69-30ad2342139f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;94d37f9d-a6de-464f-b55e-abe355c5825f&quot;,&quot;495dbc4c-4917-49d9-abba-cf2b00ed7a73&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;540dd51d-14a7-4662-82fc-478d3e8b739b&quot;,&quot;title&quot;:&quot;toString()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice toString() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = new device_1.default({\n    name: &#x27;My Testdevice&#x27;,\n    host: &#x27;192.168.178.2&#x27;\n});\nassert_1.default.strictEqual(device.toString(), &#x27;NodePyATVDevice(My Testdevice, 192.168.178.2)&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ac8c7ce4-4931-4113-9b3b-f24d4e3a60c2&quot;,&quot;parentUUID&quot;:&quot;540dd51d-14a7-4662-82fc-478d3e8b739b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ac8c7ce4-4931-4113-9b3b-f24d4e3a60c2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e682bfd5-234e-4d3c-9d55-9b464768f139&quot;,&quot;title&quot;:&quot;getState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work [I]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should work [I]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;pending&quot;,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;702b88a5-fbbf-4922-b035-7f2dbdf061d8&quot;,&quot;parentUUID&quot;:&quot;e682bfd5-234e-4d3c-9d55-9b464768f139&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                datetime: &#x27;2020-11-07T22:38:43.608030+01:00&#x27;,\n                hash: &#x27;100e0ab6-6ff5-4199-9c04-a7107ff78712&#x27;,\n                media_type: &#x27;video&#x27;,\n                device_state: &#x27;playing&#x27;,\n                title: &#x27;Solo: A Star Wars Story&#x27;,\n                artist: null,\n                album: null,\n                genre: null,\n                total_time: 8097,\n                position: 27,\n                shuffle: &#x27;off&#x27;,\n                repeat: &#x27;off&#x27;,\n                app: &#x27;Disney+&#x27;,\n                app_id: &#x27;com.disney.disneyplus&#x27;\n            });\n        })\n    });\n    const result = yield device.getState();\n    assert_1.default.deepStrictEqual(result, {\n        dateTime: new Date(&#x27;2020-11-07T22:38:43.608030+01:00&#x27;),\n        hash: &#x27;100e0ab6-6ff5-4199-9c04-a7107ff78712&#x27;,\n        mediaType: types_1.NodePyATVMediaType.video,\n        deviceState: types_1.NodePyATVDeviceState.playing,\n        title: &#x27;Solo: A Star Wars Story&#x27;,\n        artist: null,\n        album: null,\n        genre: null,\n        totalTime: 8097,\n        position: 27,\n        shuffle: types_1.NodePyATVShuffleState.off,\n        repeat: types_1.NodePyATVRepeatState.off,\n        app: &#x27;Disney+&#x27;,\n        appId: &#x27;com.disney.disneyplus&#x27;,\n        powerState: null\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f27c4347-6256-4d87-9c08-3293f4c45ea7&quot;,&quot;parentUUID&quot;:&quot;e682bfd5-234e-4d3c-9d55-9b464768f139&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should cache requests for a bit&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should cache requests for a bit&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    let executions = 0;\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            executions++;\n            cp.end({\n                result: &#x27;success&#x27;,\n                datetime: new Date().toJSON(),\n                hash: &#x27;100e0ab6-6ff5-4199-9c04-a7107ff78712&#x27;,\n                media_type: &#x27;video&#x27;,\n                device_state: &#x27;playing&#x27;,\n                title: &#x27;Solo: A Star Wars Story&#x27;,\n                artist: null,\n                album: null,\n                genre: null,\n                total_time: 8097,\n                position: 27,\n                shuffle: &#x27;off&#x27;,\n                repeat: &#x27;off&#x27;,\n                app: &#x27;Disney+&#x27;,\n                app_id: &#x27;com.disney.disneyplus&#x27;\n            });\n        })\n    });\n    const firstResult = yield device.getState();\n    const secondResult = yield device.getState();\n    assert_1.default.strictEqual(firstResult.dateTime, secondResult.dateTime);\n    assert_1.default.strictEqual(executions, 1);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1c1cabf5-5807-443e-bd2f-b348ffad2048&quot;,&quot;parentUUID&quot;:&quot;e682bfd5-234e-4d3c-9d55-9b464768f139&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update the position if cache was used&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getState() should update the position if cache was used&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                datetime: new Date(new Date().getTime() - 1000).toJSON(),\n                hash: &#x27;100e0ab6-6ff5-4199-9c04-a7107ff78712&#x27;,\n                media_type: &#x27;video&#x27;,\n                device_state: &#x27;playing&#x27;,\n                title: &#x27;Solo: A Star Wars Story&#x27;,\n                artist: null,\n                album: null,\n                genre: null,\n                total_time: 8097,\n                position: 27,\n                shuffle: &#x27;off&#x27;,\n                repeat: &#x27;off&#x27;,\n                app: &#x27;Disney+&#x27;,\n                app_id: &#x27;com.disney.disneyplus&#x27;\n            });\n        })\n    });\n    const firstResult = yield device.getState();\n    assert_1.default.strictEqual(firstResult.position, 27);\n    const secondResult = yield device.getState();\n    assert_1.default.ok(secondResult.position);\n    assert_1.default.ok(secondResult.position &gt; 27, `Position should be &gt; 27, was ${secondResult.position}`);\n    assert_1.default.ok(secondResult.position &lt; 30, `Position should be &gt; 27, was ${secondResult.position}`);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2514bbac-efdf-4d4f-ae13-9d96b50a242a&quot;,&quot;parentUUID&quot;:&quot;e682bfd5-234e-4d3c-9d55-9b464768f139&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f27c4347-6256-4d87-9c08-3293f4c45ea7&quot;,&quot;1c1cabf5-5807-443e-bd2f-b348ffad2048&quot;,&quot;2514bbac-efdf-4d4f-ae13-9d96b50a242a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;702b88a5-fbbf-4922-b035-7f2dbdf061d8&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a5c38b02-40b7-4356-b613-122ed414e8c2&quot;,&quot;title&quot;:&quot;clearState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice clearState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    let executions = 0;\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            executions++;\n            cp.end({\n                result: &#x27;success&#x27;,\n                datetime: &#x27;2020-11-07T22:38:43.608030+01:00&#x27;,\n                title: &#x27;Solo: A Star Wars Story&#x27;\n            });\n        })\n    });\n    assert_1.default.deepStrictEqual(yield device.getTitle(), &#x27;Solo: A Star Wars Story&#x27;);\n    device.clearState();\n    assert_1.default.deepStrictEqual(yield device.getTitle(), &#x27;Solo: A Star Wars Story&#x27;);\n    assert_1.default.strictEqual(executions, 2);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e0ca50ce-4b01-44be-afb3-2b95649f8b09&quot;,&quot;parentUUID&quot;:&quot;a5c38b02-40b7-4356-b613-122ed414e8c2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e0ca50ce-4b01-44be-afb3-2b95649f8b09&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8dabe007-3f06-4850-bd89-4c27d9562bda&quot;,&quot;title&quot;:&quot;getDateTime()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getDateTime() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                datetime: new Date().toJSON()\n            });\n        })\n    });\n    const result = yield device.getDateTime();\n    assert_1.default.ok(result instanceof Date);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5efe84f0-9709-4555-b5a4-997adf791856&quot;,&quot;parentUUID&quot;:&quot;8dabe007-3f06-4850-bd89-4c27d9562bda&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5efe84f0-9709-4555-b5a4-997adf791856&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;77f89d91-933d-4ac3-8db8-3334304b56c4&quot;,&quot;title&quot;:&quot;getHash()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getHash() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                hash: &#x27;12345&#x27;\n            });\n        })\n    });\n    const result = yield device.getHash();\n    assert_1.default.strictEqual(result, &#x27;12345&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;27c2ecb7-9d13-44d5-852a-40e16b014fa7&quot;,&quot;parentUUID&quot;:&quot;77f89d91-933d-4ac3-8db8-3334304b56c4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;27c2ecb7-9d13-44d5-852a-40e16b014fa7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c7422f8b-393f-4c60-91a6-da4133d84fb7&quot;,&quot;title&quot;:&quot;getMediaType()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getMediaType() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                media_type: &#x27;video&#x27;\n            });\n        })\n    });\n    const result = yield device.getMediaType();\n    assert_1.default.deepStrictEqual(result, types_1.NodePyATVMediaType.video);\n    assert_1.default.deepStrictEqual(result, &#x27;video&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;527d69bf-d6c0-48ff-a087-ad067b677bfc&quot;,&quot;parentUUID&quot;:&quot;c7422f8b-393f-4c60-91a6-da4133d84fb7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;527d69bf-d6c0-48ff-a087-ad067b677bfc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;79c97a58-2da4-45a8-ae11-7223bbede584&quot;,&quot;title&quot;:&quot;getDeviceState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getDeviceState() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                device_state: &#x27;seeking&#x27;\n            });\n        })\n    });\n    const result = yield device.getDeviceState();\n    assert_1.default.deepStrictEqual(result, types_1.NodePyATVDeviceState.seeking);\n    assert_1.default.deepStrictEqual(result, &#x27;seeking&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;25fa0fbe-4d9a-4864-9dd5-f168d829792b&quot;,&quot;parentUUID&quot;:&quot;79c97a58-2da4-45a8-ae11-7223bbede584&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;25fa0fbe-4d9a-4864-9dd5-f168d829792b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4ff46432-2f77-4629-ae4c-a35506d147d1&quot;,&quot;title&quot;:&quot;getTitle()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getTitle() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                title: &#x27;My Movie&#x27;\n            });\n        })\n    });\n    const result = yield device.getTitle();\n    assert_1.default.strictEqual(result, &#x27;My Movie&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2c1b0985-0494-478e-b3af-22d61e7bee17&quot;,&quot;parentUUID&quot;:&quot;4ff46432-2f77-4629-ae4c-a35506d147d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2c1b0985-0494-478e-b3af-22d61e7bee17&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;077412d4-2c26-4a72-9125-ef8769de0186&quot;,&quot;title&quot;:&quot;getArtist()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getArtist() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                artist: &#x27;My Artist&#x27;\n            });\n        })\n    });\n    const result = yield device.getArtist();\n    assert_1.default.strictEqual(result, &#x27;My Artist&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4c0d3d16-853a-4187-be84-a650cd3e8473&quot;,&quot;parentUUID&quot;:&quot;077412d4-2c26-4a72-9125-ef8769de0186&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4c0d3d16-853a-4187-be84-a650cd3e8473&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bbd62c63-4106-4f2c-af20-acca75657e6b&quot;,&quot;title&quot;:&quot;getAlbum()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getAlbum() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                album: &#x27;My ALbum&#x27;\n            });\n        })\n    });\n    const result = yield device.getAlbum();\n    assert_1.default.strictEqual(result, &#x27;My ALbum&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;17b5eb45-73ff-4820-bb02-2feb539c6ee3&quot;,&quot;parentUUID&quot;:&quot;bbd62c63-4106-4f2c-af20-acca75657e6b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;17b5eb45-73ff-4820-bb02-2feb539c6ee3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;74f1098f-422f-4b2f-9422-f7407f46d261&quot;,&quot;title&quot;:&quot;getGenre()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getGenre() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                genre: &#x27;My Genre&#x27;\n            });\n        })\n    });\n    const result = yield device.getGenre();\n    assert_1.default.strictEqual(result, &#x27;My Genre&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3867eac3-2ad8-4c74-9e00-12e12655ddc9&quot;,&quot;parentUUID&quot;:&quot;74f1098f-422f-4b2f-9422-f7407f46d261&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3867eac3-2ad8-4c74-9e00-12e12655ddc9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a2f4c2c6-ac61-41f8-9f0e-cf09c66b8e66&quot;,&quot;title&quot;:&quot;getTotalTime()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getTotalTime() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                total_time: 45\n            });\n        })\n    });\n    const result = yield device.getTotalTime();\n    assert_1.default.strictEqual(result, 45);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a36b434e-e1d6-4234-8c81-1eb94cd0d00c&quot;,&quot;parentUUID&quot;:&quot;a2f4c2c6-ac61-41f8-9f0e-cf09c66b8e66&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a36b434e-e1d6-4234-8c81-1eb94cd0d00c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5f38baeb-ffe8-4386-afcd-fcd701cfe9e7&quot;,&quot;title&quot;:&quot;getPosition()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getPosition() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                position: 30\n            });\n        })\n    });\n    const result = yield device.getPosition();\n    assert_1.default.strictEqual(result, 30);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4517261c-4e33-48d2-9ed8-5bd60829b0e6&quot;,&quot;parentUUID&quot;:&quot;5f38baeb-ffe8-4386-afcd-fcd701cfe9e7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4517261c-4e33-48d2-9ed8-5bd60829b0e6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f1f56c4f-3256-4faf-a8ef-c706fe46acfd&quot;,&quot;title&quot;:&quot;getShuffle()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getShuffle() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                shuffle: &#x27;songs&#x27;\n            });\n        })\n    });\n    const result = yield device.getShuffle();\n    assert_1.default.deepStrictEqual(result, types_1.NodePyATVShuffleState.songs);\n    assert_1.default.deepStrictEqual(result, &#x27;songs&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c62a990d-e48b-4443-ade1-b11c53e013f7&quot;,&quot;parentUUID&quot;:&quot;f1f56c4f-3256-4faf-a8ef-c706fe46acfd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c62a990d-e48b-4443-ade1-b11c53e013f7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;16ffce6c-4275-4788-9d03-bfe15a00876f&quot;,&quot;title&quot;:&quot;getRepeat()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getRepeat() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                repeat: &#x27;all&#x27;\n            });\n        })\n    });\n    const result = yield device.getRepeat();\n    assert_1.default.deepStrictEqual(result, types_1.NodePyATVRepeatState.all);\n    assert_1.default.deepStrictEqual(result, &#x27;all&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e7454bce-f916-481c-836c-b7d0ea101433&quot;,&quot;parentUUID&quot;:&quot;16ffce6c-4275-4788-9d03-bfe15a00876f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e7454bce-f916-481c-836c-b7d0ea101433&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6ae0389b-343e-4919-982a-cf4e1595a42c&quot;,&quot;title&quot;:&quot;getApp()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getApp() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                app: &#x27;My App&#x27;\n            });\n        })\n    });\n    const result = yield device.getApp();\n    assert_1.default.strictEqual(result, &#x27;My App&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;efcd2f37-6c22-4558-87f0-bd371fda81e2&quot;,&quot;parentUUID&quot;:&quot;6ae0389b-343e-4919-982a-cf4e1595a42c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;efcd2f37-6c22-4558-87f0-bd371fda81e2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4f40bd96-bd7c-4f6b-82f1-586b32f7ab87&quot;,&quot;title&quot;:&quot;getAppId()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice getAppId() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end({\n                result: &#x27;success&#x27;,\n                app_id: &#x27;app.example.com&#x27;\n            });\n        })\n    });\n    const result = yield device.getAppId();\n    assert_1.default.strictEqual(result, &#x27;app.example.com&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0bf6a552-1571-47e8-a213-6017c1ad22ff&quot;,&quot;parentUUID&quot;:&quot;4f40bd96-bd7c-4f6b-82f1-586b32f7ab87&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0bf6a552-1571-47e8-a213-6017c1ad22ff&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8e11d78d-c7f2-43b3-a173-bdcbe37bb249&quot;,&quot;title&quot;:&quot;pressKey()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work with valid key&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pressKey() should work with valid key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    yield device.pressKey(types_1.NodePyATVKeys.home);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ecbcb66c-48f7-41ea-87f1-f34ef3f8595e&quot;,&quot;parentUUID&quot;:&quot;8e11d78d-c7f2-43b3-a173-bdcbe37bb249&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error with invalid key&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pressKey() should throw error with invalid key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;\n    });\n    yield assert_1.default.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        // @ts-ignore\n        yield device.pressKey(&#x27;foo&#x27;);\n    }), /Unsupported key value foo/);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;28ec0255-2e3f-4d99-ae06-547c4dd7cb1e&quot;,&quot;parentUUID&quot;:&quot;8e11d78d-c7f2-43b3-a173-bdcbe37bb249&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if pyatv result is not success&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pressKey() should throw error if pyatv result is not success&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;failure\&quot;}&#x27;);\n        })\n    });\n    yield assert_1.default.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield device.pressKey(types_1.NodePyATVKeys.home);\n    }), /Unable to parse pyatv response/);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4afd86fc-d40d-47b5-a358-ba43ed89b058&quot;,&quot;parentUUID&quot;:&quot;8e11d78d-c7f2-43b3-a173-bdcbe37bb249&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ecbcb66c-48f7-41ea-87f1-f34ef3f8595e&quot;,&quot;28ec0255-2e3f-4d99-ae06-547c4dd7cb1e&quot;,&quot;4afd86fc-d40d-47b5-a358-ba43ed89b058&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4f47a39e-46a6-4d6a-bcfd-a67c70d4f642&quot;,&quot;title&quot;:&quot;down()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice down() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4ce8f2de-366a-4aa7-a801-0e38d8ed138d&quot;,&quot;parentUUID&quot;:&quot;4f47a39e-46a6-4d6a-bcfd-a67c70d4f642&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4ce8f2de-366a-4aa7-a801-0e38d8ed138d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fb5b729b-5b8a-49cf-87d0-0fcba9d0e5db&quot;,&quot;title&quot;:&quot;home()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice home() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e7cf28db-c3b3-46df-9c4d-508779f17961&quot;,&quot;parentUUID&quot;:&quot;fb5b729b-5b8a-49cf-87d0-0fcba9d0e5db&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e7cf28db-c3b3-46df-9c4d-508779f17961&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f4f73fa4-c74f-4997-b196-df54fdca1b2a&quot;,&quot;title&quot;:&quot;homeHold()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice homeHold() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6dfaf63b-1936-409b-b352-3e5954083698&quot;,&quot;parentUUID&quot;:&quot;f4f73fa4-c74f-4997-b196-df54fdca1b2a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6dfaf63b-1936-409b-b352-3e5954083698&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b0f47a03-361b-4eb6-8476-09038b022424&quot;,&quot;title&quot;:&quot;left()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice left() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f5c72af6-d3bb-40c5-8de8-93a4e0a009b8&quot;,&quot;parentUUID&quot;:&quot;b0f47a03-361b-4eb6-8476-09038b022424&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f5c72af6-d3bb-40c5-8de8-93a4e0a009b8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2d6a0982-7e62-43c4-ad79-401d37dd341d&quot;,&quot;title&quot;:&quot;menu()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice menu() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;df685286-5895-4011-8c2f-fe275ff7f805&quot;,&quot;parentUUID&quot;:&quot;2d6a0982-7e62-43c4-ad79-401d37dd341d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;df685286-5895-4011-8c2f-fe275ff7f805&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2fdd0045-0ae0-404b-80d4-9f90f535a4e6&quot;,&quot;title&quot;:&quot;next()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice next() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cf1914c3-23e5-4735-93e1-b2c60609aece&quot;,&quot;parentUUID&quot;:&quot;2fdd0045-0ae0-404b-80d4-9f90f535a4e6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cf1914c3-23e5-4735-93e1-b2c60609aece&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;626f2cf2-bb1c-484c-949c-6ad29e3e61ee&quot;,&quot;title&quot;:&quot;pause()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice pause() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3359ef0-536a-4041-9c0f-5ca88efda656&quot;,&quot;parentUUID&quot;:&quot;626f2cf2-bb1c-484c-949c-6ad29e3e61ee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a3359ef0-536a-4041-9c0f-5ca88efda656&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;35bbe985-a345-4879-8e00-36408daa4741&quot;,&quot;title&quot;:&quot;play()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice play() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;63eb8734-077f-4c17-a8c6-b7ff5816993d&quot;,&quot;parentUUID&quot;:&quot;35bbe985-a345-4879-8e00-36408daa4741&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;63eb8734-077f-4c17-a8c6-b7ff5816993d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;51a73b3b-2dd2-4228-aa71-50dae7859593&quot;,&quot;title&quot;:&quot;playPause()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice playPause() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3c08e31f-1cbb-4382-ae71-2b0d27832a3a&quot;,&quot;parentUUID&quot;:&quot;51a73b3b-2dd2-4228-aa71-50dae7859593&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3c08e31f-1cbb-4382-ae71-2b0d27832a3a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e352d860-419a-45cc-a077-124ea2f9de8d&quot;,&quot;title&quot;:&quot;previous()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice previous() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;91913bd1-3bce-4c55-b020-c115f803999c&quot;,&quot;parentUUID&quot;:&quot;e352d860-419a-45cc-a077-124ea2f9de8d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;91913bd1-3bce-4c55-b020-c115f803999c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;673e79dc-3bd0-4f4e-b238-c8b32a5ab2a7&quot;,&quot;title&quot;:&quot;right()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice right() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9ba93fbe-d0c2-4deb-a642-21bb1123987b&quot;,&quot;parentUUID&quot;:&quot;673e79dc-3bd0-4f4e-b238-c8b32a5ab2a7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9ba93fbe-d0c2-4deb-a642-21bb1123987b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bcd580ab-ca36-493d-b381-d70a123b3c0b&quot;,&quot;title&quot;:&quot;select()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice select() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2df42191-8d7e-4574-bc11-fdd0289d7ff1&quot;,&quot;parentUUID&quot;:&quot;bcd580ab-ca36-493d-b381-d70a123b3c0b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2df42191-8d7e-4574-bc11-fdd0289d7ff1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0d658594-60f2-4d68-a5c9-66cd0a002f16&quot;,&quot;title&quot;:&quot;skipBackward()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice skipBackward() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e363ce5e-017a-47f5-b2d2-e2a3fade280a&quot;,&quot;parentUUID&quot;:&quot;0d658594-60f2-4d68-a5c9-66cd0a002f16&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e363ce5e-017a-47f5-b2d2-e2a3fade280a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f39d5677-d8e0-45e0-9146-14d836160cc6&quot;,&quot;title&quot;:&quot;skipForward()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice skipForward() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;72481b75-867e-44ef-921b-aee032ef0ee1&quot;,&quot;parentUUID&quot;:&quot;f39d5677-d8e0-45e0-9146-14d836160cc6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;72481b75-867e-44ef-921b-aee032ef0ee1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0bd620d1-898d-4cc2-ac6f-a82ab4233f94&quot;,&quot;title&quot;:&quot;stop()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice stop() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c0b10ef7-485f-43af-a4bd-e65e35ff91b8&quot;,&quot;parentUUID&quot;:&quot;0bd620d1-898d-4cc2-ac6f-a82ab4233f94&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c0b10ef7-485f-43af-a4bd-e65e35ff91b8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7130792d-9766-4e6c-973d-ae8ab5b9d64e&quot;,&quot;title&quot;:&quot;suspend()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice suspend() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;45d04413-5336-40fa-9301-97df95a4398d&quot;,&quot;parentUUID&quot;:&quot;7130792d-9766-4e6c-973d-ae8ab5b9d64e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;45d04413-5336-40fa-9301-97df95a4398d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7f3311d1-4187-40ab-8d80-50309609153b&quot;,&quot;title&quot;:&quot;topMenu()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice topMenu() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;557cbd87-db93-4ee4-adca-25c11074d1fd&quot;,&quot;parentUUID&quot;:&quot;7f3311d1-4187-40ab-8d80-50309609153b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;557cbd87-db93-4ee4-adca-25c11074d1fd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b5156439-9def-40b7-b8ea-d0e1f28fc719&quot;,&quot;title&quot;:&quot;up()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice up() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ae291ae8-9552-4b53-ac9f-ce515c6189f6&quot;,&quot;parentUUID&quot;:&quot;b5156439-9def-40b7-b8ea-d0e1f28fc719&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ae291ae8-9552-4b53-ac9f-ce515c6189f6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4a67f6f2-997e-4aa8-8f05-675718200229&quot;,&quot;title&quot;:&quot;volumeDown()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice volumeDown() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fb8601d3-d0a2-4537-b8b1-0c58d127dff1&quot;,&quot;parentUUID&quot;:&quot;4a67f6f2-997e-4aa8-8f05-675718200229&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fb8601d3-d0a2-4537-b8b1-0c58d127dff1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bfdca229-157f-4070-a199-f50779776dbb&quot;,&quot;title&quot;:&quot;volumeUp()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice volumeUp() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d5e453d4-93dd-458e-8b78-e68fa11458f4&quot;,&quot;parentUUID&quot;:&quot;bfdca229-157f-4070-a199-f50779776dbb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d5e453d4-93dd-458e-8b78-e68fa11458f4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;736d32a2-4b6a-4bb5-87d9-21084a6e4710&quot;,&quot;title&quot;:&quot;wakeup()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/device.ts&quot;,&quot;file&quot;:&quot;/test/device.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work&quot;,&quot;fullTitle&quot;:&quot;NodePyATVDevice wakeup() should work&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const device = new device_1.default({\n        name: &#x27;My Testdevice&#x27;,\n        host: &#x27;192.168.178.2&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.end(&#x27;{\&quot;result\&quot;:\&quot;success\&quot;}&#x27;);\n        })\n    });\n    // @ts-ignore\n    yield device[key]();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;689548a8-36d6-4484-9b0d-67b3e73cde19&quot;,&quot;parentUUID&quot;:&quot;736d32a2-4b6a-4bb5-87d9-21084a6e4710&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;689548a8-36d6-4484-9b0d-67b3e73cde19&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;67775118-d032-44c2-85ae-85bffbd5f746&quot;,&quot;title&quot;:&quot;NodePyATVInstance&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;9b3cd6ef-52e8-4f4f-949d-b485b80a0530&quot;,&quot;title&quot;:&quot;static version()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work with pyatv [L]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should work with pyatv [L]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:455,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    this.timeout(4000);\n    const result = yield index_1.default.version();\n    if (result.pyatv === null) {\n        throw new Error(&#x27;No version found for pyatv. Is it installed in test environment?&#x27;);\n    }\n    assert_1.default.equal(typeof result.pyatv, &#x27;string&#x27;, &#x27;result.pyatv is a string&#x27;);\n    assert_1.default.ok(result.pyatv.length &gt;= 5, &#x27;result.pyatv has content&#x27;);\n    // eslint-disable-next-line @typescript-eslint/no-var-requires\n    assert_1.default.strictEqual(result.module, require(__dirname + &#x27;/../package.json&#x27;).version || null);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c08f52bb-7f82-42c6-b403-50ad2fec96ec&quot;,&quot;parentUUID&quot;:&quot;9b3cd6ef-52e8-4f4f-949d-b485b80a0530&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the pyatv version&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return the pyatv version&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const result = yield index_1.default.version({\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.code(1);\n            cp.end(&#x27;atvremote 0.7.4&#x27;);\n        })\n    });\n    assert_1.default.ok(result.pyatv);\n    assert_1.default.strictEqual(result.pyatv, &#x27;0.7.4&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fac2f162-1bbc-4c26-86ac-a79ef70a2d8c&quot;,&quot;parentUUID&quot;:&quot;9b3cd6ef-52e8-4f4f-949d-b485b80a0530&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the module version&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return the module version&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const result = yield index_1.default.version({\n        noColors: true,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; cp.code(1).end())\n    });\n    // eslint-disable-next-line @typescript-eslint/no-var-requires\n    assert_1.default.strictEqual(result.module, require(__dirname + &#x27;/../package.json&#x27;).version || null);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;93822085-7585-42e9-9a1e-1a355eac3a9f&quot;,&quot;parentUUID&quot;:&quot;9b3cd6ef-52e8-4f4f-949d-b485b80a0530&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle option.atvremotePath&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should handle option.atvremotePath&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield index_1.default.version({\n        atvremotePath: &#x27;/foo/bar&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            assert_1.default.strictEqual(cp.cmd(), &#x27;/foo/bar&#x27;);\n            cp.code(1).end();\n        })\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;69f00bec-69a2-407c-91ed-efc4746ba790&quot;,&quot;parentUUID&quot;:&quot;9b3cd6ef-52e8-4f4f-949d-b485b80a0530&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with option.debug = true&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should work with option.debug = true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield index_1.default.version({\n        debug: true,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; cp.code(1).end())\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;09a82137-3861-417f-9932-e65076b5baa2&quot;,&quot;parentUUID&quot;:&quot;9b3cd6ef-52e8-4f4f-949d-b485b80a0530&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with option.noColors&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should work with option.noColors&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield index_1.default.version({\n        debug: () =&gt; { },\n        noColors: true,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; cp.code(1).end())\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8a014ceb-98b0-4078-8248-1a369821c862&quot;,&quot;parentUUID&quot;:&quot;9b3cd6ef-52e8-4f4f-949d-b485b80a0530&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return null on pyatv stderr output&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return null on pyatv stderr output&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const result = yield index_1.default.version({\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; cp.stderr(&#x27;Hello World!&#x27;).code(123).end())\n    });\n    assert_1.default.strictEqual(result.pyatv, null);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d2da2d9d-db6a-42a1-a24a-ebe0020a13bb&quot;,&quot;parentUUID&quot;:&quot;9b3cd6ef-52e8-4f4f-949d-b485b80a0530&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return null on pyatv error&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return null on pyatv error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const result = yield index_1.default.version({\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.error(new Error(&#x27;Hello world!&#x27;)).end();\n        })\n    });\n    assert_1.default.strictEqual(result.pyatv, null);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d151656f-4f30-4b80-afaa-d5bf2c9c2f4c&quot;,&quot;parentUUID&quot;:&quot;9b3cd6ef-52e8-4f4f-949d-b485b80a0530&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return null on invalid pyatv version&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return null on invalid pyatv version&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const result = yield index_1.default.version({\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.stdout(&#x27;atvremote 42&#x27;).code(1).end();\n        })\n    });\n    assert_1.default.strictEqual(result.pyatv, null);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5b8448b5-f6da-4aa6-a586-51f60f54cee0&quot;,&quot;parentUUID&quot;:&quot;9b3cd6ef-52e8-4f4f-949d-b485b80a0530&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return null on empty module version&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return null on empty module version&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const path = require.resolve(__dirname + &#x27;/../package.json&#x27;);\n    require(path);\n    const cache = require.cache[path];\n    assert_1.default.ok(cache, &#x27;package.json is in require cache&#x27;);\n    cache.exports = {};\n    const result = yield index_1.default.version({\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.stdout(&#x27;atvremote 0.7.4&#x27;).code(1).end();\n        })\n    });\n    assert_1.default.strictEqual(result.module, null);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fa071d74-5b56-42c1-9ee2-951956d33396&quot;,&quot;parentUUID&quot;:&quot;9b3cd6ef-52e8-4f4f-949d-b485b80a0530&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return null on invalid module version&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static version() should return null on invalid module version&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const path = require.resolve(__dirname + &#x27;/../package.json&#x27;);\n    require(path);\n    const cache = require.cache[path];\n    assert_1.default.ok(cache, &#x27;package.json is in require cache&#x27;);\n    cache.exports = { version: 42 };\n    const result = yield index_1.default.version({\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            cp.stdout(&#x27;atvremote 0.7.4&#x27;).code(1).end();\n        })\n    });\n    assert_1.default.strictEqual(result.module, null);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f1a91637-7eed-4067-afb4-92ece9a829b9&quot;,&quot;parentUUID&quot;:&quot;9b3cd6ef-52e8-4f4f-949d-b485b80a0530&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c08f52bb-7f82-42c6-b403-50ad2fec96ec&quot;,&quot;fac2f162-1bbc-4c26-86ac-a79ef70a2d8c&quot;,&quot;93822085-7585-42e9-9a1e-1a355eac3a9f&quot;,&quot;69f00bec-69a2-407c-91ed-efc4746ba790&quot;,&quot;09a82137-3861-417f-9932-e65076b5baa2&quot;,&quot;8a014ceb-98b0-4078-8248-1a369821c862&quot;,&quot;d2da2d9d-db6a-42a1-a24a-ebe0020a13bb&quot;,&quot;d151656f-4f30-4b80-afaa-d5bf2c9c2f4c&quot;,&quot;5b8448b5-f6da-4aa6-a586-51f60f54cee0&quot;,&quot;fa071d74-5b56-42c1-9ee2-951956d33396&quot;,&quot;f1a91637-7eed-4067-afb4-92ece9a829b9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:467,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;27ae802e-3594-41dd-a211-864001235325&quot;,&quot;title&quot;:&quot;static check()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should resolve in test environment [L]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should resolve in test environment [L]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5796,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    this.timeout(12000);\n    yield index_1.default.check();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;45627602-894d-4150-868b-47600572237c&quot;,&quot;parentUUID&quot;:&quot;27ae802e-3594-41dd-a211-864001235325&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return nice error message if pyatv was not found&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should return nice error message if pyatv was not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield assert_1.default.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield index_1.default.check({\n            spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n                cp.error(new Error(&#x27;spawn atvremote ENOENT&#x27;)).code(1).end();\n            })\n        });\n    }), /Unable to find pyatv. Is it installed?/);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5ada61a7-eed1-474b-b9d9-409bacc40ca9&quot;,&quot;parentUUID&quot;:&quot;27ae802e-3594-41dd-a211-864001235325&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return nice error message if myatv is too old&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should return nice error message if myatv is too old&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield assert_1.default.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield index_1.default.check({\n            spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n                cp.stdout(&#x27;atvremote 0.5.1&#x27;).code(1).end();\n            })\n        });\n    }), /Found pyatv, but unforunately it&#x27;s too old. Please update pyatv./);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6f0c8364-f0e2-459a-8ca8-55dcffa2f1a4&quot;,&quot;parentUUID&quot;:&quot;27ae802e-3594-41dd-a211-864001235325&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return nice error message if scan failed&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static check() should return nice error message if scan failed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    let i = 0;\n    yield assert_1.default.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield index_1.default.check({\n            spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n                if (i === 0) {\n                    cp.stdout(&#x27;atvremote 0.7.0&#x27;).code(1).end();\n                    i++;\n                }\n                else {\n                    cp.error(new Error(&#x27;spawn atvremote ENOENT&#x27;)).code(1).end();\n                }\n            })\n        });\n    }), /Unable to scan for devices/);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c908150c-7b29-4002-b844-47e487c65338&quot;,&quot;parentUUID&quot;:&quot;27ae802e-3594-41dd-a211-864001235325&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;45627602-894d-4150-868b-47600572237c&quot;,&quot;5ada61a7-eed1-474b-b9d9-409bacc40ca9&quot;,&quot;6f0c8364-f0e2-459a-8ca8-55dcffa2f1a4&quot;,&quot;c908150c-7b29-4002-b844-47e487c65338&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5802,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;47bb96df-c754-4716-b155-98e6fbc41840&quot;,&quot;title&quot;:&quot;static find()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work [L]&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should work [L]&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5392,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    this.timeout(8000);\n    const result = yield index_1.default.find();\n    assert_1.default.ok(Array.isArray(result));\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;45c653ff-d469-4d0e-9216-1e3119446341&quot;,&quot;parentUUID&quot;:&quot;47bb96df-c754-4716-b155-98e6fbc41840&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle option.atvscriptPath&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should handle option.atvscriptPath&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield index_1.default.find({\n        atvscriptPath: &#x27;/foo/bar&#x27;,\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            assert_1.default.strictEqual(cp.cmd(), &#x27;/foo/bar&#x27;);\n            cp.stdout({\n                &#x27;result&#x27;: &#x27;success&#x27;,\n                &#x27;datetime&#x27;: &#x27;2020-11-06T20:47:30.840022+01:00&#x27;,\n                &#x27;devices&#x27;: []\n            }).end();\n        })\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dc1a4885-348d-45d1-874c-a47c32cc3654&quot;,&quot;parentUUID&quot;:&quot;47bb96df-c754-4716-b155-98e6fbc41840&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error on stderr output&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error on stderr output&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield assert_1.default.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield index_1.default.find({\n            spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n                cp.stderr(&#x27;Hello World!&#x27;).code(1).end();\n            })\n        });\n    }), /Unable to execute request/);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;437d8caf-7eb6-4ce7-b68c-4557003f516e&quot;,&quot;parentUUID&quot;:&quot;47bb96df-c754-4716-b155-98e6fbc41840&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error on error&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error on error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield assert_1.default.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield index_1.default.find({\n            spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n                cp.error(new Error(&#x27;Hello world!&#x27;)).code(1).end();\n            })\n        });\n    }), /Hello world!/);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;076f020a-c1d7-4ff0-a9e6-1342f43d19f5&quot;,&quot;parentUUID&quot;:&quot;47bb96df-c754-4716-b155-98e6fbc41840&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if atvscript result is not valid json&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error if atvscript result is not valid json&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield assert_1.default.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield index_1.default.find({\n            spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n                cp.stdout(JSON.stringify({\n                    &#x27;result&#x27;: &#x27;success&#x27;,\n                    &#x27;datetime&#x27;: &#x27;2020-11-06T20:47:30.840022+01:00&#x27;,\n                    &#x27;devices&#x27;: []\n                }).substr(1)).end();\n            })\n        });\n    }), /Unable to parse result/);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;abf51d1f-5c25-4638-a45d-8c4cd237feec&quot;,&quot;parentUUID&quot;:&quot;47bb96df-c754-4716-b155-98e6fbc41840&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if atvscript result is not successfull&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error if atvscript result is not successfull&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield assert_1.default.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield index_1.default.find({\n            spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n                cp.stdout({\n                    result: &#x27;error&#x27;\n                }).code(1).end();\n            })\n        });\n    }), /Unable to parse pyatv response: /);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f7544d77-0604-4296-9681-d9a50700e398&quot;,&quot;parentUUID&quot;:&quot;47bb96df-c754-4716-b155-98e6fbc41840&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw error if atvscript result is without device array&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static find() should throw error if atvscript result is without device array&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    yield assert_1.default.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield index_1.default.find({\n            spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n                cp.stdout({\n                    result: &#x27;success&#x27;\n                }).code(1).end();\n            })\n        });\n    }), /Unable to parse pyatv response: /);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4dbdfe82-1518-437a-ba22-852bd2a6ed24&quot;,&quot;parentUUID&quot;:&quot;47bb96df-c754-4716-b155-98e6fbc41840&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;45c653ff-d469-4d0e-9216-1e3119446341&quot;,&quot;dc1a4885-348d-45d1-874c-a47c32cc3654&quot;,&quot;437d8caf-7eb6-4ce7-b68c-4557003f516e&quot;,&quot;076f020a-c1d7-4ff0-a9e6-1342f43d19f5&quot;,&quot;abf51d1f-5c25-4638-a45d-8c4cd237feec&quot;,&quot;f7544d77-0604-4296-9681-d9a50700e398&quot;,&quot;4dbdfe82-1518-437a-ba22-852bd2a6ed24&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5398,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6af8d6d8-4b49-4fd9-8e51-a9d79a0158c4&quot;,&quot;title&quot;:&quot;static device()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should pass options to constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance static device() should pass options to constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const device = index_1.default.device({ host: &#x27;192.168.178.6&#x27;, name: &#x27;My Testdevice&#x27; });\nassert_1.default.strictEqual(device.host, &#x27;192.168.178.6&#x27;);\nassert_1.default.strictEqual(device.name, &#x27;My Testdevice&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8577c5b-7d0e-4a88-95d1-fd14fb6e4300&quot;,&quot;parentUUID&quot;:&quot;6af8d6d8-4b49-4fd9-8e51-a9d79a0158c4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c8577c5b-7d0e-4a88-95d1-fd14fb6e4300&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;77658edd-bade-4ab3-bea7-4c930daf9ddc&quot;,&quot;title&quot;:&quot;version()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance version() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const i = new index_1.default({ atvremotePath: &#x27;test&#x27; });\n    yield i.version({\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            assert_1.default.strictEqual(cp.cmd(), &#x27;test&#x27;);\n            cp.code(1).end();\n        })\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;71b4e340-483d-48fb-b6a9-14d268147308&quot;,&quot;parentUUID&quot;:&quot;77658edd-bade-4ab3-bea7-4c930daf9ddc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;71b4e340-483d-48fb-b6a9-14d268147308&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0121277a-98b2-4ced-82fa-db467186d915&quot;,&quot;title&quot;:&quot;check()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance check() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const i = new index_1.default({ atvremotePath: &#x27;test&#x27; });\n    yield assert_1.default.rejects(() =&gt; __awaiter(this, void 0, void 0, function* () {\n        yield i.check({\n            spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n                assert_1.default.strictEqual(cp.cmd(), &#x27;test&#x27;);\n                cp.error(new Error(&#x27;spawn atvremote ENOENT&#x27;)).code(1).end();\n            })\n        });\n    }), /Unable to find pyatv. Is it installed?/);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6d45c4f6-21cd-453e-a5fb-bf5da7c43b0d&quot;,&quot;parentUUID&quot;:&quot;0121277a-98b2-4ced-82fa-db467186d915&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6d45c4f6-21cd-453e-a5fb-bf5da7c43b0d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;37985751-186e-4189-b203-5ede247f9d08&quot;,&quot;title&quot;:&quot;find()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance find() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const i = new index_1.default({ atvscriptPath: &#x27;test&#x27; });\n    yield i.find({\n        spawn: (0, fake_spawn_1.createFakeSpawn)(cp =&gt; {\n            assert_1.default.strictEqual(cp.cmd(), &#x27;test&#x27;);\n            cp.stdout({\n                &#x27;result&#x27;: &#x27;success&#x27;,\n                &#x27;datetime&#x27;: &#x27;2020-11-06T20:47:30.840022+01:00&#x27;,\n                &#x27;devices&#x27;: []\n            }).end();\n        })\n    });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e6da914c-5f8b-40f3-8b11-a8394ba1f4ee&quot;,&quot;parentUUID&quot;:&quot;37985751-186e-4189-b203-5ede247f9d08&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e6da914c-5f8b-40f3-8b11-a8394ba1f4ee&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0c0601c2-3487-4b01-90ed-aa85dec0329b&quot;,&quot;title&quot;:&quot;device()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should merge options from constructor&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance device() should merge options from constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const i = new index_1.default({ debug: true });\n    const d = i.device({ name: &#x27;My Testdevice&#x27;, host: &#x27;192.168.178.2&#x27; });\n    assert_1.default.deepStrictEqual(d.debug, true);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;416e0d8d-01c4-4f40-80d5-7b186501feb4&quot;,&quot;parentUUID&quot;:&quot;0c0601c2-3487-4b01-90ed-aa85dec0329b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;416e0d8d-01c4-4f40-80d5-7b186501feb4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a43792a0-1a78-4115-949b-38678b4c1f4f&quot;,&quot;title&quot;:&quot;Type Exports&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/instance.ts&quot;,&quot;file&quot;:&quot;/test/instance.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Type NodePyATVProtocol should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVProtocol should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert_1.default.ok(index_1.NodePyATVProtocol);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9bd5ceea-910c-4416-940e-15efd9ccbfef&quot;,&quot;parentUUID&quot;:&quot;a43792a0-1a78-4115-949b-38678b4c1f4f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVMediaType should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVMediaType should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert_1.default.ok(index_1.NodePyATVMediaType);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;732a497c-911f-4284-a759-dfa434552d41&quot;,&quot;parentUUID&quot;:&quot;a43792a0-1a78-4115-949b-38678b4c1f4f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVDeviceEvent should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVDeviceEvent should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert_1.default.ok(index_1.NodePyATVDeviceEvent);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4c23f5cd-3aea-401e-aea9-9ec19922d0ac&quot;,&quot;parentUUID&quot;:&quot;a43792a0-1a78-4115-949b-38678b4c1f4f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVDeviceState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVDeviceState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert_1.default.ok(index_1.NodePyATVDeviceState);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0879c615-5337-41c9-b5c1-b02417252e6e&quot;,&quot;parentUUID&quot;:&quot;a43792a0-1a78-4115-949b-38678b4c1f4f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVRepeatState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVRepeatState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert_1.default.ok(index_1.NodePyATVRepeatState);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c9ced316-57de-464a-9c01-a9b6db3031ee&quot;,&quot;parentUUID&quot;:&quot;a43792a0-1a78-4115-949b-38678b4c1f4f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVShuffleState should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVShuffleState should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert_1.default.ok(index_1.NodePyATVShuffleState);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0adf68aa-1333-4bfc-8b8c-4fd65c5fc824&quot;,&quot;parentUUID&quot;:&quot;a43792a0-1a78-4115-949b-38678b4c1f4f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Type NodePyATVKeys should be exported&quot;,&quot;fullTitle&quot;:&quot;NodePyATVInstance Type Exports Type NodePyATVKeys should be exported&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;assert_1.default.ok(index_1.NodePyATVKeys);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;52ede4de-07ca-41a3-a195-be8b111004b4&quot;,&quot;parentUUID&quot;:&quot;a43792a0-1a78-4115-949b-38678b4c1f4f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9bd5ceea-910c-4416-940e-15efd9ccbfef&quot;,&quot;732a497c-911f-4284-a759-dfa434552d41&quot;,&quot;4c23f5cd-3aea-401e-aea9-9ec19922d0ac&quot;,&quot;0879c615-5337-41c9-b5c1-b02417252e6e&quot;,&quot;c9ced316-57de-464a-9c01-a9b6db3031ee&quot;,&quot;0adf68aa-1333-4bfc-8b8c-4fd65c5fc824&quot;,&quot;52ede4de-07ca-41a3-a195-be8b111004b4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a84a70f0-8dc5-46ad-bab9-a85b130b0f73&quot;,&quot;title&quot;:&quot;Tools&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;727c35ad-2d6a-4857-86f7-ed4e460da7be&quot;,&quot;title&quot;:&quot;addRequestId() / removeRequestId()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a string&quot;,&quot;fullTitle&quot;:&quot;Tools addRequestId() / removeRequestId() should return a string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const id = (0, tools_1.addRequestId)();\nassert_1.default.strictEqual(typeof id, &#x27;string&#x27;);\n(0, tools_1.removeRequestId)(id);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1cb4cc65-b5f2-4ff9-a63c-413394f334f8&quot;,&quot;parentUUID&quot;:&quot;727c35ad-2d6a-4857-86f7-ed4e460da7be&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work if given id is not in index&quot;,&quot;fullTitle&quot;:&quot;Tools addRequestId() / removeRequestId() should work if given id is not in index&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;(0, tools_1.removeRequestId)(&#x27;FOO&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a7fd58fd-e785-481d-840f-5cf52f6fb7e7&quot;,&quot;parentUUID&quot;:&quot;727c35ad-2d6a-4857-86f7-ed4e460da7be&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1cb4cc65-b5f2-4ff9-a63c-413394f334f8&quot;,&quot;a7fd58fd-e785-481d-840f-5cf52f6fb7e7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;96237052-da1c-4840-89fa-afaa41abe822&quot;,&quot;title&quot;:&quot;debug()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work without any options&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work without any options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;(0, tools_1.debug)(&#x27;TEST&#x27;, &#x27;Hello World.&#x27;, {});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f0d03b3-9a35-4ba3-8fc0-70bdc9aeb885&quot;,&quot;parentUUID&quot;:&quot;96237052-da1c-4840-89fa-afaa41abe822&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with default logger&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with default logger&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;(0, tools_1.debug)(&#x27;TEST&#x27;, &#x27;Hello World.&#x27;, { debug: true });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a5e66f31-d532-473e-80e5-016b596f6475&quot;,&quot;parentUUID&quot;:&quot;96237052-da1c-4840-89fa-afaa41abe822&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with custom logger&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with custom logger&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;(0, tools_1.debug)(&#x27;TEST&#x27;, &#x27;Hello World.&#x27;, {\n    debug: function (msg) {\n        assert_1.default.strictEqual(this, null);\n        assert_1.default.ok(msg.includes(&#x27;Hello World&#x27;));\n    }\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;21c64870-44b9-420e-b87f-20929c072acd&quot;,&quot;parentUUID&quot;:&quot;96237052-da1c-4840-89fa-afaa41abe822&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with colors disabled&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with colors disabled&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;(0, tools_1.debug)(&#x27;TEST&#x27;, &#x27;Hello World.&#x27;, { noColors: true });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;85ee583b-03e8-419b-98e0-c787afd11f4d&quot;,&quot;parentUUID&quot;:&quot;96237052-da1c-4840-89fa-afaa41abe822&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with custom logger and colors disabled&quot;,&quot;fullTitle&quot;:&quot;Tools debug() should work with custom logger and colors disabled&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;(0, tools_1.debug)(&#x27;TEST&#x27;, &#x27;Hello World.&#x27;, {\n    noColors: true,\n    debug: function (msg) {\n        assert_1.default.strictEqual(this, null);\n        assert_1.default.strictEqual(msg, &#x27;[node-pyatv][TEST] Hello World.&#x27;);\n    }\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6f896070-ffb8-4cab-bbcc-3105efaa02e9&quot;,&quot;parentUUID&quot;:&quot;96237052-da1c-4840-89fa-afaa41abe822&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1f0d03b3-9a35-4ba3-8fc0-70bdc9aeb885&quot;,&quot;a5e66f31-d532-473e-80e5-016b596f6475&quot;,&quot;21c64870-44b9-420e-b87f-20929c072acd&quot;,&quot;85ee583b-03e8-419b-98e0-c787afd11f4d&quot;,&quot;6f896070-ffb8-4cab-bbcc-3105efaa02e9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8ed7be58-3632-4fc7-96d8-325a298b3ce4&quot;,&quot;title&quot;:&quot;getExecutable()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should handle atvremotePath if set&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle atvremotePath if set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = (0, tools_1.getExecutable)(types_1.NodePyATVExecutableType.atvremote, {\n    atvremotePath: &#x27;/tmp/1&#x27;,\n    atvscriptPath: &#x27;/tmp/2&#x27;\n});\nassert_1.default.strictEqual(result, &#x27;/tmp/1&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2d2cad0f-3a3d-4301-b7b1-63702dbdc471&quot;,&quot;parentUUID&quot;:&quot;8ed7be58-3632-4fc7-96d8-325a298b3ce4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle atvscriptPath if set&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle atvscriptPath if set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = (0, tools_1.getExecutable)(types_1.NodePyATVExecutableType.atvscript, {\n    atvremotePath: &#x27;/tmp/1&#x27;,\n    atvscriptPath: &#x27;/tmp/2&#x27;\n});\nassert_1.default.strictEqual(result, &#x27;/tmp/2&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;947f44c3-649a-4e91-a847-c78cfb943e26&quot;,&quot;parentUUID&quot;:&quot;8ed7be58-3632-4fc7-96d8-325a298b3ce4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle default for atvremote&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle default for atvremote&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = (0, tools_1.getExecutable)(types_1.NodePyATVExecutableType.atvremote, {\n    atvscriptPath: &#x27;/tmp&#x27;\n});\nassert_1.default.strictEqual(result, &#x27;atvremote&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ecbb34b2-f9b4-4225-8f07-1ca4f05bbc13&quot;,&quot;parentUUID&quot;:&quot;8ed7be58-3632-4fc7-96d8-325a298b3ce4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle default for atvscript&quot;,&quot;fullTitle&quot;:&quot;Tools getExecutable() should handle default for atvscript&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = (0, tools_1.getExecutable)(types_1.NodePyATVExecutableType.atvscript, {\n    atvremotePath: &#x27;/tmp&#x27;\n});\nassert_1.default.strictEqual(result, &#x27;atvscript&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;458c6282-9c17-4f7a-a356-457281e06ddc&quot;,&quot;parentUUID&quot;:&quot;8ed7be58-3632-4fc7-96d8-325a298b3ce4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2d2cad0f-3a3d-4301-b7b1-63702dbdc471&quot;,&quot;947f44c3-649a-4e91-a847-c78cfb943e26&quot;,&quot;ecbb34b2-f9b4-4225-8f07-1ca4f05bbc13&quot;,&quot;458c6282-9c17-4f7a-a356-457281e06ddc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;41fd1bd7-c648-44be-a215-f5a7d721b42f&quot;,&quot;title&quot;:&quot;getParameters()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;empty case&quot;,&quot;fullTitle&quot;:&quot;Tools getParameters() empty case&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, tools_1.getParamters)();\n    assert_1.default.deepEqual(result, []);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;278b44ad-e91b-414f-b0c3-495e05247f11&quot;,&quot;parentUUID&quot;:&quot;41fd1bd7-c648-44be-a215-f5a7d721b42f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;easy case&quot;,&quot;fullTitle&quot;:&quot;Tools getParameters() easy case&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, tools_1.getParamters)({\n        host: &#x27;192.168.178.2&#x27;\n    });\n    assert_1.default.deepEqual(result, [&#x27;-s&#x27;, &#x27;192.168.178.2&#x27;]);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0f4be18f-c26d-473d-9472-cea490a8ef51&quot;,&quot;parentUUID&quot;:&quot;41fd1bd7-c648-44be-a215-f5a7d721b42f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;full case&quot;,&quot;fullTitle&quot;:&quot;Tools getParameters() full case&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, tools_1.getParamters)({\n        hosts: [&#x27;192.168.178.2&#x27;, &#x27;192.168.178.3&#x27;],\n        id: &#x27;****&#x27;,\n        protocol: types_1.NodePyATVProtocol.mrp,\n        dmapCredentials: &#x27;****&#x27;,\n        mrpCredentials: &#x27;****&#x27;,\n        airplayCredentials: &#x27;****&#x27;,\n        companionCredentials: &#x27;1234&#x27;,\n        raopCredentials: &#x27;::foo:&#x27;\n    });\n    assert_1.default.deepEqual(result, [\n        &#x27;-s&#x27;, &#x27;192.168.178.2,192.168.178.3&#x27;,\n        &#x27;-i&#x27;, &#x27;****&#x27;,\n        &#x27;--protocol&#x27;, &#x27;mrp&#x27;,\n        &#x27;--dmap-credentials&#x27;, &#x27;****&#x27;,\n        &#x27;--mrp-credentials&#x27;, &#x27;****&#x27;,\n        &#x27;--airplay-credentials&#x27;, &#x27;****&#x27;,\n        &#x27;--companion-credentials&#x27;, &#x27;1234&#x27;,\n        &#x27;--raop-credentials&#x27;, &#x27;::foo:&#x27;\n    ]);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;664e32b4-5e4e-4374-bee5-145fc98062aa&quot;,&quot;parentUUID&quot;:&quot;41fd1bd7-c648-44be-a215-f5a7d721b42f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;278b44ad-e91b-414f-b0c3-495e05247f11&quot;,&quot;0f4be18f-c26d-473d-9472-cea490a8ef51&quot;,&quot;664e32b4-5e4e-4374-bee5-145fc98062aa&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;db1af8c7-a908-420b-ae54-38d8c97ed575&quot;,&quot;title&quot;:&quot;parseState()&quot;,&quot;fullFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/test/tools.ts&quot;,&quot;file&quot;:&quot;/test/tools.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should work with empty data&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should work with empty data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input = {};\nconst result = (0, tools_1.parseState)(input, &#x27;&#x27;, {});\nassert_1.default.deepStrictEqual(result, {\n    dateTime: null,\n    hash: null,\n    mediaType: null,\n    deviceState: null,\n    title: null,\n    artist: null,\n    album: null,\n    genre: null,\n    totalTime: null,\n    position: null,\n    shuffle: null,\n    repeat: null,\n    app: null,\n    appId: null,\n    powerState: null\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d91139c9-c7f4-4b49-add2-fe38ab45d034&quot;,&quot;parentUUID&quot;:&quot;db1af8c7-a908-420b-ae54-38d8c97ed575&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work without data&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should work without data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// @ts-ignore\nconst result = (0, tools_1.parseState)(null, &#x27;&#x27;, {});\nassert_1.default.deepStrictEqual(result, {\n    dateTime: null,\n    hash: null,\n    mediaType: null,\n    deviceState: null,\n    title: null,\n    artist: null,\n    album: null,\n    genre: null,\n    totalTime: null,\n    position: null,\n    shuffle: null,\n    repeat: null,\n    app: null,\n    appId: null,\n    powerState: null\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d5e6a469-ebf5-4e27-904c-25637ac102f1&quot;,&quot;parentUUID&quot;:&quot;db1af8c7-a908-420b-ae54-38d8c97ed575&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should work with example data&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should work with example data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input = {\n    result: &#x27;success&#x27;,\n    datetime: &#x27;2020-11-07T22:38:43.608030+01:00&#x27;,\n    hash: &#x27;100e0ab6-6ff5-4199-9c04-a7107ff78712&#x27;,\n    media_type: &#x27;video&#x27;,\n    device_state: &#x27;playing&#x27;,\n    title: &#x27;Solo: A Star Wars Story&#x27;,\n    artist: null,\n    album: null,\n    genre: null,\n    total_time: 8097,\n    position: 27,\n    shuffle: &#x27;off&#x27;,\n    repeat: &#x27;off&#x27;,\n    app: &#x27;Disney+&#x27;,\n    app_id: &#x27;com.disney.disneyplus&#x27;,\n    powerState: null\n};\nconst result = (0, tools_1.parseState)(input, &#x27;&#x27;, {});\nassert_1.default.deepStrictEqual(result, {\n    dateTime: new Date(&#x27;2020-11-07T22:38:43.608030+01:00&#x27;),\n    hash: &#x27;100e0ab6-6ff5-4199-9c04-a7107ff78712&#x27;,\n    mediaType: types_1.NodePyATVMediaType.video,\n    deviceState: types_1.NodePyATVDeviceState.playing,\n    title: &#x27;Solo: A Star Wars Story&#x27;,\n    artist: null,\n    album: null,\n    genre: null,\n    totalTime: 8097,\n    position: 27,\n    shuffle: types_1.NodePyATVShuffleState.off,\n    repeat: types_1.NodePyATVRepeatState.off,\n    app: &#x27;Disney+&#x27;,\n    appId: &#x27;com.disney.disneyplus&#x27;,\n    powerState: null\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;60615eee-74b7-44f8-9c97-77378a33ce9f&quot;,&quot;parentUUID&quot;:&quot;db1af8c7-a908-420b-ae54-38d8c97ed575&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should ignore date if it&#x27;s an invalid date&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should ignore date if it&#x27;s an invalid date&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input = { datetime: &#x27;today&#x27; };\nconst result = (0, tools_1.parseState)(input, &#x27;&#x27;, {});\nassert_1.default.deepStrictEqual(result, {\n    dateTime: null,\n    hash: null,\n    mediaType: null,\n    deviceState: null,\n    title: null,\n    artist: null,\n    album: null,\n    genre: null,\n    totalTime: null,\n    position: null,\n    shuffle: null,\n    repeat: null,\n    app: null,\n    appId: null,\n    powerState: null\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bdbb9789-bfe9-4c65-8c22-2d19af64359d&quot;,&quot;parentUUID&quot;:&quot;db1af8c7-a908-420b-ae54-38d8c97ed575&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should ignore data if unsupported type&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should ignore data if unsupported type&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input = {\n    result: &#x27;success&#x27;,\n    datetime: true,\n    hash: 1337,\n    media_type: false,\n    device_state: 43,\n    title: undefined,\n    artist: 90,\n    album: Infinity,\n    genre: Math.PI,\n    total_time: &#x27;23min&#x27;,\n    position: &#x27;0:30.123&#x27;,\n    shuffle: false,\n    repeat: true,\n    app: 0,\n    app_id: 891645381647289,\n    powerState: null\n};\nconst result = (0, tools_1.parseState)(input, &#x27;&#x27;, {});\nassert_1.default.deepStrictEqual(result, {\n    dateTime: null,\n    hash: null,\n    mediaType: null,\n    deviceState: null,\n    title: null,\n    artist: null,\n    album: null,\n    genre: null,\n    totalTime: null,\n    position: null,\n    shuffle: null,\n    repeat: null,\n    app: null,\n    appId: null,\n    powerState: null\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eb5ab391-e830-4d75-8a29-5aabbf36f752&quot;,&quot;parentUUID&quot;:&quot;db1af8c7-a908-420b-ae54-38d8c97ed575&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should ignore enums with unsupported valid&quot;,&quot;fullTitle&quot;:&quot;Tools parseState() should ignore enums with unsupported valid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const input = {\n    media_type: &#x27;3d-experience&#x27;,\n    device_state: &#x27;initiating&#x27;,\n    shuffle: &#x27;everything&#x27;,\n    repeat: &#x27;nothing&#x27;\n};\nconst result = (0, tools_1.parseState)(input, &#x27;&#x27;, {});\nassert_1.default.deepStrictEqual(result, {\n    dateTime: null,\n    hash: null,\n    mediaType: null,\n    deviceState: null,\n    title: null,\n    artist: null,\n    album: null,\n    genre: null,\n    totalTime: null,\n    position: null,\n    shuffle: null,\n    repeat: null,\n    app: null,\n    appId: null,\n    powerState: null\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3f787787-83dc-4918-967f-39707f8b4a18&quot;,&quot;parentUUID&quot;:&quot;db1af8c7-a908-420b-ae54-38d8c97ed575&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d91139c9-c7f4-4b49-add2-fe38ab45d034&quot;,&quot;d5e6a469-ebf5-4e27-904c-25637ac102f1&quot;,&quot;60615eee-74b7-44f8-9c97-77378a33ce9f&quot;,&quot;bdbb9789-bfe9-4c65-8c22-2d19af64359d&quot;,&quot;eb5ab391-e830-4d75-8a29-5aabbf36f752&quot;,&quot;3f787787-83dc-4918-967f-39707f8b4a18&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;9.1.2&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;6.2.2&quot;},&quot;marge&quot;:{&quot;version&quot;:&quot;5.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;node-pyatv&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report/assets&quot;,&quot;jsonFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/mochawesome-report/mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;/home/runner/work/node-pyatv/node-pyatv/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>